/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ({

/***/ 0:
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(70);


/***/ },

/***/ 70:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	// CSS / LESS
	__webpack_require__(71);
	// Dependencies
	__webpack_require__(78);
	(function ($) {
	    $(document).ready(function () {
	        // Select2FormInput
	        $(".tutomvc-form-element .select2").each(function () {
	            $(this).select2($(this).data());
	        });
	    });
	})(jQuery);


/***/ },

/***/ 71:
/***/ function(module, exports) {

	// removed by extract-text-webpack-plugin

/***/ },

/***/ 78:
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(79)(__webpack_require__(80)+"\n\n// SCRIPT-LOADER FOOTER\n//# sourceURL=script:///Users/johannesbuvnas/Development/PHP/tutomvc/node_modules/source-map-loader/index.js!/Users/johannesbuvnas/Development/PHP/tutomvc/node_modules/select2/dist/js/select2.js")

/***/ },

/***/ 79:
/***/ function(module, exports) {

	/*
		MIT License http://www.opensource.org/licenses/mit-license.php
		Author Tobias Koppers @sokra
	*/
	module.exports = function(src) {
		if (typeof execScript !== "undefined")
			execScript(src);
		else
			eval.call(null, src);
	}


/***/ },

/***/ 80:
/***/ function(module, exports) {

	module.exports = "/*!\r\n * Select2 4.0.3\r\n * https://select2.github.io\r\n *\r\n * Released under the MIT license\r\n * https://github.com/select2/select2/blob/master/LICENSE.md\r\n */\r\n(function (factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define(['jquery'], factory);\r\n  } else if (typeof exports === 'object') {\r\n    // Node/CommonJS\r\n    factory(require('jquery'));\r\n  } else {\r\n    // Browser globals\r\n    factory(jQuery);\r\n  }\r\n}(function (jQuery) {\r\n  // This is needed so we can catch the AMD loader configuration and use it\r\n  // The inner file should be wrapped (by `banner.start.js`) in a function that\r\n  // returns the AMD loader references.\r\n  var S2 =\r\n(function () {\r\n  // Restore the Select2 AMD loader so it can be used\r\n  // Needed mostly in the language files, where the loader is not inserted\r\n  if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd) {\r\n    var S2 = jQuery.fn.select2.amd;\r\n  }\r\nvar S2;(function () { if (!S2 || !S2.requirejs) {\nif (!S2) { S2 = {}; } else { require = S2; }\n/**\n * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // Node .js allowance:\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                //Lop off the last part of baseParts, so that . matches the\n                //\"directory\" and not name of the baseName's module. For instance,\n                //baseName of \"one/two/three\", maps to \"one/two/three.js\", but we\n                //want the directory, \"one/two\" for this normalization.\n                name = baseParts.slice(0, baseParts.length - 1).concat(name);\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\nS2.requirejs = requirejs;S2.require = require;S2.define = define;\n}\n}());\nS2.define(\"almond\", function(){});\n\n/* global jQuery:false, $:false */\r\nS2.define('jquery',[],function () {\r\n  var _$ = jQuery || $;\r\n\r\n  if (_$ == null && console && console.error) {\r\n    console.error(\r\n      'Select2: An instance of jQuery or a jQuery-compatible library was not ' +\r\n      'found. Make sure that you are including jQuery before Select2 on your ' +\r\n      'web page.'\r\n    );\r\n  }\r\n\r\n  return _$;\r\n});\r\n\nS2.define('select2/utils',[\r\n  'jquery'\r\n], function ($) {\r\n  var Utils = {};\r\n\r\n  Utils.Extend = function (ChildClass, SuperClass) {\r\n    var __hasProp = {}.hasOwnProperty;\r\n\r\n    function BaseConstructor () {\r\n      this.constructor = ChildClass;\r\n    }\r\n\r\n    for (var key in SuperClass) {\r\n      if (__hasProp.call(SuperClass, key)) {\r\n        ChildClass[key] = SuperClass[key];\r\n      }\r\n    }\r\n\r\n    BaseConstructor.prototype = SuperClass.prototype;\r\n    ChildClass.prototype = new BaseConstructor();\r\n    ChildClass.__super__ = SuperClass.prototype;\r\n\r\n    return ChildClass;\r\n  };\r\n\r\n  function getMethods (theClass) {\r\n    var proto = theClass.prototype;\r\n\r\n    var methods = [];\r\n\r\n    for (var methodName in proto) {\r\n      var m = proto[methodName];\r\n\r\n      if (typeof m !== 'function') {\r\n        continue;\r\n      }\r\n\r\n      if (methodName === 'constructor') {\r\n        continue;\r\n      }\r\n\r\n      methods.push(methodName);\r\n    }\r\n\r\n    return methods;\r\n  }\r\n\r\n  Utils.Decorate = function (SuperClass, DecoratorClass) {\r\n    var decoratedMethods = getMethods(DecoratorClass);\r\n    var superMethods = getMethods(SuperClass);\r\n\r\n    function DecoratedClass () {\r\n      var unshift = Array.prototype.unshift;\r\n\r\n      var argCount = DecoratorClass.prototype.constructor.length;\r\n\r\n      var calledConstructor = SuperClass.prototype.constructor;\r\n\r\n      if (argCount > 0) {\r\n        unshift.call(arguments, SuperClass.prototype.constructor);\r\n\r\n        calledConstructor = DecoratorClass.prototype.constructor;\r\n      }\r\n\r\n      calledConstructor.apply(this, arguments);\r\n    }\r\n\r\n    DecoratorClass.displayName = SuperClass.displayName;\r\n\r\n    function ctr () {\r\n      this.constructor = DecoratedClass;\r\n    }\r\n\r\n    DecoratedClass.prototype = new ctr();\r\n\r\n    for (var m = 0; m < superMethods.length; m++) {\r\n        var superMethod = superMethods[m];\r\n\r\n        DecoratedClass.prototype[superMethod] =\r\n          SuperClass.prototype[superMethod];\r\n    }\r\n\r\n    var calledMethod = function (methodName) {\r\n      // Stub out the original method if it's not decorating an actual method\r\n      var originalMethod = function () {};\r\n\r\n      if (methodName in DecoratedClass.prototype) {\r\n        originalMethod = DecoratedClass.prototype[methodName];\r\n      }\r\n\r\n      var decoratedMethod = DecoratorClass.prototype[methodName];\r\n\r\n      return function () {\r\n        var unshift = Array.prototype.unshift;\r\n\r\n        unshift.call(arguments, originalMethod);\r\n\r\n        return decoratedMethod.apply(this, arguments);\r\n      };\r\n    };\r\n\r\n    for (var d = 0; d < decoratedMethods.length; d++) {\r\n      var decoratedMethod = decoratedMethods[d];\r\n\r\n      DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod);\r\n    }\r\n\r\n    return DecoratedClass;\r\n  };\r\n\r\n  var Observable = function () {\r\n    this.listeners = {};\r\n  };\r\n\r\n  Observable.prototype.on = function (event, callback) {\r\n    this.listeners = this.listeners || {};\r\n\r\n    if (event in this.listeners) {\r\n      this.listeners[event].push(callback);\r\n    } else {\r\n      this.listeners[event] = [callback];\r\n    }\r\n  };\r\n\r\n  Observable.prototype.trigger = function (event) {\r\n    var slice = Array.prototype.slice;\r\n    var params = slice.call(arguments, 1);\r\n\r\n    this.listeners = this.listeners || {};\r\n\r\n    // Params should always come in as an array\r\n    if (params == null) {\r\n      params = [];\r\n    }\r\n\r\n    // If there are no arguments to the event, use a temporary object\r\n    if (params.length === 0) {\r\n      params.push({});\r\n    }\r\n\r\n    // Set the `_type` of the first object to the event\r\n    params[0]._type = event;\r\n\r\n    if (event in this.listeners) {\r\n      this.invoke(this.listeners[event], slice.call(arguments, 1));\r\n    }\r\n\r\n    if ('*' in this.listeners) {\r\n      this.invoke(this.listeners['*'], arguments);\r\n    }\r\n  };\r\n\r\n  Observable.prototype.invoke = function (listeners, params) {\r\n    for (var i = 0, len = listeners.length; i < len; i++) {\r\n      listeners[i].apply(this, params);\r\n    }\r\n  };\r\n\r\n  Utils.Observable = Observable;\r\n\r\n  Utils.generateChars = function (length) {\r\n    var chars = '';\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      var randomChar = Math.floor(Math.random() * 36);\r\n      chars += randomChar.toString(36);\r\n    }\r\n\r\n    return chars;\r\n  };\r\n\r\n  Utils.bind = function (func, context) {\r\n    return function () {\r\n      func.apply(context, arguments);\r\n    };\r\n  };\r\n\r\n  Utils._convertData = function (data) {\r\n    for (var originalKey in data) {\r\n      var keys = originalKey.split('-');\r\n\r\n      var dataLevel = data;\r\n\r\n      if (keys.length === 1) {\r\n        continue;\r\n      }\r\n\r\n      for (var k = 0; k < keys.length; k++) {\r\n        var key = keys[k];\r\n\r\n        // Lowercase the first letter\r\n        // By default, dash-separated becomes camelCase\r\n        key = key.substring(0, 1).toLowerCase() + key.substring(1);\r\n\r\n        if (!(key in dataLevel)) {\r\n          dataLevel[key] = {};\r\n        }\r\n\r\n        if (k == keys.length - 1) {\r\n          dataLevel[key] = data[originalKey];\r\n        }\r\n\r\n        dataLevel = dataLevel[key];\r\n      }\r\n\r\n      delete data[originalKey];\r\n    }\r\n\r\n    return data;\r\n  };\r\n\r\n  Utils.hasScroll = function (index, el) {\r\n    // Adapted from the function created by @ShadowScripter\r\n    // and adapted by @BillBarry on the Stack Exchange Code Review website.\r\n    // The original code can be found at\r\n    // http://codereview.stackexchange.com/q/13338\r\n    // and was designed to be used with the Sizzle selector engine.\r\n\r\n    var $el = $(el);\r\n    var overflowX = el.style.overflowX;\r\n    var overflowY = el.style.overflowY;\r\n\r\n    //Check both x and y declarations\r\n    if (overflowX === overflowY &&\r\n        (overflowY === 'hidden' || overflowY === 'visible')) {\r\n      return false;\r\n    }\r\n\r\n    if (overflowX === 'scroll' || overflowY === 'scroll') {\r\n      return true;\r\n    }\r\n\r\n    return ($el.innerHeight() < el.scrollHeight ||\r\n      $el.innerWidth() < el.scrollWidth);\r\n  };\r\n\r\n  Utils.escapeMarkup = function (markup) {\r\n    var replaceMap = {\r\n      '\\\\': '&#92;',\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      '\\'': '&#39;',\r\n      '/': '&#47;'\r\n    };\r\n\r\n    // Do not try to escape the markup if it's not a string\r\n    if (typeof markup !== 'string') {\r\n      return markup;\r\n    }\r\n\r\n    return String(markup).replace(/[&<>\"'\\/\\\\]/g, function (match) {\r\n      return replaceMap[match];\r\n    });\r\n  };\r\n\r\n  // Append an array of jQuery nodes to a given element.\r\n  Utils.appendMany = function ($element, $nodes) {\r\n    // jQuery 1.7.x does not support $.fn.append() with an array\r\n    // Fall back to a jQuery object collection using $.fn.add()\r\n    if ($.fn.jquery.substr(0, 3) === '1.7') {\r\n      var $jqNodes = $();\r\n\r\n      $.map($nodes, function (node) {\r\n        $jqNodes = $jqNodes.add(node);\r\n      });\r\n\r\n      $nodes = $jqNodes;\r\n    }\r\n\r\n    $element.append($nodes);\r\n  };\r\n\r\n  return Utils;\r\n});\r\n\nS2.define('select2/results',[\r\n  'jquery',\r\n  './utils'\r\n], function ($, Utils) {\r\n  function Results ($element, options, dataAdapter) {\r\n    this.$element = $element;\r\n    this.data = dataAdapter;\r\n    this.options = options;\r\n\r\n    Results.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(Results, Utils.Observable);\r\n\r\n  Results.prototype.render = function () {\r\n    var $results = $(\r\n      '<ul class=\"select2-results__options\" role=\"tree\"></ul>'\r\n    );\r\n\r\n    if (this.options.get('multiple')) {\r\n      $results.attr('aria-multiselectable', 'true');\r\n    }\r\n\r\n    this.$results = $results;\r\n\r\n    return $results;\r\n  };\r\n\r\n  Results.prototype.clear = function () {\r\n    this.$results.empty();\r\n  };\r\n\r\n  Results.prototype.displayMessage = function (params) {\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    this.clear();\r\n    this.hideLoading();\r\n\r\n    var $message = $(\r\n      '<li role=\"treeitem\" aria-live=\"assertive\"' +\r\n      ' class=\"select2-results__option\"></li>'\r\n    );\r\n\r\n    var message = this.options.get('translations').get(params.message);\r\n\r\n    $message.append(\r\n      escapeMarkup(\r\n        message(params.args)\r\n      )\r\n    );\r\n\r\n    $message[0].className += ' select2-results__message';\r\n\r\n    this.$results.append($message);\r\n  };\r\n\r\n  Results.prototype.hideMessages = function () {\r\n    this.$results.find('.select2-results__message').remove();\r\n  };\r\n\r\n  Results.prototype.append = function (data) {\r\n    this.hideLoading();\r\n\r\n    var $options = [];\r\n\r\n    if (data.results == null || data.results.length === 0) {\r\n      if (this.$results.children().length === 0) {\r\n        this.trigger('results:message', {\r\n          message: 'noResults'\r\n        });\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    data.results = this.sort(data.results);\r\n\r\n    for (var d = 0; d < data.results.length; d++) {\r\n      var item = data.results[d];\r\n\r\n      var $option = this.option(item);\r\n\r\n      $options.push($option);\r\n    }\r\n\r\n    this.$results.append($options);\r\n  };\r\n\r\n  Results.prototype.position = function ($results, $dropdown) {\r\n    var $resultsContainer = $dropdown.find('.select2-results');\r\n    $resultsContainer.append($results);\r\n  };\r\n\r\n  Results.prototype.sort = function (data) {\r\n    var sorter = this.options.get('sorter');\r\n\r\n    return sorter(data);\r\n  };\r\n\r\n  Results.prototype.highlightFirstItem = function () {\r\n    var $options = this.$results\r\n      .find('.select2-results__option[aria-selected]');\r\n\r\n    var $selected = $options.filter('[aria-selected=true]');\r\n\r\n    // Check if there are any selected options\r\n    if ($selected.length > 0) {\r\n      // If there are selected options, highlight the first\r\n      $selected.first().trigger('mouseenter');\r\n    } else {\r\n      // If there are no selected options, highlight the first option\r\n      // in the dropdown\r\n      $options.first().trigger('mouseenter');\r\n    }\r\n\r\n    this.ensureHighlightVisible();\r\n  };\r\n\r\n  Results.prototype.setClasses = function () {\r\n    var self = this;\r\n\r\n    this.data.current(function (selected) {\r\n      var selectedIds = $.map(selected, function (s) {\r\n        return s.id.toString();\r\n      });\r\n\r\n      var $options = self.$results\r\n        .find('.select2-results__option[aria-selected]');\r\n\r\n      $options.each(function () {\r\n        var $option = $(this);\r\n\r\n        var item = $.data(this, 'data');\r\n\r\n        // id needs to be converted to a string when comparing\r\n        var id = '' + item.id;\r\n\r\n        if ((item.element != null && item.element.selected) ||\r\n            (item.element == null && $.inArray(id, selectedIds) > -1)) {\r\n          $option.attr('aria-selected', 'true');\r\n        } else {\r\n          $option.attr('aria-selected', 'false');\r\n        }\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n  Results.prototype.showLoading = function (params) {\r\n    this.hideLoading();\r\n\r\n    var loadingMore = this.options.get('translations').get('searching');\r\n\r\n    var loading = {\r\n      disabled: true,\r\n      loading: true,\r\n      text: loadingMore(params)\r\n    };\r\n    var $loading = this.option(loading);\r\n    $loading.className += ' loading-results';\r\n\r\n    this.$results.prepend($loading);\r\n  };\r\n\r\n  Results.prototype.hideLoading = function () {\r\n    this.$results.find('.loading-results').remove();\r\n  };\r\n\r\n  Results.prototype.option = function (data) {\r\n    var option = document.createElement('li');\r\n    option.className = 'select2-results__option';\r\n\r\n    var attrs = {\r\n      'role': 'treeitem',\r\n      'aria-selected': 'false'\r\n    };\r\n\r\n    if (data.disabled) {\r\n      delete attrs['aria-selected'];\r\n      attrs['aria-disabled'] = 'true';\r\n    }\r\n\r\n    if (data.id == null) {\r\n      delete attrs['aria-selected'];\r\n    }\r\n\r\n    if (data._resultId != null) {\r\n      option.id = data._resultId;\r\n    }\r\n\r\n    if (data.title) {\r\n      option.title = data.title;\r\n    }\r\n\r\n    if (data.children) {\r\n      attrs.role = 'group';\r\n      attrs['aria-label'] = data.text;\r\n      delete attrs['aria-selected'];\r\n    }\r\n\r\n    for (var attr in attrs) {\r\n      var val = attrs[attr];\r\n\r\n      option.setAttribute(attr, val);\r\n    }\r\n\r\n    if (data.children) {\r\n      var $option = $(option);\r\n\r\n      var label = document.createElement('strong');\r\n      label.className = 'select2-results__group';\r\n\r\n      var $label = $(label);\r\n      this.template(data, label);\r\n\r\n      var $children = [];\r\n\r\n      for (var c = 0; c < data.children.length; c++) {\r\n        var child = data.children[c];\r\n\r\n        var $child = this.option(child);\r\n\r\n        $children.push($child);\r\n      }\r\n\r\n      var $childrenContainer = $('<ul></ul>', {\r\n        'class': 'select2-results__options select2-results__options--nested'\r\n      });\r\n\r\n      $childrenContainer.append($children);\r\n\r\n      $option.append(label);\r\n      $option.append($childrenContainer);\r\n    } else {\r\n      this.template(data, option);\r\n    }\r\n\r\n    $.data(option, 'data', data);\r\n\r\n    return option;\r\n  };\r\n\r\n  Results.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    var id = container.id + '-results';\r\n\r\n    this.$results.attr('id', id);\r\n\r\n    container.on('results:all', function (params) {\r\n      self.clear();\r\n      self.append(params.data);\r\n\r\n      if (container.isOpen()) {\r\n        self.setClasses();\r\n        self.highlightFirstItem();\r\n      }\r\n    });\r\n\r\n    container.on('results:append', function (params) {\r\n      self.append(params.data);\r\n\r\n      if (container.isOpen()) {\r\n        self.setClasses();\r\n      }\r\n    });\r\n\r\n    container.on('query', function (params) {\r\n      self.hideMessages();\r\n      self.showLoading(params);\r\n    });\r\n\r\n    container.on('select', function () {\r\n      if (!container.isOpen()) {\r\n        return;\r\n      }\r\n\r\n      self.setClasses();\r\n      self.highlightFirstItem();\r\n    });\r\n\r\n    container.on('unselect', function () {\r\n      if (!container.isOpen()) {\r\n        return;\r\n      }\r\n\r\n      self.setClasses();\r\n      self.highlightFirstItem();\r\n    });\r\n\r\n    container.on('open', function () {\r\n      // When the dropdown is open, aria-expended=\"true\"\r\n      self.$results.attr('aria-expanded', 'true');\r\n      self.$results.attr('aria-hidden', 'false');\r\n\r\n      self.setClasses();\r\n      self.ensureHighlightVisible();\r\n    });\r\n\r\n    container.on('close', function () {\r\n      // When the dropdown is closed, aria-expended=\"false\"\r\n      self.$results.attr('aria-expanded', 'false');\r\n      self.$results.attr('aria-hidden', 'true');\r\n      self.$results.removeAttr('aria-activedescendant');\r\n    });\r\n\r\n    container.on('results:toggle', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      if ($highlighted.length === 0) {\r\n        return;\r\n      }\r\n\r\n      $highlighted.trigger('mouseup');\r\n    });\r\n\r\n    container.on('results:select', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      if ($highlighted.length === 0) {\r\n        return;\r\n      }\r\n\r\n      var data = $highlighted.data('data');\r\n\r\n      if ($highlighted.attr('aria-selected') == 'true') {\r\n        self.trigger('close', {});\r\n      } else {\r\n        self.trigger('select', {\r\n          data: data\r\n        });\r\n      }\r\n    });\r\n\r\n    container.on('results:previous', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      var $options = self.$results.find('[aria-selected]');\r\n\r\n      var currentIndex = $options.index($highlighted);\r\n\r\n      // If we are already at te top, don't move further\r\n      if (currentIndex === 0) {\r\n        return;\r\n      }\r\n\r\n      var nextIndex = currentIndex - 1;\r\n\r\n      // If none are highlighted, highlight the first\r\n      if ($highlighted.length === 0) {\r\n        nextIndex = 0;\r\n      }\r\n\r\n      var $next = $options.eq(nextIndex);\r\n\r\n      $next.trigger('mouseenter');\r\n\r\n      var currentOffset = self.$results.offset().top;\r\n      var nextTop = $next.offset().top;\r\n      var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);\r\n\r\n      if (nextIndex === 0) {\r\n        self.$results.scrollTop(0);\r\n      } else if (nextTop - currentOffset < 0) {\r\n        self.$results.scrollTop(nextOffset);\r\n      }\r\n    });\r\n\r\n    container.on('results:next', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      var $options = self.$results.find('[aria-selected]');\r\n\r\n      var currentIndex = $options.index($highlighted);\r\n\r\n      var nextIndex = currentIndex + 1;\r\n\r\n      // If we are at the last option, stay there\r\n      if (nextIndex >= $options.length) {\r\n        return;\r\n      }\r\n\r\n      var $next = $options.eq(nextIndex);\r\n\r\n      $next.trigger('mouseenter');\r\n\r\n      var currentOffset = self.$results.offset().top +\r\n        self.$results.outerHeight(false);\r\n      var nextBottom = $next.offset().top + $next.outerHeight(false);\r\n      var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;\r\n\r\n      if (nextIndex === 0) {\r\n        self.$results.scrollTop(0);\r\n      } else if (nextBottom > currentOffset) {\r\n        self.$results.scrollTop(nextOffset);\r\n      }\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      params.element.addClass('select2-results__option--highlighted');\r\n    });\r\n\r\n    container.on('results:message', function (params) {\r\n      self.displayMessage(params);\r\n    });\r\n\r\n    if ($.fn.mousewheel) {\r\n      this.$results.on('mousewheel', function (e) {\r\n        var top = self.$results.scrollTop();\r\n\r\n        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;\r\n\r\n        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;\r\n        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();\r\n\r\n        if (isAtTop) {\r\n          self.$results.scrollTop(0);\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        } else if (isAtBottom) {\r\n          self.$results.scrollTop(\r\n            self.$results.get(0).scrollHeight - self.$results.height()\r\n          );\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      });\r\n    }\r\n\r\n    this.$results.on('mouseup', '.select2-results__option[aria-selected]',\r\n      function (evt) {\r\n      var $this = $(this);\r\n\r\n      var data = $this.data('data');\r\n\r\n      if ($this.attr('aria-selected') === 'true') {\r\n        if (self.options.get('multiple')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('close', {});\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      self.trigger('select', {\r\n        originalEvent: evt,\r\n        data: data\r\n      });\r\n    });\r\n\r\n    this.$results.on('mouseenter', '.select2-results__option[aria-selected]',\r\n      function (evt) {\r\n      var data = $(this).data('data');\r\n\r\n      self.getHighlightedResults()\r\n          .removeClass('select2-results__option--highlighted');\r\n\r\n      self.trigger('results:focus', {\r\n        data: data,\r\n        element: $(this)\r\n      });\r\n    });\r\n  };\r\n\r\n  Results.prototype.getHighlightedResults = function () {\r\n    var $highlighted = this.$results\r\n    .find('.select2-results__option--highlighted');\r\n\r\n    return $highlighted;\r\n  };\r\n\r\n  Results.prototype.destroy = function () {\r\n    this.$results.remove();\r\n  };\r\n\r\n  Results.prototype.ensureHighlightVisible = function () {\r\n    var $highlighted = this.getHighlightedResults();\r\n\r\n    if ($highlighted.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $options = this.$results.find('[aria-selected]');\r\n\r\n    var currentIndex = $options.index($highlighted);\r\n\r\n    var currentOffset = this.$results.offset().top;\r\n    var nextTop = $highlighted.offset().top;\r\n    var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);\r\n\r\n    var offsetDelta = nextTop - currentOffset;\r\n    nextOffset -= $highlighted.outerHeight(false) * 2;\r\n\r\n    if (currentIndex <= 2) {\r\n      this.$results.scrollTop(0);\r\n    } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {\r\n      this.$results.scrollTop(nextOffset);\r\n    }\r\n  };\r\n\r\n  Results.prototype.template = function (result, container) {\r\n    var template = this.options.get('templateResult');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    var content = template(result, container);\r\n\r\n    if (content == null) {\r\n      container.style.display = 'none';\r\n    } else if (typeof content === 'string') {\r\n      container.innerHTML = escapeMarkup(content);\r\n    } else {\r\n      $(container).append(content);\r\n    }\r\n  };\r\n\r\n  return Results;\r\n});\r\n\nS2.define('select2/keys',[\r\n\r\n], function () {\r\n  var KEYS = {\r\n    BACKSPACE: 8,\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    SHIFT: 16,\r\n    CTRL: 17,\r\n    ALT: 18,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    PAGE_UP: 33,\r\n    PAGE_DOWN: 34,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n    DELETE: 46\r\n  };\r\n\r\n  return KEYS;\r\n});\r\n\nS2.define('select2/selection/base',[\r\n  'jquery',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, Utils, KEYS) {\r\n  function BaseSelection ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    BaseSelection.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(BaseSelection, Utils.Observable);\r\n\r\n  BaseSelection.prototype.render = function () {\r\n    var $selection = $(\r\n      '<span class=\"select2-selection\" role=\"combobox\" ' +\r\n      ' aria-haspopup=\"true\" aria-expanded=\"false\">' +\r\n      '</span>'\r\n    );\r\n\r\n    this._tabindex = 0;\r\n\r\n    if (this.$element.data('old-tabindex') != null) {\r\n      this._tabindex = this.$element.data('old-tabindex');\r\n    } else if (this.$element.attr('tabindex') != null) {\r\n      this._tabindex = this.$element.attr('tabindex');\r\n    }\r\n\r\n    $selection.attr('title', this.$element.attr('title'));\r\n    $selection.attr('tabindex', this._tabindex);\r\n\r\n    this.$selection = $selection;\r\n\r\n    return $selection;\r\n  };\r\n\r\n  BaseSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    var id = container.id + '-container';\r\n    var resultsId = container.id + '-results';\r\n\r\n    this.container = container;\r\n\r\n    this.$selection.on('focus', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this.$selection.on('blur', function (evt) {\r\n      self._handleBlur(evt);\r\n    });\r\n\r\n    this.$selection.on('keydown', function (evt) {\r\n      self.trigger('keypress', evt);\r\n\r\n      if (evt.which === KEYS.SPACE) {\r\n        evt.preventDefault();\r\n      }\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      self.$selection.attr('aria-activedescendant', params.data._resultId);\r\n    });\r\n\r\n    container.on('selection:update', function (params) {\r\n      self.update(params.data);\r\n    });\r\n\r\n    container.on('open', function () {\r\n      // When the dropdown is open, aria-expanded=\"true\"\r\n      self.$selection.attr('aria-expanded', 'true');\r\n      self.$selection.attr('aria-owns', resultsId);\r\n\r\n      self._attachCloseHandler(container);\r\n    });\r\n\r\n    container.on('close', function () {\r\n      // When the dropdown is closed, aria-expanded=\"false\"\r\n      self.$selection.attr('aria-expanded', 'false');\r\n      self.$selection.removeAttr('aria-activedescendant');\r\n      self.$selection.removeAttr('aria-owns');\r\n\r\n      self.$selection.focus();\r\n\r\n      self._detachCloseHandler(container);\r\n    });\r\n\r\n    container.on('enable', function () {\r\n      self.$selection.attr('tabindex', self._tabindex);\r\n    });\r\n\r\n    container.on('disable', function () {\r\n      self.$selection.attr('tabindex', '-1');\r\n    });\r\n  };\r\n\r\n  BaseSelection.prototype._handleBlur = function (evt) {\r\n    var self = this;\r\n\r\n    // This needs to be delayed as the active element is the body when the tab\r\n    // key is pressed, possibly along with others.\r\n    window.setTimeout(function () {\r\n      // Don't trigger `blur` if the focus is still in the selection\r\n      if (\r\n        (document.activeElement == self.$selection[0]) ||\r\n        ($.contains(self.$selection[0], document.activeElement))\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      self.trigger('blur', evt);\r\n    }, 1);\r\n  };\r\n\r\n  BaseSelection.prototype._attachCloseHandler = function (container) {\r\n    var self = this;\r\n\r\n    $(document.body).on('mousedown.select2.' + container.id, function (e) {\r\n      var $target = $(e.target);\r\n\r\n      var $select = $target.closest('.select2');\r\n\r\n      var $all = $('.select2.select2-container--open');\r\n\r\n      $all.each(function () {\r\n        var $this = $(this);\r\n\r\n        if (this == $select[0]) {\r\n          return;\r\n        }\r\n\r\n        var $element = $this.data('element');\r\n\r\n        $element.select2('close');\r\n      });\r\n    });\r\n  };\r\n\r\n  BaseSelection.prototype._detachCloseHandler = function (container) {\r\n    $(document.body).off('mousedown.select2.' + container.id);\r\n  };\r\n\r\n  BaseSelection.prototype.position = function ($selection, $container) {\r\n    var $selectionContainer = $container.find('.selection');\r\n    $selectionContainer.append($selection);\r\n  };\r\n\r\n  BaseSelection.prototype.destroy = function () {\r\n    this._detachCloseHandler(this.container);\r\n  };\r\n\r\n  BaseSelection.prototype.update = function (data) {\r\n    throw new Error('The `update` method must be defined in child classes.');\r\n  };\r\n\r\n  return BaseSelection;\r\n});\r\n\nS2.define('select2/selection/single',[\r\n  'jquery',\r\n  './base',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, BaseSelection, Utils, KEYS) {\r\n  function SingleSelection () {\r\n    SingleSelection.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Utils.Extend(SingleSelection, BaseSelection);\r\n\r\n  SingleSelection.prototype.render = function () {\r\n    var $selection = SingleSelection.__super__.render.call(this);\r\n\r\n    $selection.addClass('select2-selection--single');\r\n\r\n    $selection.html(\r\n      '<span class=\"select2-selection__rendered\"></span>' +\r\n      '<span class=\"select2-selection__arrow\" role=\"presentation\">' +\r\n        '<b role=\"presentation\"></b>' +\r\n      '</span>'\r\n    );\r\n\r\n    return $selection;\r\n  };\r\n\r\n  SingleSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    SingleSelection.__super__.bind.apply(this, arguments);\r\n\r\n    var id = container.id + '-container';\r\n\r\n    this.$selection.find('.select2-selection__rendered').attr('id', id);\r\n    this.$selection.attr('aria-labelledby', id);\r\n\r\n    this.$selection.on('mousedown', function (evt) {\r\n      // Only respond to left clicks\r\n      if (evt.which !== 1) {\r\n        return;\r\n      }\r\n\r\n      self.trigger('toggle', {\r\n        originalEvent: evt\r\n      });\r\n    });\r\n\r\n    this.$selection.on('focus', function (evt) {\r\n      // User focuses on the container\r\n    });\r\n\r\n    this.$selection.on('blur', function (evt) {\r\n      // User exits the container\r\n    });\r\n\r\n    container.on('focus', function (evt) {\r\n      if (!container.isOpen()) {\r\n        self.$selection.focus();\r\n      }\r\n    });\r\n\r\n    container.on('selection:update', function (params) {\r\n      self.update(params.data);\r\n    });\r\n  };\r\n\r\n  SingleSelection.prototype.clear = function () {\r\n    this.$selection.find('.select2-selection__rendered').empty();\r\n  };\r\n\r\n  SingleSelection.prototype.display = function (data, container) {\r\n    var template = this.options.get('templateSelection');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    return escapeMarkup(template(data, container));\r\n  };\r\n\r\n  SingleSelection.prototype.selectionContainer = function () {\r\n    return $('<span></span>');\r\n  };\r\n\r\n  SingleSelection.prototype.update = function (data) {\r\n    if (data.length === 0) {\r\n      this.clear();\r\n      return;\r\n    }\r\n\r\n    var selection = data[0];\r\n\r\n    var $rendered = this.$selection.find('.select2-selection__rendered');\r\n    var formatted = this.display(selection, $rendered);\r\n\r\n    $rendered.empty().append(formatted);\r\n    $rendered.prop('title', selection.title || selection.text);\r\n  };\r\n\r\n  return SingleSelection;\r\n});\r\n\nS2.define('select2/selection/multiple',[\r\n  'jquery',\r\n  './base',\r\n  '../utils'\r\n], function ($, BaseSelection, Utils) {\r\n  function MultipleSelection ($element, options) {\r\n    MultipleSelection.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Utils.Extend(MultipleSelection, BaseSelection);\r\n\r\n  MultipleSelection.prototype.render = function () {\r\n    var $selection = MultipleSelection.__super__.render.call(this);\r\n\r\n    $selection.addClass('select2-selection--multiple');\r\n\r\n    $selection.html(\r\n      '<ul class=\"select2-selection__rendered\"></ul>'\r\n    );\r\n\r\n    return $selection;\r\n  };\r\n\r\n  MultipleSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    MultipleSelection.__super__.bind.apply(this, arguments);\r\n\r\n    this.$selection.on('click', function (evt) {\r\n      self.trigger('toggle', {\r\n        originalEvent: evt\r\n      });\r\n    });\r\n\r\n    this.$selection.on(\r\n      'click',\r\n      '.select2-selection__choice__remove',\r\n      function (evt) {\r\n        // Ignore the event if it is disabled\r\n        if (self.options.get('disabled')) {\r\n          return;\r\n        }\r\n\r\n        var $remove = $(this);\r\n        var $selection = $remove.parent();\r\n\r\n        var data = $selection.data('data');\r\n\r\n        self.trigger('unselect', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  MultipleSelection.prototype.clear = function () {\r\n    this.$selection.find('.select2-selection__rendered').empty();\r\n  };\r\n\r\n  MultipleSelection.prototype.display = function (data, container) {\r\n    var template = this.options.get('templateSelection');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    return escapeMarkup(template(data, container));\r\n  };\r\n\r\n  MultipleSelection.prototype.selectionContainer = function () {\r\n    var $container = $(\r\n      '<li class=\"select2-selection__choice\">' +\r\n        '<span class=\"select2-selection__choice__remove\" role=\"presentation\">' +\r\n          '&times;' +\r\n        '</span>' +\r\n      '</li>'\r\n    );\r\n\r\n    return $container;\r\n  };\r\n\r\n  MultipleSelection.prototype.update = function (data) {\r\n    this.clear();\r\n\r\n    if (data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $selections = [];\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var selection = data[d];\r\n\r\n      var $selection = this.selectionContainer();\r\n      var formatted = this.display(selection, $selection);\r\n\r\n      $selection.append(formatted);\r\n      $selection.prop('title', selection.title || selection.text);\r\n\r\n      $selection.data('data', selection);\r\n\r\n      $selections.push($selection);\r\n    }\r\n\r\n    var $rendered = this.$selection.find('.select2-selection__rendered');\r\n\r\n    Utils.appendMany($rendered, $selections);\r\n  };\r\n\r\n  return MultipleSelection;\r\n});\r\n\nS2.define('select2/selection/placeholder',[\r\n  '../utils'\r\n], function (Utils) {\r\n  function Placeholder (decorated, $element, options) {\r\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Placeholder.prototype.normalizePlaceholder = function (_, placeholder) {\r\n    if (typeof placeholder === 'string') {\r\n      placeholder = {\r\n        id: '',\r\n        text: placeholder\r\n      };\r\n    }\r\n\r\n    return placeholder;\r\n  };\r\n\r\n  Placeholder.prototype.createPlaceholder = function (decorated, placeholder) {\r\n    var $placeholder = this.selectionContainer();\r\n\r\n    $placeholder.html(this.display(placeholder));\r\n    $placeholder.addClass('select2-selection__placeholder')\r\n                .removeClass('select2-selection__choice');\r\n\r\n    return $placeholder;\r\n  };\r\n\r\n  Placeholder.prototype.update = function (decorated, data) {\r\n    var singlePlaceholder = (\r\n      data.length == 1 && data[0].id != this.placeholder.id\r\n    );\r\n    var multipleSelections = data.length > 1;\r\n\r\n    if (multipleSelections || singlePlaceholder) {\r\n      return decorated.call(this, data);\r\n    }\r\n\r\n    this.clear();\r\n\r\n    var $placeholder = this.createPlaceholder(this.placeholder);\r\n\r\n    this.$selection.find('.select2-selection__rendered').append($placeholder);\r\n  };\r\n\r\n  return Placeholder;\r\n});\r\n\nS2.define('select2/selection/allowClear',[\r\n  'jquery',\r\n  '../keys'\r\n], function ($, KEYS) {\r\n  function AllowClear () { }\r\n\r\n  AllowClear.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    if (this.placeholder == null) {\r\n      if (this.options.get('debug') && window.console && console.error) {\r\n        console.error(\r\n          'Select2: The `allowClear` option should be used in combination ' +\r\n          'with the `placeholder` option.'\r\n        );\r\n      }\r\n    }\r\n\r\n    this.$selection.on('mousedown', '.select2-selection__clear',\r\n      function (evt) {\r\n        self._handleClear(evt);\r\n    });\r\n\r\n    container.on('keypress', function (evt) {\r\n      self._handleKeyboardClear(evt, container);\r\n    });\r\n  };\r\n\r\n  AllowClear.prototype._handleClear = function (_, evt) {\r\n    // Ignore the event if it is disabled\r\n    if (this.options.get('disabled')) {\r\n      return;\r\n    }\r\n\r\n    var $clear = this.$selection.find('.select2-selection__clear');\r\n\r\n    // Ignore the event if nothing has been selected\r\n    if ($clear.length === 0) {\r\n      return;\r\n    }\r\n\r\n    evt.stopPropagation();\r\n\r\n    var data = $clear.data('data');\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var unselectData = {\r\n        data: data[d]\r\n      };\r\n\r\n      // Trigger the `unselect` event, so people can prevent it from being\r\n      // cleared.\r\n      this.trigger('unselect', unselectData);\r\n\r\n      // If the event was prevented, don't clear it out.\r\n      if (unselectData.prevented) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.$element.val(this.placeholder.id).trigger('change');\r\n\r\n    this.trigger('toggle', {});\r\n  };\r\n\r\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\r\n    if (container.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\r\n      this._handleClear(evt);\r\n    }\r\n  };\r\n\r\n  AllowClear.prototype.update = function (decorated, data) {\r\n    decorated.call(this, data);\r\n\r\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\r\n        data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $remove = $(\r\n      '<span class=\"select2-selection__clear\">' +\r\n        '&times;' +\r\n      '</span>'\r\n    );\r\n    $remove.data('data', data);\r\n\r\n    this.$selection.find('.select2-selection__rendered').prepend($remove);\r\n  };\r\n\r\n  return AllowClear;\r\n});\r\n\nS2.define('select2/selection/search',[\r\n  'jquery',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, Utils, KEYS) {\r\n  function Search (decorated, $element, options) {\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Search.prototype.render = function (decorated) {\r\n    var $search = $(\r\n      '<li class=\"select2-search select2-search--inline\">' +\r\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\r\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\r\n        ' spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" />' +\r\n      '</li>'\r\n    );\r\n\r\n    this.$searchContainer = $search;\r\n    this.$search = $search.find('input');\r\n\r\n    var $rendered = decorated.call(this);\r\n\r\n    this._transferTabIndex();\r\n\r\n    return $rendered;\r\n  };\r\n\r\n  Search.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('open', function () {\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self.$search.val('');\r\n      self.$search.removeAttr('aria-activedescendant');\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('enable', function () {\r\n      self.$search.prop('disabled', false);\r\n\r\n      self._transferTabIndex();\r\n    });\r\n\r\n    container.on('disable', function () {\r\n      self.$search.prop('disabled', true);\r\n    });\r\n\r\n    container.on('focus', function (evt) {\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      self.$search.attr('aria-activedescendant', params.id);\r\n    });\r\n\r\n    this.$selection.on('focusin', '.select2-search--inline', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this.$selection.on('focusout', '.select2-search--inline', function (evt) {\r\n      self._handleBlur(evt);\r\n    });\r\n\r\n    this.$selection.on('keydown', '.select2-search--inline', function (evt) {\r\n      evt.stopPropagation();\r\n\r\n      self.trigger('keypress', evt);\r\n\r\n      self._keyUpPrevented = evt.isDefaultPrevented();\r\n\r\n      var key = evt.which;\r\n\r\n      if (key === KEYS.BACKSPACE && self.$search.val() === '') {\r\n        var $previousChoice = self.$searchContainer\r\n          .prev('.select2-selection__choice');\r\n\r\n        if ($previousChoice.length > 0) {\r\n          var item = $previousChoice.data('data');\r\n\r\n          self.searchRemoveChoice(item);\r\n\r\n          evt.preventDefault();\r\n        }\r\n      }\r\n    });\r\n\r\n    // Try to detect the IE version should the `documentMode` property that\r\n    // is stored on the document. This is only implemented in IE and is\r\n    // slightly cleaner than doing a user agent check.\r\n    // This property is not available in Edge, but Edge also doesn't have\r\n    // this bug.\r\n    var msie = document.documentMode;\r\n    var disableInputEvents = msie && msie <= 11;\r\n\r\n    // Workaround for browsers which do not support the `input` event\r\n    // This will prevent double-triggering of events for browsers which support\r\n    // both the `keyup` and `input` events.\r\n    this.$selection.on(\r\n      'input.searchcheck',\r\n      '.select2-search--inline',\r\n      function (evt) {\r\n        // IE will trigger the `input` event when a placeholder is used on a\r\n        // search box. To get around this issue, we are forced to ignore all\r\n        // `input` events in IE and keep using `keyup`.\r\n        if (disableInputEvents) {\r\n          self.$selection.off('input.search input.searchcheck');\r\n          return;\r\n        }\r\n\r\n        // Unbind the duplicated `keyup` event\r\n        self.$selection.off('keyup.search');\r\n      }\r\n    );\r\n\r\n    this.$selection.on(\r\n      'keyup.search input.search',\r\n      '.select2-search--inline',\r\n      function (evt) {\r\n        // IE will trigger the `input` event when a placeholder is used on a\r\n        // search box. To get around this issue, we are forced to ignore all\r\n        // `input` events in IE and keep using `keyup`.\r\n        if (disableInputEvents && evt.type === 'input') {\r\n          self.$selection.off('input.search input.searchcheck');\r\n          return;\r\n        }\r\n\r\n        var key = evt.which;\r\n\r\n        // We can freely ignore events from modifier keys\r\n        if (key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {\r\n          return;\r\n        }\r\n\r\n        // Tabbing will be handled during the `keydown` phase\r\n        if (key == KEYS.TAB) {\r\n          return;\r\n        }\r\n\r\n        self.handleSearch(evt);\r\n      }\r\n    );\r\n  };\r\n\r\n  /**\r\n   * This method will transfer the tabindex attribute from the rendered\r\n   * selection to the search box. This allows for the search box to be used as\r\n   * the primary focus instead of the selection container.\r\n   *\r\n   * @private\r\n   */\r\n  Search.prototype._transferTabIndex = function (decorated) {\r\n    this.$search.attr('tabindex', this.$selection.attr('tabindex'));\r\n    this.$selection.attr('tabindex', '-1');\r\n  };\r\n\r\n  Search.prototype.createPlaceholder = function (decorated, placeholder) {\r\n    this.$search.attr('placeholder', placeholder.text);\r\n  };\r\n\r\n  Search.prototype.update = function (decorated, data) {\r\n    var searchHadFocus = this.$search[0] == document.activeElement;\r\n\r\n    this.$search.attr('placeholder', '');\r\n\r\n    decorated.call(this, data);\r\n\r\n    this.$selection.find('.select2-selection__rendered')\r\n                   .append(this.$searchContainer);\r\n\r\n    this.resizeSearch();\r\n    if (searchHadFocus) {\r\n      this.$search.focus();\r\n    }\r\n  };\r\n\r\n  Search.prototype.handleSearch = function () {\r\n    this.resizeSearch();\r\n\r\n    if (!this._keyUpPrevented) {\r\n      var input = this.$search.val();\r\n\r\n      this.trigger('query', {\r\n        term: input\r\n      });\r\n    }\r\n\r\n    this._keyUpPrevented = false;\r\n  };\r\n\r\n  Search.prototype.searchRemoveChoice = function (decorated, item) {\r\n    this.trigger('unselect', {\r\n      data: item\r\n    });\r\n\r\n    this.$search.val(item.text);\r\n    this.handleSearch();\r\n  };\r\n\r\n  Search.prototype.resizeSearch = function () {\r\n    this.$search.css('width', '25px');\r\n\r\n    var width = '';\r\n\r\n    if (this.$search.attr('placeholder') !== '') {\r\n      width = this.$selection.find('.select2-selection__rendered').innerWidth();\r\n    } else {\r\n      var minimumWidth = this.$search.val().length + 1;\r\n\r\n      width = (minimumWidth * 0.75) + 'em';\r\n    }\r\n\r\n    this.$search.css('width', width);\r\n  };\r\n\r\n  return Search;\r\n});\r\n\nS2.define('select2/selection/eventRelay',[\r\n  'jquery'\r\n], function ($) {\r\n  function EventRelay () { }\r\n\r\n  EventRelay.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n    var relayEvents = [\r\n      'open', 'opening',\r\n      'close', 'closing',\r\n      'select', 'selecting',\r\n      'unselect', 'unselecting'\r\n    ];\r\n\r\n    var preventableEvents = ['opening', 'closing', 'selecting', 'unselecting'];\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('*', function (name, params) {\r\n      // Ignore events that should not be relayed\r\n      if ($.inArray(name, relayEvents) === -1) {\r\n        return;\r\n      }\r\n\r\n      // The parameters should always be an object\r\n      params = params || {};\r\n\r\n      // Generate the jQuery event for the Select2 event\r\n      var evt = $.Event('select2:' + name, {\r\n        params: params\r\n      });\r\n\r\n      self.$element.trigger(evt);\r\n\r\n      // Only handle preventable events if it was one\r\n      if ($.inArray(name, preventableEvents) === -1) {\r\n        return;\r\n      }\r\n\r\n      params.prevented = evt.isDefaultPrevented();\r\n    });\r\n  };\r\n\r\n  return EventRelay;\r\n});\r\n\nS2.define('select2/translation',[\r\n  'jquery',\r\n  'require'\r\n], function ($, require) {\r\n  function Translation (dict) {\r\n    this.dict = dict || {};\r\n  }\r\n\r\n  Translation.prototype.all = function () {\r\n    return this.dict;\r\n  };\r\n\r\n  Translation.prototype.get = function (key) {\r\n    return this.dict[key];\r\n  };\r\n\r\n  Translation.prototype.extend = function (translation) {\r\n    this.dict = $.extend({}, translation.all(), this.dict);\r\n  };\r\n\r\n  // Static functions\r\n\r\n  Translation._cache = {};\r\n\r\n  Translation.loadPath = function (path) {\r\n    if (!(path in Translation._cache)) {\r\n      var translations = require(path);\r\n\r\n      Translation._cache[path] = translations;\r\n    }\r\n\r\n    return new Translation(Translation._cache[path]);\r\n  };\r\n\r\n  return Translation;\r\n});\r\n\nS2.define('select2/diacritics',[\r\n\r\n], function () {\r\n  var diacritics = {\r\n    '\\u24B6': 'A',\r\n    '\\uFF21': 'A',\r\n    '\\u00C0': 'A',\r\n    '\\u00C1': 'A',\r\n    '\\u00C2': 'A',\r\n    '\\u1EA6': 'A',\r\n    '\\u1EA4': 'A',\r\n    '\\u1EAA': 'A',\r\n    '\\u1EA8': 'A',\r\n    '\\u00C3': 'A',\r\n    '\\u0100': 'A',\r\n    '\\u0102': 'A',\r\n    '\\u1EB0': 'A',\r\n    '\\u1EAE': 'A',\r\n    '\\u1EB4': 'A',\r\n    '\\u1EB2': 'A',\r\n    '\\u0226': 'A',\r\n    '\\u01E0': 'A',\r\n    '\\u00C4': 'A',\r\n    '\\u01DE': 'A',\r\n    '\\u1EA2': 'A',\r\n    '\\u00C5': 'A',\r\n    '\\u01FA': 'A',\r\n    '\\u01CD': 'A',\r\n    '\\u0200': 'A',\r\n    '\\u0202': 'A',\r\n    '\\u1EA0': 'A',\r\n    '\\u1EAC': 'A',\r\n    '\\u1EB6': 'A',\r\n    '\\u1E00': 'A',\r\n    '\\u0104': 'A',\r\n    '\\u023A': 'A',\r\n    '\\u2C6F': 'A',\r\n    '\\uA732': 'AA',\r\n    '\\u00C6': 'AE',\r\n    '\\u01FC': 'AE',\r\n    '\\u01E2': 'AE',\r\n    '\\uA734': 'AO',\r\n    '\\uA736': 'AU',\r\n    '\\uA738': 'AV',\r\n    '\\uA73A': 'AV',\r\n    '\\uA73C': 'AY',\r\n    '\\u24B7': 'B',\r\n    '\\uFF22': 'B',\r\n    '\\u1E02': 'B',\r\n    '\\u1E04': 'B',\r\n    '\\u1E06': 'B',\r\n    '\\u0243': 'B',\r\n    '\\u0182': 'B',\r\n    '\\u0181': 'B',\r\n    '\\u24B8': 'C',\r\n    '\\uFF23': 'C',\r\n    '\\u0106': 'C',\r\n    '\\u0108': 'C',\r\n    '\\u010A': 'C',\r\n    '\\u010C': 'C',\r\n    '\\u00C7': 'C',\r\n    '\\u1E08': 'C',\r\n    '\\u0187': 'C',\r\n    '\\u023B': 'C',\r\n    '\\uA73E': 'C',\r\n    '\\u24B9': 'D',\r\n    '\\uFF24': 'D',\r\n    '\\u1E0A': 'D',\r\n    '\\u010E': 'D',\r\n    '\\u1E0C': 'D',\r\n    '\\u1E10': 'D',\r\n    '\\u1E12': 'D',\r\n    '\\u1E0E': 'D',\r\n    '\\u0110': 'D',\r\n    '\\u018B': 'D',\r\n    '\\u018A': 'D',\r\n    '\\u0189': 'D',\r\n    '\\uA779': 'D',\r\n    '\\u01F1': 'DZ',\r\n    '\\u01C4': 'DZ',\r\n    '\\u01F2': 'Dz',\r\n    '\\u01C5': 'Dz',\r\n    '\\u24BA': 'E',\r\n    '\\uFF25': 'E',\r\n    '\\u00C8': 'E',\r\n    '\\u00C9': 'E',\r\n    '\\u00CA': 'E',\r\n    '\\u1EC0': 'E',\r\n    '\\u1EBE': 'E',\r\n    '\\u1EC4': 'E',\r\n    '\\u1EC2': 'E',\r\n    '\\u1EBC': 'E',\r\n    '\\u0112': 'E',\r\n    '\\u1E14': 'E',\r\n    '\\u1E16': 'E',\r\n    '\\u0114': 'E',\r\n    '\\u0116': 'E',\r\n    '\\u00CB': 'E',\r\n    '\\u1EBA': 'E',\r\n    '\\u011A': 'E',\r\n    '\\u0204': 'E',\r\n    '\\u0206': 'E',\r\n    '\\u1EB8': 'E',\r\n    '\\u1EC6': 'E',\r\n    '\\u0228': 'E',\r\n    '\\u1E1C': 'E',\r\n    '\\u0118': 'E',\r\n    '\\u1E18': 'E',\r\n    '\\u1E1A': 'E',\r\n    '\\u0190': 'E',\r\n    '\\u018E': 'E',\r\n    '\\u24BB': 'F',\r\n    '\\uFF26': 'F',\r\n    '\\u1E1E': 'F',\r\n    '\\u0191': 'F',\r\n    '\\uA77B': 'F',\r\n    '\\u24BC': 'G',\r\n    '\\uFF27': 'G',\r\n    '\\u01F4': 'G',\r\n    '\\u011C': 'G',\r\n    '\\u1E20': 'G',\r\n    '\\u011E': 'G',\r\n    '\\u0120': 'G',\r\n    '\\u01E6': 'G',\r\n    '\\u0122': 'G',\r\n    '\\u01E4': 'G',\r\n    '\\u0193': 'G',\r\n    '\\uA7A0': 'G',\r\n    '\\uA77D': 'G',\r\n    '\\uA77E': 'G',\r\n    '\\u24BD': 'H',\r\n    '\\uFF28': 'H',\r\n    '\\u0124': 'H',\r\n    '\\u1E22': 'H',\r\n    '\\u1E26': 'H',\r\n    '\\u021E': 'H',\r\n    '\\u1E24': 'H',\r\n    '\\u1E28': 'H',\r\n    '\\u1E2A': 'H',\r\n    '\\u0126': 'H',\r\n    '\\u2C67': 'H',\r\n    '\\u2C75': 'H',\r\n    '\\uA78D': 'H',\r\n    '\\u24BE': 'I',\r\n    '\\uFF29': 'I',\r\n    '\\u00CC': 'I',\r\n    '\\u00CD': 'I',\r\n    '\\u00CE': 'I',\r\n    '\\u0128': 'I',\r\n    '\\u012A': 'I',\r\n    '\\u012C': 'I',\r\n    '\\u0130': 'I',\r\n    '\\u00CF': 'I',\r\n    '\\u1E2E': 'I',\r\n    '\\u1EC8': 'I',\r\n    '\\u01CF': 'I',\r\n    '\\u0208': 'I',\r\n    '\\u020A': 'I',\r\n    '\\u1ECA': 'I',\r\n    '\\u012E': 'I',\r\n    '\\u1E2C': 'I',\r\n    '\\u0197': 'I',\r\n    '\\u24BF': 'J',\r\n    '\\uFF2A': 'J',\r\n    '\\u0134': 'J',\r\n    '\\u0248': 'J',\r\n    '\\u24C0': 'K',\r\n    '\\uFF2B': 'K',\r\n    '\\u1E30': 'K',\r\n    '\\u01E8': 'K',\r\n    '\\u1E32': 'K',\r\n    '\\u0136': 'K',\r\n    '\\u1E34': 'K',\r\n    '\\u0198': 'K',\r\n    '\\u2C69': 'K',\r\n    '\\uA740': 'K',\r\n    '\\uA742': 'K',\r\n    '\\uA744': 'K',\r\n    '\\uA7A2': 'K',\r\n    '\\u24C1': 'L',\r\n    '\\uFF2C': 'L',\r\n    '\\u013F': 'L',\r\n    '\\u0139': 'L',\r\n    '\\u013D': 'L',\r\n    '\\u1E36': 'L',\r\n    '\\u1E38': 'L',\r\n    '\\u013B': 'L',\r\n    '\\u1E3C': 'L',\r\n    '\\u1E3A': 'L',\r\n    '\\u0141': 'L',\r\n    '\\u023D': 'L',\r\n    '\\u2C62': 'L',\r\n    '\\u2C60': 'L',\r\n    '\\uA748': 'L',\r\n    '\\uA746': 'L',\r\n    '\\uA780': 'L',\r\n    '\\u01C7': 'LJ',\r\n    '\\u01C8': 'Lj',\r\n    '\\u24C2': 'M',\r\n    '\\uFF2D': 'M',\r\n    '\\u1E3E': 'M',\r\n    '\\u1E40': 'M',\r\n    '\\u1E42': 'M',\r\n    '\\u2C6E': 'M',\r\n    '\\u019C': 'M',\r\n    '\\u24C3': 'N',\r\n    '\\uFF2E': 'N',\r\n    '\\u01F8': 'N',\r\n    '\\u0143': 'N',\r\n    '\\u00D1': 'N',\r\n    '\\u1E44': 'N',\r\n    '\\u0147': 'N',\r\n    '\\u1E46': 'N',\r\n    '\\u0145': 'N',\r\n    '\\u1E4A': 'N',\r\n    '\\u1E48': 'N',\r\n    '\\u0220': 'N',\r\n    '\\u019D': 'N',\r\n    '\\uA790': 'N',\r\n    '\\uA7A4': 'N',\r\n    '\\u01CA': 'NJ',\r\n    '\\u01CB': 'Nj',\r\n    '\\u24C4': 'O',\r\n    '\\uFF2F': 'O',\r\n    '\\u00D2': 'O',\r\n    '\\u00D3': 'O',\r\n    '\\u00D4': 'O',\r\n    '\\u1ED2': 'O',\r\n    '\\u1ED0': 'O',\r\n    '\\u1ED6': 'O',\r\n    '\\u1ED4': 'O',\r\n    '\\u00D5': 'O',\r\n    '\\u1E4C': 'O',\r\n    '\\u022C': 'O',\r\n    '\\u1E4E': 'O',\r\n    '\\u014C': 'O',\r\n    '\\u1E50': 'O',\r\n    '\\u1E52': 'O',\r\n    '\\u014E': 'O',\r\n    '\\u022E': 'O',\r\n    '\\u0230': 'O',\r\n    '\\u00D6': 'O',\r\n    '\\u022A': 'O',\r\n    '\\u1ECE': 'O',\r\n    '\\u0150': 'O',\r\n    '\\u01D1': 'O',\r\n    '\\u020C': 'O',\r\n    '\\u020E': 'O',\r\n    '\\u01A0': 'O',\r\n    '\\u1EDC': 'O',\r\n    '\\u1EDA': 'O',\r\n    '\\u1EE0': 'O',\r\n    '\\u1EDE': 'O',\r\n    '\\u1EE2': 'O',\r\n    '\\u1ECC': 'O',\r\n    '\\u1ED8': 'O',\r\n    '\\u01EA': 'O',\r\n    '\\u01EC': 'O',\r\n    '\\u00D8': 'O',\r\n    '\\u01FE': 'O',\r\n    '\\u0186': 'O',\r\n    '\\u019F': 'O',\r\n    '\\uA74A': 'O',\r\n    '\\uA74C': 'O',\r\n    '\\u01A2': 'OI',\r\n    '\\uA74E': 'OO',\r\n    '\\u0222': 'OU',\r\n    '\\u24C5': 'P',\r\n    '\\uFF30': 'P',\r\n    '\\u1E54': 'P',\r\n    '\\u1E56': 'P',\r\n    '\\u01A4': 'P',\r\n    '\\u2C63': 'P',\r\n    '\\uA750': 'P',\r\n    '\\uA752': 'P',\r\n    '\\uA754': 'P',\r\n    '\\u24C6': 'Q',\r\n    '\\uFF31': 'Q',\r\n    '\\uA756': 'Q',\r\n    '\\uA758': 'Q',\r\n    '\\u024A': 'Q',\r\n    '\\u24C7': 'R',\r\n    '\\uFF32': 'R',\r\n    '\\u0154': 'R',\r\n    '\\u1E58': 'R',\r\n    '\\u0158': 'R',\r\n    '\\u0210': 'R',\r\n    '\\u0212': 'R',\r\n    '\\u1E5A': 'R',\r\n    '\\u1E5C': 'R',\r\n    '\\u0156': 'R',\r\n    '\\u1E5E': 'R',\r\n    '\\u024C': 'R',\r\n    '\\u2C64': 'R',\r\n    '\\uA75A': 'R',\r\n    '\\uA7A6': 'R',\r\n    '\\uA782': 'R',\r\n    '\\u24C8': 'S',\r\n    '\\uFF33': 'S',\r\n    '\\u1E9E': 'S',\r\n    '\\u015A': 'S',\r\n    '\\u1E64': 'S',\r\n    '\\u015C': 'S',\r\n    '\\u1E60': 'S',\r\n    '\\u0160': 'S',\r\n    '\\u1E66': 'S',\r\n    '\\u1E62': 'S',\r\n    '\\u1E68': 'S',\r\n    '\\u0218': 'S',\r\n    '\\u015E': 'S',\r\n    '\\u2C7E': 'S',\r\n    '\\uA7A8': 'S',\r\n    '\\uA784': 'S',\r\n    '\\u24C9': 'T',\r\n    '\\uFF34': 'T',\r\n    '\\u1E6A': 'T',\r\n    '\\u0164': 'T',\r\n    '\\u1E6C': 'T',\r\n    '\\u021A': 'T',\r\n    '\\u0162': 'T',\r\n    '\\u1E70': 'T',\r\n    '\\u1E6E': 'T',\r\n    '\\u0166': 'T',\r\n    '\\u01AC': 'T',\r\n    '\\u01AE': 'T',\r\n    '\\u023E': 'T',\r\n    '\\uA786': 'T',\r\n    '\\uA728': 'TZ',\r\n    '\\u24CA': 'U',\r\n    '\\uFF35': 'U',\r\n    '\\u00D9': 'U',\r\n    '\\u00DA': 'U',\r\n    '\\u00DB': 'U',\r\n    '\\u0168': 'U',\r\n    '\\u1E78': 'U',\r\n    '\\u016A': 'U',\r\n    '\\u1E7A': 'U',\r\n    '\\u016C': 'U',\r\n    '\\u00DC': 'U',\r\n    '\\u01DB': 'U',\r\n    '\\u01D7': 'U',\r\n    '\\u01D5': 'U',\r\n    '\\u01D9': 'U',\r\n    '\\u1EE6': 'U',\r\n    '\\u016E': 'U',\r\n    '\\u0170': 'U',\r\n    '\\u01D3': 'U',\r\n    '\\u0214': 'U',\r\n    '\\u0216': 'U',\r\n    '\\u01AF': 'U',\r\n    '\\u1EEA': 'U',\r\n    '\\u1EE8': 'U',\r\n    '\\u1EEE': 'U',\r\n    '\\u1EEC': 'U',\r\n    '\\u1EF0': 'U',\r\n    '\\u1EE4': 'U',\r\n    '\\u1E72': 'U',\r\n    '\\u0172': 'U',\r\n    '\\u1E76': 'U',\r\n    '\\u1E74': 'U',\r\n    '\\u0244': 'U',\r\n    '\\u24CB': 'V',\r\n    '\\uFF36': 'V',\r\n    '\\u1E7C': 'V',\r\n    '\\u1E7E': 'V',\r\n    '\\u01B2': 'V',\r\n    '\\uA75E': 'V',\r\n    '\\u0245': 'V',\r\n    '\\uA760': 'VY',\r\n    '\\u24CC': 'W',\r\n    '\\uFF37': 'W',\r\n    '\\u1E80': 'W',\r\n    '\\u1E82': 'W',\r\n    '\\u0174': 'W',\r\n    '\\u1E86': 'W',\r\n    '\\u1E84': 'W',\r\n    '\\u1E88': 'W',\r\n    '\\u2C72': 'W',\r\n    '\\u24CD': 'X',\r\n    '\\uFF38': 'X',\r\n    '\\u1E8A': 'X',\r\n    '\\u1E8C': 'X',\r\n    '\\u24CE': 'Y',\r\n    '\\uFF39': 'Y',\r\n    '\\u1EF2': 'Y',\r\n    '\\u00DD': 'Y',\r\n    '\\u0176': 'Y',\r\n    '\\u1EF8': 'Y',\r\n    '\\u0232': 'Y',\r\n    '\\u1E8E': 'Y',\r\n    '\\u0178': 'Y',\r\n    '\\u1EF6': 'Y',\r\n    '\\u1EF4': 'Y',\r\n    '\\u01B3': 'Y',\r\n    '\\u024E': 'Y',\r\n    '\\u1EFE': 'Y',\r\n    '\\u24CF': 'Z',\r\n    '\\uFF3A': 'Z',\r\n    '\\u0179': 'Z',\r\n    '\\u1E90': 'Z',\r\n    '\\u017B': 'Z',\r\n    '\\u017D': 'Z',\r\n    '\\u1E92': 'Z',\r\n    '\\u1E94': 'Z',\r\n    '\\u01B5': 'Z',\r\n    '\\u0224': 'Z',\r\n    '\\u2C7F': 'Z',\r\n    '\\u2C6B': 'Z',\r\n    '\\uA762': 'Z',\r\n    '\\u24D0': 'a',\r\n    '\\uFF41': 'a',\r\n    '\\u1E9A': 'a',\r\n    '\\u00E0': 'a',\r\n    '\\u00E1': 'a',\r\n    '\\u00E2': 'a',\r\n    '\\u1EA7': 'a',\r\n    '\\u1EA5': 'a',\r\n    '\\u1EAB': 'a',\r\n    '\\u1EA9': 'a',\r\n    '\\u00E3': 'a',\r\n    '\\u0101': 'a',\r\n    '\\u0103': 'a',\r\n    '\\u1EB1': 'a',\r\n    '\\u1EAF': 'a',\r\n    '\\u1EB5': 'a',\r\n    '\\u1EB3': 'a',\r\n    '\\u0227': 'a',\r\n    '\\u01E1': 'a',\r\n    '\\u00E4': 'a',\r\n    '\\u01DF': 'a',\r\n    '\\u1EA3': 'a',\r\n    '\\u00E5': 'a',\r\n    '\\u01FB': 'a',\r\n    '\\u01CE': 'a',\r\n    '\\u0201': 'a',\r\n    '\\u0203': 'a',\r\n    '\\u1EA1': 'a',\r\n    '\\u1EAD': 'a',\r\n    '\\u1EB7': 'a',\r\n    '\\u1E01': 'a',\r\n    '\\u0105': 'a',\r\n    '\\u2C65': 'a',\r\n    '\\u0250': 'a',\r\n    '\\uA733': 'aa',\r\n    '\\u00E6': 'ae',\r\n    '\\u01FD': 'ae',\r\n    '\\u01E3': 'ae',\r\n    '\\uA735': 'ao',\r\n    '\\uA737': 'au',\r\n    '\\uA739': 'av',\r\n    '\\uA73B': 'av',\r\n    '\\uA73D': 'ay',\r\n    '\\u24D1': 'b',\r\n    '\\uFF42': 'b',\r\n    '\\u1E03': 'b',\r\n    '\\u1E05': 'b',\r\n    '\\u1E07': 'b',\r\n    '\\u0180': 'b',\r\n    '\\u0183': 'b',\r\n    '\\u0253': 'b',\r\n    '\\u24D2': 'c',\r\n    '\\uFF43': 'c',\r\n    '\\u0107': 'c',\r\n    '\\u0109': 'c',\r\n    '\\u010B': 'c',\r\n    '\\u010D': 'c',\r\n    '\\u00E7': 'c',\r\n    '\\u1E09': 'c',\r\n    '\\u0188': 'c',\r\n    '\\u023C': 'c',\r\n    '\\uA73F': 'c',\r\n    '\\u2184': 'c',\r\n    '\\u24D3': 'd',\r\n    '\\uFF44': 'd',\r\n    '\\u1E0B': 'd',\r\n    '\\u010F': 'd',\r\n    '\\u1E0D': 'd',\r\n    '\\u1E11': 'd',\r\n    '\\u1E13': 'd',\r\n    '\\u1E0F': 'd',\r\n    '\\u0111': 'd',\r\n    '\\u018C': 'd',\r\n    '\\u0256': 'd',\r\n    '\\u0257': 'd',\r\n    '\\uA77A': 'd',\r\n    '\\u01F3': 'dz',\r\n    '\\u01C6': 'dz',\r\n    '\\u24D4': 'e',\r\n    '\\uFF45': 'e',\r\n    '\\u00E8': 'e',\r\n    '\\u00E9': 'e',\r\n    '\\u00EA': 'e',\r\n    '\\u1EC1': 'e',\r\n    '\\u1EBF': 'e',\r\n    '\\u1EC5': 'e',\r\n    '\\u1EC3': 'e',\r\n    '\\u1EBD': 'e',\r\n    '\\u0113': 'e',\r\n    '\\u1E15': 'e',\r\n    '\\u1E17': 'e',\r\n    '\\u0115': 'e',\r\n    '\\u0117': 'e',\r\n    '\\u00EB': 'e',\r\n    '\\u1EBB': 'e',\r\n    '\\u011B': 'e',\r\n    '\\u0205': 'e',\r\n    '\\u0207': 'e',\r\n    '\\u1EB9': 'e',\r\n    '\\u1EC7': 'e',\r\n    '\\u0229': 'e',\r\n    '\\u1E1D': 'e',\r\n    '\\u0119': 'e',\r\n    '\\u1E19': 'e',\r\n    '\\u1E1B': 'e',\r\n    '\\u0247': 'e',\r\n    '\\u025B': 'e',\r\n    '\\u01DD': 'e',\r\n    '\\u24D5': 'f',\r\n    '\\uFF46': 'f',\r\n    '\\u1E1F': 'f',\r\n    '\\u0192': 'f',\r\n    '\\uA77C': 'f',\r\n    '\\u24D6': 'g',\r\n    '\\uFF47': 'g',\r\n    '\\u01F5': 'g',\r\n    '\\u011D': 'g',\r\n    '\\u1E21': 'g',\r\n    '\\u011F': 'g',\r\n    '\\u0121': 'g',\r\n    '\\u01E7': 'g',\r\n    '\\u0123': 'g',\r\n    '\\u01E5': 'g',\r\n    '\\u0260': 'g',\r\n    '\\uA7A1': 'g',\r\n    '\\u1D79': 'g',\r\n    '\\uA77F': 'g',\r\n    '\\u24D7': 'h',\r\n    '\\uFF48': 'h',\r\n    '\\u0125': 'h',\r\n    '\\u1E23': 'h',\r\n    '\\u1E27': 'h',\r\n    '\\u021F': 'h',\r\n    '\\u1E25': 'h',\r\n    '\\u1E29': 'h',\r\n    '\\u1E2B': 'h',\r\n    '\\u1E96': 'h',\r\n    '\\u0127': 'h',\r\n    '\\u2C68': 'h',\r\n    '\\u2C76': 'h',\r\n    '\\u0265': 'h',\r\n    '\\u0195': 'hv',\r\n    '\\u24D8': 'i',\r\n    '\\uFF49': 'i',\r\n    '\\u00EC': 'i',\r\n    '\\u00ED': 'i',\r\n    '\\u00EE': 'i',\r\n    '\\u0129': 'i',\r\n    '\\u012B': 'i',\r\n    '\\u012D': 'i',\r\n    '\\u00EF': 'i',\r\n    '\\u1E2F': 'i',\r\n    '\\u1EC9': 'i',\r\n    '\\u01D0': 'i',\r\n    '\\u0209': 'i',\r\n    '\\u020B': 'i',\r\n    '\\u1ECB': 'i',\r\n    '\\u012F': 'i',\r\n    '\\u1E2D': 'i',\r\n    '\\u0268': 'i',\r\n    '\\u0131': 'i',\r\n    '\\u24D9': 'j',\r\n    '\\uFF4A': 'j',\r\n    '\\u0135': 'j',\r\n    '\\u01F0': 'j',\r\n    '\\u0249': 'j',\r\n    '\\u24DA': 'k',\r\n    '\\uFF4B': 'k',\r\n    '\\u1E31': 'k',\r\n    '\\u01E9': 'k',\r\n    '\\u1E33': 'k',\r\n    '\\u0137': 'k',\r\n    '\\u1E35': 'k',\r\n    '\\u0199': 'k',\r\n    '\\u2C6A': 'k',\r\n    '\\uA741': 'k',\r\n    '\\uA743': 'k',\r\n    '\\uA745': 'k',\r\n    '\\uA7A3': 'k',\r\n    '\\u24DB': 'l',\r\n    '\\uFF4C': 'l',\r\n    '\\u0140': 'l',\r\n    '\\u013A': 'l',\r\n    '\\u013E': 'l',\r\n    '\\u1E37': 'l',\r\n    '\\u1E39': 'l',\r\n    '\\u013C': 'l',\r\n    '\\u1E3D': 'l',\r\n    '\\u1E3B': 'l',\r\n    '\\u017F': 'l',\r\n    '\\u0142': 'l',\r\n    '\\u019A': 'l',\r\n    '\\u026B': 'l',\r\n    '\\u2C61': 'l',\r\n    '\\uA749': 'l',\r\n    '\\uA781': 'l',\r\n    '\\uA747': 'l',\r\n    '\\u01C9': 'lj',\r\n    '\\u24DC': 'm',\r\n    '\\uFF4D': 'm',\r\n    '\\u1E3F': 'm',\r\n    '\\u1E41': 'm',\r\n    '\\u1E43': 'm',\r\n    '\\u0271': 'm',\r\n    '\\u026F': 'm',\r\n    '\\u24DD': 'n',\r\n    '\\uFF4E': 'n',\r\n    '\\u01F9': 'n',\r\n    '\\u0144': 'n',\r\n    '\\u00F1': 'n',\r\n    '\\u1E45': 'n',\r\n    '\\u0148': 'n',\r\n    '\\u1E47': 'n',\r\n    '\\u0146': 'n',\r\n    '\\u1E4B': 'n',\r\n    '\\u1E49': 'n',\r\n    '\\u019E': 'n',\r\n    '\\u0272': 'n',\r\n    '\\u0149': 'n',\r\n    '\\uA791': 'n',\r\n    '\\uA7A5': 'n',\r\n    '\\u01CC': 'nj',\r\n    '\\u24DE': 'o',\r\n    '\\uFF4F': 'o',\r\n    '\\u00F2': 'o',\r\n    '\\u00F3': 'o',\r\n    '\\u00F4': 'o',\r\n    '\\u1ED3': 'o',\r\n    '\\u1ED1': 'o',\r\n    '\\u1ED7': 'o',\r\n    '\\u1ED5': 'o',\r\n    '\\u00F5': 'o',\r\n    '\\u1E4D': 'o',\r\n    '\\u022D': 'o',\r\n    '\\u1E4F': 'o',\r\n    '\\u014D': 'o',\r\n    '\\u1E51': 'o',\r\n    '\\u1E53': 'o',\r\n    '\\u014F': 'o',\r\n    '\\u022F': 'o',\r\n    '\\u0231': 'o',\r\n    '\\u00F6': 'o',\r\n    '\\u022B': 'o',\r\n    '\\u1ECF': 'o',\r\n    '\\u0151': 'o',\r\n    '\\u01D2': 'o',\r\n    '\\u020D': 'o',\r\n    '\\u020F': 'o',\r\n    '\\u01A1': 'o',\r\n    '\\u1EDD': 'o',\r\n    '\\u1EDB': 'o',\r\n    '\\u1EE1': 'o',\r\n    '\\u1EDF': 'o',\r\n    '\\u1EE3': 'o',\r\n    '\\u1ECD': 'o',\r\n    '\\u1ED9': 'o',\r\n    '\\u01EB': 'o',\r\n    '\\u01ED': 'o',\r\n    '\\u00F8': 'o',\r\n    '\\u01FF': 'o',\r\n    '\\u0254': 'o',\r\n    '\\uA74B': 'o',\r\n    '\\uA74D': 'o',\r\n    '\\u0275': 'o',\r\n    '\\u01A3': 'oi',\r\n    '\\u0223': 'ou',\r\n    '\\uA74F': 'oo',\r\n    '\\u24DF': 'p',\r\n    '\\uFF50': 'p',\r\n    '\\u1E55': 'p',\r\n    '\\u1E57': 'p',\r\n    '\\u01A5': 'p',\r\n    '\\u1D7D': 'p',\r\n    '\\uA751': 'p',\r\n    '\\uA753': 'p',\r\n    '\\uA755': 'p',\r\n    '\\u24E0': 'q',\r\n    '\\uFF51': 'q',\r\n    '\\u024B': 'q',\r\n    '\\uA757': 'q',\r\n    '\\uA759': 'q',\r\n    '\\u24E1': 'r',\r\n    '\\uFF52': 'r',\r\n    '\\u0155': 'r',\r\n    '\\u1E59': 'r',\r\n    '\\u0159': 'r',\r\n    '\\u0211': 'r',\r\n    '\\u0213': 'r',\r\n    '\\u1E5B': 'r',\r\n    '\\u1E5D': 'r',\r\n    '\\u0157': 'r',\r\n    '\\u1E5F': 'r',\r\n    '\\u024D': 'r',\r\n    '\\u027D': 'r',\r\n    '\\uA75B': 'r',\r\n    '\\uA7A7': 'r',\r\n    '\\uA783': 'r',\r\n    '\\u24E2': 's',\r\n    '\\uFF53': 's',\r\n    '\\u00DF': 's',\r\n    '\\u015B': 's',\r\n    '\\u1E65': 's',\r\n    '\\u015D': 's',\r\n    '\\u1E61': 's',\r\n    '\\u0161': 's',\r\n    '\\u1E67': 's',\r\n    '\\u1E63': 's',\r\n    '\\u1E69': 's',\r\n    '\\u0219': 's',\r\n    '\\u015F': 's',\r\n    '\\u023F': 's',\r\n    '\\uA7A9': 's',\r\n    '\\uA785': 's',\r\n    '\\u1E9B': 's',\r\n    '\\u24E3': 't',\r\n    '\\uFF54': 't',\r\n    '\\u1E6B': 't',\r\n    '\\u1E97': 't',\r\n    '\\u0165': 't',\r\n    '\\u1E6D': 't',\r\n    '\\u021B': 't',\r\n    '\\u0163': 't',\r\n    '\\u1E71': 't',\r\n    '\\u1E6F': 't',\r\n    '\\u0167': 't',\r\n    '\\u01AD': 't',\r\n    '\\u0288': 't',\r\n    '\\u2C66': 't',\r\n    '\\uA787': 't',\r\n    '\\uA729': 'tz',\r\n    '\\u24E4': 'u',\r\n    '\\uFF55': 'u',\r\n    '\\u00F9': 'u',\r\n    '\\u00FA': 'u',\r\n    '\\u00FB': 'u',\r\n    '\\u0169': 'u',\r\n    '\\u1E79': 'u',\r\n    '\\u016B': 'u',\r\n    '\\u1E7B': 'u',\r\n    '\\u016D': 'u',\r\n    '\\u00FC': 'u',\r\n    '\\u01DC': 'u',\r\n    '\\u01D8': 'u',\r\n    '\\u01D6': 'u',\r\n    '\\u01DA': 'u',\r\n    '\\u1EE7': 'u',\r\n    '\\u016F': 'u',\r\n    '\\u0171': 'u',\r\n    '\\u01D4': 'u',\r\n    '\\u0215': 'u',\r\n    '\\u0217': 'u',\r\n    '\\u01B0': 'u',\r\n    '\\u1EEB': 'u',\r\n    '\\u1EE9': 'u',\r\n    '\\u1EEF': 'u',\r\n    '\\u1EED': 'u',\r\n    '\\u1EF1': 'u',\r\n    '\\u1EE5': 'u',\r\n    '\\u1E73': 'u',\r\n    '\\u0173': 'u',\r\n    '\\u1E77': 'u',\r\n    '\\u1E75': 'u',\r\n    '\\u0289': 'u',\r\n    '\\u24E5': 'v',\r\n    '\\uFF56': 'v',\r\n    '\\u1E7D': 'v',\r\n    '\\u1E7F': 'v',\r\n    '\\u028B': 'v',\r\n    '\\uA75F': 'v',\r\n    '\\u028C': 'v',\r\n    '\\uA761': 'vy',\r\n    '\\u24E6': 'w',\r\n    '\\uFF57': 'w',\r\n    '\\u1E81': 'w',\r\n    '\\u1E83': 'w',\r\n    '\\u0175': 'w',\r\n    '\\u1E87': 'w',\r\n    '\\u1E85': 'w',\r\n    '\\u1E98': 'w',\r\n    '\\u1E89': 'w',\r\n    '\\u2C73': 'w',\r\n    '\\u24E7': 'x',\r\n    '\\uFF58': 'x',\r\n    '\\u1E8B': 'x',\r\n    '\\u1E8D': 'x',\r\n    '\\u24E8': 'y',\r\n    '\\uFF59': 'y',\r\n    '\\u1EF3': 'y',\r\n    '\\u00FD': 'y',\r\n    '\\u0177': 'y',\r\n    '\\u1EF9': 'y',\r\n    '\\u0233': 'y',\r\n    '\\u1E8F': 'y',\r\n    '\\u00FF': 'y',\r\n    '\\u1EF7': 'y',\r\n    '\\u1E99': 'y',\r\n    '\\u1EF5': 'y',\r\n    '\\u01B4': 'y',\r\n    '\\u024F': 'y',\r\n    '\\u1EFF': 'y',\r\n    '\\u24E9': 'z',\r\n    '\\uFF5A': 'z',\r\n    '\\u017A': 'z',\r\n    '\\u1E91': 'z',\r\n    '\\u017C': 'z',\r\n    '\\u017E': 'z',\r\n    '\\u1E93': 'z',\r\n    '\\u1E95': 'z',\r\n    '\\u01B6': 'z',\r\n    '\\u0225': 'z',\r\n    '\\u0240': 'z',\r\n    '\\u2C6C': 'z',\r\n    '\\uA763': 'z',\r\n    '\\u0386': '\\u0391',\r\n    '\\u0388': '\\u0395',\r\n    '\\u0389': '\\u0397',\r\n    '\\u038A': '\\u0399',\r\n    '\\u03AA': '\\u0399',\r\n    '\\u038C': '\\u039F',\r\n    '\\u038E': '\\u03A5',\r\n    '\\u03AB': '\\u03A5',\r\n    '\\u038F': '\\u03A9',\r\n    '\\u03AC': '\\u03B1',\r\n    '\\u03AD': '\\u03B5',\r\n    '\\u03AE': '\\u03B7',\r\n    '\\u03AF': '\\u03B9',\r\n    '\\u03CA': '\\u03B9',\r\n    '\\u0390': '\\u03B9',\r\n    '\\u03CC': '\\u03BF',\r\n    '\\u03CD': '\\u03C5',\r\n    '\\u03CB': '\\u03C5',\r\n    '\\u03B0': '\\u03C5',\r\n    '\\u03C9': '\\u03C9',\r\n    '\\u03C2': '\\u03C3'\r\n  };\r\n\r\n  return diacritics;\r\n});\r\n\nS2.define('select2/data/base',[\r\n  '../utils'\r\n], function (Utils) {\r\n  function BaseAdapter ($element, options) {\r\n    BaseAdapter.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(BaseAdapter, Utils.Observable);\r\n\r\n  BaseAdapter.prototype.current = function (callback) {\r\n    throw new Error('The `current` method must be defined in child classes.');\r\n  };\r\n\r\n  BaseAdapter.prototype.query = function (params, callback) {\r\n    throw new Error('The `query` method must be defined in child classes.');\r\n  };\r\n\r\n  BaseAdapter.prototype.bind = function (container, $container) {\r\n    // Can be implemented in subclasses\r\n  };\r\n\r\n  BaseAdapter.prototype.destroy = function () {\r\n    // Can be implemented in subclasses\r\n  };\r\n\r\n  BaseAdapter.prototype.generateResultId = function (container, data) {\r\n    var id = container.id + '-result-';\r\n\r\n    id += Utils.generateChars(4);\r\n\r\n    if (data.id != null) {\r\n      id += '-' + data.id.toString();\r\n    } else {\r\n      id += '-' + Utils.generateChars(4);\r\n    }\r\n    return id;\r\n  };\r\n\r\n  return BaseAdapter;\r\n});\r\n\nS2.define('select2/data/select',[\r\n  './base',\r\n  '../utils',\r\n  'jquery'\r\n], function (BaseAdapter, Utils, $) {\r\n  function SelectAdapter ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    SelectAdapter.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(SelectAdapter, BaseAdapter);\r\n\r\n  SelectAdapter.prototype.current = function (callback) {\r\n    var data = [];\r\n    var self = this;\r\n\r\n    this.$element.find(':selected').each(function () {\r\n      var $option = $(this);\r\n\r\n      var option = self.item($option);\r\n\r\n      data.push(option);\r\n    });\r\n\r\n    callback(data);\r\n  };\r\n\r\n  SelectAdapter.prototype.select = function (data) {\r\n    var self = this;\r\n\r\n    data.selected = true;\r\n\r\n    // If data.element is a DOM node, use it instead\r\n    if ($(data.element).is('option')) {\r\n      data.element.selected = true;\r\n\r\n      this.$element.trigger('change');\r\n\r\n      return;\r\n    }\r\n\r\n    if (this.$element.prop('multiple')) {\r\n      this.current(function (currentData) {\r\n        var val = [];\r\n\r\n        data = [data];\r\n        data.push.apply(data, currentData);\r\n\r\n        for (var d = 0; d < data.length; d++) {\r\n          var id = data[d].id;\r\n\r\n          if ($.inArray(id, val) === -1) {\r\n            val.push(id);\r\n          }\r\n        }\r\n\r\n        self.$element.val(val);\r\n        self.$element.trigger('change');\r\n      });\r\n    } else {\r\n      var val = data.id;\r\n\r\n      this.$element.val(val);\r\n      this.$element.trigger('change');\r\n    }\r\n  };\r\n\r\n  SelectAdapter.prototype.unselect = function (data) {\r\n    var self = this;\r\n\r\n    if (!this.$element.prop('multiple')) {\r\n      return;\r\n    }\r\n\r\n    data.selected = false;\r\n\r\n    if ($(data.element).is('option')) {\r\n      data.element.selected = false;\r\n\r\n      this.$element.trigger('change');\r\n\r\n      return;\r\n    }\r\n\r\n    this.current(function (currentData) {\r\n      var val = [];\r\n\r\n      for (var d = 0; d < currentData.length; d++) {\r\n        var id = currentData[d].id;\r\n\r\n        if (id !== data.id && $.inArray(id, val) === -1) {\r\n          val.push(id);\r\n        }\r\n      }\r\n\r\n      self.$element.val(val);\r\n\r\n      self.$element.trigger('change');\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    this.container = container;\r\n\r\n    container.on('select', function (params) {\r\n      self.select(params.data);\r\n    });\r\n\r\n    container.on('unselect', function (params) {\r\n      self.unselect(params.data);\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.destroy = function () {\r\n    // Remove anything added to child elements\r\n    this.$element.find('*').each(function () {\r\n      // Remove any custom data set by Select2\r\n      $.removeData(this, 'data');\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.query = function (params, callback) {\r\n    var data = [];\r\n    var self = this;\r\n\r\n    var $options = this.$element.children();\r\n\r\n    $options.each(function () {\r\n      var $option = $(this);\r\n\r\n      if (!$option.is('option') && !$option.is('optgroup')) {\r\n        return;\r\n      }\r\n\r\n      var option = self.item($option);\r\n\r\n      var matches = self.matches(params, option);\r\n\r\n      if (matches !== null) {\r\n        data.push(matches);\r\n      }\r\n    });\r\n\r\n    callback({\r\n      results: data\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.addOptions = function ($options) {\r\n    Utils.appendMany(this.$element, $options);\r\n  };\r\n\r\n  SelectAdapter.prototype.option = function (data) {\r\n    var option;\r\n\r\n    if (data.children) {\r\n      option = document.createElement('optgroup');\r\n      option.label = data.text;\r\n    } else {\r\n      option = document.createElement('option');\r\n\r\n      if (option.textContent !== undefined) {\r\n        option.textContent = data.text;\r\n      } else {\r\n        option.innerText = data.text;\r\n      }\r\n    }\r\n\r\n    if (data.id) {\r\n      option.value = data.id;\r\n    }\r\n\r\n    if (data.disabled) {\r\n      option.disabled = true;\r\n    }\r\n\r\n    if (data.selected) {\r\n      option.selected = true;\r\n    }\r\n\r\n    if (data.title) {\r\n      option.title = data.title;\r\n    }\r\n\r\n    var $option = $(option);\r\n\r\n    var normalizedData = this._normalizeItem(data);\r\n    normalizedData.element = option;\r\n\r\n    // Override the option's data with the combined data\r\n    $.data(option, 'data', normalizedData);\r\n\r\n    return $option;\r\n  };\r\n\r\n  SelectAdapter.prototype.item = function ($option) {\r\n    var data = {};\r\n\r\n    data = $.data($option[0], 'data');\r\n\r\n    if (data != null) {\r\n      return data;\r\n    }\r\n\r\n    if ($option.is('option')) {\r\n      data = {\r\n        id: $option.val(),\r\n        text: $option.text(),\r\n        disabled: $option.prop('disabled'),\r\n        selected: $option.prop('selected'),\r\n        title: $option.prop('title')\r\n      };\r\n    } else if ($option.is('optgroup')) {\r\n      data = {\r\n        text: $option.prop('label'),\r\n        children: [],\r\n        title: $option.prop('title')\r\n      };\r\n\r\n      var $children = $option.children('option');\r\n      var children = [];\r\n\r\n      for (var c = 0; c < $children.length; c++) {\r\n        var $child = $($children[c]);\r\n\r\n        var child = this.item($child);\r\n\r\n        children.push(child);\r\n      }\r\n\r\n      data.children = children;\r\n    }\r\n\r\n    data = this._normalizeItem(data);\r\n    data.element = $option[0];\r\n\r\n    $.data($option[0], 'data', data);\r\n\r\n    return data;\r\n  };\r\n\r\n  SelectAdapter.prototype._normalizeItem = function (item) {\r\n    if (!$.isPlainObject(item)) {\r\n      item = {\r\n        id: item,\r\n        text: item\r\n      };\r\n    }\r\n\r\n    item = $.extend({}, {\r\n      text: ''\r\n    }, item);\r\n\r\n    var defaults = {\r\n      selected: false,\r\n      disabled: false\r\n    };\r\n\r\n    if (item.id != null) {\r\n      item.id = item.id.toString();\r\n    }\r\n\r\n    if (item.text != null) {\r\n      item.text = item.text.toString();\r\n    }\r\n\r\n    if (item._resultId == null && item.id && this.container != null) {\r\n      item._resultId = this.generateResultId(this.container, item);\r\n    }\r\n\r\n    return $.extend({}, defaults, item);\r\n  };\r\n\r\n  SelectAdapter.prototype.matches = function (params, data) {\r\n    var matcher = this.options.get('matcher');\r\n\r\n    return matcher(params, data);\r\n  };\r\n\r\n  return SelectAdapter;\r\n});\r\n\nS2.define('select2/data/array',[\r\n  './select',\r\n  '../utils',\r\n  'jquery'\r\n], function (SelectAdapter, Utils, $) {\r\n  function ArrayAdapter ($element, options) {\r\n    var data = options.get('data') || [];\r\n\r\n    ArrayAdapter.__super__.constructor.call(this, $element, options);\r\n\r\n    this.addOptions(this.convertToOptions(data));\r\n  }\r\n\r\n  Utils.Extend(ArrayAdapter, SelectAdapter);\r\n\r\n  ArrayAdapter.prototype.select = function (data) {\r\n    var $option = this.$element.find('option').filter(function (i, elm) {\r\n      return elm.value == data.id.toString();\r\n    });\r\n\r\n    if ($option.length === 0) {\r\n      $option = this.option(data);\r\n\r\n      this.addOptions($option);\r\n    }\r\n\r\n    ArrayAdapter.__super__.select.call(this, data);\r\n  };\r\n\r\n  ArrayAdapter.prototype.convertToOptions = function (data) {\r\n    var self = this;\r\n\r\n    var $existing = this.$element.find('option');\r\n    var existingIds = $existing.map(function () {\r\n      return self.item($(this)).id;\r\n    }).get();\r\n\r\n    var $options = [];\r\n\r\n    // Filter out all items except for the one passed in the argument\r\n    function onlyItem (item) {\r\n      return function () {\r\n        return $(this).val() == item.id;\r\n      };\r\n    }\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var item = this._normalizeItem(data[d]);\r\n\r\n      // Skip items which were pre-loaded, only merge the data\r\n      if ($.inArray(item.id, existingIds) >= 0) {\r\n        var $existingOption = $existing.filter(onlyItem(item));\r\n\r\n        var existingData = this.item($existingOption);\r\n        var newData = $.extend(true, {}, item, existingData);\r\n\r\n        var $newOption = this.option(newData);\r\n\r\n        $existingOption.replaceWith($newOption);\r\n\r\n        continue;\r\n      }\r\n\r\n      var $option = this.option(item);\r\n\r\n      if (item.children) {\r\n        var $children = this.convertToOptions(item.children);\r\n\r\n        Utils.appendMany($option, $children);\r\n      }\r\n\r\n      $options.push($option);\r\n    }\r\n\r\n    return $options;\r\n  };\r\n\r\n  return ArrayAdapter;\r\n});\r\n\nS2.define('select2/data/ajax',[\r\n  './array',\r\n  '../utils',\r\n  'jquery'\r\n], function (ArrayAdapter, Utils, $) {\r\n  function AjaxAdapter ($element, options) {\r\n    this.ajaxOptions = this._applyDefaults(options.get('ajax'));\r\n\r\n    if (this.ajaxOptions.processResults != null) {\r\n      this.processResults = this.ajaxOptions.processResults;\r\n    }\r\n\r\n    AjaxAdapter.__super__.constructor.call(this, $element, options);\r\n  }\r\n\r\n  Utils.Extend(AjaxAdapter, ArrayAdapter);\r\n\r\n  AjaxAdapter.prototype._applyDefaults = function (options) {\r\n    var defaults = {\r\n      data: function (params) {\r\n        return $.extend({}, params, {\r\n          q: params.term\r\n        });\r\n      },\r\n      transport: function (params, success, failure) {\r\n        var $request = $.ajax(params);\r\n\r\n        $request.then(success);\r\n        $request.fail(failure);\r\n\r\n        return $request;\r\n      }\r\n    };\r\n\r\n    return $.extend({}, defaults, options, true);\r\n  };\r\n\r\n  AjaxAdapter.prototype.processResults = function (results) {\r\n    return results;\r\n  };\r\n\r\n  AjaxAdapter.prototype.query = function (params, callback) {\r\n    var matches = [];\r\n    var self = this;\r\n\r\n    if (this._request != null) {\r\n      // JSONP requests cannot always be aborted\r\n      if ($.isFunction(this._request.abort)) {\r\n        this._request.abort();\r\n      }\r\n\r\n      this._request = null;\r\n    }\r\n\r\n    var options = $.extend({\r\n      type: 'GET'\r\n    }, this.ajaxOptions);\r\n\r\n    if (typeof options.url === 'function') {\r\n      options.url = options.url.call(this.$element, params);\r\n    }\r\n\r\n    if (typeof options.data === 'function') {\r\n      options.data = options.data.call(this.$element, params);\r\n    }\r\n\r\n    function request () {\r\n      var $request = options.transport(options, function (data) {\r\n        var results = self.processResults(data, params);\r\n\r\n        if (self.options.get('debug') && window.console && console.error) {\r\n          // Check to make sure that the response included a `results` key.\r\n          if (!results || !results.results || !$.isArray(results.results)) {\r\n            console.error(\r\n              'Select2: The AJAX results did not return an array in the ' +\r\n              '`results` key of the response.'\r\n            );\r\n          }\r\n        }\r\n\r\n        callback(results);\r\n      }, function () {\r\n        // Attempt to detect if a request was aborted\r\n        // Only works if the transport exposes a status property\r\n        if ($request.status && $request.status === '0') {\r\n          return;\r\n        }\r\n\r\n        self.trigger('results:message', {\r\n          message: 'errorLoading'\r\n        });\r\n      });\r\n\r\n      self._request = $request;\r\n    }\r\n\r\n    if (this.ajaxOptions.delay && params.term != null) {\r\n      if (this._queryTimeout) {\r\n        window.clearTimeout(this._queryTimeout);\r\n      }\r\n\r\n      this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay);\r\n    } else {\r\n      request();\r\n    }\r\n  };\r\n\r\n  return AjaxAdapter;\r\n});\r\n\nS2.define('select2/data/tags',[\r\n  'jquery'\r\n], function ($) {\r\n  function Tags (decorated, $element, options) {\r\n    var tags = options.get('tags');\r\n\r\n    var createTag = options.get('createTag');\r\n\r\n    if (createTag !== undefined) {\r\n      this.createTag = createTag;\r\n    }\r\n\r\n    var insertTag = options.get('insertTag');\r\n\r\n    if (insertTag !== undefined) {\r\n        this.insertTag = insertTag;\r\n    }\r\n\r\n    decorated.call(this, $element, options);\r\n\r\n    if ($.isArray(tags)) {\r\n      for (var t = 0; t < tags.length; t++) {\r\n        var tag = tags[t];\r\n        var item = this._normalizeItem(tag);\r\n\r\n        var $option = this.option(item);\r\n\r\n        this.$element.append($option);\r\n      }\r\n    }\r\n  }\r\n\r\n  Tags.prototype.query = function (decorated, params, callback) {\r\n    var self = this;\r\n\r\n    this._removeOldTags();\r\n\r\n    if (params.term == null || params.page != null) {\r\n      decorated.call(this, params, callback);\r\n      return;\r\n    }\r\n\r\n    function wrapper (obj, child) {\r\n      var data = obj.results;\r\n\r\n      for (var i = 0; i < data.length; i++) {\r\n        var option = data[i];\r\n\r\n        var checkChildren = (\r\n          option.children != null &&\r\n          !wrapper({\r\n            results: option.children\r\n          }, true)\r\n        );\r\n\r\n        var checkText = option.text === params.term;\r\n\r\n        if (checkText || checkChildren) {\r\n          if (child) {\r\n            return false;\r\n          }\r\n\r\n          obj.data = data;\r\n          callback(obj);\r\n\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (child) {\r\n        return true;\r\n      }\r\n\r\n      var tag = self.createTag(params);\r\n\r\n      if (tag != null) {\r\n        var $option = self.option(tag);\r\n        $option.attr('data-select2-tag', true);\r\n\r\n        self.addOptions([$option]);\r\n\r\n        self.insertTag(data, tag);\r\n      }\r\n\r\n      obj.results = data;\r\n\r\n      callback(obj);\r\n    }\r\n\r\n    decorated.call(this, params, wrapper);\r\n  };\r\n\r\n  Tags.prototype.createTag = function (decorated, params) {\r\n    var term = $.trim(params.term);\r\n\r\n    if (term === '') {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      id: term,\r\n      text: term\r\n    };\r\n  };\r\n\r\n  Tags.prototype.insertTag = function (_, data, tag) {\r\n    data.unshift(tag);\r\n  };\r\n\r\n  Tags.prototype._removeOldTags = function (_) {\r\n    var tag = this._lastTag;\r\n\r\n    var $options = this.$element.find('option[data-select2-tag]');\r\n\r\n    $options.each(function () {\r\n      if (this.selected) {\r\n        return;\r\n      }\r\n\r\n      $(this).remove();\r\n    });\r\n  };\r\n\r\n  return Tags;\r\n});\r\n\nS2.define('select2/data/tokenizer',[\r\n  'jquery'\r\n], function ($) {\r\n  function Tokenizer (decorated, $element, options) {\r\n    var tokenizer = options.get('tokenizer');\r\n\r\n    if (tokenizer !== undefined) {\r\n      this.tokenizer = tokenizer;\r\n    }\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Tokenizer.prototype.bind = function (decorated, container, $container) {\r\n    decorated.call(this, container, $container);\r\n\r\n    this.$search =  container.dropdown.$search || container.selection.$search ||\r\n      $container.find('.select2-search__field');\r\n  };\r\n\r\n  Tokenizer.prototype.query = function (decorated, params, callback) {\r\n    var self = this;\r\n\r\n    function createAndSelect (data) {\r\n      // Normalize the data object so we can use it for checks\r\n      var item = self._normalizeItem(data);\r\n\r\n      // Check if the data object already exists as a tag\r\n      // Select it if it doesn't\r\n      var $existingOptions = self.$element.find('option').filter(function () {\r\n        return $(this).val() === item.id;\r\n      });\r\n\r\n      // If an existing option wasn't found for it, create the option\r\n      if (!$existingOptions.length) {\r\n        var $option = self.option(item);\r\n        $option.attr('data-select2-tag', true);\r\n\r\n        self._removeOldTags();\r\n        self.addOptions([$option]);\r\n      }\r\n\r\n      // Select the item, now that we know there is an option for it\r\n      select(item);\r\n    }\r\n\r\n    function select (data) {\r\n      self.trigger('select', {\r\n        data: data\r\n      });\r\n    }\r\n\r\n    params.term = params.term || '';\r\n\r\n    var tokenData = this.tokenizer(params, this.options, createAndSelect);\r\n\r\n    if (tokenData.term !== params.term) {\r\n      // Replace the search term if we have the search box\r\n      if (this.$search.length) {\r\n        this.$search.val(tokenData.term);\r\n        this.$search.focus();\r\n      }\r\n\r\n      params.term = tokenData.term;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  Tokenizer.prototype.tokenizer = function (_, params, options, callback) {\r\n    var separators = options.get('tokenSeparators') || [];\r\n    var term = params.term;\r\n    var i = 0;\r\n\r\n    var createTag = this.createTag || function (params) {\r\n      return {\r\n        id: params.term,\r\n        text: params.term\r\n      };\r\n    };\r\n\r\n    while (i < term.length) {\r\n      var termChar = term[i];\r\n\r\n      if ($.inArray(termChar, separators) === -1) {\r\n        i++;\r\n\r\n        continue;\r\n      }\r\n\r\n      var part = term.substr(0, i);\r\n      var partParams = $.extend({}, params, {\r\n        term: part\r\n      });\r\n\r\n      var data = createTag(partParams);\r\n\r\n      if (data == null) {\r\n        i++;\r\n        continue;\r\n      }\r\n\r\n      callback(data);\r\n\r\n      // Reset the term to not include the tokenized portion\r\n      term = term.substr(i + 1) || '';\r\n      i = 0;\r\n    }\r\n\r\n    return {\r\n      term: term\r\n    };\r\n  };\r\n\r\n  return Tokenizer;\r\n});\r\n\nS2.define('select2/data/minimumInputLength',[\r\n\r\n], function () {\r\n  function MinimumInputLength (decorated, $e, options) {\r\n    this.minimumInputLength = options.get('minimumInputLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MinimumInputLength.prototype.query = function (decorated, params, callback) {\r\n    params.term = params.term || '';\r\n\r\n    if (params.term.length < this.minimumInputLength) {\r\n      this.trigger('results:message', {\r\n        message: 'inputTooShort',\r\n        args: {\r\n          minimum: this.minimumInputLength,\r\n          input: params.term,\r\n          params: params\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  return MinimumInputLength;\r\n});\r\n\nS2.define('select2/data/maximumInputLength',[\r\n\r\n], function () {\r\n  function MaximumInputLength (decorated, $e, options) {\r\n    this.maximumInputLength = options.get('maximumInputLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MaximumInputLength.prototype.query = function (decorated, params, callback) {\r\n    params.term = params.term || '';\r\n\r\n    if (this.maximumInputLength > 0 &&\r\n        params.term.length > this.maximumInputLength) {\r\n      this.trigger('results:message', {\r\n        message: 'inputTooLong',\r\n        args: {\r\n          maximum: this.maximumInputLength,\r\n          input: params.term,\r\n          params: params\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  return MaximumInputLength;\r\n});\r\n\nS2.define('select2/data/maximumSelectionLength',[\r\n\r\n], function (){\r\n  function MaximumSelectionLength (decorated, $e, options) {\r\n    this.maximumSelectionLength = options.get('maximumSelectionLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MaximumSelectionLength.prototype.query =\r\n    function (decorated, params, callback) {\r\n      var self = this;\r\n\r\n      this.current(function (currentData) {\r\n        var count = currentData != null ? currentData.length : 0;\r\n        if (self.maximumSelectionLength > 0 &&\r\n          count >= self.maximumSelectionLength) {\r\n          self.trigger('results:message', {\r\n            message: 'maximumSelected',\r\n            args: {\r\n              maximum: self.maximumSelectionLength\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        decorated.call(self, params, callback);\r\n      });\r\n  };\r\n\r\n  return MaximumSelectionLength;\r\n});\r\n\nS2.define('select2/dropdown',[\r\n  'jquery',\r\n  './utils'\r\n], function ($, Utils) {\r\n  function Dropdown ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    Dropdown.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(Dropdown, Utils.Observable);\r\n\r\n  Dropdown.prototype.render = function () {\r\n    var $dropdown = $(\r\n      '<span class=\"select2-dropdown\">' +\r\n        '<span class=\"select2-results\"></span>' +\r\n      '</span>'\r\n    );\r\n\r\n    $dropdown.attr('dir', this.options.get('dir'));\r\n\r\n    this.$dropdown = $dropdown;\r\n\r\n    return $dropdown;\r\n  };\r\n\r\n  Dropdown.prototype.bind = function () {\r\n    // Should be implemented in subclasses\r\n  };\r\n\r\n  Dropdown.prototype.position = function ($dropdown, $container) {\r\n    // Should be implmented in subclasses\r\n  };\r\n\r\n  Dropdown.prototype.destroy = function () {\r\n    // Remove the dropdown from the DOM\r\n    this.$dropdown.remove();\r\n  };\r\n\r\n  return Dropdown;\r\n});\r\n\nS2.define('select2/dropdown/search',[\r\n  'jquery',\r\n  '../utils'\r\n], function ($, Utils) {\r\n  function Search () { }\r\n\r\n  Search.prototype.render = function (decorated) {\r\n    var $rendered = decorated.call(this);\r\n\r\n    var $search = $(\r\n      '<span class=\"select2-search select2-search--dropdown\">' +\r\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\r\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\r\n        ' spellcheck=\"false\" role=\"textbox\" />' +\r\n      '</span>'\r\n    );\r\n\r\n    this.$searchContainer = $search;\r\n    this.$search = $search.find('input');\r\n\r\n    $rendered.prepend($search);\r\n\r\n    return $rendered;\r\n  };\r\n\r\n  Search.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    this.$search.on('keydown', function (evt) {\r\n      self.trigger('keypress', evt);\r\n\r\n      self._keyUpPrevented = evt.isDefaultPrevented();\r\n    });\r\n\r\n    // Workaround for browsers which do not support the `input` event\r\n    // This will prevent double-triggering of events for browsers which support\r\n    // both the `keyup` and `input` events.\r\n    this.$search.on('input', function (evt) {\r\n      // Unbind the duplicated `keyup` event\r\n      $(this).off('keyup');\r\n    });\r\n\r\n    this.$search.on('keyup input', function (evt) {\r\n      self.handleSearch(evt);\r\n    });\r\n\r\n    container.on('open', function () {\r\n      self.$search.attr('tabindex', 0);\r\n\r\n      self.$search.focus();\r\n\r\n      window.setTimeout(function () {\r\n        self.$search.focus();\r\n      }, 0);\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self.$search.attr('tabindex', -1);\r\n\r\n      self.$search.val('');\r\n    });\r\n\r\n    container.on('focus', function () {\r\n      if (container.isOpen()) {\r\n        self.$search.focus();\r\n      }\r\n    });\r\n\r\n    container.on('results:all', function (params) {\r\n      if (params.query.term == null || params.query.term === '') {\r\n        var showSearch = self.showSearch(params);\r\n\r\n        if (showSearch) {\r\n          self.$searchContainer.removeClass('select2-search--hide');\r\n        } else {\r\n          self.$searchContainer.addClass('select2-search--hide');\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  Search.prototype.handleSearch = function (evt) {\r\n    if (!this._keyUpPrevented) {\r\n      var input = this.$search.val();\r\n\r\n      this.trigger('query', {\r\n        term: input\r\n      });\r\n    }\r\n\r\n    this._keyUpPrevented = false;\r\n  };\r\n\r\n  Search.prototype.showSearch = function (_, params) {\r\n    return true;\r\n  };\r\n\r\n  return Search;\r\n});\r\n\nS2.define('select2/dropdown/hidePlaceholder',[\r\n\r\n], function () {\r\n  function HidePlaceholder (decorated, $element, options, dataAdapter) {\r\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n  }\r\n\r\n  HidePlaceholder.prototype.append = function (decorated, data) {\r\n    data.results = this.removePlaceholder(data.results);\r\n\r\n    decorated.call(this, data);\r\n  };\r\n\r\n  HidePlaceholder.prototype.normalizePlaceholder = function (_, placeholder) {\r\n    if (typeof placeholder === 'string') {\r\n      placeholder = {\r\n        id: '',\r\n        text: placeholder\r\n      };\r\n    }\r\n\r\n    return placeholder;\r\n  };\r\n\r\n  HidePlaceholder.prototype.removePlaceholder = function (_, data) {\r\n    var modifiedData = data.slice(0);\r\n\r\n    for (var d = data.length - 1; d >= 0; d--) {\r\n      var item = data[d];\r\n\r\n      if (this.placeholder.id === item.id) {\r\n        modifiedData.splice(d, 1);\r\n      }\r\n    }\r\n\r\n    return modifiedData;\r\n  };\r\n\r\n  return HidePlaceholder;\r\n});\r\n\nS2.define('select2/dropdown/infiniteScroll',[\r\n  'jquery'\r\n], function ($) {\r\n  function InfiniteScroll (decorated, $element, options, dataAdapter) {\r\n    this.lastParams = {};\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n\r\n    this.$loadingMore = this.createLoadingMore();\r\n    this.loading = false;\r\n  }\r\n\r\n  InfiniteScroll.prototype.append = function (decorated, data) {\r\n    this.$loadingMore.remove();\r\n    this.loading = false;\r\n\r\n    decorated.call(this, data);\r\n\r\n    if (this.showLoadingMore(data)) {\r\n      this.$results.append(this.$loadingMore);\r\n    }\r\n  };\r\n\r\n  InfiniteScroll.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('query', function (params) {\r\n      self.lastParams = params;\r\n      self.loading = true;\r\n    });\r\n\r\n    container.on('query:append', function (params) {\r\n      self.lastParams = params;\r\n      self.loading = true;\r\n    });\r\n\r\n    this.$results.on('scroll', function () {\r\n      var isLoadMoreVisible = $.contains(\r\n        document.documentElement,\r\n        self.$loadingMore[0]\r\n      );\r\n\r\n      if (self.loading || !isLoadMoreVisible) {\r\n        return;\r\n      }\r\n\r\n      var currentOffset = self.$results.offset().top +\r\n        self.$results.outerHeight(false);\r\n      var loadingMoreOffset = self.$loadingMore.offset().top +\r\n        self.$loadingMore.outerHeight(false);\r\n\r\n      if (currentOffset + 50 >= loadingMoreOffset) {\r\n        self.loadMore();\r\n      }\r\n    });\r\n  };\r\n\r\n  InfiniteScroll.prototype.loadMore = function () {\r\n    this.loading = true;\r\n\r\n    var params = $.extend({}, {page: 1}, this.lastParams);\r\n\r\n    params.page++;\r\n\r\n    this.trigger('query:append', params);\r\n  };\r\n\r\n  InfiniteScroll.prototype.showLoadingMore = function (_, data) {\r\n    return data.pagination && data.pagination.more;\r\n  };\r\n\r\n  InfiniteScroll.prototype.createLoadingMore = function () {\r\n    var $option = $(\r\n      '<li ' +\r\n      'class=\"select2-results__option select2-results__option--load-more\"' +\r\n      'role=\"treeitem\" aria-disabled=\"true\"></li>'\r\n    );\r\n\r\n    var message = this.options.get('translations').get('loadingMore');\r\n\r\n    $option.html(message(this.lastParams));\r\n\r\n    return $option;\r\n  };\r\n\r\n  return InfiniteScroll;\r\n});\r\n\nS2.define('select2/dropdown/attachBody',[\r\n  'jquery',\r\n  '../utils'\r\n], function ($, Utils) {\r\n  function AttachBody (decorated, $element, options) {\r\n    this.$dropdownParent = options.get('dropdownParent') || $(document.body);\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  AttachBody.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    var setupResultsEvents = false;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('open', function () {\r\n      self._showDropdown();\r\n      self._attachPositioningHandler(container);\r\n\r\n      if (!setupResultsEvents) {\r\n        setupResultsEvents = true;\r\n\r\n        container.on('results:all', function () {\r\n          self._positionDropdown();\r\n          self._resizeDropdown();\r\n        });\r\n\r\n        container.on('results:append', function () {\r\n          self._positionDropdown();\r\n          self._resizeDropdown();\r\n        });\r\n      }\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self._hideDropdown();\r\n      self._detachPositioningHandler(container);\r\n    });\r\n\r\n    this.$dropdownContainer.on('mousedown', function (evt) {\r\n      evt.stopPropagation();\r\n    });\r\n  };\r\n\r\n  AttachBody.prototype.destroy = function (decorated) {\r\n    decorated.call(this);\r\n\r\n    this.$dropdownContainer.remove();\r\n  };\r\n\r\n  AttachBody.prototype.position = function (decorated, $dropdown, $container) {\r\n    // Clone all of the container classes\r\n    $dropdown.attr('class', $container.attr('class'));\r\n\r\n    $dropdown.removeClass('select2');\r\n    $dropdown.addClass('select2-container--open');\r\n\r\n    $dropdown.css({\r\n      position: 'absolute',\r\n      top: -999999\r\n    });\r\n\r\n    this.$container = $container;\r\n  };\r\n\r\n  AttachBody.prototype.render = function (decorated) {\r\n    var $container = $('<span></span>');\r\n\r\n    var $dropdown = decorated.call(this);\r\n    $container.append($dropdown);\r\n\r\n    this.$dropdownContainer = $container;\r\n\r\n    return $container;\r\n  };\r\n\r\n  AttachBody.prototype._hideDropdown = function (decorated) {\r\n    this.$dropdownContainer.detach();\r\n  };\r\n\r\n  AttachBody.prototype._attachPositioningHandler =\r\n      function (decorated, container) {\r\n    var self = this;\r\n\r\n    var scrollEvent = 'scroll.select2.' + container.id;\r\n    var resizeEvent = 'resize.select2.' + container.id;\r\n    var orientationEvent = 'orientationchange.select2.' + container.id;\r\n\r\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\r\n    $watchers.each(function () {\r\n      $(this).data('select2-scroll-position', {\r\n        x: $(this).scrollLeft(),\r\n        y: $(this).scrollTop()\r\n      });\r\n    });\r\n\r\n    $watchers.on(scrollEvent, function (ev) {\r\n      var position = $(this).data('select2-scroll-position');\r\n      $(this).scrollTop(position.y);\r\n    });\r\n\r\n    $(window).on(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent,\r\n      function (e) {\r\n      self._positionDropdown();\r\n      self._resizeDropdown();\r\n    });\r\n  };\r\n\r\n  AttachBody.prototype._detachPositioningHandler =\r\n      function (decorated, container) {\r\n    var scrollEvent = 'scroll.select2.' + container.id;\r\n    var resizeEvent = 'resize.select2.' + container.id;\r\n    var orientationEvent = 'orientationchange.select2.' + container.id;\r\n\r\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\r\n    $watchers.off(scrollEvent);\r\n\r\n    $(window).off(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent);\r\n  };\r\n\r\n  AttachBody.prototype._positionDropdown = function () {\r\n    var $window = $(window);\r\n\r\n    var isCurrentlyAbove = this.$dropdown.hasClass('select2-dropdown--above');\r\n    var isCurrentlyBelow = this.$dropdown.hasClass('select2-dropdown--below');\r\n\r\n    var newDirection = null;\r\n\r\n    var offset = this.$container.offset();\r\n\r\n    offset.bottom = offset.top + this.$container.outerHeight(false);\r\n\r\n    var container = {\r\n      height: this.$container.outerHeight(false)\r\n    };\r\n\r\n    container.top = offset.top;\r\n    container.bottom = offset.top + container.height;\r\n\r\n    var dropdown = {\r\n      height: this.$dropdown.outerHeight(false)\r\n    };\r\n\r\n    var viewport = {\r\n      top: $window.scrollTop(),\r\n      bottom: $window.scrollTop() + $window.height()\r\n    };\r\n\r\n    var enoughRoomAbove = viewport.top < (offset.top - dropdown.height);\r\n    var enoughRoomBelow = viewport.bottom > (offset.bottom + dropdown.height);\r\n\r\n    var css = {\r\n      left: offset.left,\r\n      top: container.bottom\r\n    };\r\n\r\n    // Determine what the parent element is to use for calciulating the offset\r\n    var $offsetParent = this.$dropdownParent;\r\n\r\n    // For statically positoned elements, we need to get the element\r\n    // that is determining the offset\r\n    if ($offsetParent.css('position') === 'static') {\r\n      $offsetParent = $offsetParent.offsetParent();\r\n    }\r\n\r\n    var parentOffset = $offsetParent.offset();\r\n\r\n    css.top -= parentOffset.top;\r\n    css.left -= parentOffset.left;\r\n\r\n    if (!isCurrentlyAbove && !isCurrentlyBelow) {\r\n      newDirection = 'below';\r\n    }\r\n\r\n    if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {\r\n      newDirection = 'above';\r\n    } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {\r\n      newDirection = 'below';\r\n    }\r\n\r\n    if (newDirection == 'above' ||\r\n      (isCurrentlyAbove && newDirection !== 'below')) {\r\n      css.top = container.top - parentOffset.top - dropdown.height;\r\n    }\r\n\r\n    if (newDirection != null) {\r\n      this.$dropdown\r\n        .removeClass('select2-dropdown--below select2-dropdown--above')\r\n        .addClass('select2-dropdown--' + newDirection);\r\n      this.$container\r\n        .removeClass('select2-container--below select2-container--above')\r\n        .addClass('select2-container--' + newDirection);\r\n    }\r\n\r\n    this.$dropdownContainer.css(css);\r\n  };\r\n\r\n  AttachBody.prototype._resizeDropdown = function () {\r\n    var css = {\r\n      width: this.$container.outerWidth(false) + 'px'\r\n    };\r\n\r\n    if (this.options.get('dropdownAutoWidth')) {\r\n      css.minWidth = css.width;\r\n      css.position = 'relative';\r\n      css.width = 'auto';\r\n    }\r\n\r\n    this.$dropdown.css(css);\r\n  };\r\n\r\n  AttachBody.prototype._showDropdown = function (decorated) {\r\n    this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n\r\n    this._positionDropdown();\r\n    this._resizeDropdown();\r\n  };\r\n\r\n  return AttachBody;\r\n});\r\n\nS2.define('select2/dropdown/minimumResultsForSearch',[\r\n\r\n], function () {\r\n  function countResults (data) {\r\n    var count = 0;\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var item = data[d];\r\n\r\n      if (item.children) {\r\n        count += countResults(item.children);\r\n      } else {\r\n        count++;\r\n      }\r\n    }\r\n\r\n    return count;\r\n  }\r\n\r\n  function MinimumResultsForSearch (decorated, $element, options, dataAdapter) {\r\n    this.minimumResultsForSearch = options.get('minimumResultsForSearch');\r\n\r\n    if (this.minimumResultsForSearch < 0) {\r\n      this.minimumResultsForSearch = Infinity;\r\n    }\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n  }\r\n\r\n  MinimumResultsForSearch.prototype.showSearch = function (decorated, params) {\r\n    if (countResults(params.data.results) < this.minimumResultsForSearch) {\r\n      return false;\r\n    }\r\n\r\n    return decorated.call(this, params);\r\n  };\r\n\r\n  return MinimumResultsForSearch;\r\n});\r\n\nS2.define('select2/dropdown/selectOnClose',[\r\n\r\n], function () {\r\n  function SelectOnClose () { }\r\n\r\n  SelectOnClose.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('close', function (params) {\r\n      self._handleSelectOnClose(params);\r\n    });\r\n  };\r\n\r\n  SelectOnClose.prototype._handleSelectOnClose = function (_, params) {\r\n    if (params && params.originalSelect2Event != null) {\r\n      var event = params.originalSelect2Event;\r\n\r\n      // Don't select an item if the close event was triggered from a select or\r\n      // unselect event\r\n      if (event._type === 'select' || event._type === 'unselect') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var $highlightedResults = this.getHighlightedResults();\r\n\r\n    // Only select highlighted results\r\n    if ($highlightedResults.length < 1) {\r\n      return;\r\n    }\r\n\r\n    var data = $highlightedResults.data('data');\r\n\r\n    // Don't re-select already selected resulte\r\n    if (\r\n      (data.element != null && data.element.selected) ||\r\n      (data.element == null && data.selected)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('select', {\r\n        data: data\r\n    });\r\n  };\r\n\r\n  return SelectOnClose;\r\n});\r\n\nS2.define('select2/dropdown/closeOnSelect',[\r\n\r\n], function () {\r\n  function CloseOnSelect () { }\r\n\r\n  CloseOnSelect.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('select', function (evt) {\r\n      self._selectTriggered(evt);\r\n    });\r\n\r\n    container.on('unselect', function (evt) {\r\n      self._selectTriggered(evt);\r\n    });\r\n  };\r\n\r\n  CloseOnSelect.prototype._selectTriggered = function (_, evt) {\r\n    var originalEvent = evt.originalEvent;\r\n\r\n    // Don't close if the control key is being held\r\n    if (originalEvent && originalEvent.ctrlKey) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('close', {\r\n      originalEvent: originalEvent,\r\n      originalSelect2Event: evt\r\n    });\r\n  };\r\n\r\n  return CloseOnSelect;\r\n});\r\n\nS2.define('select2/i18n/en',[],function () {\r\n  // English\r\n  return {\r\n    errorLoading: function () {\r\n      return 'The results could not be loaded.';\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n\r\n      var message = 'Please delete ' + overChars + ' character';\r\n\r\n      if (overChars != 1) {\r\n        message += 's';\r\n      }\r\n\r\n      return message;\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n\r\n      var message = 'Please enter ' + remainingChars + ' or more characters';\r\n\r\n      return message;\r\n    },\r\n    loadingMore: function () {\r\n      return 'Loading more results';\r\n    },\r\n    maximumSelected: function (args) {\r\n      var message = 'You can only select ' + args.maximum + ' item';\r\n\r\n      if (args.maximum != 1) {\r\n        message += 's';\r\n      }\r\n\r\n      return message;\r\n    },\r\n    noResults: function () {\r\n      return 'No results found';\r\n    },\r\n    searching: function () {\r\n      return 'Searching';\r\n    }\r\n  };\r\n});\r\n\nS2.define('select2/defaults',[\r\n  'jquery',\r\n  'require',\r\n\r\n  './results',\r\n\r\n  './selection/single',\r\n  './selection/multiple',\r\n  './selection/placeholder',\r\n  './selection/allowClear',\r\n  './selection/search',\r\n  './selection/eventRelay',\r\n\r\n  './utils',\r\n  './translation',\r\n  './diacritics',\r\n\r\n  './data/select',\r\n  './data/array',\r\n  './data/ajax',\r\n  './data/tags',\r\n  './data/tokenizer',\r\n  './data/minimumInputLength',\r\n  './data/maximumInputLength',\r\n  './data/maximumSelectionLength',\r\n\r\n  './dropdown',\r\n  './dropdown/search',\r\n  './dropdown/hidePlaceholder',\r\n  './dropdown/infiniteScroll',\r\n  './dropdown/attachBody',\r\n  './dropdown/minimumResultsForSearch',\r\n  './dropdown/selectOnClose',\r\n  './dropdown/closeOnSelect',\r\n\r\n  './i18n/en'\r\n], function ($, require,\r\n\r\n             ResultsList,\r\n\r\n             SingleSelection, MultipleSelection, Placeholder, AllowClear,\r\n             SelectionSearch, EventRelay,\r\n\r\n             Utils, Translation, DIACRITICS,\r\n\r\n             SelectData, ArrayData, AjaxData, Tags, Tokenizer,\r\n             MinimumInputLength, MaximumInputLength, MaximumSelectionLength,\r\n\r\n             Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll,\r\n             AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect,\r\n\r\n             EnglishTranslation) {\r\n  function Defaults () {\r\n    this.reset();\r\n  }\r\n\r\n  Defaults.prototype.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MinimumInputLength\r\n        );\r\n      }\r\n\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MaximumInputLength\r\n        );\r\n      }\r\n\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MaximumSelectionLength\r\n        );\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          Tokenizer\r\n        );\r\n      }\r\n\r\n      if (options.query != null) {\r\n        var Query = require(options.amdBase + 'compat/query');\r\n\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          Query\r\n        );\r\n      }\r\n\r\n      if (options.initSelection != null) {\r\n        var InitSelection = require(options.amdBase + 'compat/initSelection');\r\n\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          InitSelection\r\n        );\r\n      }\r\n    }\r\n\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList;\r\n\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          InfiniteScroll\r\n        );\r\n      }\r\n\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          HidePlaceholder\r\n        );\r\n      }\r\n\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          SelectOnClose\r\n        );\r\n      }\r\n    }\r\n\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.multiple) {\r\n        options.dropdownAdapter = Dropdown;\r\n      } else {\r\n        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);\r\n\r\n        options.dropdownAdapter = SearchableDropdown;\r\n      }\r\n\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          MinimumResultsForSearch\r\n        );\r\n      }\r\n\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          CloseOnSelect\r\n        );\r\n      }\r\n\r\n      if (\r\n        options.dropdownCssClass != null ||\r\n        options.dropdownCss != null ||\r\n        options.adaptDropdownCssClass != null\r\n      ) {\r\n        var DropdownCSS = require(options.amdBase + 'compat/dropdownCss');\r\n\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          DropdownCSS\r\n        );\r\n      }\r\n\r\n      options.dropdownAdapter = Utils.Decorate(\r\n        options.dropdownAdapter,\r\n        AttachBody\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      }\r\n\r\n      // Add the placeholder mixin if a placeholder was specified\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          Placeholder\r\n        );\r\n      }\r\n\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          AllowClear\r\n        );\r\n      }\r\n\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          SelectionSearch\r\n        );\r\n      }\r\n\r\n      if (\r\n        options.containerCssClass != null ||\r\n        options.containerCss != null ||\r\n        options.adaptContainerCssClass != null\r\n      ) {\r\n        var ContainerCSS = require(options.amdBase + 'compat/containerCss');\r\n\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          ContainerCSS\r\n        );\r\n      }\r\n\r\n      options.selectionAdapter = Utils.Decorate(\r\n        options.selectionAdapter,\r\n        EventRelay\r\n      );\r\n    }\r\n\r\n    if (typeof options.language === 'string') {\r\n      // Check if the language is specified with a region\r\n      if (options.language.indexOf('-') > 0) {\r\n        // Extract the region information if it is included\r\n        var languageParts = options.language.split('-');\r\n        var baseLanguage = languageParts[0];\r\n\r\n        options.language = [options.language, baseLanguage];\r\n      } else {\r\n        options.language = [options.language];\r\n      }\r\n    }\r\n\r\n    if ($.isArray(options.language)) {\r\n      var languages = new Translation();\r\n      options.language.push('en');\r\n\r\n      var languageNames = options.language;\r\n\r\n      for (var l = 0; l < languageNames.length; l++) {\r\n        var name = languageNames[l];\r\n        var language = {};\r\n\r\n        try {\r\n          // Try to load it with the original name\r\n          language = Translation.loadPath(name);\r\n        } catch (e) {\r\n          try {\r\n            // If we couldn't load it, check if it wasn't the full path\r\n            name = this.defaults.amdLanguageBase + name;\r\n            language = Translation.loadPath(name);\r\n          } catch (ex) {\r\n            // The translation could not be loaded at all. Sometimes this is\r\n            // because of a configuration problem, other times this can be\r\n            // because of how Select2 helps load all possible translation files.\r\n            if (options.debug && window.console && console.warn) {\r\n              console.warn(\r\n                'Select2: The language file for \"' + name + '\" could not be ' +\r\n                'automatically loaded. A fallback will be used instead.'\r\n              );\r\n            }\r\n\r\n            continue;\r\n          }\r\n        }\r\n\r\n        languages.extend(language);\r\n      }\r\n\r\n      options.translations = languages;\r\n    } else {\r\n      var baseTranslation = Translation.loadPath(\r\n        this.defaults.amdLanguageBase + 'en'\r\n      );\r\n      var customTranslation = new Translation(options.language);\r\n\r\n      customTranslation.extend(baseTranslation);\r\n\r\n      options.translations = customTranslation;\r\n    }\r\n\r\n    return options;\r\n  };\r\n\r\n  Defaults.prototype.reset = function () {\r\n    function stripDiacritics (text) {\r\n      // Used 'uni range + named function' from http://jsperf.com/diacritics/18\r\n      function match(a) {\r\n        return DIACRITICS[a] || a;\r\n      }\r\n\r\n      return text.replace(/[^\\u0000-\\u007E]/g, match);\r\n    }\r\n\r\n    function matcher (params, data) {\r\n      // Always return the object if there is nothing to compare\r\n      if ($.trim(params.term) === '') {\r\n        return data;\r\n      }\r\n\r\n      // Do a recursive check for options with children\r\n      if (data.children && data.children.length > 0) {\r\n        // Clone the data object if there are children\r\n        // This is required as we modify the object to remove any non-matches\r\n        var match = $.extend(true, {}, data);\r\n\r\n        // Check each child of the option\r\n        for (var c = data.children.length - 1; c >= 0; c--) {\r\n          var child = data.children[c];\r\n\r\n          var matches = matcher(params, child);\r\n\r\n          // If there wasn't a match, remove the object in the array\r\n          if (matches == null) {\r\n            match.children.splice(c, 1);\r\n          }\r\n        }\r\n\r\n        // If any children matched, return the new object\r\n        if (match.children.length > 0) {\r\n          return match;\r\n        }\r\n\r\n        // If there were no matching children, check just the plain object\r\n        return matcher(params, match);\r\n      }\r\n\r\n      var original = stripDiacritics(data.text).toUpperCase();\r\n      var term = stripDiacritics(params.term).toUpperCase();\r\n\r\n      // Check if the text contains the term\r\n      if (original.indexOf(term) > -1) {\r\n        return data;\r\n      }\r\n\r\n      // If it doesn't contain the term, don't return anything\r\n      return null;\r\n    }\r\n\r\n    this.defaults = {\r\n      amdBase: './',\r\n      amdLanguageBase: './i18n/',\r\n      closeOnSelect: true,\r\n      debug: false,\r\n      dropdownAutoWidth: false,\r\n      escapeMarkup: Utils.escapeMarkup,\r\n      language: EnglishTranslation,\r\n      matcher: matcher,\r\n      minimumInputLength: 0,\r\n      maximumInputLength: 0,\r\n      maximumSelectionLength: 0,\r\n      minimumResultsForSearch: 0,\r\n      selectOnClose: false,\r\n      sorter: function (data) {\r\n        return data;\r\n      },\r\n      templateResult: function (result) {\r\n        return result.text;\r\n      },\r\n      templateSelection: function (selection) {\r\n        return selection.text;\r\n      },\r\n      theme: 'default',\r\n      width: 'resolve'\r\n    };\r\n  };\r\n\r\n  Defaults.prototype.set = function (key, value) {\r\n    var camelKey = $.camelCase(key);\r\n\r\n    var data = {};\r\n    data[camelKey] = value;\r\n\r\n    var convertedData = Utils._convertData(data);\r\n\r\n    $.extend(this.defaults, convertedData);\r\n  };\r\n\r\n  var defaults = new Defaults();\r\n\r\n  return defaults;\r\n});\r\n\nS2.define('select2/options',[\r\n  'require',\r\n  'jquery',\r\n  './defaults',\r\n  './utils'\r\n], function (require, $, Defaults, Utils) {\r\n  function Options (options, $element) {\r\n    this.options = options;\r\n\r\n    if ($element != null) {\r\n      this.fromElement($element);\r\n    }\r\n\r\n    this.options = Defaults.apply(this.options);\r\n\r\n    if ($element && $element.is('input')) {\r\n      var InputCompat = require(this.get('amdBase') + 'compat/inputData');\r\n\r\n      this.options.dataAdapter = Utils.Decorate(\r\n        this.options.dataAdapter,\r\n        InputCompat\r\n      );\r\n    }\r\n  }\r\n\r\n  Options.prototype.fromElement = function ($e) {\r\n    var excludedData = ['select2'];\r\n\r\n    if (this.options.multiple == null) {\r\n      this.options.multiple = $e.prop('multiple');\r\n    }\r\n\r\n    if (this.options.disabled == null) {\r\n      this.options.disabled = $e.prop('disabled');\r\n    }\r\n\r\n    if (this.options.language == null) {\r\n      if ($e.prop('lang')) {\r\n        this.options.language = $e.prop('lang').toLowerCase();\r\n      } else if ($e.closest('[lang]').prop('lang')) {\r\n        this.options.language = $e.closest('[lang]').prop('lang');\r\n      }\r\n    }\r\n\r\n    if (this.options.dir == null) {\r\n      if ($e.prop('dir')) {\r\n        this.options.dir = $e.prop('dir');\r\n      } else if ($e.closest('[dir]').prop('dir')) {\r\n        this.options.dir = $e.closest('[dir]').prop('dir');\r\n      } else {\r\n        this.options.dir = 'ltr';\r\n      }\r\n    }\r\n\r\n    $e.prop('disabled', this.options.disabled);\r\n    $e.prop('multiple', this.options.multiple);\r\n\r\n    if ($e.data('select2Tags')) {\r\n      if (this.options.debug && window.console && console.warn) {\r\n        console.warn(\r\n          'Select2: The `data-select2-tags` attribute has been changed to ' +\r\n          'use the `data-data` and `data-tags=\"true\"` attributes and will be ' +\r\n          'removed in future versions of Select2.'\r\n        );\r\n      }\r\n\r\n      $e.data('data', $e.data('select2Tags'));\r\n      $e.data('tags', true);\r\n    }\r\n\r\n    if ($e.data('ajaxUrl')) {\r\n      if (this.options.debug && window.console && console.warn) {\r\n        console.warn(\r\n          'Select2: The `data-ajax-url` attribute has been changed to ' +\r\n          '`data-ajax--url` and support for the old attribute will be removed' +\r\n          ' in future versions of Select2.'\r\n        );\r\n      }\r\n\r\n      $e.attr('ajax--url', $e.data('ajaxUrl'));\r\n      $e.data('ajax--url', $e.data('ajaxUrl'));\r\n    }\r\n\r\n    var dataset = {};\r\n\r\n    // Prefer the element's `dataset` attribute if it exists\r\n    // jQuery 1.x does not correctly handle data attributes with multiple dashes\r\n    if ($.fn.jquery && $.fn.jquery.substr(0, 2) == '1.' && $e[0].dataset) {\r\n      dataset = $.extend(true, {}, $e[0].dataset, $e.data());\r\n    } else {\r\n      dataset = $e.data();\r\n    }\r\n\r\n    var data = $.extend(true, {}, dataset);\r\n\r\n    data = Utils._convertData(data);\r\n\r\n    for (var key in data) {\r\n      if ($.inArray(key, excludedData) > -1) {\r\n        continue;\r\n      }\r\n\r\n      if ($.isPlainObject(this.options[key])) {\r\n        $.extend(this.options[key], data[key]);\r\n      } else {\r\n        this.options[key] = data[key];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  Options.prototype.get = function (key) {\r\n    return this.options[key];\r\n  };\r\n\r\n  Options.prototype.set = function (key, val) {\r\n    this.options[key] = val;\r\n  };\r\n\r\n  return Options;\r\n});\r\n\nS2.define('select2/core',[\r\n  'jquery',\r\n  './options',\r\n  './utils',\r\n  './keys'\r\n], function ($, Options, Utils, KEYS) {\r\n  var Select2 = function ($element, options) {\r\n    if ($element.data('select2') != null) {\r\n      $element.data('select2').destroy();\r\n    }\r\n\r\n    this.$element = $element;\r\n\r\n    this.id = this._generateId($element);\r\n\r\n    options = options || {};\r\n\r\n    this.options = new Options(options, $element);\r\n\r\n    Select2.__super__.constructor.call(this);\r\n\r\n    // Set up the tabindex\r\n\r\n    var tabindex = $element.attr('tabindex') || 0;\r\n    $element.data('old-tabindex', tabindex);\r\n    $element.attr('tabindex', '-1');\r\n\r\n    // Set up containers and adapters\r\n\r\n    var DataAdapter = this.options.get('dataAdapter');\r\n    this.dataAdapter = new DataAdapter($element, this.options);\r\n\r\n    var $container = this.render();\r\n\r\n    this._placeContainer($container);\r\n\r\n    var SelectionAdapter = this.options.get('selectionAdapter');\r\n    this.selection = new SelectionAdapter($element, this.options);\r\n    this.$selection = this.selection.render();\r\n\r\n    this.selection.position(this.$selection, $container);\r\n\r\n    var DropdownAdapter = this.options.get('dropdownAdapter');\r\n    this.dropdown = new DropdownAdapter($element, this.options);\r\n    this.$dropdown = this.dropdown.render();\r\n\r\n    this.dropdown.position(this.$dropdown, $container);\r\n\r\n    var ResultsAdapter = this.options.get('resultsAdapter');\r\n    this.results = new ResultsAdapter($element, this.options, this.dataAdapter);\r\n    this.$results = this.results.render();\r\n\r\n    this.results.position(this.$results, this.$dropdown);\r\n\r\n    // Bind events\r\n\r\n    var self = this;\r\n\r\n    // Bind the container to all of the adapters\r\n    this._bindAdapters();\r\n\r\n    // Register any DOM event handlers\r\n    this._registerDomEvents();\r\n\r\n    // Register any internal event handlers\r\n    this._registerDataEvents();\r\n    this._registerSelectionEvents();\r\n    this._registerDropdownEvents();\r\n    this._registerResultsEvents();\r\n    this._registerEvents();\r\n\r\n    // Set the initial state\r\n    this.dataAdapter.current(function (initialData) {\r\n      self.trigger('selection:update', {\r\n        data: initialData\r\n      });\r\n    });\r\n\r\n    // Hide the original select\r\n    $element.addClass('select2-hidden-accessible');\r\n    $element.attr('aria-hidden', 'true');\r\n\r\n    // Synchronize any monitored attributes\r\n    this._syncAttributes();\r\n\r\n    $element.data('select2', this);\r\n  };\r\n\r\n  Utils.Extend(Select2, Utils.Observable);\r\n\r\n  Select2.prototype._generateId = function ($element) {\r\n    var id = '';\r\n\r\n    if ($element.attr('id') != null) {\r\n      id = $element.attr('id');\r\n    } else if ($element.attr('name') != null) {\r\n      id = $element.attr('name') + '-' + Utils.generateChars(2);\r\n    } else {\r\n      id = Utils.generateChars(4);\r\n    }\r\n\r\n    id = id.replace(/(:|\\.|\\[|\\]|,)/g, '');\r\n    id = 'select2-' + id;\r\n\r\n    return id;\r\n  };\r\n\r\n  Select2.prototype._placeContainer = function ($container) {\r\n    $container.insertAfter(this.$element);\r\n\r\n    var width = this._resolveWidth(this.$element, this.options.get('width'));\r\n\r\n    if (width != null) {\r\n      $container.css('width', width);\r\n    }\r\n  };\r\n\r\n  Select2.prototype._resolveWidth = function ($element, method) {\r\n    var WIDTH = /^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;\r\n\r\n    if (method == 'resolve') {\r\n      var styleWidth = this._resolveWidth($element, 'style');\r\n\r\n      if (styleWidth != null) {\r\n        return styleWidth;\r\n      }\r\n\r\n      return this._resolveWidth($element, 'element');\r\n    }\r\n\r\n    if (method == 'element') {\r\n      var elementWidth = $element.outerWidth(false);\r\n\r\n      if (elementWidth <= 0) {\r\n        return 'auto';\r\n      }\r\n\r\n      return elementWidth + 'px';\r\n    }\r\n\r\n    if (method == 'style') {\r\n      var style = $element.attr('style');\r\n\r\n      if (typeof(style) !== 'string') {\r\n        return null;\r\n      }\r\n\r\n      var attrs = style.split(';');\r\n\r\n      for (var i = 0, l = attrs.length; i < l; i = i + 1) {\r\n        var attr = attrs[i].replace(/\\s/g, '');\r\n        var matches = attr.match(WIDTH);\r\n\r\n        if (matches !== null && matches.length >= 1) {\r\n          return matches[1];\r\n        }\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    return method;\r\n  };\r\n\r\n  Select2.prototype._bindAdapters = function () {\r\n    this.dataAdapter.bind(this, this.$container);\r\n    this.selection.bind(this, this.$container);\r\n\r\n    this.dropdown.bind(this, this.$container);\r\n    this.results.bind(this, this.$container);\r\n  };\r\n\r\n  Select2.prototype._registerDomEvents = function () {\r\n    var self = this;\r\n\r\n    this.$element.on('change.select2', function () {\r\n      self.dataAdapter.current(function (data) {\r\n        self.trigger('selection:update', {\r\n          data: data\r\n        });\r\n      });\r\n    });\r\n\r\n    this.$element.on('focus.select2', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this._syncA = Utils.bind(this._syncAttributes, this);\r\n    this._syncS = Utils.bind(this._syncSubtree, this);\r\n\r\n    if (this.$element[0].attachEvent) {\r\n      this.$element[0].attachEvent('onpropertychange', this._syncA);\r\n    }\r\n\r\n    var observer = window.MutationObserver ||\r\n      window.WebKitMutationObserver ||\r\n      window.MozMutationObserver\r\n    ;\r\n\r\n    if (observer != null) {\r\n      this._observer = new observer(function (mutations) {\r\n        $.each(mutations, self._syncA);\r\n        $.each(mutations, self._syncS);\r\n      });\r\n      this._observer.observe(this.$element[0], {\r\n        attributes: true,\r\n        childList: true,\r\n        subtree: false\r\n      });\r\n    } else if (this.$element[0].addEventListener) {\r\n      this.$element[0].addEventListener(\r\n        'DOMAttrModified',\r\n        self._syncA,\r\n        false\r\n      );\r\n      this.$element[0].addEventListener(\r\n        'DOMNodeInserted',\r\n        self._syncS,\r\n        false\r\n      );\r\n      this.$element[0].addEventListener(\r\n        'DOMNodeRemoved',\r\n        self._syncS,\r\n        false\r\n      );\r\n    }\r\n  };\r\n\r\n  Select2.prototype._registerDataEvents = function () {\r\n    var self = this;\r\n\r\n    this.dataAdapter.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerSelectionEvents = function () {\r\n    var self = this;\r\n    var nonRelayEvents = ['toggle', 'focus'];\r\n\r\n    this.selection.on('toggle', function () {\r\n      self.toggleDropdown();\r\n    });\r\n\r\n    this.selection.on('focus', function (params) {\r\n      self.focus(params);\r\n    });\r\n\r\n    this.selection.on('*', function (name, params) {\r\n      if ($.inArray(name, nonRelayEvents) !== -1) {\r\n        return;\r\n      }\r\n\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerDropdownEvents = function () {\r\n    var self = this;\r\n\r\n    this.dropdown.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerResultsEvents = function () {\r\n    var self = this;\r\n\r\n    this.results.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerEvents = function () {\r\n    var self = this;\r\n\r\n    this.on('open', function () {\r\n      self.$container.addClass('select2-container--open');\r\n    });\r\n\r\n    this.on('close', function () {\r\n      self.$container.removeClass('select2-container--open');\r\n    });\r\n\r\n    this.on('enable', function () {\r\n      self.$container.removeClass('select2-container--disabled');\r\n    });\r\n\r\n    this.on('disable', function () {\r\n      self.$container.addClass('select2-container--disabled');\r\n    });\r\n\r\n    this.on('blur', function () {\r\n      self.$container.removeClass('select2-container--focus');\r\n    });\r\n\r\n    this.on('query', function (params) {\r\n      if (!self.isOpen()) {\r\n        self.trigger('open', {});\r\n      }\r\n\r\n      this.dataAdapter.query(params, function (data) {\r\n        self.trigger('results:all', {\r\n          data: data,\r\n          query: params\r\n        });\r\n      });\r\n    });\r\n\r\n    this.on('query:append', function (params) {\r\n      this.dataAdapter.query(params, function (data) {\r\n        self.trigger('results:append', {\r\n          data: data,\r\n          query: params\r\n        });\r\n      });\r\n    });\r\n\r\n    this.on('keypress', function (evt) {\r\n      var key = evt.which;\r\n\r\n      if (self.isOpen()) {\r\n        if (key === KEYS.ESC || key === KEYS.TAB ||\r\n            (key === KEYS.UP && evt.altKey)) {\r\n          self.close();\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.ENTER) {\r\n          self.trigger('results:select', {});\r\n\r\n          evt.preventDefault();\r\n        } else if ((key === KEYS.SPACE && evt.ctrlKey)) {\r\n          self.trigger('results:toggle', {});\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.UP) {\r\n          self.trigger('results:previous', {});\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.DOWN) {\r\n          self.trigger('results:next', {});\r\n\r\n          evt.preventDefault();\r\n        }\r\n      } else {\r\n        if (key === KEYS.ENTER || key === KEYS.SPACE ||\r\n            (key === KEYS.DOWN && evt.altKey)) {\r\n          self.open();\r\n\r\n          evt.preventDefault();\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  Select2.prototype._syncAttributes = function () {\r\n    this.options.set('disabled', this.$element.prop('disabled'));\r\n\r\n    if (this.options.get('disabled')) {\r\n      if (this.isOpen()) {\r\n        this.close();\r\n      }\r\n\r\n      this.trigger('disable', {});\r\n    } else {\r\n      this.trigger('enable', {});\r\n    }\r\n  };\r\n\r\n  Select2.prototype._syncSubtree = function (evt, mutations) {\r\n    var changed = false;\r\n    var self = this;\r\n\r\n    // Ignore any mutation events raised for elements that aren't options or\r\n    // optgroups. This handles the case when the select element is destroyed\r\n    if (\r\n      evt && evt.target && (\r\n        evt.target.nodeName !== 'OPTION' && evt.target.nodeName !== 'OPTGROUP'\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (!mutations) {\r\n      // If mutation events aren't supported, then we can only assume that the\r\n      // change affected the selections\r\n      changed = true;\r\n    } else if (mutations.addedNodes && mutations.addedNodes.length > 0) {\r\n      for (var n = 0; n < mutations.addedNodes.length; n++) {\r\n        var node = mutations.addedNodes[n];\r\n\r\n        if (node.selected) {\r\n          changed = true;\r\n        }\r\n      }\r\n    } else if (mutations.removedNodes && mutations.removedNodes.length > 0) {\r\n      changed = true;\r\n    }\r\n\r\n    // Only re-pull the data if we think there is a change\r\n    if (changed) {\r\n      this.dataAdapter.current(function (currentData) {\r\n        self.trigger('selection:update', {\r\n          data: currentData\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Override the trigger method to automatically trigger pre-events when\r\n   * there are events that can be prevented.\r\n   */\r\n  Select2.prototype.trigger = function (name, args) {\r\n    var actualTrigger = Select2.__super__.trigger;\r\n    var preTriggerMap = {\r\n      'open': 'opening',\r\n      'close': 'closing',\r\n      'select': 'selecting',\r\n      'unselect': 'unselecting'\r\n    };\r\n\r\n    if (args === undefined) {\r\n      args = {};\r\n    }\r\n\r\n    if (name in preTriggerMap) {\r\n      var preTriggerName = preTriggerMap[name];\r\n      var preTriggerArgs = {\r\n        prevented: false,\r\n        name: name,\r\n        args: args\r\n      };\r\n\r\n      actualTrigger.call(this, preTriggerName, preTriggerArgs);\r\n\r\n      if (preTriggerArgs.prevented) {\r\n        args.prevented = true;\r\n\r\n        return;\r\n      }\r\n    }\r\n\r\n    actualTrigger.call(this, name, args);\r\n  };\r\n\r\n  Select2.prototype.toggleDropdown = function () {\r\n    if (this.options.get('disabled')) {\r\n      return;\r\n    }\r\n\r\n    if (this.isOpen()) {\r\n      this.close();\r\n    } else {\r\n      this.open();\r\n    }\r\n  };\r\n\r\n  Select2.prototype.open = function () {\r\n    if (this.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('query', {});\r\n  };\r\n\r\n  Select2.prototype.close = function () {\r\n    if (!this.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('close', {});\r\n  };\r\n\r\n  Select2.prototype.isOpen = function () {\r\n    return this.$container.hasClass('select2-container--open');\r\n  };\r\n\r\n  Select2.prototype.hasFocus = function () {\r\n    return this.$container.hasClass('select2-container--focus');\r\n  };\r\n\r\n  Select2.prototype.focus = function (data) {\r\n    // No need to re-trigger focus events if we are already focused\r\n    if (this.hasFocus()) {\r\n      return;\r\n    }\r\n\r\n    this.$container.addClass('select2-container--focus');\r\n    this.trigger('focus', {});\r\n  };\r\n\r\n  Select2.prototype.enable = function (args) {\r\n    if (this.options.get('debug') && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: The `select2(\"enable\")` method has been deprecated and will' +\r\n        ' be removed in later Select2 versions. Use $element.prop(\"disabled\")' +\r\n        ' instead.'\r\n      );\r\n    }\r\n\r\n    if (args == null || args.length === 0) {\r\n      args = [true];\r\n    }\r\n\r\n    var disabled = !args[0];\r\n\r\n    this.$element.prop('disabled', disabled);\r\n  };\r\n\r\n  Select2.prototype.data = function () {\r\n    if (this.options.get('debug') &&\r\n        arguments.length > 0 && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: Data can no longer be set using `select2(\"data\")`. You ' +\r\n        'should consider setting the value instead using `$element.val()`.'\r\n      );\r\n    }\r\n\r\n    var data = [];\r\n\r\n    this.dataAdapter.current(function (currentData) {\r\n      data = currentData;\r\n    });\r\n\r\n    return data;\r\n  };\r\n\r\n  Select2.prototype.val = function (args) {\r\n    if (this.options.get('debug') && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: The `select2(\"val\")` method has been deprecated and will be' +\r\n        ' removed in later Select2 versions. Use $element.val() instead.'\r\n      );\r\n    }\r\n\r\n    if (args == null || args.length === 0) {\r\n      return this.$element.val();\r\n    }\r\n\r\n    var newVal = args[0];\r\n\r\n    if ($.isArray(newVal)) {\r\n      newVal = $.map(newVal, function (obj) {\r\n        return obj.toString();\r\n      });\r\n    }\r\n\r\n    this.$element.val(newVal).trigger('change');\r\n  };\r\n\r\n  Select2.prototype.destroy = function () {\r\n    this.$container.remove();\r\n\r\n    if (this.$element[0].detachEvent) {\r\n      this.$element[0].detachEvent('onpropertychange', this._syncA);\r\n    }\r\n\r\n    if (this._observer != null) {\r\n      this._observer.disconnect();\r\n      this._observer = null;\r\n    } else if (this.$element[0].removeEventListener) {\r\n      this.$element[0]\r\n        .removeEventListener('DOMAttrModified', this._syncA, false);\r\n      this.$element[0]\r\n        .removeEventListener('DOMNodeInserted', this._syncS, false);\r\n      this.$element[0]\r\n        .removeEventListener('DOMNodeRemoved', this._syncS, false);\r\n    }\r\n\r\n    this._syncA = null;\r\n    this._syncS = null;\r\n\r\n    this.$element.off('.select2');\r\n    this.$element.attr('tabindex', this.$element.data('old-tabindex'));\r\n\r\n    this.$element.removeClass('select2-hidden-accessible');\r\n    this.$element.attr('aria-hidden', 'false');\r\n    this.$element.removeData('select2');\r\n\r\n    this.dataAdapter.destroy();\r\n    this.selection.destroy();\r\n    this.dropdown.destroy();\r\n    this.results.destroy();\r\n\r\n    this.dataAdapter = null;\r\n    this.selection = null;\r\n    this.dropdown = null;\r\n    this.results = null;\r\n  };\r\n\r\n  Select2.prototype.render = function () {\r\n    var $container = $(\r\n      '<span class=\"select2 select2-container\">' +\r\n        '<span class=\"selection\"></span>' +\r\n        '<span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span>' +\r\n      '</span>'\r\n    );\r\n\r\n    $container.attr('dir', this.options.get('dir'));\r\n\r\n    this.$container = $container;\r\n\r\n    this.$container.addClass('select2-container--' + this.options.get('theme'));\r\n\r\n    $container.data('element', this.$element);\r\n\r\n    return $container;\r\n  };\r\n\r\n  return Select2;\r\n});\r\n\nS2.define('jquery-mousewheel',[\r\n  'jquery'\r\n], function ($) {\r\n  // Used to shim jQuery.mousewheel for non-full builds.\r\n  return $;\r\n});\r\n\nS2.define('jquery.select2',[\r\n  'jquery',\r\n  'jquery-mousewheel',\r\n\r\n  './select2/core',\r\n  './select2/defaults'\r\n], function ($, _, Select2, Defaults) {\r\n  if ($.fn.select2 == null) {\r\n    // All methods that should return the element\r\n    var thisMethods = ['open', 'close', 'destroy'];\r\n\r\n    $.fn.select2 = function (options) {\r\n      options = options || {};\r\n\r\n      if (typeof options === 'object') {\r\n        this.each(function () {\r\n          var instanceOptions = $.extend(true, {}, options);\r\n\r\n          var instance = new Select2($(this), instanceOptions);\r\n        });\r\n\r\n        return this;\r\n      } else if (typeof options === 'string') {\r\n        var ret;\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n        this.each(function () {\r\n          var instance = $(this).data('select2');\r\n\r\n          if (instance == null && window.console && console.error) {\r\n            console.error(\r\n              'The select2(\\'' + options + '\\') method was called on an ' +\r\n              'element that is not using Select2.'\r\n            );\r\n          }\r\n\r\n          ret = instance[options].apply(instance, args);\r\n        });\r\n\r\n        // Check if we should be returning `this`\r\n        if ($.inArray(options, thisMethods) > -1) {\r\n          return this;\r\n        }\r\n\r\n        return ret;\r\n      } else {\r\n        throw new Error('Invalid arguments for Select2: ' + options);\r\n      }\r\n    };\r\n  }\r\n\r\n  if ($.fn.select2.defaults == null) {\r\n    $.fn.select2.defaults = Defaults;\r\n  }\r\n\r\n  return Select2;\r\n});\r\n\n  // Return the AMD loader configuration so it can be used outside of this file\r\n  return {\r\n    define: S2.define,\r\n    require: S2.require\r\n  };\r\n}());\r\n\r\n  // Autoload the jQuery bindings\r\n  // We know that all of the modules exist above this, so we're safe\r\n  var select2 = S2.require('jquery.select2');\r\n\r\n  // Hold the AMD module references on the jQuery function that was just loaded\r\n  // This allows Select2 to use the internal loader outside of this file, such\r\n  // as in the language files.\r\n  jQuery.fn.select2.amd = S2;\r\n\r\n  // Return the Select2 instance for anyone who is importing it.\r\n  return select2;\r\n}));\r\n"

/***/ }

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNWI5ZDAxYjcxMjllMDNlMzBkMDEiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzYy90dXRvbXZjLnRzIiwid2VicGFjazovLy8uL3NyYy9sZXNzL3R1dG9tdmMubGVzcyIsIndlYnBhY2s6Ly8vLi9+L3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzPzQ4NWYiLCJ3ZWJwYWNrOi8vLy4vfi9zY3JpcHQtbG9hZGVyL2FkZFNjcmlwdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3RDQSxjQUFhO0FBQ2IscUJBQU8sRUFBc0IsQ0FBQztBQUM5QixnQkFBZTtBQUNmLHFCQUFPLEVBQW1DLENBQUM7QUFFM0MsRUFBQyxVQUFXLENBQUM7S0FFWixDQUFDLENBQUUsUUFBUSxDQUFFLENBQUMsS0FBSyxDQUFFO1NBRXBCLG1CQUFtQjtTQUNuQixDQUFDLENBQUUsZ0NBQWdDLENBQUUsQ0FBQyxJQUFJLENBQUU7YUFFM0MsQ0FBQyxDQUFFLElBQUksQ0FBRSxDQUFDLE9BQU8sQ0FBRSxDQUFDLENBQUUsSUFBSSxDQUFFLENBQUMsSUFBSSxFQUFFLENBQUUsQ0FBQztTQUN2QyxDQUFDLENBQUUsQ0FBQztLQUNMLENBQUMsQ0FBRSxDQUFDO0FBQ0wsRUFBQyxDQUFDLENBQUUsTUFBTSxDQUFFLENBQUM7Ozs7Ozs7O0FDZmIsMEM7Ozs7Ozs7QUNBQSxtUjs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QyxnQ0FBZ0MsU0FBUyxpREFBaUQsa0dBQWtHLGtHQUFrRyxpR0FBaUcsU0FBUywrQkFBK0IsMkJBQTJCLDBDQUEwQywyRUFBMkUsbUVBQW1FLG1EQUFtRCw0Q0FBNEMsdUNBQXVDLGlDQUFpQyxnQ0FBZ0MsK0JBQStCLG9DQUFvQyw4QkFBOEIsNkJBQTZCLDRCQUE0QixRQUFRLGtEQUFrRCw4T0FBOE8sNERBQTRELHlDQUF5Qyx3RkFBd0Ysc0RBQXNELDhCQUE4QixRQUFRLHlCQUF5QixLQUFLLEVBQUUsd0VBQXdFLDJFQUEyRSxLQUFLLEVBQUUsMktBQTJLLGlDQUFpQyw0R0FBNEcsK0NBQStDLGtDQUFrQyxnREFBZ0QsbUNBQW1DLHFEQUFxRCxXQUFXLHVFQUF1RSxhQUFhLEVBQUUsNEJBQTRCLFdBQVcsd0NBQXdDLG9CQUFvQixnRUFBZ0UsdUNBQXVDLHFEQUFxRCw0RUFBNEUsdUxBQXVMLGVBQWUsZ0VBQWdFLGFBQWEsRUFBRSxnSEFBZ0gsMEJBQTBCLGFBQWEsMkJBQTJCLFdBQVcsT0FBTyx5RUFBeUUsV0FBVyxVQUFVLE9BQU8sOENBQThDLHlDQUF5QyxPQUFPLHlCQUF5QixLQUFLLEVBQUUsbUdBQW1HLDZEQUE2RCxLQUFLLElBQUksa0tBQWtLLDRPQUE0Tyw2RkFBNkYsS0FBSyxHQUFHLEsiLCJmaWxlIjoidHV0b212Yy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgNWI5ZDAxYjcxMjllMDNlMzBkMDFcbiAqKi8iLCIvLyBDU1MgLyBMRVNTXG5pbXBvcnQgXCIuLi9sZXNzL3R1dG9tdmMubGVzc1wiO1xuLy8gRGVwZW5kZW5jaWVzXG5pbXBvcnQgXCJzY3JpcHQhc2VsZWN0Mi9kaXN0L2pzL3NlbGVjdDIuanNcIjtcblxuKGZ1bmN0aW9uICggJCApXG57XG5cdCQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uICgpXG5cdHtcblx0XHQvLyBTZWxlY3QyRm9ybUlucHV0XG5cdFx0JCggXCIudHV0b212Yy1mb3JtLWVsZW1lbnQgLnNlbGVjdDJcIiApLmVhY2goIGZ1bmN0aW9uICgpXG5cdFx0e1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoICQoIHRoaXMgKS5kYXRhKCkgKTtcblx0XHR9ICk7XG5cdH0gKTtcbn0pKCBqUXVlcnkgKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy90c2MvdHV0b212Yy50c1xuICoqLyIsIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9sZXNzL3R1dG9tdmMubGVzc1xuICoqIG1vZHVsZSBpZCA9IDcxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJyZXF1aXJlKFwiISEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3NjcmlwdC1sb2FkZXIvYWRkU2NyaXB0LmpzXCIpKHJlcXVpcmUoXCIhIS9Vc2Vycy9qb2hhbm5lc2J1dm5hcy9EZXZlbG9wbWVudC9QSFAvdHV0b212Yy9ub2RlX21vZHVsZXMvcmF3LWxvYWRlci9pbmRleC5qcyEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtbG9hZGVyL2luZGV4LmpzIS9Vc2Vycy9qb2hhbm5lc2J1dm5hcy9EZXZlbG9wbWVudC9QSFAvdHV0b212Yy9ub2RlX21vZHVsZXMvc2VsZWN0Mi9kaXN0L2pzL3NlbGVjdDIuanNcIikrXCJcXG5cXG4vLyBTQ1JJUFQtTE9BREVSIEZPT1RFUlxcbi8vIyBzb3VyY2VVUkw9c2NyaXB0Oi8vL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwLWxvYWRlci9pbmRleC5qcyEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzXCIpXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc2NyaXB0LWxvYWRlciEuL34vc2VsZWN0Mi9kaXN0L2pzL3NlbGVjdDIuanNcbiAqKiBtb2R1bGUgaWQgPSA3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzcmMpIHtcclxuXHRpZiAodHlwZW9mIGV4ZWNTY3JpcHQgIT09IFwidW5kZWZpbmVkXCIpXHJcblx0XHRleGVjU2NyaXB0KHNyYyk7XHJcblx0ZWxzZVxyXG5cdFx0ZXZhbC5jYWxsKG51bGwsIHNyYyk7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc2NyaXB0LWxvYWRlci9hZGRTY3JpcHQuanNcbiAqKiBtb2R1bGUgaWQgPSA3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIi8qIVxcclxcbiAqIFNlbGVjdDIgNC4wLjNcXHJcXG4gKiBodHRwczovL3NlbGVjdDIuZ2l0aHViLmlvXFxyXFxuICpcXHJcXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcXHJcXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc2VsZWN0Mi9zZWxlY3QyL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWRcXHJcXG4gKi9cXHJcXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcXHJcXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcXHJcXG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxcclxcbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XFxyXFxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xcclxcbiAgICAvLyBOb2RlL0NvbW1vbkpTXFxyXFxuICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xcclxcbiAgfSBlbHNlIHtcXHJcXG4gICAgLy8gQnJvd3NlciBnbG9iYWxzXFxyXFxuICAgIGZhY3RvcnkoalF1ZXJ5KTtcXHJcXG4gIH1cXHJcXG59KGZ1bmN0aW9uIChqUXVlcnkpIHtcXHJcXG4gIC8vIFRoaXMgaXMgbmVlZGVkIHNvIHdlIGNhbiBjYXRjaCB0aGUgQU1EIGxvYWRlciBjb25maWd1cmF0aW9uIGFuZCB1c2UgaXRcXHJcXG4gIC8vIFRoZSBpbm5lciBmaWxlIHNob3VsZCBiZSB3cmFwcGVkIChieSBgYmFubmVyLnN0YXJ0LmpzYCkgaW4gYSBmdW5jdGlvbiB0aGF0XFxyXFxuICAvLyByZXR1cm5zIHRoZSBBTUQgbG9hZGVyIHJlZmVyZW5jZXMuXFxyXFxuICB2YXIgUzIgPVxcclxcbihmdW5jdGlvbiAoKSB7XFxyXFxuICAvLyBSZXN0b3JlIHRoZSBTZWxlY3QyIEFNRCBsb2FkZXIgc28gaXQgY2FuIGJlIHVzZWRcXHJcXG4gIC8vIE5lZWRlZCBtb3N0bHkgaW4gdGhlIGxhbmd1YWdlIGZpbGVzLCB3aGVyZSB0aGUgbG9hZGVyIGlzIG5vdCBpbnNlcnRlZFxcclxcbiAgaWYgKGpRdWVyeSAmJiBqUXVlcnkuZm4gJiYgalF1ZXJ5LmZuLnNlbGVjdDIgJiYgalF1ZXJ5LmZuLnNlbGVjdDIuYW1kKSB7XFxyXFxuICAgIHZhciBTMiA9IGpRdWVyeS5mbi5zZWxlY3QyLmFtZDtcXHJcXG4gIH1cXHJcXG52YXIgUzI7KGZ1bmN0aW9uICgpIHsgaWYgKCFTMiB8fCAhUzIucmVxdWlyZWpzKSB7XFxuaWYgKCFTMikgeyBTMiA9IHt9OyB9IGVsc2UgeyByZXF1aXJlID0gUzI7IH1cXG4vKipcXG4gKiBAbGljZW5zZSBhbG1vbmQgMC4zLjEgQ29weXJpZ2h0IChjKSAyMDExLTIwMTQsIFRoZSBEb2pvIEZvdW5kYXRpb24gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cXG4gKiBBdmFpbGFibGUgdmlhIHRoZSBNSVQgb3IgbmV3IEJTRCBsaWNlbnNlLlxcbiAqIHNlZTogaHR0cDovL2dpdGh1Yi5jb20vanJidXJrZS9hbG1vbmQgZm9yIGRldGFpbHNcXG4gKi9cXG4vL0dvaW5nIHNsb3BweSB0byBhdm9pZCAndXNlIHN0cmljdCcgc3RyaW5nIGNvc3QsIGJ1dCBzdHJpY3QgcHJhY3RpY2VzIHNob3VsZFxcbi8vYmUgZm9sbG93ZWQuXFxuLypqc2xpbnQgc2xvcHB5OiB0cnVlICovXFxuLypnbG9iYWwgc2V0VGltZW91dDogZmFsc2UgKi9cXG5cXG52YXIgcmVxdWlyZWpzLCByZXF1aXJlLCBkZWZpbmU7XFxuKGZ1bmN0aW9uICh1bmRlZikge1xcbiAgICB2YXIgbWFpbiwgcmVxLCBtYWtlTWFwLCBoYW5kbGVycyxcXG4gICAgICAgIGRlZmluZWQgPSB7fSxcXG4gICAgICAgIHdhaXRpbmcgPSB7fSxcXG4gICAgICAgIGNvbmZpZyA9IHt9LFxcbiAgICAgICAgZGVmaW5pbmcgPSB7fSxcXG4gICAgICAgIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXFxuICAgICAgICBhcHMgPSBbXS5zbGljZSxcXG4gICAgICAgIGpzU3VmZml4UmVnRXhwID0gL1xcXFwuanMkLztcXG5cXG4gICAgZnVuY3Rpb24gaGFzUHJvcChvYmosIHByb3ApIHtcXG4gICAgICAgIHJldHVybiBoYXNPd24uY2FsbChvYmosIHByb3ApO1xcbiAgICB9XFxuXFxuICAgIC8qKlxcbiAgICAgKiBHaXZlbiBhIHJlbGF0aXZlIG1vZHVsZSBuYW1lLCBsaWtlIC4vc29tZXRoaW5nLCBub3JtYWxpemUgaXQgdG9cXG4gICAgICogYSByZWFsIG5hbWUgdGhhdCBjYW4gYmUgbWFwcGVkIHRvIGEgcGF0aC5cXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIHJlbGF0aXZlIG5hbWVcXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGJhc2VOYW1lIGEgcmVhbCBuYW1lIHRoYXQgdGhlIG5hbWUgYXJnIGlzIHJlbGF0aXZlXFxuICAgICAqIHRvLlxcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBub3JtYWxpemVkIG5hbWVcXG4gICAgICovXFxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZShuYW1lLCBiYXNlTmFtZSkge1xcbiAgICAgICAgdmFyIG5hbWVQYXJ0cywgbmFtZVNlZ21lbnQsIG1hcFZhbHVlLCBmb3VuZE1hcCwgbGFzdEluZGV4LFxcbiAgICAgICAgICAgIGZvdW5kSSwgZm91bmRTdGFyTWFwLCBzdGFySSwgaSwgaiwgcGFydCxcXG4gICAgICAgICAgICBiYXNlUGFydHMgPSBiYXNlTmFtZSAmJiBiYXNlTmFtZS5zcGxpdChcXFwiL1xcXCIpLFxcbiAgICAgICAgICAgIG1hcCA9IGNvbmZpZy5tYXAsXFxuICAgICAgICAgICAgc3Rhck1hcCA9IChtYXAgJiYgbWFwWycqJ10pIHx8IHt9O1xcblxcbiAgICAgICAgLy9BZGp1c3QgYW55IHJlbGF0aXZlIHBhdGhzLlxcbiAgICAgICAgaWYgKG5hbWUgJiYgbmFtZS5jaGFyQXQoMCkgPT09IFxcXCIuXFxcIikge1xcbiAgICAgICAgICAgIC8vSWYgaGF2ZSBhIGJhc2UgbmFtZSwgdHJ5IHRvIG5vcm1hbGl6ZSBhZ2FpbnN0IGl0LFxcbiAgICAgICAgICAgIC8vb3RoZXJ3aXNlLCBhc3N1bWUgaXQgaXMgYSB0b3AtbGV2ZWwgcmVxdWlyZSB0aGF0IHdpbGxcXG4gICAgICAgICAgICAvL2JlIHJlbGF0aXZlIHRvIGJhc2VVcmwgaW4gdGhlIGVuZC5cXG4gICAgICAgICAgICBpZiAoYmFzZU5hbWUpIHtcXG4gICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3BsaXQoJy8nKTtcXG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gbmFtZS5sZW5ndGggLSAxO1xcblxcbiAgICAgICAgICAgICAgICAvLyBOb2RlIC5qcyBhbGxvd2FuY2U6XFxuICAgICAgICAgICAgICAgIGlmIChjb25maWcubm9kZUlkQ29tcGF0ICYmIGpzU3VmZml4UmVnRXhwLnRlc3QobmFtZVtsYXN0SW5kZXhdKSkge1xcbiAgICAgICAgICAgICAgICAgICAgbmFtZVtsYXN0SW5kZXhdID0gbmFtZVtsYXN0SW5kZXhdLnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTtcXG4gICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICAvL0xvcCBvZmYgdGhlIGxhc3QgcGFydCBvZiBiYXNlUGFydHMsIHNvIHRoYXQgLiBtYXRjaGVzIHRoZVxcbiAgICAgICAgICAgICAgICAvL1xcXCJkaXJlY3RvcnlcXFwiIGFuZCBub3QgbmFtZSBvZiB0aGUgYmFzZU5hbWUncyBtb2R1bGUuIEZvciBpbnN0YW5jZSxcXG4gICAgICAgICAgICAgICAgLy9iYXNlTmFtZSBvZiBcXFwib25lL3R3by90aHJlZVxcXCIsIG1hcHMgdG8gXFxcIm9uZS90d28vdGhyZWUuanNcXFwiLCBidXQgd2VcXG4gICAgICAgICAgICAgICAgLy93YW50IHRoZSBkaXJlY3RvcnksIFxcXCJvbmUvdHdvXFxcIiBmb3IgdGhpcyBub3JtYWxpemF0aW9uLlxcbiAgICAgICAgICAgICAgICBuYW1lID0gYmFzZVBhcnRzLnNsaWNlKDAsIGJhc2VQYXJ0cy5sZW5ndGggLSAxKS5jb25jYXQobmFtZSk7XFxuXFxuICAgICAgICAgICAgICAgIC8vc3RhcnQgdHJpbURvdHNcXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG5hbWUubGVuZ3RoOyBpICs9IDEpIHtcXG4gICAgICAgICAgICAgICAgICAgIHBhcnQgPSBuYW1lW2ldO1xcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgPT09IFxcXCIuXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuc3BsaWNlKGksIDEpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydCA9PT0gXFxcIi4uXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAxICYmIChuYW1lWzJdID09PSAnLi4nIHx8IG5hbWVbMF0gPT09ICcuLicpKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRW5kIG9mIHRoZSBsaW5lLiBLZWVwIGF0IGxlYXN0IG9uZSBub24tZG90XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcGF0aCBzZWdtZW50IGF0IHRoZSBmcm9udCBzbyBpdCBjYW4gYmUgbWFwcGVkXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29ycmVjdGx5IHRvIGRpc2suIE90aGVyd2lzZSwgdGhlcmUgaXMgbGlrZWx5XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbm8gcGF0aCBtYXBwaW5nIGZvciBhIHBhdGggc3RhcnRpbmcgd2l0aCAnLi4nLlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RoaXMgY2FuIHN0aWxsIGZhaWwsIGJ1dCBjYXRjaGVzIHRoZSBtb3N0IHJlYXNvbmFibGVcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91c2VzIG9mIC4uXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA+IDApIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5zcGxpY2UoaSAtIDEsIDIpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpIC09IDI7XFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIC8vZW5kIHRyaW1Eb3RzXFxuXFxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLmpvaW4oXFxcIi9cXFwiKTtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUuaW5kZXhPZignLi8nKSA9PT0gMCkge1xcbiAgICAgICAgICAgICAgICAvLyBObyBiYXNlTmFtZSwgc28gdGhpcyBpcyBJRCBpcyByZXNvbHZlZCByZWxhdGl2ZVxcbiAgICAgICAgICAgICAgICAvLyB0byBiYXNlVXJsLCBwdWxsIG9mZiB0aGUgbGVhZGluZyBkb3QuXFxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygyKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvL0FwcGx5IG1hcCBjb25maWcgaWYgYXZhaWxhYmxlLlxcbiAgICAgICAgaWYgKChiYXNlUGFydHMgfHwgc3Rhck1hcCkgJiYgbWFwKSB7XFxuICAgICAgICAgICAgbmFtZVBhcnRzID0gbmFtZS5zcGxpdCgnLycpO1xcblxcbiAgICAgICAgICAgIGZvciAoaSA9IG5hbWVQYXJ0cy5sZW5ndGg7IGkgPiAwOyBpIC09IDEpIHtcXG4gICAgICAgICAgICAgICAgbmFtZVNlZ21lbnQgPSBuYW1lUGFydHMuc2xpY2UoMCwgaSkuam9pbihcXFwiL1xcXCIpO1xcblxcbiAgICAgICAgICAgICAgICBpZiAoYmFzZVBhcnRzKSB7XFxuICAgICAgICAgICAgICAgICAgICAvL0ZpbmQgdGhlIGxvbmdlc3QgYmFzZU5hbWUgc2VnbWVudCBtYXRjaCBpbiB0aGUgY29uZmlnLlxcbiAgICAgICAgICAgICAgICAgICAgLy9TbywgZG8gam9pbnMgb24gdGhlIGJpZ2dlc3QgdG8gc21hbGxlc3QgbGVuZ3RocyBvZiBiYXNlUGFydHMuXFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBiYXNlUGFydHMubGVuZ3RoOyBqID4gMDsgaiAtPSAxKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWUgPSBtYXBbYmFzZVBhcnRzLnNsaWNlKDAsIGopLmpvaW4oJy8nKV07XFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9iYXNlTmFtZSBzZWdtZW50IGhhcyAgY29uZmlnLCBmaW5kIGlmIGl0IGhhcyBvbmUgZm9yXFxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIG5hbWUuXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFZhbHVlKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlID0gbWFwVmFsdWVbbmFtZVNlZ21lbnRdO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTWF0Y2gsIHVwZGF0ZSBuYW1lIHRvIHRoZSBuZXcgdmFsdWUuXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1hcCA9IG1hcFZhbHVlO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gaTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgICAgIGlmIChmb3VuZE1hcCkge1xcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgLy9DaGVjayBmb3IgYSBzdGFyIG1hcCBtYXRjaCwgYnV0IGp1c3QgaG9sZCBvbiB0byBpdCxcXG4gICAgICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBhIHNob3J0ZXIgc2VnbWVudCBtYXRjaCBsYXRlciBpbiBhIG1hdGNoaW5nXFxuICAgICAgICAgICAgICAgIC8vY29uZmlnLCB0aGVuIGZhdm9yIG92ZXIgdGhpcyBzdGFyIG1hcC5cXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZFN0YXJNYXAgJiYgc3Rhck1hcCAmJiBzdGFyTWFwW25hbWVTZWdtZW50XSkge1xcbiAgICAgICAgICAgICAgICAgICAgZm91bmRTdGFyTWFwID0gc3Rhck1hcFtuYW1lU2VnbWVudF07XFxuICAgICAgICAgICAgICAgICAgICBzdGFySSA9IGk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgaWYgKCFmb3VuZE1hcCAmJiBmb3VuZFN0YXJNYXApIHtcXG4gICAgICAgICAgICAgICAgZm91bmRNYXAgPSBmb3VuZFN0YXJNYXA7XFxuICAgICAgICAgICAgICAgIGZvdW5kSSA9IHN0YXJJO1xcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICBpZiAoZm91bmRNYXApIHtcXG4gICAgICAgICAgICAgICAgbmFtZVBhcnRzLnNwbGljZSgwLCBmb3VuZEksIGZvdW5kTWFwKTtcXG4gICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVQYXJ0cy5qb2luKCcvJyk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgcmV0dXJuIG5hbWU7XFxuICAgIH1cXG5cXG4gICAgZnVuY3Rpb24gbWFrZVJlcXVpcmUocmVsTmFtZSwgZm9yY2VTeW5jKSB7XFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICAgIC8vQSB2ZXJzaW9uIG9mIGEgcmVxdWlyZSBmdW5jdGlvbiB0aGF0IHBhc3NlcyBhIG1vZHVsZU5hbWVcXG4gICAgICAgICAgICAvL3ZhbHVlIGZvciBpdGVtcyB0aGF0IG1heSBuZWVkIHRvXFxuICAgICAgICAgICAgLy9sb29rIHVwIHBhdGhzIHJlbGF0aXZlIHRvIHRoZSBtb2R1bGVOYW1lXFxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcHMuY2FsbChhcmd1bWVudHMsIDApO1xcblxcbiAgICAgICAgICAgIC8vSWYgZmlyc3QgYXJnIGlzIG5vdCByZXF1aXJlKCdzdHJpbmcnKSwgYW5kIHRoZXJlIGlzIG9ubHlcXG4gICAgICAgICAgICAvL29uZSBhcmcsIGl0IGlzIHRoZSBhcnJheSBmb3JtIHdpdGhvdXQgYSBjYWxsYmFjay4gSW5zZXJ0XFxuICAgICAgICAgICAgLy9hIG51bGwgc28gdGhhdCB0aGUgZm9sbG93aW5nIGNvbmNhdCBpcyBjb3JyZWN0LlxcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycgJiYgYXJncy5sZW5ndGggPT09IDEpIHtcXG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKG51bGwpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICByZXR1cm4gcmVxLmFwcGx5KHVuZGVmLCBhcmdzLmNvbmNhdChbcmVsTmFtZSwgZm9yY2VTeW5jXSkpO1xcbiAgICAgICAgfTtcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiBtYWtlTm9ybWFsaXplKHJlbE5hbWUpIHtcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkge1xcbiAgICAgICAgICAgIHJldHVybiBub3JtYWxpemUobmFtZSwgcmVsTmFtZSk7XFxuICAgICAgICB9O1xcbiAgICB9XFxuXFxuICAgIGZ1bmN0aW9uIG1ha2VMb2FkKGRlcE5hbWUpIHtcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcXG4gICAgICAgICAgICBkZWZpbmVkW2RlcE5hbWVdID0gdmFsdWU7XFxuICAgICAgICB9O1xcbiAgICB9XFxuXFxuICAgIGZ1bmN0aW9uIGNhbGxEZXAobmFtZSkge1xcbiAgICAgICAgaWYgKGhhc1Byb3Aod2FpdGluZywgbmFtZSkpIHtcXG4gICAgICAgICAgICB2YXIgYXJncyA9IHdhaXRpbmdbbmFtZV07XFxuICAgICAgICAgICAgZGVsZXRlIHdhaXRpbmdbbmFtZV07XFxuICAgICAgICAgICAgZGVmaW5pbmdbbmFtZV0gPSB0cnVlO1xcbiAgICAgICAgICAgIG1haW4uYXBwbHkodW5kZWYsIGFyZ3MpO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgaWYgKCFoYXNQcm9wKGRlZmluZWQsIG5hbWUpICYmICFoYXNQcm9wKGRlZmluaW5nLCBuYW1lKSkge1xcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gJyArIG5hbWUpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIGRlZmluZWRbbmFtZV07XFxuICAgIH1cXG5cXG4gICAgLy9UdXJucyBhIHBsdWdpbiFyZXNvdXJjZSB0byBbcGx1Z2luLCByZXNvdXJjZV1cXG4gICAgLy93aXRoIHRoZSBwbHVnaW4gYmVpbmcgdW5kZWZpbmVkIGlmIHRoZSBuYW1lXFxuICAgIC8vZGlkIG5vdCBoYXZlIGEgcGx1Z2luIHByZWZpeC5cXG4gICAgZnVuY3Rpb24gc3BsaXRQcmVmaXgobmFtZSkge1xcbiAgICAgICAgdmFyIHByZWZpeCxcXG4gICAgICAgICAgICBpbmRleCA9IG5hbWUgPyBuYW1lLmluZGV4T2YoJyEnKSA6IC0xO1xcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcXG4gICAgICAgICAgICBwcmVmaXggPSBuYW1lLnN1YnN0cmluZygwLCBpbmRleCk7XFxuICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKGluZGV4ICsgMSwgbmFtZS5sZW5ndGgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIFtwcmVmaXgsIG5hbWVdO1xcbiAgICB9XFxuXFxuICAgIC8qKlxcbiAgICAgKiBNYWtlcyBhIG5hbWUgbWFwLCBub3JtYWxpemluZyB0aGUgbmFtZSwgYW5kIHVzaW5nIGEgcGx1Z2luXFxuICAgICAqIGZvciBub3JtYWxpemF0aW9uIGlmIG5lY2Vzc2FyeS4gR3JhYnMgYSByZWYgdG8gcGx1Z2luXFxuICAgICAqIHRvbywgYXMgYW4gb3B0aW1pemF0aW9uLlxcbiAgICAgKi9cXG4gICAgbWFrZU1hcCA9IGZ1bmN0aW9uIChuYW1lLCByZWxOYW1lKSB7XFxuICAgICAgICB2YXIgcGx1Z2luLFxcbiAgICAgICAgICAgIHBhcnRzID0gc3BsaXRQcmVmaXgobmFtZSksXFxuICAgICAgICAgICAgcHJlZml4ID0gcGFydHNbMF07XFxuXFxuICAgICAgICBuYW1lID0gcGFydHNbMV07XFxuXFxuICAgICAgICBpZiAocHJlZml4KSB7XFxuICAgICAgICAgICAgcHJlZml4ID0gbm9ybWFsaXplKHByZWZpeCwgcmVsTmFtZSk7XFxuICAgICAgICAgICAgcGx1Z2luID0gY2FsbERlcChwcmVmaXgpO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy9Ob3JtYWxpemUgYWNjb3JkaW5nXFxuICAgICAgICBpZiAocHJlZml4KSB7XFxuICAgICAgICAgICAgaWYgKHBsdWdpbiAmJiBwbHVnaW4ubm9ybWFsaXplKSB7XFxuICAgICAgICAgICAgICAgIG5hbWUgPSBwbHVnaW4ubm9ybWFsaXplKG5hbWUsIG1ha2VOb3JtYWxpemUocmVsTmFtZSkpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIG5hbWUgPSBub3JtYWxpemUobmFtZSwgcmVsTmFtZSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBuYW1lID0gbm9ybWFsaXplKG5hbWUsIHJlbE5hbWUpO1xcbiAgICAgICAgICAgIHBhcnRzID0gc3BsaXRQcmVmaXgobmFtZSk7XFxuICAgICAgICAgICAgcHJlZml4ID0gcGFydHNbMF07XFxuICAgICAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xcbiAgICAgICAgICAgIGlmIChwcmVmaXgpIHtcXG4gICAgICAgICAgICAgICAgcGx1Z2luID0gY2FsbERlcChwcmVmaXgpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC8vVXNpbmcgcmlkaWN1bG91cyBwcm9wZXJ0eSBuYW1lcyBmb3Igc3BhY2UgcmVhc29uc1xcbiAgICAgICAgcmV0dXJuIHtcXG4gICAgICAgICAgICBmOiBwcmVmaXggPyBwcmVmaXggKyAnIScgKyBuYW1lIDogbmFtZSwgLy9mdWxsTmFtZVxcbiAgICAgICAgICAgIG46IG5hbWUsXFxuICAgICAgICAgICAgcHI6IHByZWZpeCxcXG4gICAgICAgICAgICBwOiBwbHVnaW5cXG4gICAgICAgIH07XFxuICAgIH07XFxuXFxuICAgIGZ1bmN0aW9uIG1ha2VDb25maWcobmFtZSkge1xcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcXG4gICAgICAgICAgICByZXR1cm4gKGNvbmZpZyAmJiBjb25maWcuY29uZmlnICYmIGNvbmZpZy5jb25maWdbbmFtZV0pIHx8IHt9O1xcbiAgICAgICAgfTtcXG4gICAgfVxcblxcbiAgICBoYW5kbGVycyA9IHtcXG4gICAgICAgIHJlcXVpcmU6IGZ1bmN0aW9uIChuYW1lKSB7XFxuICAgICAgICAgICAgcmV0dXJuIG1ha2VSZXF1aXJlKG5hbWUpO1xcbiAgICAgICAgfSxcXG4gICAgICAgIGV4cG9ydHM6IGZ1bmN0aW9uIChuYW1lKSB7XFxuICAgICAgICAgICAgdmFyIGUgPSBkZWZpbmVkW25hbWVdO1xcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZSAhPT0gJ3VuZGVmaW5lZCcpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIGU7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIChkZWZpbmVkW25hbWVdID0ge30pO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0sXFxuICAgICAgICBtb2R1bGU6IGZ1bmN0aW9uIChuYW1lKSB7XFxuICAgICAgICAgICAgcmV0dXJuIHtcXG4gICAgICAgICAgICAgICAgaWQ6IG5hbWUsXFxuICAgICAgICAgICAgICAgIHVyaTogJycsXFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IGRlZmluZWRbbmFtZV0sXFxuICAgICAgICAgICAgICAgIGNvbmZpZzogbWFrZUNvbmZpZyhuYW1lKVxcbiAgICAgICAgICAgIH07XFxuICAgICAgICB9XFxuICAgIH07XFxuXFxuICAgIG1haW4gPSBmdW5jdGlvbiAobmFtZSwgZGVwcywgY2FsbGJhY2ssIHJlbE5hbWUpIHtcXG4gICAgICAgIHZhciBjanNNb2R1bGUsIGRlcE5hbWUsIHJldCwgbWFwLCBpLFxcbiAgICAgICAgICAgIGFyZ3MgPSBbXSxcXG4gICAgICAgICAgICBjYWxsYmFja1R5cGUgPSB0eXBlb2YgY2FsbGJhY2ssXFxuICAgICAgICAgICAgdXNpbmdFeHBvcnRzO1xcblxcbiAgICAgICAgLy9Vc2UgbmFtZSBpZiBubyByZWxOYW1lXFxuICAgICAgICByZWxOYW1lID0gcmVsTmFtZSB8fCBuYW1lO1xcblxcbiAgICAgICAgLy9DYWxsIHRoZSBjYWxsYmFjayB0byBkZWZpbmUgdGhlIG1vZHVsZSwgaWYgbmVjZXNzYXJ5LlxcbiAgICAgICAgaWYgKGNhbGxiYWNrVHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY2FsbGJhY2tUeXBlID09PSAnZnVuY3Rpb24nKSB7XFxuICAgICAgICAgICAgLy9QdWxsIG91dCB0aGUgZGVmaW5lZCBkZXBlbmRlbmNpZXMgYW5kIHBhc3MgdGhlIG9yZGVyZWRcXG4gICAgICAgICAgICAvL3ZhbHVlcyB0byB0aGUgY2FsbGJhY2suXFxuICAgICAgICAgICAgLy9EZWZhdWx0IHRvIFtyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGVdIGlmIG5vIGRlcHNcXG4gICAgICAgICAgICBkZXBzID0gIWRlcHMubGVuZ3RoICYmIGNhbGxiYWNrLmxlbmd0aCA/IFsncmVxdWlyZScsICdleHBvcnRzJywgJ21vZHVsZSddIDogZGVwcztcXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkgKz0gMSkge1xcbiAgICAgICAgICAgICAgICBtYXAgPSBtYWtlTWFwKGRlcHNbaV0sIHJlbE5hbWUpO1xcbiAgICAgICAgICAgICAgICBkZXBOYW1lID0gbWFwLmY7XFxuXFxuICAgICAgICAgICAgICAgIC8vRmFzdCBwYXRoIENvbW1vbkpTIHN0YW5kYXJkIGRlcGVuZGVuY2llcy5cXG4gICAgICAgICAgICAgICAgaWYgKGRlcE5hbWUgPT09IFxcXCJyZXF1aXJlXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGhhbmRsZXJzLnJlcXVpcmUobmFtZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVwTmFtZSA9PT0gXFxcImV4cG9ydHNcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICAvL0NvbW1vbkpTIG1vZHVsZSBzcGVjIDEuMVxcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGhhbmRsZXJzLmV4cG9ydHMobmFtZSk7XFxuICAgICAgICAgICAgICAgICAgICB1c2luZ0V4cG9ydHMgPSB0cnVlO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlcE5hbWUgPT09IFxcXCJtb2R1bGVcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICAvL0NvbW1vbkpTIG1vZHVsZSBzcGVjIDEuMVxcbiAgICAgICAgICAgICAgICAgICAgY2pzTW9kdWxlID0gYXJnc1tpXSA9IGhhbmRsZXJzLm1vZHVsZShuYW1lKTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNQcm9wKGRlZmluZWQsIGRlcE5hbWUpIHx8XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUHJvcCh3YWl0aW5nLCBkZXBOYW1lKSB8fFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb3AoZGVmaW5pbmcsIGRlcE5hbWUpKSB7XFxuICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gY2FsbERlcChkZXBOYW1lKTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXAucCkge1xcbiAgICAgICAgICAgICAgICAgICAgbWFwLnAubG9hZChtYXAubiwgbWFrZVJlcXVpcmUocmVsTmFtZSwgdHJ1ZSksIG1ha2VMb2FkKGRlcE5hbWUpLCB7fSk7XFxuICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gZGVmaW5lZFtkZXBOYW1lXTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihuYW1lICsgJyBtaXNzaW5nICcgKyBkZXBOYW1lKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICByZXQgPSBjYWxsYmFjayA/IGNhbGxiYWNrLmFwcGx5KGRlZmluZWRbbmFtZV0sIGFyZ3MpIDogdW5kZWZpbmVkO1xcblxcbiAgICAgICAgICAgIGlmIChuYW1lKSB7XFxuICAgICAgICAgICAgICAgIC8vSWYgc2V0dGluZyBleHBvcnRzIHZpYSBcXFwibW9kdWxlXFxcIiBpcyBpbiBwbGF5LFxcbiAgICAgICAgICAgICAgICAvL2Zhdm9yIHRoYXQgb3ZlciByZXR1cm4gdmFsdWUgYW5kIGV4cG9ydHMuIEFmdGVyIHRoYXQsXFxuICAgICAgICAgICAgICAgIC8vZmF2b3IgYSBub24tdW5kZWZpbmVkIHJldHVybiB2YWx1ZSBvdmVyIGV4cG9ydHMgdXNlLlxcbiAgICAgICAgICAgICAgICBpZiAoY2pzTW9kdWxlICYmIGNqc01vZHVsZS5leHBvcnRzICE9PSB1bmRlZiAmJlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZS5leHBvcnRzICE9PSBkZWZpbmVkW25hbWVdKSB7XFxuICAgICAgICAgICAgICAgICAgICBkZWZpbmVkW25hbWVdID0gY2pzTW9kdWxlLmV4cG9ydHM7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmV0ICE9PSB1bmRlZiB8fCAhdXNpbmdFeHBvcnRzKSB7XFxuICAgICAgICAgICAgICAgICAgICAvL1VzZSB0aGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGZ1bmN0aW9uLlxcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFtuYW1lXSA9IHJldDtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gZWxzZSBpZiAobmFtZSkge1xcbiAgICAgICAgICAgIC8vTWF5IGp1c3QgYmUgYW4gb2JqZWN0IGRlZmluaXRpb24gZm9yIHRoZSBtb2R1bGUuIE9ubHlcXG4gICAgICAgICAgICAvL3dvcnJ5IGFib3V0IGRlZmluaW5nIGlmIGhhdmUgYSBtb2R1bGUgbmFtZS5cXG4gICAgICAgICAgICBkZWZpbmVkW25hbWVdID0gY2FsbGJhY2s7XFxuICAgICAgICB9XFxuICAgIH07XFxuXFxuICAgIHJlcXVpcmVqcyA9IHJlcXVpcmUgPSByZXEgPSBmdW5jdGlvbiAoZGVwcywgY2FsbGJhY2ssIHJlbE5hbWUsIGZvcmNlU3luYywgYWx0KSB7XFxuICAgICAgICBpZiAodHlwZW9mIGRlcHMgPT09IFxcXCJzdHJpbmdcXFwiKSB7XFxuICAgICAgICAgICAgaWYgKGhhbmRsZXJzW2RlcHNdKSB7XFxuICAgICAgICAgICAgICAgIC8vY2FsbGJhY2sgaW4gdGhpcyBjYXNlIGlzIHJlYWxseSByZWxOYW1lXFxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyc1tkZXBzXShjYWxsYmFjayk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC8vSnVzdCByZXR1cm4gdGhlIG1vZHVsZSB3YW50ZWQuIEluIHRoaXMgc2NlbmFyaW8sIHRoZVxcbiAgICAgICAgICAgIC8vZGVwcyBhcmcgaXMgdGhlIG1vZHVsZSBuYW1lLCBhbmQgc2Vjb25kIGFyZyAoaWYgcGFzc2VkKVxcbiAgICAgICAgICAgIC8vaXMganVzdCB0aGUgcmVsTmFtZS5cXG4gICAgICAgICAgICAvL05vcm1hbGl6ZSBtb2R1bGUgbmFtZSwgaWYgaXQgY29udGFpbnMgLiBvciAuLlxcbiAgICAgICAgICAgIHJldHVybiBjYWxsRGVwKG1ha2VNYXAoZGVwcywgY2FsbGJhY2spLmYpO1xcbiAgICAgICAgfSBlbHNlIGlmICghZGVwcy5zcGxpY2UpIHtcXG4gICAgICAgICAgICAvL2RlcHMgaXMgYSBjb25maWcgb2JqZWN0LCBub3QgYW4gYXJyYXkuXFxuICAgICAgICAgICAgY29uZmlnID0gZGVwcztcXG4gICAgICAgICAgICBpZiAoY29uZmlnLmRlcHMpIHtcXG4gICAgICAgICAgICAgICAgcmVxKGNvbmZpZy5kZXBzLCBjb25maWcuY2FsbGJhY2spO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrLnNwbGljZSkge1xcbiAgICAgICAgICAgICAgICAvL2NhbGxiYWNrIGlzIGFuIGFycmF5LCB3aGljaCBtZWFucyBpdCBpcyBhIGRlcGVuZGVuY3kgbGlzdC5cXG4gICAgICAgICAgICAgICAgLy9BZGp1c3QgYXJncyBpZiB0aGVyZSBhcmUgZGVwZW5kZW5jaWVzXFxuICAgICAgICAgICAgICAgIGRlcHMgPSBjYWxsYmFjaztcXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSByZWxOYW1lO1xcbiAgICAgICAgICAgICAgICByZWxOYW1lID0gbnVsbDtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBkZXBzID0gdW5kZWY7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy9TdXBwb3J0IHJlcXVpcmUoWydhJ10pXFxuICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9O1xcblxcbiAgICAgICAgLy9JZiByZWxOYW1lIGlzIGEgZnVuY3Rpb24sIGl0IGlzIGFuIGVycmJhY2sgaGFuZGxlcixcXG4gICAgICAgIC8vc28gcmVtb3ZlIGl0LlxcbiAgICAgICAgaWYgKHR5cGVvZiByZWxOYW1lID09PSAnZnVuY3Rpb24nKSB7XFxuICAgICAgICAgICAgcmVsTmFtZSA9IGZvcmNlU3luYztcXG4gICAgICAgICAgICBmb3JjZVN5bmMgPSBhbHQ7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvL1NpbXVsYXRlIGFzeW5jIGNhbGxiYWNrO1xcbiAgICAgICAgaWYgKGZvcmNlU3luYykge1xcbiAgICAgICAgICAgIG1haW4odW5kZWYsIGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lKTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgLy9Vc2luZyBhIG5vbi16ZXJvIHZhbHVlIGJlY2F1c2Ugb2YgY29uY2VybiBmb3Igd2hhdCBvbGQgYnJvd3NlcnNcXG4gICAgICAgICAgICAvL2RvLCBhbmQgbGF0ZXN0IGJyb3dzZXJzIFxcXCJ1cGdyYWRlXFxcIiB0byA0IGlmIGxvd2VyIHZhbHVlIGlzIHVzZWQ6XFxuICAgICAgICAgICAgLy9odHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS90aW1lcnMuaHRtbCNkb20td2luZG93dGltZXJzLXNldHRpbWVvdXQ6XFxuICAgICAgICAgICAgLy9JZiB3YW50IGEgdmFsdWUgaW1tZWRpYXRlbHksIHVzZSByZXF1aXJlKCdpZCcpIGluc3RlYWQgLS0gc29tZXRoaW5nXFxuICAgICAgICAgICAgLy90aGF0IHdvcmtzIGluIGFsbW9uZCBvbiB0aGUgZ2xvYmFsIGxldmVsLCBidXQgbm90IGd1YXJhbnRlZWQgYW5kXFxuICAgICAgICAgICAgLy91bmxpa2VseSB0byB3b3JrIGluIG90aGVyIEFNRCBpbXBsZW1lbnRhdGlvbnMuXFxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxuICAgICAgICAgICAgICAgIG1haW4odW5kZWYsIGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lKTtcXG4gICAgICAgICAgICB9LCA0KTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHJldHVybiByZXE7XFxuICAgIH07XFxuXFxuICAgIC8qKlxcbiAgICAgKiBKdXN0IGRyb3BzIHRoZSBjb25maWcgb24gdGhlIGZsb29yLCBidXQgcmV0dXJucyByZXEgaW4gY2FzZVxcbiAgICAgKiB0aGUgY29uZmlnIHJldHVybiB2YWx1ZSBpcyB1c2VkLlxcbiAgICAgKi9cXG4gICAgcmVxLmNvbmZpZyA9IGZ1bmN0aW9uIChjZmcpIHtcXG4gICAgICAgIHJldHVybiByZXEoY2ZnKTtcXG4gICAgfTtcXG5cXG4gICAgLyoqXFxuICAgICAqIEV4cG9zZSBtb2R1bGUgcmVnaXN0cnkgZm9yIGRlYnVnZ2luZyBhbmQgdG9vbGluZ1xcbiAgICAgKi9cXG4gICAgcmVxdWlyZWpzLl9kZWZpbmVkID0gZGVmaW5lZDtcXG5cXG4gICAgZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIGRlcHMsIGNhbGxiYWNrKSB7XFxuICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XFxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZWUgYWxtb25kIFJFQURNRTogaW5jb3JyZWN0IG1vZHVsZSBidWlsZCwgbm8gbW9kdWxlIG5hbWUnKTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC8vVGhpcyBtb2R1bGUgbWF5IG5vdCBoYXZlIGRlcGVuZGVuY2llc1xcbiAgICAgICAgaWYgKCFkZXBzLnNwbGljZSkge1xcbiAgICAgICAgICAgIC8vZGVwcyBpcyBub3QgYW4gYXJyYXksIHNvIHByb2JhYmx5IG1lYW5zXFxuICAgICAgICAgICAgLy9hbiBvYmplY3QgbGl0ZXJhbCBvciBmYWN0b3J5IGZ1bmN0aW9uIGZvclxcbiAgICAgICAgICAgIC8vdGhlIHZhbHVlLiBBZGp1c3QgYXJncy5cXG4gICAgICAgICAgICBjYWxsYmFjayA9IGRlcHM7XFxuICAgICAgICAgICAgZGVwcyA9IFtdO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgaWYgKCFoYXNQcm9wKGRlZmluZWQsIG5hbWUpICYmICFoYXNQcm9wKHdhaXRpbmcsIG5hbWUpKSB7XFxuICAgICAgICAgICAgd2FpdGluZ1tuYW1lXSA9IFtuYW1lLCBkZXBzLCBjYWxsYmFja107XFxuICAgICAgICB9XFxuICAgIH07XFxuXFxuICAgIGRlZmluZS5hbWQgPSB7XFxuICAgICAgICBqUXVlcnk6IHRydWVcXG4gICAgfTtcXG59KCkpO1xcblxcblMyLnJlcXVpcmVqcyA9IHJlcXVpcmVqcztTMi5yZXF1aXJlID0gcmVxdWlyZTtTMi5kZWZpbmUgPSBkZWZpbmU7XFxufVxcbn0oKSk7XFxuUzIuZGVmaW5lKFxcXCJhbG1vbmRcXFwiLCBmdW5jdGlvbigpe30pO1xcblxcbi8qIGdsb2JhbCBqUXVlcnk6ZmFsc2UsICQ6ZmFsc2UgKi9cXHJcXG5TMi5kZWZpbmUoJ2pxdWVyeScsW10sZnVuY3Rpb24gKCkge1xcclxcbiAgdmFyIF8kID0galF1ZXJ5IHx8ICQ7XFxyXFxuXFxyXFxuICBpZiAoXyQgPT0gbnVsbCAmJiBjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpIHtcXHJcXG4gICAgY29uc29sZS5lcnJvcihcXHJcXG4gICAgICAnU2VsZWN0MjogQW4gaW5zdGFuY2Ugb2YgalF1ZXJ5IG9yIGEgalF1ZXJ5LWNvbXBhdGlibGUgbGlicmFyeSB3YXMgbm90ICcgK1xcclxcbiAgICAgICdmb3VuZC4gTWFrZSBzdXJlIHRoYXQgeW91IGFyZSBpbmNsdWRpbmcgalF1ZXJ5IGJlZm9yZSBTZWxlY3QyIG9uIHlvdXIgJyArXFxyXFxuICAgICAgJ3dlYiBwYWdlLidcXHJcXG4gICAgKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIHJldHVybiBfJDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvdXRpbHMnLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIHZhciBVdGlscyA9IHt9O1xcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kID0gZnVuY3Rpb24gKENoaWxkQ2xhc3MsIFN1cGVyQ2xhc3MpIHtcXHJcXG4gICAgdmFyIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xcclxcblxcclxcbiAgICBmdW5jdGlvbiBCYXNlQ29uc3RydWN0b3IgKCkge1xcclxcbiAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBDaGlsZENsYXNzO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGtleSBpbiBTdXBlckNsYXNzKSB7XFxyXFxuICAgICAgaWYgKF9faGFzUHJvcC5jYWxsKFN1cGVyQ2xhc3MsIGtleSkpIHtcXHJcXG4gICAgICAgIENoaWxkQ2xhc3Nba2V5XSA9IFN1cGVyQ2xhc3Nba2V5XTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgQmFzZUNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IFN1cGVyQ2xhc3MucHJvdG90eXBlO1xcclxcbiAgICBDaGlsZENsYXNzLnByb3RvdHlwZSA9IG5ldyBCYXNlQ29uc3RydWN0b3IoKTtcXHJcXG4gICAgQ2hpbGRDbGFzcy5fX3N1cGVyX18gPSBTdXBlckNsYXNzLnByb3RvdHlwZTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIENoaWxkQ2xhc3M7XFxyXFxuICB9O1xcclxcblxcclxcbiAgZnVuY3Rpb24gZ2V0TWV0aG9kcyAodGhlQ2xhc3MpIHtcXHJcXG4gICAgdmFyIHByb3RvID0gdGhlQ2xhc3MucHJvdG90eXBlO1xcclxcblxcclxcbiAgICB2YXIgbWV0aG9kcyA9IFtdO1xcclxcblxcclxcbiAgICBmb3IgKHZhciBtZXRob2ROYW1lIGluIHByb3RvKSB7XFxyXFxuICAgICAgdmFyIG0gPSBwcm90b1ttZXRob2ROYW1lXTtcXHJcXG5cXHJcXG4gICAgICBpZiAodHlwZW9mIG0gIT09ICdmdW5jdGlvbicpIHtcXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAobWV0aG9kTmFtZSA9PT0gJ2NvbnN0cnVjdG9yJykge1xcclxcbiAgICAgICAgY29udGludWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIG1ldGhvZHMucHVzaChtZXRob2ROYW1lKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gbWV0aG9kcztcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkRlY29yYXRlID0gZnVuY3Rpb24gKFN1cGVyQ2xhc3MsIERlY29yYXRvckNsYXNzKSB7XFxyXFxuICAgIHZhciBkZWNvcmF0ZWRNZXRob2RzID0gZ2V0TWV0aG9kcyhEZWNvcmF0b3JDbGFzcyk7XFxyXFxuICAgIHZhciBzdXBlck1ldGhvZHMgPSBnZXRNZXRob2RzKFN1cGVyQ2xhc3MpO1xcclxcblxcclxcbiAgICBmdW5jdGlvbiBEZWNvcmF0ZWRDbGFzcyAoKSB7XFxyXFxuICAgICAgdmFyIHVuc2hpZnQgPSBBcnJheS5wcm90b3R5cGUudW5zaGlmdDtcXHJcXG5cXHJcXG4gICAgICB2YXIgYXJnQ291bnQgPSBEZWNvcmF0b3JDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IubGVuZ3RoO1xcclxcblxcclxcbiAgICAgIHZhciBjYWxsZWRDb25zdHJ1Y3RvciA9IFN1cGVyQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yO1xcclxcblxcclxcbiAgICAgIGlmIChhcmdDb3VudCA+IDApIHtcXHJcXG4gICAgICAgIHVuc2hpZnQuY2FsbChhcmd1bWVudHMsIFN1cGVyQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yKTtcXHJcXG5cXHJcXG4gICAgICAgIGNhbGxlZENvbnN0cnVjdG9yID0gRGVjb3JhdG9yQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBjYWxsZWRDb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIERlY29yYXRvckNsYXNzLmRpc3BsYXlOYW1lID0gU3VwZXJDbGFzcy5kaXNwbGF5TmFtZTtcXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gY3RyICgpIHtcXHJcXG4gICAgICB0aGlzLmNvbnN0cnVjdG9yID0gRGVjb3JhdGVkQ2xhc3M7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgRGVjb3JhdGVkQ2xhc3MucHJvdG90eXBlID0gbmV3IGN0cigpO1xcclxcblxcclxcbiAgICBmb3IgKHZhciBtID0gMDsgbSA8IHN1cGVyTWV0aG9kcy5sZW5ndGg7IG0rKykge1xcclxcbiAgICAgICAgdmFyIHN1cGVyTWV0aG9kID0gc3VwZXJNZXRob2RzW21dO1xcclxcblxcclxcbiAgICAgICAgRGVjb3JhdGVkQ2xhc3MucHJvdG90eXBlW3N1cGVyTWV0aG9kXSA9XFxyXFxuICAgICAgICAgIFN1cGVyQ2xhc3MucHJvdG90eXBlW3N1cGVyTWV0aG9kXTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgY2FsbGVkTWV0aG9kID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcXHJcXG4gICAgICAvLyBTdHViIG91dCB0aGUgb3JpZ2luYWwgbWV0aG9kIGlmIGl0J3Mgbm90IGRlY29yYXRpbmcgYW4gYWN0dWFsIG1ldGhvZFxcclxcbiAgICAgIHZhciBvcmlnaW5hbE1ldGhvZCA9IGZ1bmN0aW9uICgpIHt9O1xcclxcblxcclxcbiAgICAgIGlmIChtZXRob2ROYW1lIGluIERlY29yYXRlZENsYXNzLnByb3RvdHlwZSkge1xcclxcbiAgICAgICAgb3JpZ2luYWxNZXRob2QgPSBEZWNvcmF0ZWRDbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV07XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBkZWNvcmF0ZWRNZXRob2QgPSBEZWNvcmF0b3JDbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV07XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHZhciB1bnNoaWZ0ID0gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQ7XFxyXFxuXFxyXFxuICAgICAgICB1bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCBvcmlnaW5hbE1ldGhvZCk7XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm4gZGVjb3JhdGVkTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XFxyXFxuICAgICAgfTtcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkZWNvcmF0ZWRNZXRob2RzLmxlbmd0aDsgZCsrKSB7XFxyXFxuICAgICAgdmFyIGRlY29yYXRlZE1ldGhvZCA9IGRlY29yYXRlZE1ldGhvZHNbZF07XFxyXFxuXFxyXFxuICAgICAgRGVjb3JhdGVkQ2xhc3MucHJvdG90eXBlW2RlY29yYXRlZE1ldGhvZF0gPSBjYWxsZWRNZXRob2QoZGVjb3JhdGVkTWV0aG9kKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gRGVjb3JhdGVkQ2xhc3M7XFxyXFxuICB9O1xcclxcblxcclxcbiAgdmFyIE9ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMubGlzdGVuZXJzID0ge307XFxyXFxuICB9O1xcclxcblxcclxcbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMgfHwge307XFxyXFxuXFxyXFxuICAgIGlmIChldmVudCBpbiB0aGlzLmxpc3RlbmVycykge1xcclxcbiAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSBbY2FsbGJhY2tdO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uIChldmVudCkge1xcclxcbiAgICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XFxyXFxuICAgIHZhciBwYXJhbXMgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XFxyXFxuXFxyXFxuICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMgfHwge307XFxyXFxuXFxyXFxuICAgIC8vIFBhcmFtcyBzaG91bGQgYWx3YXlzIGNvbWUgaW4gYXMgYW4gYXJyYXlcXHJcXG4gICAgaWYgKHBhcmFtcyA9PSBudWxsKSB7XFxyXFxuICAgICAgcGFyYW1zID0gW107XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIGFyZ3VtZW50cyB0byB0aGUgZXZlbnQsIHVzZSBhIHRlbXBvcmFyeSBvYmplY3RcXHJcXG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICBwYXJhbXMucHVzaCh7fSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgLy8gU2V0IHRoZSBgX3R5cGVgIG9mIHRoZSBmaXJzdCBvYmplY3QgdG8gdGhlIGV2ZW50XFxyXFxuICAgIHBhcmFtc1swXS5fdHlwZSA9IGV2ZW50O1xcclxcblxcclxcbiAgICBpZiAoZXZlbnQgaW4gdGhpcy5saXN0ZW5lcnMpIHtcXHJcXG4gICAgICB0aGlzLmludm9rZSh0aGlzLmxpc3RlbmVyc1tldmVudF0sIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKCcqJyBpbiB0aGlzLmxpc3RlbmVycykge1xcclxcbiAgICAgIHRoaXMuaW52b2tlKHRoaXMubGlzdGVuZXJzWycqJ10sIGFyZ3VtZW50cyk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAobGlzdGVuZXJzLCBwYXJhbXMpIHtcXHJcXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xcclxcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBwYXJhbXMpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuT2JzZXJ2YWJsZSA9IE9ic2VydmFibGU7XFxyXFxuXFxyXFxuICBVdGlscy5nZW5lcmF0ZUNoYXJzID0gZnVuY3Rpb24gKGxlbmd0aCkge1xcclxcbiAgICB2YXIgY2hhcnMgPSAnJztcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xcclxcbiAgICAgIHZhciByYW5kb21DaGFyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzYpO1xcclxcbiAgICAgIGNoYXJzICs9IHJhbmRvbUNoYXIudG9TdHJpbmcoMzYpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBjaGFycztcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBVdGlscy5iaW5kID0gZnVuY3Rpb24gKGZ1bmMsIGNvbnRleHQpIHtcXHJcXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XFxyXFxuICAgIH07XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuX2NvbnZlcnREYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgZm9yICh2YXIgb3JpZ2luYWxLZXkgaW4gZGF0YSkge1xcclxcbiAgICAgIHZhciBrZXlzID0gb3JpZ2luYWxLZXkuc3BsaXQoJy0nKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgZGF0YUxldmVsID0gZGF0YTtcXHJcXG5cXHJcXG4gICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDEpIHtcXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcXHJcXG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2tdO1xcclxcblxcclxcbiAgICAgICAgLy8gTG93ZXJjYXNlIHRoZSBmaXJzdCBsZXR0ZXJcXHJcXG4gICAgICAgIC8vIEJ5IGRlZmF1bHQsIGRhc2gtc2VwYXJhdGVkIGJlY29tZXMgY2FtZWxDYXNlXFxyXFxuICAgICAgICBrZXkgPSBrZXkuc3Vic3RyaW5nKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBrZXkuc3Vic3RyaW5nKDEpO1xcclxcblxcclxcbiAgICAgICAgaWYgKCEoa2V5IGluIGRhdGFMZXZlbCkpIHtcXHJcXG4gICAgICAgICAgZGF0YUxldmVsW2tleV0gPSB7fTtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIGlmIChrID09IGtleXMubGVuZ3RoIC0gMSkge1xcclxcbiAgICAgICAgICBkYXRhTGV2ZWxba2V5XSA9IGRhdGFbb3JpZ2luYWxLZXldO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgZGF0YUxldmVsID0gZGF0YUxldmVsW2tleV07XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGRlbGV0ZSBkYXRhW29yaWdpbmFsS2V5XTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gZGF0YTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBVdGlscy5oYXNTY3JvbGwgPSBmdW5jdGlvbiAoaW5kZXgsIGVsKSB7XFxyXFxuICAgIC8vIEFkYXB0ZWQgZnJvbSB0aGUgZnVuY3Rpb24gY3JlYXRlZCBieSBAU2hhZG93U2NyaXB0ZXJcXHJcXG4gICAgLy8gYW5kIGFkYXB0ZWQgYnkgQEJpbGxCYXJyeSBvbiB0aGUgU3RhY2sgRXhjaGFuZ2UgQ29kZSBSZXZpZXcgd2Vic2l0ZS5cXHJcXG4gICAgLy8gVGhlIG9yaWdpbmFsIGNvZGUgY2FuIGJlIGZvdW5kIGF0XFxyXFxuICAgIC8vIGh0dHA6Ly9jb2RlcmV2aWV3LnN0YWNrZXhjaGFuZ2UuY29tL3EvMTMzMzhcXHJcXG4gICAgLy8gYW5kIHdhcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGggdGhlIFNpenpsZSBzZWxlY3RvciBlbmdpbmUuXFxyXFxuXFxyXFxuICAgIHZhciAkZWwgPSAkKGVsKTtcXHJcXG4gICAgdmFyIG92ZXJmbG93WCA9IGVsLnN0eWxlLm92ZXJmbG93WDtcXHJcXG4gICAgdmFyIG92ZXJmbG93WSA9IGVsLnN0eWxlLm92ZXJmbG93WTtcXHJcXG5cXHJcXG4gICAgLy9DaGVjayBib3RoIHggYW5kIHkgZGVjbGFyYXRpb25zXFxyXFxuICAgIGlmIChvdmVyZmxvd1ggPT09IG92ZXJmbG93WSAmJlxcclxcbiAgICAgICAgKG92ZXJmbG93WSA9PT0gJ2hpZGRlbicgfHwgb3ZlcmZsb3dZID09PSAndmlzaWJsZScpKSB7XFxyXFxuICAgICAgcmV0dXJuIGZhbHNlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChvdmVyZmxvd1ggPT09ICdzY3JvbGwnIHx8IG92ZXJmbG93WSA9PT0gJ3Njcm9sbCcpIHtcXHJcXG4gICAgICByZXR1cm4gdHJ1ZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gKCRlbC5pbm5lckhlaWdodCgpIDwgZWwuc2Nyb2xsSGVpZ2h0IHx8XFxyXFxuICAgICAgJGVsLmlubmVyV2lkdGgoKSA8IGVsLnNjcm9sbFdpZHRoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBVdGlscy5lc2NhcGVNYXJrdXAgPSBmdW5jdGlvbiAobWFya3VwKSB7XFxyXFxuICAgIHZhciByZXBsYWNlTWFwID0ge1xcclxcbiAgICAgICdcXFxcXFxcXCc6ICcmIzkyOycsXFxyXFxuICAgICAgJyYnOiAnJmFtcDsnLFxcclxcbiAgICAgICc8JzogJyZsdDsnLFxcclxcbiAgICAgICc+JzogJyZndDsnLFxcclxcbiAgICAgICdcXFwiJzogJyZxdW90OycsXFxyXFxuICAgICAgJ1xcXFwnJzogJyYjMzk7JyxcXHJcXG4gICAgICAnLyc6ICcmIzQ3OydcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgLy8gRG8gbm90IHRyeSB0byBlc2NhcGUgdGhlIG1hcmt1cCBpZiBpdCdzIG5vdCBhIHN0cmluZ1xcclxcbiAgICBpZiAodHlwZW9mIG1hcmt1cCAhPT0gJ3N0cmluZycpIHtcXHJcXG4gICAgICByZXR1cm4gbWFya3VwO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBTdHJpbmcobWFya3VwKS5yZXBsYWNlKC9bJjw+XFxcIidcXFxcL1xcXFxcXFxcXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcXHJcXG4gICAgICByZXR1cm4gcmVwbGFjZU1hcFttYXRjaF07XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIC8vIEFwcGVuZCBhbiBhcnJheSBvZiBqUXVlcnkgbm9kZXMgdG8gYSBnaXZlbiBlbGVtZW50LlxcclxcbiAgVXRpbHMuYXBwZW5kTWFueSA9IGZ1bmN0aW9uICgkZWxlbWVudCwgJG5vZGVzKSB7XFxyXFxuICAgIC8vIGpRdWVyeSAxLjcueCBkb2VzIG5vdCBzdXBwb3J0ICQuZm4uYXBwZW5kKCkgd2l0aCBhbiBhcnJheVxcclxcbiAgICAvLyBGYWxsIGJhY2sgdG8gYSBqUXVlcnkgb2JqZWN0IGNvbGxlY3Rpb24gdXNpbmcgJC5mbi5hZGQoKVxcclxcbiAgICBpZiAoJC5mbi5qcXVlcnkuc3Vic3RyKDAsIDMpID09PSAnMS43Jykge1xcclxcbiAgICAgIHZhciAkanFOb2RlcyA9ICQoKTtcXHJcXG5cXHJcXG4gICAgICAkLm1hcCgkbm9kZXMsIGZ1bmN0aW9uIChub2RlKSB7XFxyXFxuICAgICAgICAkanFOb2RlcyA9ICRqcU5vZGVzLmFkZChub2RlKTtcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICAkbm9kZXMgPSAkanFOb2RlcztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAkZWxlbWVudC5hcHBlbmQoJG5vZGVzKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gVXRpbHM7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3Jlc3VsdHMnLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4vdXRpbHMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBSZXN1bHRzICgkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpIHtcXHJcXG4gICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xcclxcbiAgICB0aGlzLmRhdGEgPSBkYXRhQWRhcHRlcjtcXHJcXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcXHJcXG5cXHJcXG4gICAgUmVzdWx0cy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChSZXN1bHRzLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRyZXN1bHRzID0gJChcXHJcXG4gICAgICAnPHVsIGNsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvbnNcXFwiIHJvbGU9XFxcInRyZWVcXFwiPjwvdWw+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnbXVsdGlwbGUnKSkge1xcclxcbiAgICAgICRyZXN1bHRzLmF0dHIoJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJywgJ3RydWUnKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzID0gJHJlc3VsdHM7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkcmVzdWx0cztcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5lbXB0eSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLmRpc3BsYXlNZXNzYWdlID0gZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICB2YXIgZXNjYXBlTWFya3VwID0gdGhpcy5vcHRpb25zLmdldCgnZXNjYXBlTWFya3VwJyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuY2xlYXIoKTtcXHJcXG4gICAgdGhpcy5oaWRlTG9hZGluZygpO1xcclxcblxcclxcbiAgICB2YXIgJG1lc3NhZ2UgPSAkKFxcclxcbiAgICAgICc8bGkgcm9sZT1cXFwidHJlZWl0ZW1cXFwiIGFyaWEtbGl2ZT1cXFwiYXNzZXJ0aXZlXFxcIicgK1xcclxcbiAgICAgICcgY2xhc3M9XFxcInNlbGVjdDItcmVzdWx0c19fb3B0aW9uXFxcIj48L2xpPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgdmFyIG1lc3NhZ2UgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0cmFuc2xhdGlvbnMnKS5nZXQocGFyYW1zLm1lc3NhZ2UpO1xcclxcblxcclxcbiAgICAkbWVzc2FnZS5hcHBlbmQoXFxyXFxuICAgICAgZXNjYXBlTWFya3VwKFxcclxcbiAgICAgICAgbWVzc2FnZShwYXJhbXMuYXJncylcXHJcXG4gICAgICApXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgICRtZXNzYWdlWzBdLmNsYXNzTmFtZSArPSAnIHNlbGVjdDItcmVzdWx0c19fbWVzc2FnZSc7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuYXBwZW5kKCRtZXNzYWdlKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5oaWRlTWVzc2FnZXMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuZmluZCgnLnNlbGVjdDItcmVzdWx0c19fbWVzc2FnZScpLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHRoaXMuaGlkZUxvYWRpbmcoKTtcXHJcXG5cXHJcXG4gICAgdmFyICRvcHRpb25zID0gW107XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLnJlc3VsdHMgPT0gbnVsbCB8fCBkYXRhLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuJHJlc3VsdHMuY2hpbGRyZW4oKS5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICAgIHRoaXMudHJpZ2dlcigncmVzdWx0czptZXNzYWdlJywge1xcclxcbiAgICAgICAgICBtZXNzYWdlOiAnbm9SZXN1bHRzJ1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkYXRhLnJlc3VsdHMgPSB0aGlzLnNvcnQoZGF0YS5yZXN1bHRzKTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXRhLnJlc3VsdHMubGVuZ3RoOyBkKyspIHtcXHJcXG4gICAgICB2YXIgaXRlbSA9IGRhdGEucmVzdWx0c1tkXTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJG9wdGlvbiA9IHRoaXMub3B0aW9uKGl0ZW0pO1xcclxcblxcclxcbiAgICAgICRvcHRpb25zLnB1c2goJG9wdGlvbik7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5hcHBlbmQoJG9wdGlvbnMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKCRyZXN1bHRzLCAkZHJvcGRvd24pIHtcXHJcXG4gICAgdmFyICRyZXN1bHRzQ29udGFpbmVyID0gJGRyb3Bkb3duLmZpbmQoJy5zZWxlY3QyLXJlc3VsdHMnKTtcXHJcXG4gICAgJHJlc3VsdHNDb250YWluZXIuYXBwZW5kKCRyZXN1bHRzKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgdmFyIHNvcnRlciA9IHRoaXMub3B0aW9ucy5nZXQoJ3NvcnRlcicpO1xcclxcblxcclxcbiAgICByZXR1cm4gc29ydGVyKGRhdGEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLmhpZ2hsaWdodEZpcnN0SXRlbSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRvcHRpb25zID0gdGhpcy4kcmVzdWx0c1xcclxcbiAgICAgIC5maW5kKCcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF0nKTtcXHJcXG5cXHJcXG4gICAgdmFyICRzZWxlY3RlZCA9ICRvcHRpb25zLmZpbHRlcignW2FyaWEtc2VsZWN0ZWQ9dHJ1ZV0nKTtcXHJcXG5cXHJcXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBzZWxlY3RlZCBvcHRpb25zXFxyXFxuICAgIGlmICgkc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xcclxcbiAgICAgIC8vIElmIHRoZXJlIGFyZSBzZWxlY3RlZCBvcHRpb25zLCBoaWdobGlnaHQgdGhlIGZpcnN0XFxyXFxuICAgICAgJHNlbGVjdGVkLmZpcnN0KCkudHJpZ2dlcignbW91c2VlbnRlcicpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBzZWxlY3RlZCBvcHRpb25zLCBoaWdobGlnaHQgdGhlIGZpcnN0IG9wdGlvblxcclxcbiAgICAgIC8vIGluIHRoZSBkcm9wZG93blxcclxcbiAgICAgICRvcHRpb25zLmZpcnN0KCkudHJpZ2dlcignbW91c2VlbnRlcicpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuZW5zdXJlSGlnaGxpZ2h0VmlzaWJsZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLnNldENsYXNzZXMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy5kYXRhLmN1cnJlbnQoZnVuY3Rpb24gKHNlbGVjdGVkKSB7XFxyXFxuICAgICAgdmFyIHNlbGVjdGVkSWRzID0gJC5tYXAoc2VsZWN0ZWQsIGZ1bmN0aW9uIChzKSB7XFxyXFxuICAgICAgICByZXR1cm4gcy5pZC50b1N0cmluZygpO1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHZhciAkb3B0aW9ucyA9IHNlbGYuJHJlc3VsdHNcXHJcXG4gICAgICAgIC5maW5kKCcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF0nKTtcXHJcXG5cXHJcXG4gICAgICAkb3B0aW9ucy5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHZhciAkb3B0aW9uID0gJCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBpdGVtID0gJC5kYXRhKHRoaXMsICdkYXRhJyk7XFxyXFxuXFxyXFxuICAgICAgICAvLyBpZCBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgd2hlbiBjb21wYXJpbmdcXHJcXG4gICAgICAgIHZhciBpZCA9ICcnICsgaXRlbS5pZDtcXHJcXG5cXHJcXG4gICAgICAgIGlmICgoaXRlbS5lbGVtZW50ICE9IG51bGwgJiYgaXRlbS5lbGVtZW50LnNlbGVjdGVkKSB8fFxcclxcbiAgICAgICAgICAgIChpdGVtLmVsZW1lbnQgPT0gbnVsbCAmJiAkLmluQXJyYXkoaWQsIHNlbGVjdGVkSWRzKSA+IC0xKSkge1xcclxcbiAgICAgICAgICAkb3B0aW9uLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xcclxcbiAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgJG9wdGlvbi5hdHRyKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLnNob3dMb2FkaW5nID0gZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICB0aGlzLmhpZGVMb2FkaW5nKCk7XFxyXFxuXFxyXFxuICAgIHZhciBsb2FkaW5nTW9yZSA9IHRoaXMub3B0aW9ucy5nZXQoJ3RyYW5zbGF0aW9ucycpLmdldCgnc2VhcmNoaW5nJyk7XFxyXFxuXFxyXFxuICAgIHZhciBsb2FkaW5nID0ge1xcclxcbiAgICAgIGRpc2FibGVkOiB0cnVlLFxcclxcbiAgICAgIGxvYWRpbmc6IHRydWUsXFxyXFxuICAgICAgdGV4dDogbG9hZGluZ01vcmUocGFyYW1zKVxcclxcbiAgICB9O1xcclxcbiAgICB2YXIgJGxvYWRpbmcgPSB0aGlzLm9wdGlvbihsb2FkaW5nKTtcXHJcXG4gICAgJGxvYWRpbmcuY2xhc3NOYW1lICs9ICcgbG9hZGluZy1yZXN1bHRzJztcXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5wcmVwZW5kKCRsb2FkaW5nKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5oaWRlTG9hZGluZyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5maW5kKCcubG9hZGluZy1yZXN1bHRzJykucmVtb3ZlKCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUub3B0aW9uID0gZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgdmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XFxyXFxuICAgIG9wdGlvbi5jbGFzc05hbWUgPSAnc2VsZWN0Mi1yZXN1bHRzX19vcHRpb24nO1xcclxcblxcclxcbiAgICB2YXIgYXR0cnMgPSB7XFxyXFxuICAgICAgJ3JvbGUnOiAndHJlZWl0ZW0nLFxcclxcbiAgICAgICdhcmlhLXNlbGVjdGVkJzogJ2ZhbHNlJ1xcclxcbiAgICB9O1xcclxcblxcclxcbiAgICBpZiAoZGF0YS5kaXNhYmxlZCkge1xcclxcbiAgICAgIGRlbGV0ZSBhdHRyc1snYXJpYS1zZWxlY3RlZCddO1xcclxcbiAgICAgIGF0dHJzWydhcmlhLWRpc2FibGVkJ10gPSAndHJ1ZSc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuaWQgPT0gbnVsbCkge1xcclxcbiAgICAgIGRlbGV0ZSBhdHRyc1snYXJpYS1zZWxlY3RlZCddO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLl9yZXN1bHRJZCAhPSBudWxsKSB7XFxyXFxuICAgICAgb3B0aW9uLmlkID0gZGF0YS5fcmVzdWx0SWQ7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEudGl0bGUpIHtcXHJcXG4gICAgICBvcHRpb24udGl0bGUgPSBkYXRhLnRpdGxlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XFxyXFxuICAgICAgYXR0cnMucm9sZSA9ICdncm91cCc7XFxyXFxuICAgICAgYXR0cnNbJ2FyaWEtbGFiZWwnXSA9IGRhdGEudGV4dDtcXHJcXG4gICAgICBkZWxldGUgYXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBmb3IgKHZhciBhdHRyIGluIGF0dHJzKSB7XFxyXFxuICAgICAgdmFyIHZhbCA9IGF0dHJzW2F0dHJdO1xcclxcblxcclxcbiAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xcclxcbiAgICAgIHZhciAkb3B0aW9uID0gJChvcHRpb24pO1xcclxcblxcclxcbiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0cm9uZycpO1xcclxcbiAgICAgIGxhYmVsLmNsYXNzTmFtZSA9ICdzZWxlY3QyLXJlc3VsdHNfX2dyb3VwJztcXHJcXG5cXHJcXG4gICAgICB2YXIgJGxhYmVsID0gJChsYWJlbCk7XFxyXFxuICAgICAgdGhpcy50ZW1wbGF0ZShkYXRhLCBsYWJlbCk7XFxyXFxuXFxyXFxuICAgICAgdmFyICRjaGlsZHJlbiA9IFtdO1xcclxcblxcclxcbiAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgZGF0YS5jaGlsZHJlbi5sZW5ndGg7IGMrKykge1xcclxcbiAgICAgICAgdmFyIGNoaWxkID0gZGF0YS5jaGlsZHJlbltjXTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciAkY2hpbGQgPSB0aGlzLm9wdGlvbihjaGlsZCk7XFxyXFxuXFxyXFxuICAgICAgICAkY2hpbGRyZW4ucHVzaCgkY2hpbGQpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgJGNoaWxkcmVuQ29udGFpbmVyID0gJCgnPHVsPjwvdWw+Jywge1xcclxcbiAgICAgICAgJ2NsYXNzJzogJ3NlbGVjdDItcmVzdWx0c19fb3B0aW9ucyBzZWxlY3QyLXJlc3VsdHNfX29wdGlvbnMtLW5lc3RlZCdcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICAkY2hpbGRyZW5Db250YWluZXIuYXBwZW5kKCRjaGlsZHJlbik7XFxyXFxuXFxyXFxuICAgICAgJG9wdGlvbi5hcHBlbmQobGFiZWwpO1xcclxcbiAgICAgICRvcHRpb24uYXBwZW5kKCRjaGlsZHJlbkNvbnRhaW5lcik7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdGhpcy50ZW1wbGF0ZShkYXRhLCBvcHRpb24pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgICQuZGF0YShvcHRpb24sICdkYXRhJywgZGF0YSk7XFxyXFxuXFxyXFxuICAgIHJldHVybiBvcHRpb247XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgaWQgPSBjb250YWluZXIuaWQgKyAnLXJlc3VsdHMnO1xcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzLmF0dHIoJ2lkJywgaWQpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YWxsJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuY2xlYXIoKTtcXHJcXG4gICAgICBzZWxmLmFwcGVuZChwYXJhbXMuZGF0YSk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGNvbnRhaW5lci5pc09wZW4oKSkge1xcclxcbiAgICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XFxyXFxuICAgICAgICBzZWxmLmhpZ2hsaWdodEZpcnN0SXRlbSgpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czphcHBlbmQnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5hcHBlbmQocGFyYW1zLmRhdGEpO1xcclxcblxcclxcbiAgICAgIGlmIChjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHNlbGYuc2V0Q2xhc3NlcygpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncXVlcnknLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5oaWRlTWVzc2FnZXMoKTtcXHJcXG4gICAgICBzZWxmLnNob3dMb2FkaW5nKHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBpZiAoIWNvbnRhaW5lci5pc09wZW4oKSkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBzZWxmLnNldENsYXNzZXMoKTtcXHJcXG4gICAgICBzZWxmLmhpZ2hsaWdodEZpcnN0SXRlbSgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCd1bnNlbGVjdCcsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBpZiAoIWNvbnRhaW5lci5pc09wZW4oKSkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBzZWxmLnNldENsYXNzZXMoKTtcXHJcXG4gICAgICBzZWxmLmhpZ2hsaWdodEZpcnN0SXRlbSgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdvcGVuJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIG9wZW4sIGFyaWEtZXhwZW5kZWQ9XFxcInRydWVcXFwiXFxyXFxuICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcXHJcXG4gICAgICBzZWxmLiRyZXN1bHRzLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XFxyXFxuICAgICAgc2VsZi5lbnN1cmVIaWdobGlnaHRWaXNpYmxlKCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIGNsb3NlZCwgYXJpYS1leHBlbmRlZD1cXFwiZmFsc2VcXFwiXFxyXFxuICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XFxyXFxuICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XFxyXFxuICAgICAgc2VsZi4kcmVzdWx0cy5yZW1vdmVBdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czp0b2dnbGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRoaWdobGlnaHRlZCA9IHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XFxyXFxuXFxyXFxuICAgICAgaWYgKCRoaWdobGlnaHRlZC5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgJGhpZ2hsaWdodGVkLnRyaWdnZXIoJ21vdXNldXAnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRoaWdobGlnaHRlZCA9IHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XFxyXFxuXFxyXFxuICAgICAgaWYgKCRoaWdobGlnaHRlZC5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyIGRhdGEgPSAkaGlnaGxpZ2h0ZWQuZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAgIGlmICgkaGlnaGxpZ2h0ZWQuYXR0cignYXJpYS1zZWxlY3RlZCcpID09ICd0cnVlJykge1xcclxcbiAgICAgICAgc2VsZi50cmlnZ2VyKCdjbG9zZScsIHt9KTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3QnLCB7XFxyXFxuICAgICAgICAgIGRhdGE6IGRhdGFcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpwcmV2aW91cycsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgJGhpZ2hsaWdodGVkID0gc2VsZi5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJG9wdGlvbnMgPSBzZWxmLiRyZXN1bHRzLmZpbmQoJ1thcmlhLXNlbGVjdGVkXScpO1xcclxcblxcclxcbiAgICAgIHZhciBjdXJyZW50SW5kZXggPSAkb3B0aW9ucy5pbmRleCgkaGlnaGxpZ2h0ZWQpO1xcclxcblxcclxcbiAgICAgIC8vIElmIHdlIGFyZSBhbHJlYWR5IGF0IHRlIHRvcCwgZG9uJ3QgbW92ZSBmdXJ0aGVyXFxyXFxuICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gMCkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgbmV4dEluZGV4ID0gY3VycmVudEluZGV4IC0gMTtcXHJcXG5cXHJcXG4gICAgICAvLyBJZiBub25lIGFyZSBoaWdobGlnaHRlZCwgaGlnaGxpZ2h0IHRoZSBmaXJzdFxcclxcbiAgICAgIGlmICgkaGlnaGxpZ2h0ZWQubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICBuZXh0SW5kZXggPSAwO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgJG5leHQgPSAkb3B0aW9ucy5lcShuZXh0SW5kZXgpO1xcclxcblxcclxcbiAgICAgICRuZXh0LnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgY3VycmVudE9mZnNldCA9IHNlbGYuJHJlc3VsdHMub2Zmc2V0KCkudG9wO1xcclxcbiAgICAgIHZhciBuZXh0VG9wID0gJG5leHQub2Zmc2V0KCkudG9wO1xcclxcbiAgICAgIHZhciBuZXh0T2Zmc2V0ID0gc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoKSArIChuZXh0VG9wIC0gY3VycmVudE9mZnNldCk7XFxyXFxuXFxyXFxuICAgICAgaWYgKG5leHRJbmRleCA9PT0gMCkge1xcclxcbiAgICAgICAgc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoMCk7XFxyXFxuICAgICAgfSBlbHNlIGlmIChuZXh0VG9wIC0gY3VycmVudE9mZnNldCA8IDApIHtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKG5leHRPZmZzZXQpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpuZXh0JywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSBzZWxmLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICAgIHZhciAkb3B0aW9ucyA9IHNlbGYuJHJlc3VsdHMuZmluZCgnW2FyaWEtc2VsZWN0ZWRdJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGN1cnJlbnRJbmRleCA9ICRvcHRpb25zLmluZGV4KCRoaWdobGlnaHRlZCk7XFxyXFxuXFxyXFxuICAgICAgdmFyIG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCArIDE7XFxyXFxuXFxyXFxuICAgICAgLy8gSWYgd2UgYXJlIGF0IHRoZSBsYXN0IG9wdGlvbiwgc3RheSB0aGVyZVxcclxcbiAgICAgIGlmIChuZXh0SW5kZXggPj0gJG9wdGlvbnMubGVuZ3RoKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciAkbmV4dCA9ICRvcHRpb25zLmVxKG5leHRJbmRleCk7XFxyXFxuXFxyXFxuICAgICAgJG5leHQudHJpZ2dlcignbW91c2VlbnRlcicpO1xcclxcblxcclxcbiAgICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gc2VsZi4kcmVzdWx0cy5vZmZzZXQoKS50b3AgK1xcclxcbiAgICAgICAgc2VsZi4kcmVzdWx0cy5vdXRlckhlaWdodChmYWxzZSk7XFxyXFxuICAgICAgdmFyIG5leHRCb3R0b20gPSAkbmV4dC5vZmZzZXQoKS50b3AgKyAkbmV4dC5vdXRlckhlaWdodChmYWxzZSk7XFxyXFxuICAgICAgdmFyIG5leHRPZmZzZXQgPSBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcCgpICsgbmV4dEJvdHRvbSAtIGN1cnJlbnRPZmZzZXQ7XFxyXFxuXFxyXFxuICAgICAgaWYgKG5leHRJbmRleCA9PT0gMCkge1xcclxcbiAgICAgICAgc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoMCk7XFxyXFxuICAgICAgfSBlbHNlIGlmIChuZXh0Qm90dG9tID4gY3VycmVudE9mZnNldCkge1xcclxcbiAgICAgICAgc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AobmV4dE9mZnNldCk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmZvY3VzJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHBhcmFtcy5lbGVtZW50LmFkZENsYXNzKCdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlnaGxpZ2h0ZWQnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czptZXNzYWdlJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuZGlzcGxheU1lc3NhZ2UocGFyYW1zKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGlmICgkLmZuLm1vdXNld2hlZWwpIHtcXHJcXG4gICAgICB0aGlzLiRyZXN1bHRzLm9uKCdtb3VzZXdoZWVsJywgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgIHZhciB0b3AgPSBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcCgpO1xcclxcblxcclxcbiAgICAgICAgdmFyIGJvdHRvbSA9IHNlbGYuJHJlc3VsdHMuZ2V0KDApLnNjcm9sbEhlaWdodCAtIHRvcCArIGUuZGVsdGFZO1xcclxcblxcclxcbiAgICAgICAgdmFyIGlzQXRUb3AgPSBlLmRlbHRhWSA+IDAgJiYgdG9wIC0gZS5kZWx0YVkgPD0gMDtcXHJcXG4gICAgICAgIHZhciBpc0F0Qm90dG9tID0gZS5kZWx0YVkgPCAwICYmIGJvdHRvbSA8PSBzZWxmLiRyZXN1bHRzLmhlaWdodCgpO1xcclxcblxcclxcbiAgICAgICAgaWYgKGlzQXRUb3ApIHtcXHJcXG4gICAgICAgICAgc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoMCk7XFxyXFxuXFxyXFxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBdEJvdHRvbSkge1xcclxcbiAgICAgICAgICBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcChcXHJcXG4gICAgICAgICAgICBzZWxmLiRyZXN1bHRzLmdldCgwKS5zY3JvbGxIZWlnaHQgLSBzZWxmLiRyZXN1bHRzLmhlaWdodCgpXFxyXFxuICAgICAgICAgICk7XFxyXFxuXFxyXFxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzLm9uKCdtb3VzZXVwJywgJy5zZWxlY3QyLXJlc3VsdHNfX29wdGlvblthcmlhLXNlbGVjdGVkXScsXFxyXFxuICAgICAgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKCdkYXRhJyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKCR0aGlzLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnKSA9PT0gJ3RydWUnKSB7XFxyXFxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmdldCgnbXVsdGlwbGUnKSkge1xcclxcbiAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Vuc2VsZWN0Jywge1xcclxcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2dCxcXHJcXG4gICAgICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgc2VsZi50cmlnZ2VyKCdjbG9zZScsIHt9KTtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3QnLCB7XFxyXFxuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnQsXFxyXFxuICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzLm9uKCdtb3VzZWVudGVyJywgJy5zZWxlY3QyLXJlc3VsdHNfX29wdGlvblthcmlhLXNlbGVjdGVkXScsXFxyXFxuICAgICAgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKCdkYXRhJyk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKVxcclxcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItcmVzdWx0c19fb3B0aW9uLS1oaWdobGlnaHRlZCcpO1xcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czpmb2N1cycsIHtcXHJcXG4gICAgICAgIGRhdGE6IGRhdGEsXFxyXFxuICAgICAgICBlbGVtZW50OiAkKHRoaXMpXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLmdldEhpZ2hsaWdodGVkUmVzdWx0cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRoaWdobGlnaHRlZCA9IHRoaXMuJHJlc3VsdHNcXHJcXG4gICAgLmZpbmQoJy5zZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlnaGxpZ2h0ZWQnKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRoaWdobGlnaHRlZDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLiRyZXN1bHRzLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLmVuc3VyZUhpZ2hsaWdodFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSB0aGlzLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICBpZiAoJGhpZ2hsaWdodGVkLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgJG9wdGlvbnMgPSB0aGlzLiRyZXN1bHRzLmZpbmQoJ1thcmlhLXNlbGVjdGVkXScpO1xcclxcblxcclxcbiAgICB2YXIgY3VycmVudEluZGV4ID0gJG9wdGlvbnMuaW5kZXgoJGhpZ2hsaWdodGVkKTtcXHJcXG5cXHJcXG4gICAgdmFyIGN1cnJlbnRPZmZzZXQgPSB0aGlzLiRyZXN1bHRzLm9mZnNldCgpLnRvcDtcXHJcXG4gICAgdmFyIG5leHRUb3AgPSAkaGlnaGxpZ2h0ZWQub2Zmc2V0KCkudG9wO1xcclxcbiAgICB2YXIgbmV4dE9mZnNldCA9IHRoaXMuJHJlc3VsdHMuc2Nyb2xsVG9wKCkgKyAobmV4dFRvcCAtIGN1cnJlbnRPZmZzZXQpO1xcclxcblxcclxcbiAgICB2YXIgb2Zmc2V0RGVsdGEgPSBuZXh0VG9wIC0gY3VycmVudE9mZnNldDtcXHJcXG4gICAgbmV4dE9mZnNldCAtPSAkaGlnaGxpZ2h0ZWQub3V0ZXJIZWlnaHQoZmFsc2UpICogMjtcXHJcXG5cXHJcXG4gICAgaWYgKGN1cnJlbnRJbmRleCA8PSAyKSB7XFxyXFxuICAgICAgdGhpcy4kcmVzdWx0cy5zY3JvbGxUb3AoMCk7XFxyXFxuICAgIH0gZWxzZSBpZiAob2Zmc2V0RGVsdGEgPiB0aGlzLiRyZXN1bHRzLm91dGVySGVpZ2h0KCkgfHwgb2Zmc2V0RGVsdGEgPCAwKSB7XFxyXFxuICAgICAgdGhpcy4kcmVzdWx0cy5zY3JvbGxUb3AobmV4dE9mZnNldCk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS50ZW1wbGF0ZSA9IGZ1bmN0aW9uIChyZXN1bHQsIGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0ZW1wbGF0ZVJlc3VsdCcpO1xcclxcbiAgICB2YXIgZXNjYXBlTWFya3VwID0gdGhpcy5vcHRpb25zLmdldCgnZXNjYXBlTWFya3VwJyk7XFxyXFxuXFxyXFxuICAgIHZhciBjb250ZW50ID0gdGVtcGxhdGUocmVzdWx0LCBjb250YWluZXIpO1xcclxcblxcclxcbiAgICBpZiAoY29udGVudCA9PSBudWxsKSB7XFxyXFxuICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XFxyXFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGVzY2FwZU1hcmt1cChjb250ZW50KTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICAkKGNvbnRhaW5lcikuYXBwZW5kKGNvbnRlbnQpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFJlc3VsdHM7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2tleXMnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICB2YXIgS0VZUyA9IHtcXHJcXG4gICAgQkFDS1NQQUNFOiA4LFxcclxcbiAgICBUQUI6IDksXFxyXFxuICAgIEVOVEVSOiAxMyxcXHJcXG4gICAgU0hJRlQ6IDE2LFxcclxcbiAgICBDVFJMOiAxNyxcXHJcXG4gICAgQUxUOiAxOCxcXHJcXG4gICAgRVNDOiAyNyxcXHJcXG4gICAgU1BBQ0U6IDMyLFxcclxcbiAgICBQQUdFX1VQOiAzMyxcXHJcXG4gICAgUEFHRV9ET1dOOiAzNCxcXHJcXG4gICAgRU5EOiAzNSxcXHJcXG4gICAgSE9NRTogMzYsXFxyXFxuICAgIExFRlQ6IDM3LFxcclxcbiAgICBVUDogMzgsXFxyXFxuICAgIFJJR0hUOiAzOSxcXHJcXG4gICAgRE9XTjogNDAsXFxyXFxuICAgIERFTEVURTogNDZcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gS0VZUztcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL2Jhc2UnLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4uL3V0aWxzJyxcXHJcXG4gICcuLi9rZXlzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBVdGlscywgS0VZUykge1xcclxcbiAgZnVuY3Rpb24gQmFzZVNlbGVjdGlvbiAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xcclxcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xcclxcblxcclxcbiAgICBCYXNlU2VsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKEJhc2VTZWxlY3Rpb24sIFV0aWxzLk9ic2VydmFibGUpO1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJHNlbGVjdGlvbiA9ICQoXFxyXFxuICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvblxcXCIgcm9sZT1cXFwiY29tYm9ib3hcXFwiICcgK1xcclxcbiAgICAgICcgYXJpYS1oYXNwb3B1cD1cXFwidHJ1ZVxcXCIgYXJpYS1leHBhbmRlZD1cXFwiZmFsc2VcXFwiPicgK1xcclxcbiAgICAgICc8L3NwYW4+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICB0aGlzLl90YWJpbmRleCA9IDA7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLiRlbGVtZW50LmRhdGEoJ29sZC10YWJpbmRleCcpICE9IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLl90YWJpbmRleCA9IHRoaXMuJGVsZW1lbnQuZGF0YSgnb2xkLXRhYmluZGV4Jyk7XFxyXFxuICAgIH0gZWxzZSBpZiAodGhpcy4kZWxlbWVudC5hdHRyKCd0YWJpbmRleCcpICE9IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLl90YWJpbmRleCA9IHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAkc2VsZWN0aW9uLmF0dHIoJ3RpdGxlJywgdGhpcy4kZWxlbWVudC5hdHRyKCd0aXRsZScpKTtcXHJcXG4gICAgJHNlbGVjdGlvbi5hdHRyKCd0YWJpbmRleCcsIHRoaXMuX3RhYmluZGV4KTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uID0gJHNlbGVjdGlvbjtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRzZWxlY3Rpb247XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgaWQgPSBjb250YWluZXIuaWQgKyAnLWNvbnRhaW5lcic7XFxyXFxuICAgIHZhciByZXN1bHRzSWQgPSBjb250YWluZXIuaWQgKyAnLXJlc3VsdHMnO1xcclxcblxcclxcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLm9uKCdmb2N1cycsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLnRyaWdnZXIoJ2ZvY3VzJywgZXZ0KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignYmx1cicsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLl9oYW5kbGVCbHVyKGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdrZXlwcmVzcycsIGV2dCk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGV2dC53aGljaCA9PT0gS0VZUy5TUEFDRSkge1xcclxcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmZvY3VzJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuJHNlbGVjdGlvbi5hdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCBwYXJhbXMuZGF0YS5fcmVzdWx0SWQpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdzZWxlY3Rpb246dXBkYXRlJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYudXBkYXRlKHBhcmFtcy5kYXRhKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBXaGVuIHRoZSBkcm9wZG93biBpcyBvcGVuLCBhcmlhLWV4cGFuZGVkPVxcXCJ0cnVlXFxcIlxcclxcbiAgICAgIHNlbGYuJHNlbGVjdGlvbi5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cignYXJpYS1vd25zJywgcmVzdWx0c0lkKTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLl9hdHRhY2hDbG9zZUhhbmRsZXIoY29udGFpbmVyKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgLy8gV2hlbiB0aGUgZHJvcGRvd24gaXMgY2xvc2VkLCBhcmlhLWV4cGFuZGVkPVxcXCJmYWxzZVxcXCJcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xcclxcbiAgICAgIHNlbGYuJHNlbGVjdGlvbi5yZW1vdmVBdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKTtcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24ucmVtb3ZlQXR0cignYXJpYS1vd25zJyk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmZvY3VzKCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fZGV0YWNoQ2xvc2VIYW5kbGVyKGNvbnRhaW5lcik7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2VuYWJsZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cigndGFiaW5kZXgnLCBzZWxmLl90YWJpbmRleCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2Rpc2FibGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLl9oYW5kbGVCbHVyID0gZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgZGVsYXllZCBhcyB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgdGhlIGJvZHkgd2hlbiB0aGUgdGFiXFxyXFxuICAgIC8vIGtleSBpcyBwcmVzc2VkLCBwb3NzaWJseSBhbG9uZyB3aXRoIG90aGVycy5cXHJcXG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIC8vIERvbid0IHRyaWdnZXIgYGJsdXJgIGlmIHRoZSBmb2N1cyBpcyBzdGlsbCBpbiB0aGUgc2VsZWN0aW9uXFxyXFxuICAgICAgaWYgKFxcclxcbiAgICAgICAgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT0gc2VsZi4kc2VsZWN0aW9uWzBdKSB8fFxcclxcbiAgICAgICAgKCQuY29udGFpbnMoc2VsZi4kc2VsZWN0aW9uWzBdLCBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSlcXHJcXG4gICAgICApIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdibHVyJywgZXZ0KTtcXHJcXG4gICAgfSwgMSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuX2F0dGFjaENsb3NlSGFuZGxlciA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCdtb3VzZWRvd24uc2VsZWN0Mi4nICsgY29udGFpbmVyLmlkLCBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XFxyXFxuXFxyXFxuICAgICAgdmFyICRzZWxlY3QgPSAkdGFyZ2V0LmNsb3Nlc3QoJy5zZWxlY3QyJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyICRhbGwgPSAkKCcuc2VsZWN0Mi5zZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xcclxcblxcclxcbiAgICAgICRhbGwuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xcclxcblxcclxcbiAgICAgICAgaWYgKHRoaXMgPT0gJHNlbGVjdFswXSkge1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkdGhpcy5kYXRhKCdlbGVtZW50Jyk7XFxyXFxuXFxyXFxuICAgICAgICAkZWxlbWVudC5zZWxlY3QyKCdjbG9zZScpO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5fZGV0YWNoQ2xvc2VIYW5kbGVyID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xcclxcbiAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignbW91c2Vkb3duLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUucG9zaXRpb24gPSBmdW5jdGlvbiAoJHNlbGVjdGlvbiwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgJHNlbGVjdGlvbkNvbnRhaW5lciA9ICRjb250YWluZXIuZmluZCgnLnNlbGVjdGlvbicpO1xcclxcbiAgICAkc2VsZWN0aW9uQ29udGFpbmVyLmFwcGVuZCgkc2VsZWN0aW9uKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLl9kZXRhY2hDbG9zZUhhbmRsZXIodGhpcy5jb250YWluZXIpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHRocm93IG5ldyBFcnJvcignVGhlIGB1cGRhdGVgIG1ldGhvZCBtdXN0IGJlIGRlZmluZWQgaW4gY2hpbGQgY2xhc3Nlcy4nKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQmFzZVNlbGVjdGlvbjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL3NpbmdsZScsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi9iYXNlJyxcXHJcXG4gICcuLi91dGlscycsXFxyXFxuICAnLi4va2V5cydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgQmFzZVNlbGVjdGlvbiwgVXRpbHMsIEtFWVMpIHtcXHJcXG4gIGZ1bmN0aW9uIFNpbmdsZVNlbGVjdGlvbiAoKSB7XFxyXFxuICAgIFNpbmdsZVNlbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChTaW5nbGVTZWxlY3Rpb24sIEJhc2VTZWxlY3Rpb24pO1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkc2VsZWN0aW9uID0gU2luZ2xlU2VsZWN0aW9uLl9fc3VwZXJfXy5yZW5kZXIuY2FsbCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5hZGRDbGFzcygnc2VsZWN0Mi1zZWxlY3Rpb24tLXNpbmdsZScpO1xcclxcblxcclxcbiAgICAkc2VsZWN0aW9uLmh0bWwoXFxyXFxuICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcXFwiPjwvc3Bhbj4nICtcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItc2VsZWN0aW9uX19hcnJvd1xcXCIgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIj4nICtcXHJcXG4gICAgICAgICc8YiByb2xlPVxcXCJwcmVzZW50YXRpb25cXFwiPjwvYj4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRzZWxlY3Rpb247XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIFNpbmdsZVNlbGVjdGlvbi5fX3N1cGVyX18uYmluZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcblxcclxcbiAgICB2YXIgaWQgPSBjb250YWluZXIuaWQgKyAnLWNvbnRhaW5lcic7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuYXR0cignaWQnLCBpZCk7XFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5hdHRyKCdhcmlhLWxhYmVsbGVkYnknLCBpZCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIC8vIE9ubHkgcmVzcG9uZCB0byBsZWZ0IGNsaWNrc1xcclxcbiAgICAgIGlmIChldnQud2hpY2ggIT09IDEpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCd0b2dnbGUnLCB7XFxyXFxuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnRcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgLy8gVXNlciBmb2N1c2VzIG9uIHRoZSBjb250YWluZXJcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignYmx1cicsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICAvLyBVc2VyIGV4aXRzIHRoZSBjb250YWluZXJcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgaWYgKCFjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHNlbGYuJHNlbGVjdGlvbi5mb2N1cygpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignc2VsZWN0aW9uOnVwZGF0ZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLnVwZGF0ZShwYXJhbXMuZGF0YSk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNpbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuZW1wdHkoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTaW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLmRpc3BsYXkgPSBmdW5jdGlvbiAoZGF0YSwgY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMub3B0aW9ucy5nZXQoJ3RlbXBsYXRlU2VsZWN0aW9uJyk7XFxyXFxuICAgIHZhciBlc2NhcGVNYXJrdXAgPSB0aGlzLm9wdGlvbnMuZ2V0KCdlc2NhcGVNYXJrdXAnKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIGVzY2FwZU1hcmt1cCh0ZW1wbGF0ZShkYXRhLCBjb250YWluZXIpKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTaW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdGlvbkNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgcmV0dXJuICQoJzxzcGFuPjwvc3Bhbj4nKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTaW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIHRoaXMuY2xlYXIoKTtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIHNlbGVjdGlvbiA9IGRhdGFbMF07XFxyXFxuXFxyXFxuICAgIHZhciAkcmVuZGVyZWQgPSB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpO1xcclxcbiAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5kaXNwbGF5KHNlbGVjdGlvbiwgJHJlbmRlcmVkKTtcXHJcXG5cXHJcXG4gICAgJHJlbmRlcmVkLmVtcHR5KCkuYXBwZW5kKGZvcm1hdHRlZCk7XFxyXFxuICAgICRyZW5kZXJlZC5wcm9wKCd0aXRsZScsIHNlbGVjdGlvbi50aXRsZSB8fCBzZWxlY3Rpb24udGV4dCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFNpbmdsZVNlbGVjdGlvbjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL211bHRpcGxlJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuL2Jhc2UnLFxcclxcbiAgJy4uL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBCYXNlU2VsZWN0aW9uLCBVdGlscykge1xcclxcbiAgZnVuY3Rpb24gTXVsdGlwbGVTZWxlY3Rpb24gKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIE11bHRpcGxlU2VsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKE11bHRpcGxlU2VsZWN0aW9uLCBCYXNlU2VsZWN0aW9uKTtcXHJcXG5cXHJcXG4gIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkc2VsZWN0aW9uID0gTXVsdGlwbGVTZWxlY3Rpb24uX19zdXBlcl9fLnJlbmRlci5jYWxsKHRoaXMpO1xcclxcblxcclxcbiAgICAkc2VsZWN0aW9uLmFkZENsYXNzKCdzZWxlY3QyLXNlbGVjdGlvbi0tbXVsdGlwbGUnKTtcXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5odG1sKFxcclxcbiAgICAgICc8dWwgY2xhc3M9XFxcInNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZFxcXCI+PC91bD4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkc2VsZWN0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIE11bHRpcGxlU2VsZWN0aW9uLl9fc3VwZXJfXy5iaW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCd0b2dnbGUnLCB7XFxyXFxuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnRcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbihcXHJcXG4gICAgICAnY2xpY2snLFxcclxcbiAgICAgICcuc2VsZWN0Mi1zZWxlY3Rpb25fX2Nob2ljZV9fcmVtb3ZlJyxcXHJcXG4gICAgICBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIGl0IGlzIGRpc2FibGVkXFxyXFxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmdldCgnZGlzYWJsZWQnKSkge1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICB2YXIgJHJlbW92ZSA9ICQodGhpcyk7XFxyXFxuICAgICAgICB2YXIgJHNlbGVjdGlvbiA9ICRyZW1vdmUucGFyZW50KCk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgZGF0YSA9ICRzZWxlY3Rpb24uZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAgICAgc2VsZi50cmlnZ2VyKCd1bnNlbGVjdCcsIHtcXHJcXG4gICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0LFxcclxcbiAgICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9XFxyXFxuICAgICk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgTXVsdGlwbGVTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmVtcHR5KCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgTXVsdGlwbGVTZWxlY3Rpb24ucHJvdG90eXBlLmRpc3BsYXkgPSBmdW5jdGlvbiAoZGF0YSwgY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMub3B0aW9ucy5nZXQoJ3RlbXBsYXRlU2VsZWN0aW9uJyk7XFxyXFxuICAgIHZhciBlc2NhcGVNYXJrdXAgPSB0aGlzLm9wdGlvbnMuZ2V0KCdlc2NhcGVNYXJrdXAnKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIGVzY2FwZU1hcmt1cCh0ZW1wbGF0ZShkYXRhLCBjb250YWluZXIpKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0aW9uQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJGNvbnRhaW5lciA9ICQoXFxyXFxuICAgICAgJzxsaSBjbGFzcz1cXFwic2VsZWN0Mi1zZWxlY3Rpb25fX2Nob2ljZVxcXCI+JyArXFxyXFxuICAgICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItc2VsZWN0aW9uX19jaG9pY2VfX3JlbW92ZVxcXCIgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIj4nICtcXHJcXG4gICAgICAgICAgJyZ0aW1lczsnICtcXHJcXG4gICAgICAgICc8L3NwYW4+JyArXFxyXFxuICAgICAgJzwvbGk+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICByZXR1cm4gJGNvbnRhaW5lcjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgdGhpcy5jbGVhcigpO1xcclxcblxcclxcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRzZWxlY3Rpb25zID0gW107XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciBzZWxlY3Rpb24gPSBkYXRhW2RdO1xcclxcblxcclxcbiAgICAgIHZhciAkc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb25Db250YWluZXIoKTtcXHJcXG4gICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5kaXNwbGF5KHNlbGVjdGlvbiwgJHNlbGVjdGlvbik7XFxyXFxuXFxyXFxuICAgICAgJHNlbGVjdGlvbi5hcHBlbmQoZm9ybWF0dGVkKTtcXHJcXG4gICAgICAkc2VsZWN0aW9uLnByb3AoJ3RpdGxlJywgc2VsZWN0aW9uLnRpdGxlIHx8IHNlbGVjdGlvbi50ZXh0KTtcXHJcXG5cXHJcXG4gICAgICAkc2VsZWN0aW9uLmRhdGEoJ2RhdGEnLCBzZWxlY3Rpb24pO1xcclxcblxcclxcbiAgICAgICRzZWxlY3Rpb25zLnB1c2goJHNlbGVjdGlvbik7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRyZW5kZXJlZCA9IHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJyk7XFxyXFxuXFxyXFxuICAgIFV0aWxzLmFwcGVuZE1hbnkoJHJlbmRlcmVkLCAkc2VsZWN0aW9ucyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIE11bHRpcGxlU2VsZWN0aW9uO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9zZWxlY3Rpb24vcGxhY2Vob2xkZXInLFtcXHJcXG4gICcuLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIFBsYWNlaG9sZGVyIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLm5vcm1hbGl6ZVBsYWNlaG9sZGVyKG9wdGlvbnMuZ2V0KCdwbGFjZWhvbGRlcicpKTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgUGxhY2Vob2xkZXIucHJvdG90eXBlLm5vcm1hbGl6ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKF8sIHBsYWNlaG9sZGVyKSB7XFxyXFxuICAgIGlmICh0eXBlb2YgcGxhY2Vob2xkZXIgPT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgcGxhY2Vob2xkZXIgPSB7XFxyXFxuICAgICAgICBpZDogJycsXFxyXFxuICAgICAgICB0ZXh0OiBwbGFjZWhvbGRlclxcclxcbiAgICAgIH07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFBsYWNlaG9sZGVyLnByb3RvdHlwZS5jcmVhdGVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBsYWNlaG9sZGVyKSB7XFxyXFxuICAgIHZhciAkcGxhY2Vob2xkZXIgPSB0aGlzLnNlbGVjdGlvbkNvbnRhaW5lcigpO1xcclxcblxcclxcbiAgICAkcGxhY2Vob2xkZXIuaHRtbCh0aGlzLmRpc3BsYXkocGxhY2Vob2xkZXIpKTtcXHJcXG4gICAgJHBsYWNlaG9sZGVyLmFkZENsYXNzKCdzZWxlY3QyLXNlbGVjdGlvbl9fcGxhY2Vob2xkZXInKVxcclxcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItc2VsZWN0aW9uX19jaG9pY2UnKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRwbGFjZWhvbGRlcjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBQbGFjZWhvbGRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgZGF0YSkge1xcclxcbiAgICB2YXIgc2luZ2xlUGxhY2Vob2xkZXIgPSAoXFxyXFxuICAgICAgZGF0YS5sZW5ndGggPT0gMSAmJiBkYXRhWzBdLmlkICE9IHRoaXMucGxhY2Vob2xkZXIuaWRcXHJcXG4gICAgKTtcXHJcXG4gICAgdmFyIG11bHRpcGxlU2VsZWN0aW9ucyA9IGRhdGEubGVuZ3RoID4gMTtcXHJcXG5cXHJcXG4gICAgaWYgKG11bHRpcGxlU2VsZWN0aW9ucyB8fCBzaW5nbGVQbGFjZWhvbGRlcikge1xcclxcbiAgICAgIHJldHVybiBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLmNsZWFyKCk7XFxyXFxuXFxyXFxuICAgIHZhciAkcGxhY2Vob2xkZXIgPSB0aGlzLmNyZWF0ZVBsYWNlaG9sZGVyKHRoaXMucGxhY2Vob2xkZXIpO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmFwcGVuZCgkcGxhY2Vob2xkZXIpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBQbGFjZWhvbGRlcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL2FsbG93Q2xlYXInLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4uL2tleXMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIEtFWVMpIHtcXHJcXG4gIGZ1bmN0aW9uIEFsbG93Q2xlYXIgKCkgeyB9XFxyXFxuXFxyXFxuICBBbGxvd0NsZWFyLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMucGxhY2Vob2xkZXIgPT0gbnVsbCkge1xcclxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkZWJ1ZycpICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpIHtcXHJcXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXFxyXFxuICAgICAgICAgICdTZWxlY3QyOiBUaGUgYGFsbG93Q2xlYXJgIG9wdGlvbiBzaG91bGQgYmUgdXNlZCBpbiBjb21iaW5hdGlvbiAnICtcXHJcXG4gICAgICAgICAgJ3dpdGggdGhlIGBwbGFjZWhvbGRlcmAgb3B0aW9uLidcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignbW91c2Vkb3duJywgJy5zZWxlY3QyLXNlbGVjdGlvbl9fY2xlYXInLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICAgIHNlbGYuX2hhbmRsZUNsZWFyKGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2tleXByZXNzJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYuX2hhbmRsZUtleWJvYXJkQ2xlYXIoZXZ0LCBjb250YWluZXIpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBbGxvd0NsZWFyLnByb3RvdHlwZS5faGFuZGxlQ2xlYXIgPSBmdW5jdGlvbiAoXywgZXZ0KSB7XFxyXFxuICAgIC8vIElnbm9yZSB0aGUgZXZlbnQgaWYgaXQgaXMgZGlzYWJsZWRcXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2Rpc2FibGVkJykpIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRjbGVhciA9IHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyJyk7XFxyXFxuXFxyXFxuICAgIC8vIElnbm9yZSB0aGUgZXZlbnQgaWYgbm90aGluZyBoYXMgYmVlbiBzZWxlY3RlZFxcclxcbiAgICBpZiAoJGNsZWFyLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuXFxyXFxuICAgIHZhciBkYXRhID0gJGNsZWFyLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXRhLmxlbmd0aDsgZCsrKSB7XFxyXFxuICAgICAgdmFyIHVuc2VsZWN0RGF0YSA9IHtcXHJcXG4gICAgICAgIGRhdGE6IGRhdGFbZF1cXHJcXG4gICAgICB9O1xcclxcblxcclxcbiAgICAgIC8vIFRyaWdnZXIgdGhlIGB1bnNlbGVjdGAgZXZlbnQsIHNvIHBlb3BsZSBjYW4gcHJldmVudCBpdCBmcm9tIGJlaW5nXFxyXFxuICAgICAgLy8gY2xlYXJlZC5cXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ3Vuc2VsZWN0JywgdW5zZWxlY3REYXRhKTtcXHJcXG5cXHJcXG4gICAgICAvLyBJZiB0aGUgZXZlbnQgd2FzIHByZXZlbnRlZCwgZG9uJ3QgY2xlYXIgaXQgb3V0LlxcclxcbiAgICAgIGlmICh1bnNlbGVjdERhdGEucHJldmVudGVkKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQudmFsKHRoaXMucGxhY2Vob2xkZXIuaWQpLnRyaWdnZXIoJ2NoYW5nZScpO1xcclxcblxcclxcbiAgICB0aGlzLnRyaWdnZXIoJ3RvZ2dsZScsIHt9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBbGxvd0NsZWFyLnByb3RvdHlwZS5faGFuZGxlS2V5Ym9hcmRDbGVhciA9IGZ1bmN0aW9uIChfLCBldnQsIGNvbnRhaW5lcikge1xcclxcbiAgICBpZiAoY29udGFpbmVyLmlzT3BlbigpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChldnQud2hpY2ggPT0gS0VZUy5ERUxFVEUgfHwgZXZ0LndoaWNoID09IEtFWVMuQkFDS1NQQUNFKSB7XFxyXFxuICAgICAgdGhpcy5faGFuZGxlQ2xlYXIoZXZ0KTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEFsbG93Q2xlYXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgZGF0YSk7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19wbGFjZWhvbGRlcicpLmxlbmd0aCA+IDAgfHxcXHJcXG4gICAgICAgIGRhdGEubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciAkcmVtb3ZlID0gJChcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItc2VsZWN0aW9uX19jbGVhclxcXCI+JyArXFxyXFxuICAgICAgICAnJnRpbWVzOycgK1xcclxcbiAgICAgICc8L3NwYW4+J1xcclxcbiAgICApO1xcclxcbiAgICAkcmVtb3ZlLmRhdGEoJ2RhdGEnLCBkYXRhKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5wcmVwZW5kKCRyZW1vdmUpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBBbGxvd0NsZWFyO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9zZWxlY3Rpb24vc2VhcmNoJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi91dGlscycsXFxyXFxuICAnLi4va2V5cydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMsIEtFWVMpIHtcXHJcXG4gIGZ1bmN0aW9uIFNlYXJjaCAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgdmFyICRzZWFyY2ggPSAkKFxcclxcbiAgICAgICc8bGkgY2xhc3M9XFxcInNlbGVjdDItc2VhcmNoIHNlbGVjdDItc2VhcmNoLS1pbmxpbmVcXFwiPicgK1xcclxcbiAgICAgICAgJzxpbnB1dCBjbGFzcz1cXFwic2VsZWN0Mi1zZWFyY2hfX2ZpZWxkXFxcIiB0eXBlPVxcXCJzZWFyY2hcXFwiIHRhYmluZGV4PVxcXCItMVxcXCInICtcXHJcXG4gICAgICAgICcgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiIGF1dG9jb3JyZWN0PVxcXCJvZmZcXFwiIGF1dG9jYXBpdGFsaXplPVxcXCJvZmZcXFwiJyArXFxyXFxuICAgICAgICAnIHNwZWxsY2hlY2s9XFxcImZhbHNlXFxcIiByb2xlPVxcXCJ0ZXh0Ym94XFxcIiBhcmlhLWF1dG9jb21wbGV0ZT1cXFwibGlzdFxcXCIgLz4nICtcXHJcXG4gICAgICAnPC9saT4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlYXJjaENvbnRhaW5lciA9ICRzZWFyY2g7XFxyXFxuICAgIHRoaXMuJHNlYXJjaCA9ICRzZWFyY2guZmluZCgnaW5wdXQnKTtcXHJcXG5cXHJcXG4gICAgdmFyICRyZW5kZXJlZCA9IGRlY29yYXRlZC5jYWxsKHRoaXMpO1xcclxcblxcclxcbiAgICB0aGlzLl90cmFuc2ZlclRhYkluZGV4KCk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkcmVuZGVyZWQ7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdvcGVuJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJHNlYXJjaC50cmlnZ2VyKCdmb2N1cycpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gudmFsKCcnKTtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gucmVtb3ZlQXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jyk7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnRyaWdnZXIoJ2ZvY3VzJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2VuYWJsZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fdHJhbnNmZXJUYWJJbmRleCgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJHNlYXJjaC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdmb2N1cycsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gudHJpZ2dlcignZm9jdXMnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpmb2N1cycsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2guYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgcGFyYW1zLmlkKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignZm9jdXNpbicsICcuc2VsZWN0Mi1zZWFyY2gtLWlubGluZScsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLnRyaWdnZXIoJ2ZvY3VzJywgZXZ0KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignZm9jdXNvdXQnLCAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi5faGFuZGxlQmx1cihldnQpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLm9uKCdrZXlkb3duJywgJy5zZWxlY3QyLXNlYXJjaC0taW5saW5lJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLnRyaWdnZXIoJ2tleXByZXNzJywgZXZ0KTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLl9rZXlVcFByZXZlbnRlZCA9IGV2dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcXHJcXG5cXHJcXG4gICAgICB2YXIga2V5ID0gZXZ0LndoaWNoO1xcclxcblxcclxcbiAgICAgIGlmIChrZXkgPT09IEtFWVMuQkFDS1NQQUNFICYmIHNlbGYuJHNlYXJjaC52YWwoKSA9PT0gJycpIHtcXHJcXG4gICAgICAgIHZhciAkcHJldmlvdXNDaG9pY2UgPSBzZWxmLiRzZWFyY2hDb250YWluZXJcXHJcXG4gICAgICAgICAgLnByZXYoJy5zZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlJyk7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoJHByZXZpb3VzQ2hvaWNlLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgICAgdmFyIGl0ZW0gPSAkcHJldmlvdXNDaG9pY2UuZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAgICAgICBzZWxmLnNlYXJjaFJlbW92ZUNob2ljZShpdGVtKTtcXHJcXG5cXHJcXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgLy8gVHJ5IHRvIGRldGVjdCB0aGUgSUUgdmVyc2lvbiBzaG91bGQgdGhlIGBkb2N1bWVudE1vZGVgIHByb3BlcnR5IHRoYXRcXHJcXG4gICAgLy8gaXMgc3RvcmVkIG9uIHRoZSBkb2N1bWVudC4gVGhpcyBpcyBvbmx5IGltcGxlbWVudGVkIGluIElFIGFuZCBpc1xcclxcbiAgICAvLyBzbGlnaHRseSBjbGVhbmVyIHRoYW4gZG9pbmcgYSB1c2VyIGFnZW50IGNoZWNrLlxcclxcbiAgICAvLyBUaGlzIHByb3BlcnR5IGlzIG5vdCBhdmFpbGFibGUgaW4gRWRnZSwgYnV0IEVkZ2UgYWxzbyBkb2Vzbid0IGhhdmVcXHJcXG4gICAgLy8gdGhpcyBidWcuXFxyXFxuICAgIHZhciBtc2llID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xcclxcbiAgICB2YXIgZGlzYWJsZUlucHV0RXZlbnRzID0gbXNpZSAmJiBtc2llIDw9IDExO1xcclxcblxcclxcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBicm93c2VycyB3aGljaCBkbyBub3Qgc3VwcG9ydCB0aGUgYGlucHV0YCBldmVudFxcclxcbiAgICAvLyBUaGlzIHdpbGwgcHJldmVudCBkb3VibGUtdHJpZ2dlcmluZyBvZiBldmVudHMgZm9yIGJyb3dzZXJzIHdoaWNoIHN1cHBvcnRcXHJcXG4gICAgLy8gYm90aCB0aGUgYGtleXVwYCBhbmQgYGlucHV0YCBldmVudHMuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbihcXHJcXG4gICAgICAnaW5wdXQuc2VhcmNoY2hlY2snLFxcclxcbiAgICAgICcuc2VsZWN0Mi1zZWFyY2gtLWlubGluZScsXFxyXFxuICAgICAgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgICAgLy8gSUUgd2lsbCB0cmlnZ2VyIHRoZSBgaW5wdXRgIGV2ZW50IHdoZW4gYSBwbGFjZWhvbGRlciBpcyB1c2VkIG9uIGFcXHJcXG4gICAgICAgIC8vIHNlYXJjaCBib3guIFRvIGdldCBhcm91bmQgdGhpcyBpc3N1ZSwgd2UgYXJlIGZvcmNlZCB0byBpZ25vcmUgYWxsXFxyXFxuICAgICAgICAvLyBgaW5wdXRgIGV2ZW50cyBpbiBJRSBhbmQga2VlcCB1c2luZyBga2V5dXBgLlxcclxcbiAgICAgICAgaWYgKGRpc2FibGVJbnB1dEV2ZW50cykge1xcclxcbiAgICAgICAgICBzZWxmLiRzZWxlY3Rpb24ub2ZmKCdpbnB1dC5zZWFyY2ggaW5wdXQuc2VhcmNoY2hlY2snKTtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgLy8gVW5iaW5kIHRoZSBkdXBsaWNhdGVkIGBrZXl1cGAgZXZlbnRcXHJcXG4gICAgICAgIHNlbGYuJHNlbGVjdGlvbi5vZmYoJ2tleXVwLnNlYXJjaCcpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLm9uKFxcclxcbiAgICAgICdrZXl1cC5zZWFyY2ggaW5wdXQuc2VhcmNoJyxcXHJcXG4gICAgICAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICAgIC8vIElFIHdpbGwgdHJpZ2dlciB0aGUgYGlucHV0YCBldmVudCB3aGVuIGEgcGxhY2Vob2xkZXIgaXMgdXNlZCBvbiBhXFxyXFxuICAgICAgICAvLyBzZWFyY2ggYm94LiBUbyBnZXQgYXJvdW5kIHRoaXMgaXNzdWUsIHdlIGFyZSBmb3JjZWQgdG8gaWdub3JlIGFsbFxcclxcbiAgICAgICAgLy8gYGlucHV0YCBldmVudHMgaW4gSUUgYW5kIGtlZXAgdXNpbmcgYGtleXVwYC5cXHJcXG4gICAgICAgIGlmIChkaXNhYmxlSW5wdXRFdmVudHMgJiYgZXZ0LnR5cGUgPT09ICdpbnB1dCcpIHtcXHJcXG4gICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLm9mZignaW5wdXQuc2VhcmNoIGlucHV0LnNlYXJjaGNoZWNrJyk7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIHZhciBrZXkgPSBldnQud2hpY2g7XFxyXFxuXFxyXFxuICAgICAgICAvLyBXZSBjYW4gZnJlZWx5IGlnbm9yZSBldmVudHMgZnJvbSBtb2RpZmllciBrZXlzXFxyXFxuICAgICAgICBpZiAoa2V5ID09IEtFWVMuU0hJRlQgfHwga2V5ID09IEtFWVMuQ1RSTCB8fCBrZXkgPT0gS0VZUy5BTFQpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgLy8gVGFiYmluZyB3aWxsIGJlIGhhbmRsZWQgZHVyaW5nIHRoZSBga2V5ZG93bmAgcGhhc2VcXHJcXG4gICAgICAgIGlmIChrZXkgPT0gS0VZUy5UQUIpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgc2VsZi5oYW5kbGVTZWFyY2goZXZ0KTtcXHJcXG4gICAgICB9XFxyXFxuICAgICk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgLyoqXFxyXFxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIHRyYW5zZmVyIHRoZSB0YWJpbmRleCBhdHRyaWJ1dGUgZnJvbSB0aGUgcmVuZGVyZWRcXHJcXG4gICAqIHNlbGVjdGlvbiB0byB0aGUgc2VhcmNoIGJveC4gVGhpcyBhbGxvd3MgZm9yIHRoZSBzZWFyY2ggYm94IHRvIGJlIHVzZWQgYXNcXHJcXG4gICAqIHRoZSBwcmltYXJ5IGZvY3VzIGluc3RlYWQgb2YgdGhlIHNlbGVjdGlvbiBjb250YWluZXIuXFxyXFxuICAgKlxcclxcbiAgICogQHByaXZhdGVcXHJcXG4gICAqL1xcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5fdHJhbnNmZXJUYWJJbmRleCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgdGhpcy4kc2VhcmNoLmF0dHIoJ3RhYmluZGV4JywgdGhpcy4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4JykpO1xcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLmNyZWF0ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGxhY2Vob2xkZXIpIHtcXHJcXG4gICAgdGhpcy4kc2VhcmNoLmF0dHIoJ3BsYWNlaG9sZGVyJywgcGxhY2Vob2xkZXIudGV4dCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBkYXRhKSB7XFxyXFxuICAgIHZhciBzZWFyY2hIYWRGb2N1cyA9IHRoaXMuJHNlYXJjaFswXSA9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2guYXR0cigncGxhY2Vob2xkZXInLCAnJyk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGRhdGEpO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpXFxyXFxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQodGhpcy4kc2VhcmNoQ29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5yZXNpemVTZWFyY2goKTtcXHJcXG4gICAgaWYgKHNlYXJjaEhhZEZvY3VzKSB7XFxyXFxuICAgICAgdGhpcy4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLmhhbmRsZVNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy5yZXNpemVTZWFyY2goKTtcXHJcXG5cXHJcXG4gICAgaWYgKCF0aGlzLl9rZXlVcFByZXZlbnRlZCkge1xcclxcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMuJHNlYXJjaC52YWwoKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ3F1ZXJ5Jywge1xcclxcbiAgICAgICAgdGVybTogaW5wdXRcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLl9rZXlVcFByZXZlbnRlZCA9IGZhbHNlO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuc2VhcmNoUmVtb3ZlQ2hvaWNlID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgaXRlbSkge1xcclxcbiAgICB0aGlzLnRyaWdnZXIoJ3Vuc2VsZWN0Jywge1xcclxcbiAgICAgIGRhdGE6IGl0ZW1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlYXJjaC52YWwoaXRlbS50ZXh0KTtcXHJcXG4gICAgdGhpcy5oYW5kbGVTZWFyY2goKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLnJlc2l6ZVNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kc2VhcmNoLmNzcygnd2lkdGgnLCAnMjVweCcpO1xcclxcblxcclxcbiAgICB2YXIgd2lkdGggPSAnJztcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuJHNlYXJjaC5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSAnJykge1xcclxcbiAgICAgIHdpZHRoID0gdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5pbm5lcldpZHRoKCk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdmFyIG1pbmltdW1XaWR0aCA9IHRoaXMuJHNlYXJjaC52YWwoKS5sZW5ndGggKyAxO1xcclxcblxcclxcbiAgICAgIHdpZHRoID0gKG1pbmltdW1XaWR0aCAqIDAuNzUpICsgJ2VtJztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2guY3NzKCd3aWR0aCcsIHdpZHRoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gU2VhcmNoO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9zZWxlY3Rpb24vZXZlbnRSZWxheScsW1xcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoJCkge1xcclxcbiAgZnVuY3Rpb24gRXZlbnRSZWxheSAoKSB7IH1cXHJcXG5cXHJcXG4gIEV2ZW50UmVsYXkucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcbiAgICB2YXIgcmVsYXlFdmVudHMgPSBbXFxyXFxuICAgICAgJ29wZW4nLCAnb3BlbmluZycsXFxyXFxuICAgICAgJ2Nsb3NlJywgJ2Nsb3NpbmcnLFxcclxcbiAgICAgICdzZWxlY3QnLCAnc2VsZWN0aW5nJyxcXHJcXG4gICAgICAndW5zZWxlY3QnLCAndW5zZWxlY3RpbmcnXFxyXFxuICAgIF07XFxyXFxuXFxyXFxuICAgIHZhciBwcmV2ZW50YWJsZUV2ZW50cyA9IFsnb3BlbmluZycsICdjbG9zaW5nJywgJ3NlbGVjdGluZycsICd1bnNlbGVjdGluZyddO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJyonLCBmdW5jdGlvbiAobmFtZSwgcGFyYW1zKSB7XFxyXFxuICAgICAgLy8gSWdub3JlIGV2ZW50cyB0aGF0IHNob3VsZCBub3QgYmUgcmVsYXllZFxcclxcbiAgICAgIGlmICgkLmluQXJyYXkobmFtZSwgcmVsYXlFdmVudHMpID09PSAtMSkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvLyBUaGUgcGFyYW1ldGVycyBzaG91bGQgYWx3YXlzIGJlIGFuIG9iamVjdFxcclxcbiAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcXHJcXG5cXHJcXG4gICAgICAvLyBHZW5lcmF0ZSB0aGUgalF1ZXJ5IGV2ZW50IGZvciB0aGUgU2VsZWN0MiBldmVudFxcclxcbiAgICAgIHZhciBldnQgPSAkLkV2ZW50KCdzZWxlY3QyOicgKyBuYW1lLCB7XFxyXFxuICAgICAgICBwYXJhbXM6IHBhcmFtc1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHNlbGYuJGVsZW1lbnQudHJpZ2dlcihldnQpO1xcclxcblxcclxcbiAgICAgIC8vIE9ubHkgaGFuZGxlIHByZXZlbnRhYmxlIGV2ZW50cyBpZiBpdCB3YXMgb25lXFxyXFxuICAgICAgaWYgKCQuaW5BcnJheShuYW1lLCBwcmV2ZW50YWJsZUV2ZW50cykgPT09IC0xKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHBhcmFtcy5wcmV2ZW50ZWQgPSBldnQuaXNEZWZhdWx0UHJldmVudGVkKCk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBFdmVudFJlbGF5O1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi90cmFuc2xhdGlvbicsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAncmVxdWlyZSdcXHJcXG5dLCBmdW5jdGlvbiAoJCwgcmVxdWlyZSkge1xcclxcbiAgZnVuY3Rpb24gVHJhbnNsYXRpb24gKGRpY3QpIHtcXHJcXG4gICAgdGhpcy5kaWN0ID0gZGljdCB8fCB7fTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFRyYW5zbGF0aW9uLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHJldHVybiB0aGlzLmRpY3Q7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVHJhbnNsYXRpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcXHJcXG4gICAgcmV0dXJuIHRoaXMuZGljdFtrZXldO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRyYW5zbGF0aW9uLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAodHJhbnNsYXRpb24pIHtcXHJcXG4gICAgdGhpcy5kaWN0ID0gJC5leHRlbmQoe30sIHRyYW5zbGF0aW9uLmFsbCgpLCB0aGlzLmRpY3QpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIC8vIFN0YXRpYyBmdW5jdGlvbnNcXHJcXG5cXHJcXG4gIFRyYW5zbGF0aW9uLl9jYWNoZSA9IHt9O1xcclxcblxcclxcbiAgVHJhbnNsYXRpb24ubG9hZFBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xcclxcbiAgICBpZiAoIShwYXRoIGluIFRyYW5zbGF0aW9uLl9jYWNoZSkpIHtcXHJcXG4gICAgICB2YXIgdHJhbnNsYXRpb25zID0gcmVxdWlyZShwYXRoKTtcXHJcXG5cXHJcXG4gICAgICBUcmFuc2xhdGlvbi5fY2FjaGVbcGF0aF0gPSB0cmFuc2xhdGlvbnM7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvbihUcmFuc2xhdGlvbi5fY2FjaGVbcGF0aF0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBUcmFuc2xhdGlvbjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGlhY3JpdGljcycsW1xcclxcblxcclxcbl0sIGZ1bmN0aW9uICgpIHtcXHJcXG4gIHZhciBkaWFjcml0aWNzID0ge1xcclxcbiAgICAnXFxcXHUyNEI2JzogJ0EnLFxcclxcbiAgICAnXFxcXHVGRjIxJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMEMwJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMEMxJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMEMyJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUE2JzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUE0JzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUFBJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUE4JzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMEMzJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMTAwJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMTAyJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUIwJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUFFJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUI0JzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUIyJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMjI2JzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMUUwJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMEM0JzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMURFJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUEyJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMEM1JzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMUZBJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMUNEJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMjAwJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMjAyJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUEwJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUFDJzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRUI2JzogJ0EnLFxcclxcbiAgICAnXFxcXHUxRTAwJzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMTA0JzogJ0EnLFxcclxcbiAgICAnXFxcXHUwMjNBJzogJ0EnLFxcclxcbiAgICAnXFxcXHUyQzZGJzogJ0EnLFxcclxcbiAgICAnXFxcXHVBNzMyJzogJ0FBJyxcXHJcXG4gICAgJ1xcXFx1MDBDNic6ICdBRScsXFxyXFxuICAgICdcXFxcdTAxRkMnOiAnQUUnLFxcclxcbiAgICAnXFxcXHUwMUUyJzogJ0FFJyxcXHJcXG4gICAgJ1xcXFx1QTczNCc6ICdBTycsXFxyXFxuICAgICdcXFxcdUE3MzYnOiAnQVUnLFxcclxcbiAgICAnXFxcXHVBNzM4JzogJ0FWJyxcXHJcXG4gICAgJ1xcXFx1QTczQSc6ICdBVicsXFxyXFxuICAgICdcXFxcdUE3M0MnOiAnQVknLFxcclxcbiAgICAnXFxcXHUyNEI3JzogJ0InLFxcclxcbiAgICAnXFxcXHVGRjIyJzogJ0InLFxcclxcbiAgICAnXFxcXHUxRTAyJzogJ0InLFxcclxcbiAgICAnXFxcXHUxRTA0JzogJ0InLFxcclxcbiAgICAnXFxcXHUxRTA2JzogJ0InLFxcclxcbiAgICAnXFxcXHUwMjQzJzogJ0InLFxcclxcbiAgICAnXFxcXHUwMTgyJzogJ0InLFxcclxcbiAgICAnXFxcXHUwMTgxJzogJ0InLFxcclxcbiAgICAnXFxcXHUyNEI4JzogJ0MnLFxcclxcbiAgICAnXFxcXHVGRjIzJzogJ0MnLFxcclxcbiAgICAnXFxcXHUwMTA2JzogJ0MnLFxcclxcbiAgICAnXFxcXHUwMTA4JzogJ0MnLFxcclxcbiAgICAnXFxcXHUwMTBBJzogJ0MnLFxcclxcbiAgICAnXFxcXHUwMTBDJzogJ0MnLFxcclxcbiAgICAnXFxcXHUwMEM3JzogJ0MnLFxcclxcbiAgICAnXFxcXHUxRTA4JzogJ0MnLFxcclxcbiAgICAnXFxcXHUwMTg3JzogJ0MnLFxcclxcbiAgICAnXFxcXHUwMjNCJzogJ0MnLFxcclxcbiAgICAnXFxcXHVBNzNFJzogJ0MnLFxcclxcbiAgICAnXFxcXHUyNEI5JzogJ0QnLFxcclxcbiAgICAnXFxcXHVGRjI0JzogJ0QnLFxcclxcbiAgICAnXFxcXHUxRTBBJzogJ0QnLFxcclxcbiAgICAnXFxcXHUwMTBFJzogJ0QnLFxcclxcbiAgICAnXFxcXHUxRTBDJzogJ0QnLFxcclxcbiAgICAnXFxcXHUxRTEwJzogJ0QnLFxcclxcbiAgICAnXFxcXHUxRTEyJzogJ0QnLFxcclxcbiAgICAnXFxcXHUxRTBFJzogJ0QnLFxcclxcbiAgICAnXFxcXHUwMTEwJzogJ0QnLFxcclxcbiAgICAnXFxcXHUwMThCJzogJ0QnLFxcclxcbiAgICAnXFxcXHUwMThBJzogJ0QnLFxcclxcbiAgICAnXFxcXHUwMTg5JzogJ0QnLFxcclxcbiAgICAnXFxcXHVBNzc5JzogJ0QnLFxcclxcbiAgICAnXFxcXHUwMUYxJzogJ0RaJyxcXHJcXG4gICAgJ1xcXFx1MDFDNCc6ICdEWicsXFxyXFxuICAgICdcXFxcdTAxRjInOiAnRHonLFxcclxcbiAgICAnXFxcXHUwMUM1JzogJ0R6JyxcXHJcXG4gICAgJ1xcXFx1MjRCQSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1RkYyNSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDBDOCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDBDOSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDBDQSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVDMCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVCRSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVDNCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVDMic6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVCQyc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDExMic6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUUxNCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUUxNic6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDExNCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDExNic6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDBDQic6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVCQSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDExQSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDIwNCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDIwNic6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVCOCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUVDNic6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDIyOCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUUxQyc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDExOCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUUxOCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MUUxQSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDE5MCc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MDE4RSc6ICdFJyxcXHJcXG4gICAgJ1xcXFx1MjRCQic6ICdGJyxcXHJcXG4gICAgJ1xcXFx1RkYyNic6ICdGJyxcXHJcXG4gICAgJ1xcXFx1MUUxRSc6ICdGJyxcXHJcXG4gICAgJ1xcXFx1MDE5MSc6ICdGJyxcXHJcXG4gICAgJ1xcXFx1QTc3Qic6ICdGJyxcXHJcXG4gICAgJ1xcXFx1MjRCQyc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1RkYyNyc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDFGNCc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDExQyc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MUUyMCc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDExRSc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDEyMCc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDFFNic6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDEyMic6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDFFNCc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MDE5Myc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1QTdBMCc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1QTc3RCc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1QTc3RSc6ICdHJyxcXHJcXG4gICAgJ1xcXFx1MjRCRCc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1RkYyOCc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MDEyNCc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MUUyMic6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MUUyNic6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MDIxRSc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MUUyNCc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MUUyOCc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MUUyQSc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MDEyNic6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MkM2Nyc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MkM3NSc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1QTc4RCc6ICdIJyxcXHJcXG4gICAgJ1xcXFx1MjRCRSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1RkYyOSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDBDQyc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDBDRCc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDBDRSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDEyOCc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDEyQSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDEyQyc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDEzMCc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDBDRic6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MUUyRSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MUVDOCc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDFDRic6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDIwOCc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDIwQSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MUVDQSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDEyRSc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MUUyQyc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MDE5Nyc6ICdJJyxcXHJcXG4gICAgJ1xcXFx1MjRCRic6ICdKJyxcXHJcXG4gICAgJ1xcXFx1RkYyQSc6ICdKJyxcXHJcXG4gICAgJ1xcXFx1MDEzNCc6ICdKJyxcXHJcXG4gICAgJ1xcXFx1MDI0OCc6ICdKJyxcXHJcXG4gICAgJ1xcXFx1MjRDMCc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1RkYyQic6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MUUzMCc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MDFFOCc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MUUzMic6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MDEzNic6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MUUzNCc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MDE5OCc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MkM2OSc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1QTc0MCc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1QTc0Mic6ICdLJyxcXHJcXG4gICAgJ1xcXFx1QTc0NCc6ICdLJyxcXHJcXG4gICAgJ1xcXFx1QTdBMic6ICdLJyxcXHJcXG4gICAgJ1xcXFx1MjRDMSc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1RkYyQyc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MDEzRic6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MDEzOSc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MDEzRCc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MUUzNic6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MUUzOCc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MDEzQic6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MUUzQyc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MUUzQSc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MDE0MSc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MDIzRCc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MkM2Mic6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MkM2MCc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1QTc0OCc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1QTc0Nic6ICdMJyxcXHJcXG4gICAgJ1xcXFx1QTc4MCc6ICdMJyxcXHJcXG4gICAgJ1xcXFx1MDFDNyc6ICdMSicsXFxyXFxuICAgICdcXFxcdTAxQzgnOiAnTGonLFxcclxcbiAgICAnXFxcXHUyNEMyJzogJ00nLFxcclxcbiAgICAnXFxcXHVGRjJEJzogJ00nLFxcclxcbiAgICAnXFxcXHUxRTNFJzogJ00nLFxcclxcbiAgICAnXFxcXHUxRTQwJzogJ00nLFxcclxcbiAgICAnXFxcXHUxRTQyJzogJ00nLFxcclxcbiAgICAnXFxcXHUyQzZFJzogJ00nLFxcclxcbiAgICAnXFxcXHUwMTlDJzogJ00nLFxcclxcbiAgICAnXFxcXHUyNEMzJzogJ04nLFxcclxcbiAgICAnXFxcXHVGRjJFJzogJ04nLFxcclxcbiAgICAnXFxcXHUwMUY4JzogJ04nLFxcclxcbiAgICAnXFxcXHUwMTQzJzogJ04nLFxcclxcbiAgICAnXFxcXHUwMEQxJzogJ04nLFxcclxcbiAgICAnXFxcXHUxRTQ0JzogJ04nLFxcclxcbiAgICAnXFxcXHUwMTQ3JzogJ04nLFxcclxcbiAgICAnXFxcXHUxRTQ2JzogJ04nLFxcclxcbiAgICAnXFxcXHUwMTQ1JzogJ04nLFxcclxcbiAgICAnXFxcXHUxRTRBJzogJ04nLFxcclxcbiAgICAnXFxcXHUxRTQ4JzogJ04nLFxcclxcbiAgICAnXFxcXHUwMjIwJzogJ04nLFxcclxcbiAgICAnXFxcXHUwMTlEJzogJ04nLFxcclxcbiAgICAnXFxcXHVBNzkwJzogJ04nLFxcclxcbiAgICAnXFxcXHVBN0E0JzogJ04nLFxcclxcbiAgICAnXFxcXHUwMUNBJzogJ05KJyxcXHJcXG4gICAgJ1xcXFx1MDFDQic6ICdOaicsXFxyXFxuICAgICdcXFxcdTI0QzQnOiAnTycsXFxyXFxuICAgICdcXFxcdUZGMkYnOiAnTycsXFxyXFxuICAgICdcXFxcdTAwRDInOiAnTycsXFxyXFxuICAgICdcXFxcdTAwRDMnOiAnTycsXFxyXFxuICAgICdcXFxcdTAwRDQnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFRDInOiAnTycsXFxyXFxuICAgICdcXFxcdTFFRDAnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFRDYnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFRDQnOiAnTycsXFxyXFxuICAgICdcXFxcdTAwRDUnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFNEMnOiAnTycsXFxyXFxuICAgICdcXFxcdTAyMkMnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFNEUnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxNEMnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFNTAnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFNTInOiAnTycsXFxyXFxuICAgICdcXFxcdTAxNEUnOiAnTycsXFxyXFxuICAgICdcXFxcdTAyMkUnOiAnTycsXFxyXFxuICAgICdcXFxcdTAyMzAnOiAnTycsXFxyXFxuICAgICdcXFxcdTAwRDYnOiAnTycsXFxyXFxuICAgICdcXFxcdTAyMkEnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFQ0UnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxNTAnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxRDEnOiAnTycsXFxyXFxuICAgICdcXFxcdTAyMEMnOiAnTycsXFxyXFxuICAgICdcXFxcdTAyMEUnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxQTAnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFREMnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFREEnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFRTAnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFREUnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFRTInOiAnTycsXFxyXFxuICAgICdcXFxcdTFFQ0MnOiAnTycsXFxyXFxuICAgICdcXFxcdTFFRDgnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxRUEnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxRUMnOiAnTycsXFxyXFxuICAgICdcXFxcdTAwRDgnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxRkUnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxODYnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxOUYnOiAnTycsXFxyXFxuICAgICdcXFxcdUE3NEEnOiAnTycsXFxyXFxuICAgICdcXFxcdUE3NEMnOiAnTycsXFxyXFxuICAgICdcXFxcdTAxQTInOiAnT0knLFxcclxcbiAgICAnXFxcXHVBNzRFJzogJ09PJyxcXHJcXG4gICAgJ1xcXFx1MDIyMic6ICdPVScsXFxyXFxuICAgICdcXFxcdTI0QzUnOiAnUCcsXFxyXFxuICAgICdcXFxcdUZGMzAnOiAnUCcsXFxyXFxuICAgICdcXFxcdTFFNTQnOiAnUCcsXFxyXFxuICAgICdcXFxcdTFFNTYnOiAnUCcsXFxyXFxuICAgICdcXFxcdTAxQTQnOiAnUCcsXFxyXFxuICAgICdcXFxcdTJDNjMnOiAnUCcsXFxyXFxuICAgICdcXFxcdUE3NTAnOiAnUCcsXFxyXFxuICAgICdcXFxcdUE3NTInOiAnUCcsXFxyXFxuICAgICdcXFxcdUE3NTQnOiAnUCcsXFxyXFxuICAgICdcXFxcdTI0QzYnOiAnUScsXFxyXFxuICAgICdcXFxcdUZGMzEnOiAnUScsXFxyXFxuICAgICdcXFxcdUE3NTYnOiAnUScsXFxyXFxuICAgICdcXFxcdUE3NTgnOiAnUScsXFxyXFxuICAgICdcXFxcdTAyNEEnOiAnUScsXFxyXFxuICAgICdcXFxcdTI0QzcnOiAnUicsXFxyXFxuICAgICdcXFxcdUZGMzInOiAnUicsXFxyXFxuICAgICdcXFxcdTAxNTQnOiAnUicsXFxyXFxuICAgICdcXFxcdTFFNTgnOiAnUicsXFxyXFxuICAgICdcXFxcdTAxNTgnOiAnUicsXFxyXFxuICAgICdcXFxcdTAyMTAnOiAnUicsXFxyXFxuICAgICdcXFxcdTAyMTInOiAnUicsXFxyXFxuICAgICdcXFxcdTFFNUEnOiAnUicsXFxyXFxuICAgICdcXFxcdTFFNUMnOiAnUicsXFxyXFxuICAgICdcXFxcdTAxNTYnOiAnUicsXFxyXFxuICAgICdcXFxcdTFFNUUnOiAnUicsXFxyXFxuICAgICdcXFxcdTAyNEMnOiAnUicsXFxyXFxuICAgICdcXFxcdTJDNjQnOiAnUicsXFxyXFxuICAgICdcXFxcdUE3NUEnOiAnUicsXFxyXFxuICAgICdcXFxcdUE3QTYnOiAnUicsXFxyXFxuICAgICdcXFxcdUE3ODInOiAnUicsXFxyXFxuICAgICdcXFxcdTI0QzgnOiAnUycsXFxyXFxuICAgICdcXFxcdUZGMzMnOiAnUycsXFxyXFxuICAgICdcXFxcdTFFOUUnOiAnUycsXFxyXFxuICAgICdcXFxcdTAxNUEnOiAnUycsXFxyXFxuICAgICdcXFxcdTFFNjQnOiAnUycsXFxyXFxuICAgICdcXFxcdTAxNUMnOiAnUycsXFxyXFxuICAgICdcXFxcdTFFNjAnOiAnUycsXFxyXFxuICAgICdcXFxcdTAxNjAnOiAnUycsXFxyXFxuICAgICdcXFxcdTFFNjYnOiAnUycsXFxyXFxuICAgICdcXFxcdTFFNjInOiAnUycsXFxyXFxuICAgICdcXFxcdTFFNjgnOiAnUycsXFxyXFxuICAgICdcXFxcdTAyMTgnOiAnUycsXFxyXFxuICAgICdcXFxcdTAxNUUnOiAnUycsXFxyXFxuICAgICdcXFxcdTJDN0UnOiAnUycsXFxyXFxuICAgICdcXFxcdUE3QTgnOiAnUycsXFxyXFxuICAgICdcXFxcdUE3ODQnOiAnUycsXFxyXFxuICAgICdcXFxcdTI0QzknOiAnVCcsXFxyXFxuICAgICdcXFxcdUZGMzQnOiAnVCcsXFxyXFxuICAgICdcXFxcdTFFNkEnOiAnVCcsXFxyXFxuICAgICdcXFxcdTAxNjQnOiAnVCcsXFxyXFxuICAgICdcXFxcdTFFNkMnOiAnVCcsXFxyXFxuICAgICdcXFxcdTAyMUEnOiAnVCcsXFxyXFxuICAgICdcXFxcdTAxNjInOiAnVCcsXFxyXFxuICAgICdcXFxcdTFFNzAnOiAnVCcsXFxyXFxuICAgICdcXFxcdTFFNkUnOiAnVCcsXFxyXFxuICAgICdcXFxcdTAxNjYnOiAnVCcsXFxyXFxuICAgICdcXFxcdTAxQUMnOiAnVCcsXFxyXFxuICAgICdcXFxcdTAxQUUnOiAnVCcsXFxyXFxuICAgICdcXFxcdTAyM0UnOiAnVCcsXFxyXFxuICAgICdcXFxcdUE3ODYnOiAnVCcsXFxyXFxuICAgICdcXFxcdUE3MjgnOiAnVFonLFxcclxcbiAgICAnXFxcXHUyNENBJzogJ1UnLFxcclxcbiAgICAnXFxcXHVGRjM1JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMEQ5JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMERBJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMERCJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMTY4JzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRTc4JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMTZBJzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRTdBJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMTZDJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMERDJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMURCJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMUQ3JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMUQ1JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMUQ5JzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRUU2JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMTZFJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMTcwJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMUQzJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMjE0JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMjE2JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMUFGJzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRUVBJzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRUU4JzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRUVFJzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRUVDJzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRUYwJzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRUU0JzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRTcyJzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMTcyJzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRTc2JzogJ1UnLFxcclxcbiAgICAnXFxcXHUxRTc0JzogJ1UnLFxcclxcbiAgICAnXFxcXHUwMjQ0JzogJ1UnLFxcclxcbiAgICAnXFxcXHUyNENCJzogJ1YnLFxcclxcbiAgICAnXFxcXHVGRjM2JzogJ1YnLFxcclxcbiAgICAnXFxcXHUxRTdDJzogJ1YnLFxcclxcbiAgICAnXFxcXHUxRTdFJzogJ1YnLFxcclxcbiAgICAnXFxcXHUwMUIyJzogJ1YnLFxcclxcbiAgICAnXFxcXHVBNzVFJzogJ1YnLFxcclxcbiAgICAnXFxcXHUwMjQ1JzogJ1YnLFxcclxcbiAgICAnXFxcXHVBNzYwJzogJ1ZZJyxcXHJcXG4gICAgJ1xcXFx1MjRDQyc6ICdXJyxcXHJcXG4gICAgJ1xcXFx1RkYzNyc6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MUU4MCc6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MUU4Mic6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MDE3NCc6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MUU4Nic6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MUU4NCc6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MUU4OCc6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MkM3Mic6ICdXJyxcXHJcXG4gICAgJ1xcXFx1MjRDRCc6ICdYJyxcXHJcXG4gICAgJ1xcXFx1RkYzOCc6ICdYJyxcXHJcXG4gICAgJ1xcXFx1MUU4QSc6ICdYJyxcXHJcXG4gICAgJ1xcXFx1MUU4Qyc6ICdYJyxcXHJcXG4gICAgJ1xcXFx1MjRDRSc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1RkYzOSc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MUVGMic6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MDBERCc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MDE3Nic6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MUVGOCc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MDIzMic6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MUU4RSc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MDE3OCc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MUVGNic6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MUVGNCc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MDFCMyc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MDI0RSc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MUVGRSc6ICdZJyxcXHJcXG4gICAgJ1xcXFx1MjRDRic6ICdaJyxcXHJcXG4gICAgJ1xcXFx1RkYzQSc6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MDE3OSc6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MUU5MCc6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MDE3Qic6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MDE3RCc6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MUU5Mic6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MUU5NCc6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MDFCNSc6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MDIyNCc6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MkM3Ric6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MkM2Qic6ICdaJyxcXHJcXG4gICAgJ1xcXFx1QTc2Mic6ICdaJyxcXHJcXG4gICAgJ1xcXFx1MjREMCc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1RkY0MSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUU5QSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDBFMCc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDBFMSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDBFMic6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBNyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBNSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBQic6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBOSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDBFMyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDEwMSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDEwMyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVCMSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBRic6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVCNSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVCMyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDIyNyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDFFMSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDBFNCc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDFERic6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBMyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDBFNSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDFGQic6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDFDRSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDIwMSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDIwMyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBMSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVBRCc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUVCNyc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MUUwMSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDEwNSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MkM2NSc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1MDI1MCc6ICdhJyxcXHJcXG4gICAgJ1xcXFx1QTczMyc6ICdhYScsXFxyXFxuICAgICdcXFxcdTAwRTYnOiAnYWUnLFxcclxcbiAgICAnXFxcXHUwMUZEJzogJ2FlJyxcXHJcXG4gICAgJ1xcXFx1MDFFMyc6ICdhZScsXFxyXFxuICAgICdcXFxcdUE3MzUnOiAnYW8nLFxcclxcbiAgICAnXFxcXHVBNzM3JzogJ2F1JyxcXHJcXG4gICAgJ1xcXFx1QTczOSc6ICdhdicsXFxyXFxuICAgICdcXFxcdUE3M0InOiAnYXYnLFxcclxcbiAgICAnXFxcXHVBNzNEJzogJ2F5JyxcXHJcXG4gICAgJ1xcXFx1MjREMSc6ICdiJyxcXHJcXG4gICAgJ1xcXFx1RkY0Mic6ICdiJyxcXHJcXG4gICAgJ1xcXFx1MUUwMyc6ICdiJyxcXHJcXG4gICAgJ1xcXFx1MUUwNSc6ICdiJyxcXHJcXG4gICAgJ1xcXFx1MUUwNyc6ICdiJyxcXHJcXG4gICAgJ1xcXFx1MDE4MCc6ICdiJyxcXHJcXG4gICAgJ1xcXFx1MDE4Myc6ICdiJyxcXHJcXG4gICAgJ1xcXFx1MDI1Myc6ICdiJyxcXHJcXG4gICAgJ1xcXFx1MjREMic6ICdjJyxcXHJcXG4gICAgJ1xcXFx1RkY0Myc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MDEwNyc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MDEwOSc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MDEwQic6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MDEwRCc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MDBFNyc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MUUwOSc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MDE4OCc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MDIzQyc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1QTczRic6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MjE4NCc6ICdjJyxcXHJcXG4gICAgJ1xcXFx1MjREMyc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1RkY0NCc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MUUwQic6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MDEwRic6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MUUwRCc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MUUxMSc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MUUxMyc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MUUwRic6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MDExMSc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MDE4Qyc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MDI1Nic6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MDI1Nyc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1QTc3QSc6ICdkJyxcXHJcXG4gICAgJ1xcXFx1MDFGMyc6ICdkeicsXFxyXFxuICAgICdcXFxcdTAxQzYnOiAnZHonLFxcclxcbiAgICAnXFxcXHUyNEQ0JzogJ2UnLFxcclxcbiAgICAnXFxcXHVGRjQ1JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMEU4JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMEU5JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMEVBJzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUMxJzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUJGJzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUM1JzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUMzJzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUJEJzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMTEzJzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRTE1JzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRTE3JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMTE1JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMTE3JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMEVCJzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUJCJzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMTFCJzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMjA1JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMjA3JzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUI5JzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRUM3JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMjI5JzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRTFEJzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMTE5JzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRTE5JzogJ2UnLFxcclxcbiAgICAnXFxcXHUxRTFCJzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMjQ3JzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMjVCJzogJ2UnLFxcclxcbiAgICAnXFxcXHUwMUREJzogJ2UnLFxcclxcbiAgICAnXFxcXHUyNEQ1JzogJ2YnLFxcclxcbiAgICAnXFxcXHVGRjQ2JzogJ2YnLFxcclxcbiAgICAnXFxcXHUxRTFGJzogJ2YnLFxcclxcbiAgICAnXFxcXHUwMTkyJzogJ2YnLFxcclxcbiAgICAnXFxcXHVBNzdDJzogJ2YnLFxcclxcbiAgICAnXFxcXHUyNEQ2JzogJ2cnLFxcclxcbiAgICAnXFxcXHVGRjQ3JzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMUY1JzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMTFEJzogJ2cnLFxcclxcbiAgICAnXFxcXHUxRTIxJzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMTFGJzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMTIxJzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMUU3JzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMTIzJzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMUU1JzogJ2cnLFxcclxcbiAgICAnXFxcXHUwMjYwJzogJ2cnLFxcclxcbiAgICAnXFxcXHVBN0ExJzogJ2cnLFxcclxcbiAgICAnXFxcXHUxRDc5JzogJ2cnLFxcclxcbiAgICAnXFxcXHVBNzdGJzogJ2cnLFxcclxcbiAgICAnXFxcXHUyNEQ3JzogJ2gnLFxcclxcbiAgICAnXFxcXHVGRjQ4JzogJ2gnLFxcclxcbiAgICAnXFxcXHUwMTI1JzogJ2gnLFxcclxcbiAgICAnXFxcXHUxRTIzJzogJ2gnLFxcclxcbiAgICAnXFxcXHUxRTI3JzogJ2gnLFxcclxcbiAgICAnXFxcXHUwMjFGJzogJ2gnLFxcclxcbiAgICAnXFxcXHUxRTI1JzogJ2gnLFxcclxcbiAgICAnXFxcXHUxRTI5JzogJ2gnLFxcclxcbiAgICAnXFxcXHUxRTJCJzogJ2gnLFxcclxcbiAgICAnXFxcXHUxRTk2JzogJ2gnLFxcclxcbiAgICAnXFxcXHUwMTI3JzogJ2gnLFxcclxcbiAgICAnXFxcXHUyQzY4JzogJ2gnLFxcclxcbiAgICAnXFxcXHUyQzc2JzogJ2gnLFxcclxcbiAgICAnXFxcXHUwMjY1JzogJ2gnLFxcclxcbiAgICAnXFxcXHUwMTk1JzogJ2h2JyxcXHJcXG4gICAgJ1xcXFx1MjREOCc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1RkY0OSc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDBFQyc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDBFRCc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDBFRSc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDEyOSc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDEyQic6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDEyRCc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDBFRic6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MUUyRic6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MUVDOSc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDFEMCc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDIwOSc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDIwQic6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MUVDQic6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDEyRic6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MUUyRCc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDI2OCc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MDEzMSc6ICdpJyxcXHJcXG4gICAgJ1xcXFx1MjREOSc6ICdqJyxcXHJcXG4gICAgJ1xcXFx1RkY0QSc6ICdqJyxcXHJcXG4gICAgJ1xcXFx1MDEzNSc6ICdqJyxcXHJcXG4gICAgJ1xcXFx1MDFGMCc6ICdqJyxcXHJcXG4gICAgJ1xcXFx1MDI0OSc6ICdqJyxcXHJcXG4gICAgJ1xcXFx1MjREQSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1RkY0Qic6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MUUzMSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MDFFOSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MUUzMyc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MDEzNyc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MUUzNSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MDE5OSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MkM2QSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1QTc0MSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1QTc0Myc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1QTc0NSc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1QTdBMyc6ICdrJyxcXHJcXG4gICAgJ1xcXFx1MjREQic6ICdsJyxcXHJcXG4gICAgJ1xcXFx1RkY0Qyc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDE0MCc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDEzQSc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDEzRSc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MUUzNyc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MUUzOSc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDEzQyc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MUUzRCc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MUUzQic6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDE3Ric6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDE0Mic6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDE5QSc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDI2Qic6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MkM2MSc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1QTc0OSc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1QTc4MSc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1QTc0Nyc6ICdsJyxcXHJcXG4gICAgJ1xcXFx1MDFDOSc6ICdsaicsXFxyXFxuICAgICdcXFxcdTI0REMnOiAnbScsXFxyXFxuICAgICdcXFxcdUZGNEQnOiAnbScsXFxyXFxuICAgICdcXFxcdTFFM0YnOiAnbScsXFxyXFxuICAgICdcXFxcdTFFNDEnOiAnbScsXFxyXFxuICAgICdcXFxcdTFFNDMnOiAnbScsXFxyXFxuICAgICdcXFxcdTAyNzEnOiAnbScsXFxyXFxuICAgICdcXFxcdTAyNkYnOiAnbScsXFxyXFxuICAgICdcXFxcdTI0REQnOiAnbicsXFxyXFxuICAgICdcXFxcdUZGNEUnOiAnbicsXFxyXFxuICAgICdcXFxcdTAxRjknOiAnbicsXFxyXFxuICAgICdcXFxcdTAxNDQnOiAnbicsXFxyXFxuICAgICdcXFxcdTAwRjEnOiAnbicsXFxyXFxuICAgICdcXFxcdTFFNDUnOiAnbicsXFxyXFxuICAgICdcXFxcdTAxNDgnOiAnbicsXFxyXFxuICAgICdcXFxcdTFFNDcnOiAnbicsXFxyXFxuICAgICdcXFxcdTAxNDYnOiAnbicsXFxyXFxuICAgICdcXFxcdTFFNEInOiAnbicsXFxyXFxuICAgICdcXFxcdTFFNDknOiAnbicsXFxyXFxuICAgICdcXFxcdTAxOUUnOiAnbicsXFxyXFxuICAgICdcXFxcdTAyNzInOiAnbicsXFxyXFxuICAgICdcXFxcdTAxNDknOiAnbicsXFxyXFxuICAgICdcXFxcdUE3OTEnOiAnbicsXFxyXFxuICAgICdcXFxcdUE3QTUnOiAnbicsXFxyXFxuICAgICdcXFxcdTAxQ0MnOiAnbmonLFxcclxcbiAgICAnXFxcXHUyNERFJzogJ28nLFxcclxcbiAgICAnXFxcXHVGRjRGJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMEYyJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMEYzJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMEY0JzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUQzJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUQxJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUQ3JzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUQ1JzogJ28nLFxcclxcbiAgICAnXFxcXHUwMEY1JzogJ28nLFxcclxcbiAgICAnXFxcXHUxRTREJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjJEJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRTRGJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMTREJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRTUxJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRTUzJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMTRGJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjJGJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjMxJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMEY2JzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjJCJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUNGJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMTUxJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMUQyJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjBEJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjBGJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMUExJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUREJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRURCJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUUxJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRURGJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUUzJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUNEJzogJ28nLFxcclxcbiAgICAnXFxcXHUxRUQ5JzogJ28nLFxcclxcbiAgICAnXFxcXHUwMUVCJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMUVEJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMEY4JzogJ28nLFxcclxcbiAgICAnXFxcXHUwMUZGJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjU0JzogJ28nLFxcclxcbiAgICAnXFxcXHVBNzRCJzogJ28nLFxcclxcbiAgICAnXFxcXHVBNzREJzogJ28nLFxcclxcbiAgICAnXFxcXHUwMjc1JzogJ28nLFxcclxcbiAgICAnXFxcXHUwMUEzJzogJ29pJyxcXHJcXG4gICAgJ1xcXFx1MDIyMyc6ICdvdScsXFxyXFxuICAgICdcXFxcdUE3NEYnOiAnb28nLFxcclxcbiAgICAnXFxcXHUyNERGJzogJ3AnLFxcclxcbiAgICAnXFxcXHVGRjUwJzogJ3AnLFxcclxcbiAgICAnXFxcXHUxRTU1JzogJ3AnLFxcclxcbiAgICAnXFxcXHUxRTU3JzogJ3AnLFxcclxcbiAgICAnXFxcXHUwMUE1JzogJ3AnLFxcclxcbiAgICAnXFxcXHUxRDdEJzogJ3AnLFxcclxcbiAgICAnXFxcXHVBNzUxJzogJ3AnLFxcclxcbiAgICAnXFxcXHVBNzUzJzogJ3AnLFxcclxcbiAgICAnXFxcXHVBNzU1JzogJ3AnLFxcclxcbiAgICAnXFxcXHUyNEUwJzogJ3EnLFxcclxcbiAgICAnXFxcXHVGRjUxJzogJ3EnLFxcclxcbiAgICAnXFxcXHUwMjRCJzogJ3EnLFxcclxcbiAgICAnXFxcXHVBNzU3JzogJ3EnLFxcclxcbiAgICAnXFxcXHVBNzU5JzogJ3EnLFxcclxcbiAgICAnXFxcXHUyNEUxJzogJ3InLFxcclxcbiAgICAnXFxcXHVGRjUyJzogJ3InLFxcclxcbiAgICAnXFxcXHUwMTU1JzogJ3InLFxcclxcbiAgICAnXFxcXHUxRTU5JzogJ3InLFxcclxcbiAgICAnXFxcXHUwMTU5JzogJ3InLFxcclxcbiAgICAnXFxcXHUwMjExJzogJ3InLFxcclxcbiAgICAnXFxcXHUwMjEzJzogJ3InLFxcclxcbiAgICAnXFxcXHUxRTVCJzogJ3InLFxcclxcbiAgICAnXFxcXHUxRTVEJzogJ3InLFxcclxcbiAgICAnXFxcXHUwMTU3JzogJ3InLFxcclxcbiAgICAnXFxcXHUxRTVGJzogJ3InLFxcclxcbiAgICAnXFxcXHUwMjREJzogJ3InLFxcclxcbiAgICAnXFxcXHUwMjdEJzogJ3InLFxcclxcbiAgICAnXFxcXHVBNzVCJzogJ3InLFxcclxcbiAgICAnXFxcXHVBN0E3JzogJ3InLFxcclxcbiAgICAnXFxcXHVBNzgzJzogJ3InLFxcclxcbiAgICAnXFxcXHUyNEUyJzogJ3MnLFxcclxcbiAgICAnXFxcXHVGRjUzJzogJ3MnLFxcclxcbiAgICAnXFxcXHUwMERGJzogJ3MnLFxcclxcbiAgICAnXFxcXHUwMTVCJzogJ3MnLFxcclxcbiAgICAnXFxcXHUxRTY1JzogJ3MnLFxcclxcbiAgICAnXFxcXHUwMTVEJzogJ3MnLFxcclxcbiAgICAnXFxcXHUxRTYxJzogJ3MnLFxcclxcbiAgICAnXFxcXHUwMTYxJzogJ3MnLFxcclxcbiAgICAnXFxcXHUxRTY3JzogJ3MnLFxcclxcbiAgICAnXFxcXHUxRTYzJzogJ3MnLFxcclxcbiAgICAnXFxcXHUxRTY5JzogJ3MnLFxcclxcbiAgICAnXFxcXHUwMjE5JzogJ3MnLFxcclxcbiAgICAnXFxcXHUwMTVGJzogJ3MnLFxcclxcbiAgICAnXFxcXHUwMjNGJzogJ3MnLFxcclxcbiAgICAnXFxcXHVBN0E5JzogJ3MnLFxcclxcbiAgICAnXFxcXHVBNzg1JzogJ3MnLFxcclxcbiAgICAnXFxcXHUxRTlCJzogJ3MnLFxcclxcbiAgICAnXFxcXHUyNEUzJzogJ3QnLFxcclxcbiAgICAnXFxcXHVGRjU0JzogJ3QnLFxcclxcbiAgICAnXFxcXHUxRTZCJzogJ3QnLFxcclxcbiAgICAnXFxcXHUxRTk3JzogJ3QnLFxcclxcbiAgICAnXFxcXHUwMTY1JzogJ3QnLFxcclxcbiAgICAnXFxcXHUxRTZEJzogJ3QnLFxcclxcbiAgICAnXFxcXHUwMjFCJzogJ3QnLFxcclxcbiAgICAnXFxcXHUwMTYzJzogJ3QnLFxcclxcbiAgICAnXFxcXHUxRTcxJzogJ3QnLFxcclxcbiAgICAnXFxcXHUxRTZGJzogJ3QnLFxcclxcbiAgICAnXFxcXHUwMTY3JzogJ3QnLFxcclxcbiAgICAnXFxcXHUwMUFEJzogJ3QnLFxcclxcbiAgICAnXFxcXHUwMjg4JzogJ3QnLFxcclxcbiAgICAnXFxcXHUyQzY2JzogJ3QnLFxcclxcbiAgICAnXFxcXHVBNzg3JzogJ3QnLFxcclxcbiAgICAnXFxcXHVBNzI5JzogJ3R6JyxcXHJcXG4gICAgJ1xcXFx1MjRFNCc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1RkY1NSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDBGOSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDBGQSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDBGQic6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDE2OSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUU3OSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDE2Qic6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUU3Qic6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDE2RCc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDBGQyc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDFEQyc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDFEOCc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDFENic6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDFEQSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUVFNyc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDE2Ric6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDE3MSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDFENCc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDIxNSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDIxNyc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDFCMCc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUVFQic6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUVFOSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUVFRic6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUVFRCc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUVGMSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUVFNSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUU3Myc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDE3Myc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUU3Nyc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MUU3NSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MDI4OSc6ICd1JyxcXHJcXG4gICAgJ1xcXFx1MjRFNSc6ICd2JyxcXHJcXG4gICAgJ1xcXFx1RkY1Nic6ICd2JyxcXHJcXG4gICAgJ1xcXFx1MUU3RCc6ICd2JyxcXHJcXG4gICAgJ1xcXFx1MUU3Ric6ICd2JyxcXHJcXG4gICAgJ1xcXFx1MDI4Qic6ICd2JyxcXHJcXG4gICAgJ1xcXFx1QTc1Ric6ICd2JyxcXHJcXG4gICAgJ1xcXFx1MDI4Qyc6ICd2JyxcXHJcXG4gICAgJ1xcXFx1QTc2MSc6ICd2eScsXFxyXFxuICAgICdcXFxcdTI0RTYnOiAndycsXFxyXFxuICAgICdcXFxcdUZGNTcnOiAndycsXFxyXFxuICAgICdcXFxcdTFFODEnOiAndycsXFxyXFxuICAgICdcXFxcdTFFODMnOiAndycsXFxyXFxuICAgICdcXFxcdTAxNzUnOiAndycsXFxyXFxuICAgICdcXFxcdTFFODcnOiAndycsXFxyXFxuICAgICdcXFxcdTFFODUnOiAndycsXFxyXFxuICAgICdcXFxcdTFFOTgnOiAndycsXFxyXFxuICAgICdcXFxcdTFFODknOiAndycsXFxyXFxuICAgICdcXFxcdTJDNzMnOiAndycsXFxyXFxuICAgICdcXFxcdTI0RTcnOiAneCcsXFxyXFxuICAgICdcXFxcdUZGNTgnOiAneCcsXFxyXFxuICAgICdcXFxcdTFFOEInOiAneCcsXFxyXFxuICAgICdcXFxcdTFFOEQnOiAneCcsXFxyXFxuICAgICdcXFxcdTI0RTgnOiAneScsXFxyXFxuICAgICdcXFxcdUZGNTknOiAneScsXFxyXFxuICAgICdcXFxcdTFFRjMnOiAneScsXFxyXFxuICAgICdcXFxcdTAwRkQnOiAneScsXFxyXFxuICAgICdcXFxcdTAxNzcnOiAneScsXFxyXFxuICAgICdcXFxcdTFFRjknOiAneScsXFxyXFxuICAgICdcXFxcdTAyMzMnOiAneScsXFxyXFxuICAgICdcXFxcdTFFOEYnOiAneScsXFxyXFxuICAgICdcXFxcdTAwRkYnOiAneScsXFxyXFxuICAgICdcXFxcdTFFRjcnOiAneScsXFxyXFxuICAgICdcXFxcdTFFOTknOiAneScsXFxyXFxuICAgICdcXFxcdTFFRjUnOiAneScsXFxyXFxuICAgICdcXFxcdTAxQjQnOiAneScsXFxyXFxuICAgICdcXFxcdTAyNEYnOiAneScsXFxyXFxuICAgICdcXFxcdTFFRkYnOiAneScsXFxyXFxuICAgICdcXFxcdTI0RTknOiAneicsXFxyXFxuICAgICdcXFxcdUZGNUEnOiAneicsXFxyXFxuICAgICdcXFxcdTAxN0EnOiAneicsXFxyXFxuICAgICdcXFxcdTFFOTEnOiAneicsXFxyXFxuICAgICdcXFxcdTAxN0MnOiAneicsXFxyXFxuICAgICdcXFxcdTAxN0UnOiAneicsXFxyXFxuICAgICdcXFxcdTFFOTMnOiAneicsXFxyXFxuICAgICdcXFxcdTFFOTUnOiAneicsXFxyXFxuICAgICdcXFxcdTAxQjYnOiAneicsXFxyXFxuICAgICdcXFxcdTAyMjUnOiAneicsXFxyXFxuICAgICdcXFxcdTAyNDAnOiAneicsXFxyXFxuICAgICdcXFxcdTJDNkMnOiAneicsXFxyXFxuICAgICdcXFxcdUE3NjMnOiAneicsXFxyXFxuICAgICdcXFxcdTAzODYnOiAnXFxcXHUwMzkxJyxcXHJcXG4gICAgJ1xcXFx1MDM4OCc6ICdcXFxcdTAzOTUnLFxcclxcbiAgICAnXFxcXHUwMzg5JzogJ1xcXFx1MDM5NycsXFxyXFxuICAgICdcXFxcdTAzOEEnOiAnXFxcXHUwMzk5JyxcXHJcXG4gICAgJ1xcXFx1MDNBQSc6ICdcXFxcdTAzOTknLFxcclxcbiAgICAnXFxcXHUwMzhDJzogJ1xcXFx1MDM5RicsXFxyXFxuICAgICdcXFxcdTAzOEUnOiAnXFxcXHUwM0E1JyxcXHJcXG4gICAgJ1xcXFx1MDNBQic6ICdcXFxcdTAzQTUnLFxcclxcbiAgICAnXFxcXHUwMzhGJzogJ1xcXFx1MDNBOScsXFxyXFxuICAgICdcXFxcdTAzQUMnOiAnXFxcXHUwM0IxJyxcXHJcXG4gICAgJ1xcXFx1MDNBRCc6ICdcXFxcdTAzQjUnLFxcclxcbiAgICAnXFxcXHUwM0FFJzogJ1xcXFx1MDNCNycsXFxyXFxuICAgICdcXFxcdTAzQUYnOiAnXFxcXHUwM0I5JyxcXHJcXG4gICAgJ1xcXFx1MDNDQSc6ICdcXFxcdTAzQjknLFxcclxcbiAgICAnXFxcXHUwMzkwJzogJ1xcXFx1MDNCOScsXFxyXFxuICAgICdcXFxcdTAzQ0MnOiAnXFxcXHUwM0JGJyxcXHJcXG4gICAgJ1xcXFx1MDNDRCc6ICdcXFxcdTAzQzUnLFxcclxcbiAgICAnXFxcXHUwM0NCJzogJ1xcXFx1MDNDNScsXFxyXFxuICAgICdcXFxcdTAzQjAnOiAnXFxcXHUwM0M1JyxcXHJcXG4gICAgJ1xcXFx1MDNDOSc6ICdcXFxcdTAzQzknLFxcclxcbiAgICAnXFxcXHUwM0MyJzogJ1xcXFx1MDNDMydcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gZGlhY3JpdGljcztcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9iYXNlJyxbXFxyXFxuICAnLi4vdXRpbHMnXFxyXFxuXSwgZnVuY3Rpb24gKFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBCYXNlQWRhcHRlciAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgQmFzZUFkYXB0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoQmFzZUFkYXB0ZXIsIFV0aWxzLk9ic2VydmFibGUpO1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcXHJcXG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgYGN1cnJlbnRgIG1ldGhvZCBtdXN0IGJlIGRlZmluZWQgaW4gY2hpbGQgY2xhc3Nlcy4nKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlQWRhcHRlci5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgcXVlcnlgIG1ldGhvZCBtdXN0IGJlIGRlZmluZWQgaW4gY2hpbGQgY2xhc3Nlcy4nKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlQWRhcHRlci5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgLy8gQ2FuIGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzZXNcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlQWRhcHRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgLy8gQ2FuIGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzZXNcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlQWRhcHRlci5wcm90b3R5cGUuZ2VuZXJhdGVSZXN1bHRJZCA9IGZ1bmN0aW9uIChjb250YWluZXIsIGRhdGEpIHtcXHJcXG4gICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1yZXN1bHQtJztcXHJcXG5cXHJcXG4gICAgaWQgKz0gVXRpbHMuZ2VuZXJhdGVDaGFycyg0KTtcXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuaWQgIT0gbnVsbCkge1xcclxcbiAgICAgIGlkICs9ICctJyArIGRhdGEuaWQudG9TdHJpbmcoKTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICBpZCArPSAnLScgKyBVdGlscy5nZW5lcmF0ZUNoYXJzKDQpO1xcclxcbiAgICB9XFxyXFxuICAgIHJldHVybiBpZDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQmFzZUFkYXB0ZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvc2VsZWN0JyxbXFxyXFxuICAnLi9iYXNlJyxcXHJcXG4gICcuLi91dGlscycsXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uIChCYXNlQWRhcHRlciwgVXRpbHMsICQpIHtcXHJcXG4gIGZ1bmN0aW9uIFNlbGVjdEFkYXB0ZXIgKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcXHJcXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcXHJcXG5cXHJcXG4gICAgU2VsZWN0QWRhcHRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChTZWxlY3RBZGFwdGVyLCBCYXNlQWRhcHRlcik7XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XFxyXFxuICAgIHZhciBkYXRhID0gW107XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy4kZWxlbWVudC5maW5kKCc6c2VsZWN0ZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgJG9wdGlvbiA9ICQodGhpcyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIG9wdGlvbiA9IHNlbGYuaXRlbSgkb3B0aW9uKTtcXHJcXG5cXHJcXG4gICAgICBkYXRhLnB1c2gob3B0aW9uKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNhbGxiYWNrKGRhdGEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGF0YS5zZWxlY3RlZCA9IHRydWU7XFxyXFxuXFxyXFxuICAgIC8vIElmIGRhdGEuZWxlbWVudCBpcyBhIERPTSBub2RlLCB1c2UgaXQgaW5zdGVhZFxcclxcbiAgICBpZiAoJChkYXRhLmVsZW1lbnQpLmlzKCdvcHRpb24nKSkge1xcclxcbiAgICAgIGRhdGEuZWxlbWVudC5zZWxlY3RlZCA9IHRydWU7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTtcXHJcXG5cXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuJGVsZW1lbnQucHJvcCgnbXVsdGlwbGUnKSkge1xcclxcbiAgICAgIHRoaXMuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcXHJcXG4gICAgICAgIHZhciB2YWwgPSBbXTtcXHJcXG5cXHJcXG4gICAgICAgIGRhdGEgPSBbZGF0YV07XFxyXFxuICAgICAgICBkYXRhLnB1c2guYXBwbHkoZGF0YSwgY3VycmVudERhdGEpO1xcclxcblxcclxcbiAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXRhLmxlbmd0aDsgZCsrKSB7XFxyXFxuICAgICAgICAgIHZhciBpZCA9IGRhdGFbZF0uaWQ7XFxyXFxuXFxyXFxuICAgICAgICAgIGlmICgkLmluQXJyYXkoaWQsIHZhbCkgPT09IC0xKSB7XFxyXFxuICAgICAgICAgICAgdmFsLnB1c2goaWQpO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLiRlbGVtZW50LnZhbCh2YWwpO1xcclxcbiAgICAgICAgc2VsZi4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICB2YXIgdmFsID0gZGF0YS5pZDtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRlbGVtZW50LnZhbCh2YWwpO1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS51bnNlbGVjdCA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgaWYgKCF0aGlzLiRlbGVtZW50LnByb3AoJ211bHRpcGxlJykpIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGF0YS5zZWxlY3RlZCA9IGZhbHNlO1xcclxcblxcclxcbiAgICBpZiAoJChkYXRhLmVsZW1lbnQpLmlzKCdvcHRpb24nKSkge1xcclxcbiAgICAgIGRhdGEuZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlO1xcclxcblxcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcXHJcXG4gICAgICB2YXIgdmFsID0gW107XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBjdXJyZW50RGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgICAgdmFyIGlkID0gY3VycmVudERhdGFbZF0uaWQ7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoaWQgIT09IGRhdGEuaWQgJiYgJC5pbkFycmF5KGlkLCB2YWwpID09PSAtMSkge1xcclxcbiAgICAgICAgICB2YWwucHVzaChpZCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYuJGVsZW1lbnQudmFsKHZhbCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UnKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5zZWxlY3QocGFyYW1zLmRhdGEpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCd1bnNlbGVjdCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLnVuc2VsZWN0KHBhcmFtcy5kYXRhKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgLy8gUmVtb3ZlIGFueXRoaW5nIGFkZGVkIHRvIGNoaWxkIGVsZW1lbnRzXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQuZmluZCgnKicpLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIC8vIFJlbW92ZSBhbnkgY3VzdG9tIGRhdGEgc2V0IGJ5IFNlbGVjdDJcXHJcXG4gICAgICAkLnJlbW92ZURhdGEodGhpcywgJ2RhdGEnKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICB2YXIgZGF0YSA9IFtdO1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHZhciAkb3B0aW9ucyA9IHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oKTtcXHJcXG5cXHJcXG4gICAgJG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRvcHRpb24gPSAkKHRoaXMpO1xcclxcblxcclxcbiAgICAgIGlmICghJG9wdGlvbi5pcygnb3B0aW9uJykgJiYgISRvcHRpb24uaXMoJ29wdGdyb3VwJykpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyIG9wdGlvbiA9IHNlbGYuaXRlbSgkb3B0aW9uKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgbWF0Y2hlcyA9IHNlbGYubWF0Y2hlcyhwYXJhbXMsIG9wdGlvbik7XFxyXFxuXFxyXFxuICAgICAgaWYgKG1hdGNoZXMgIT09IG51bGwpIHtcXHJcXG4gICAgICAgIGRhdGEucHVzaChtYXRjaGVzKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjYWxsYmFjayh7XFxyXFxuICAgICAgcmVzdWx0czogZGF0YVxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5hZGRPcHRpb25zID0gZnVuY3Rpb24gKCRvcHRpb25zKSB7XFxyXFxuICAgIFV0aWxzLmFwcGVuZE1hbnkodGhpcy4kZWxlbWVudCwgJG9wdGlvbnMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBvcHRpb247XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XFxyXFxuICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0Z3JvdXAnKTtcXHJcXG4gICAgICBvcHRpb24ubGFiZWwgPSBkYXRhLnRleHQ7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbi50ZXh0Q29udGVudCAhPT0gdW5kZWZpbmVkKSB7XFxyXFxuICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLnRleHQ7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBkYXRhLnRleHQ7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLmlkKSB7XFxyXFxuICAgICAgb3B0aW9uLnZhbHVlID0gZGF0YS5pZDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5kaXNhYmxlZCkge1xcclxcbiAgICAgIG9wdGlvbi5kaXNhYmxlZCA9IHRydWU7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuc2VsZWN0ZWQpIHtcXHJcXG4gICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLnRpdGxlKSB7XFxyXFxuICAgICAgb3B0aW9uLnRpdGxlID0gZGF0YS50aXRsZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgJG9wdGlvbiA9ICQob3B0aW9uKTtcXHJcXG5cXHJcXG4gICAgdmFyIG5vcm1hbGl6ZWREYXRhID0gdGhpcy5fbm9ybWFsaXplSXRlbShkYXRhKTtcXHJcXG4gICAgbm9ybWFsaXplZERhdGEuZWxlbWVudCA9IG9wdGlvbjtcXHJcXG5cXHJcXG4gICAgLy8gT3ZlcnJpZGUgdGhlIG9wdGlvbidzIGRhdGEgd2l0aCB0aGUgY29tYmluZWQgZGF0YVxcclxcbiAgICAkLmRhdGEob3B0aW9uLCAnZGF0YScsIG5vcm1hbGl6ZWREYXRhKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRvcHRpb247XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uICgkb3B0aW9uKSB7XFxyXFxuICAgIHZhciBkYXRhID0ge307XFxyXFxuXFxyXFxuICAgIGRhdGEgPSAkLmRhdGEoJG9wdGlvblswXSwgJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEgIT0gbnVsbCkge1xcclxcbiAgICAgIHJldHVybiBkYXRhO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICgkb3B0aW9uLmlzKCdvcHRpb24nKSkge1xcclxcbiAgICAgIGRhdGEgPSB7XFxyXFxuICAgICAgICBpZDogJG9wdGlvbi52YWwoKSxcXHJcXG4gICAgICAgIHRleHQ6ICRvcHRpb24udGV4dCgpLFxcclxcbiAgICAgICAgZGlzYWJsZWQ6ICRvcHRpb24ucHJvcCgnZGlzYWJsZWQnKSxcXHJcXG4gICAgICAgIHNlbGVjdGVkOiAkb3B0aW9uLnByb3AoJ3NlbGVjdGVkJyksXFxyXFxuICAgICAgICB0aXRsZTogJG9wdGlvbi5wcm9wKCd0aXRsZScpXFxyXFxuICAgICAgfTtcXHJcXG4gICAgfSBlbHNlIGlmICgkb3B0aW9uLmlzKCdvcHRncm91cCcpKSB7XFxyXFxuICAgICAgZGF0YSA9IHtcXHJcXG4gICAgICAgIHRleHQ6ICRvcHRpb24ucHJvcCgnbGFiZWwnKSxcXHJcXG4gICAgICAgIGNoaWxkcmVuOiBbXSxcXHJcXG4gICAgICAgIHRpdGxlOiAkb3B0aW9uLnByb3AoJ3RpdGxlJylcXHJcXG4gICAgICB9O1xcclxcblxcclxcbiAgICAgIHZhciAkY2hpbGRyZW4gPSAkb3B0aW9uLmNoaWxkcmVuKCdvcHRpb24nKTtcXHJcXG4gICAgICB2YXIgY2hpbGRyZW4gPSBbXTtcXHJcXG5cXHJcXG4gICAgICBmb3IgKHZhciBjID0gMDsgYyA8ICRjaGlsZHJlbi5sZW5ndGg7IGMrKykge1xcclxcbiAgICAgICAgdmFyICRjaGlsZCA9ICQoJGNoaWxkcmVuW2NdKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuaXRlbSgkY2hpbGQpO1xcclxcblxcclxcbiAgICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZCk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGRhdGEuY2hpbGRyZW4gPSBjaGlsZHJlbjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkYXRhID0gdGhpcy5fbm9ybWFsaXplSXRlbShkYXRhKTtcXHJcXG4gICAgZGF0YS5lbGVtZW50ID0gJG9wdGlvblswXTtcXHJcXG5cXHJcXG4gICAgJC5kYXRhKCRvcHRpb25bMF0sICdkYXRhJywgZGF0YSk7XFxyXFxuXFxyXFxuICAgIHJldHVybiBkYXRhO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLl9ub3JtYWxpemVJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcXHJcXG4gICAgaWYgKCEkLmlzUGxhaW5PYmplY3QoaXRlbSkpIHtcXHJcXG4gICAgICBpdGVtID0ge1xcclxcbiAgICAgICAgaWQ6IGl0ZW0sXFxyXFxuICAgICAgICB0ZXh0OiBpdGVtXFxyXFxuICAgICAgfTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpdGVtID0gJC5leHRlbmQoe30sIHtcXHJcXG4gICAgICB0ZXh0OiAnJ1xcclxcbiAgICB9LCBpdGVtKTtcXHJcXG5cXHJcXG4gICAgdmFyIGRlZmF1bHRzID0ge1xcclxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZSxcXHJcXG4gICAgICBkaXNhYmxlZDogZmFsc2VcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgaWYgKGl0ZW0uaWQgIT0gbnVsbCkge1xcclxcbiAgICAgIGl0ZW0uaWQgPSBpdGVtLmlkLnRvU3RyaW5nKCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGl0ZW0udGV4dCAhPSBudWxsKSB7XFxyXFxuICAgICAgaXRlbS50ZXh0ID0gaXRlbS50ZXh0LnRvU3RyaW5nKCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGl0ZW0uX3Jlc3VsdElkID09IG51bGwgJiYgaXRlbS5pZCAmJiB0aGlzLmNvbnRhaW5lciAhPSBudWxsKSB7XFxyXFxuICAgICAgaXRlbS5fcmVzdWx0SWQgPSB0aGlzLmdlbmVyYXRlUmVzdWx0SWQodGhpcy5jb250YWluZXIsIGl0ZW0pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGl0ZW0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBkYXRhKSB7XFxyXFxuICAgIHZhciBtYXRjaGVyID0gdGhpcy5vcHRpb25zLmdldCgnbWF0Y2hlcicpO1xcclxcblxcclxcbiAgICByZXR1cm4gbWF0Y2hlcihwYXJhbXMsIGRhdGEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBTZWxlY3RBZGFwdGVyO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL2FycmF5JyxbXFxyXFxuICAnLi9zZWxlY3QnLFxcclxcbiAgJy4uL3V0aWxzJyxcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKFNlbGVjdEFkYXB0ZXIsIFV0aWxzLCAkKSB7XFxyXFxuICBmdW5jdGlvbiBBcnJheUFkYXB0ZXIgKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIHZhciBkYXRhID0gb3B0aW9ucy5nZXQoJ2RhdGEnKSB8fCBbXTtcXHJcXG5cXHJcXG4gICAgQXJyYXlBZGFwdGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5hZGRPcHRpb25zKHRoaXMuY29udmVydFRvT3B0aW9ucyhkYXRhKSk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoQXJyYXlBZGFwdGVyLCBTZWxlY3RBZGFwdGVyKTtcXHJcXG5cXHJcXG4gIEFycmF5QWRhcHRlci5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgdmFyICRvcHRpb24gPSB0aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpLmZpbHRlcihmdW5jdGlvbiAoaSwgZWxtKSB7XFxyXFxuICAgICAgcmV0dXJuIGVsbS52YWx1ZSA9PSBkYXRhLmlkLnRvU3RyaW5nKCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBpZiAoJG9wdGlvbi5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICAkb3B0aW9uID0gdGhpcy5vcHRpb24oZGF0YSk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy5hZGRPcHRpb25zKCRvcHRpb24pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIEFycmF5QWRhcHRlci5fX3N1cGVyX18uc2VsZWN0LmNhbGwodGhpcywgZGF0YSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXJyYXlBZGFwdGVyLnByb3RvdHlwZS5jb252ZXJ0VG9PcHRpb25zID0gZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgJGV4aXN0aW5nID0gdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb24nKTtcXHJcXG4gICAgdmFyIGV4aXN0aW5nSWRzID0gJGV4aXN0aW5nLm1hcChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuIHNlbGYuaXRlbSgkKHRoaXMpKS5pZDtcXHJcXG4gICAgfSkuZ2V0KCk7XFxyXFxuXFxyXFxuICAgIHZhciAkb3B0aW9ucyA9IFtdO1xcclxcblxcclxcbiAgICAvLyBGaWx0ZXIgb3V0IGFsbCBpdGVtcyBleGNlcHQgZm9yIHRoZSBvbmUgcGFzc2VkIGluIHRoZSBhcmd1bWVudFxcclxcbiAgICBmdW5jdGlvbiBvbmx5SXRlbSAoaXRlbSkge1xcclxcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICByZXR1cm4gJCh0aGlzKS52YWwoKSA9PSBpdGVtLmlkO1xcclxcbiAgICAgIH07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXRhLmxlbmd0aDsgZCsrKSB7XFxyXFxuICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9ub3JtYWxpemVJdGVtKGRhdGFbZF0pO1xcclxcblxcclxcbiAgICAgIC8vIFNraXAgaXRlbXMgd2hpY2ggd2VyZSBwcmUtbG9hZGVkLCBvbmx5IG1lcmdlIHRoZSBkYXRhXFxyXFxuICAgICAgaWYgKCQuaW5BcnJheShpdGVtLmlkLCBleGlzdGluZ0lkcykgPj0gMCkge1xcclxcbiAgICAgICAgdmFyICRleGlzdGluZ09wdGlvbiA9ICRleGlzdGluZy5maWx0ZXIob25seUl0ZW0oaXRlbSkpO1xcclxcblxcclxcbiAgICAgICAgdmFyIGV4aXN0aW5nRGF0YSA9IHRoaXMuaXRlbSgkZXhpc3RpbmdPcHRpb24pO1xcclxcbiAgICAgICAgdmFyIG5ld0RhdGEgPSAkLmV4dGVuZCh0cnVlLCB7fSwgaXRlbSwgZXhpc3RpbmdEYXRhKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciAkbmV3T3B0aW9uID0gdGhpcy5vcHRpb24obmV3RGF0YSk7XFxyXFxuXFxyXFxuICAgICAgICAkZXhpc3RpbmdPcHRpb24ucmVwbGFjZVdpdGgoJG5ld09wdGlvbik7XFxyXFxuXFxyXFxuICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyICRvcHRpb24gPSB0aGlzLm9wdGlvbihpdGVtKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xcclxcbiAgICAgICAgdmFyICRjaGlsZHJlbiA9IHRoaXMuY29udmVydFRvT3B0aW9ucyhpdGVtLmNoaWxkcmVuKTtcXHJcXG5cXHJcXG4gICAgICAgIFV0aWxzLmFwcGVuZE1hbnkoJG9wdGlvbiwgJGNoaWxkcmVuKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgJG9wdGlvbnMucHVzaCgkb3B0aW9uKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gJG9wdGlvbnM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEFycmF5QWRhcHRlcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9hamF4JyxbXFxyXFxuICAnLi9hcnJheScsXFxyXFxuICAnLi4vdXRpbHMnLFxcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoQXJyYXlBZGFwdGVyLCBVdGlscywgJCkge1xcclxcbiAgZnVuY3Rpb24gQWpheEFkYXB0ZXIgKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMuYWpheE9wdGlvbnMgPSB0aGlzLl9hcHBseURlZmF1bHRzKG9wdGlvbnMuZ2V0KCdhamF4JykpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy5hamF4T3B0aW9ucy5wcm9jZXNzUmVzdWx0cyAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5wcm9jZXNzUmVzdWx0cyA9IHRoaXMuYWpheE9wdGlvbnMucHJvY2Vzc1Jlc3VsdHM7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgQWpheEFkYXB0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKEFqYXhBZGFwdGVyLCBBcnJheUFkYXB0ZXIpO1xcclxcblxcclxcbiAgQWpheEFkYXB0ZXIucHJvdG90eXBlLl9hcHBseURlZmF1bHRzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcXHJcXG4gICAgdmFyIGRlZmF1bHRzID0ge1xcclxcbiAgICAgIGRhdGE6IGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgcGFyYW1zLCB7XFxyXFxuICAgICAgICAgIHE6IHBhcmFtcy50ZXJtXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9LFxcclxcbiAgICAgIHRyYW5zcG9ydDogZnVuY3Rpb24gKHBhcmFtcywgc3VjY2VzcywgZmFpbHVyZSkge1xcclxcbiAgICAgICAgdmFyICRyZXF1ZXN0ID0gJC5hamF4KHBhcmFtcyk7XFxyXFxuXFxyXFxuICAgICAgICAkcmVxdWVzdC50aGVuKHN1Y2Nlc3MpO1xcclxcbiAgICAgICAgJHJlcXVlc3QuZmFpbChmYWlsdXJlKTtcXHJcXG5cXHJcXG4gICAgICAgIHJldHVybiAkcmVxdWVzdDtcXHJcXG4gICAgICB9XFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIHJldHVybiAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMsIHRydWUpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEFqYXhBZGFwdGVyLnByb3RvdHlwZS5wcm9jZXNzUmVzdWx0cyA9IGZ1bmN0aW9uIChyZXN1bHRzKSB7XFxyXFxuICAgIHJldHVybiByZXN1bHRzO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEFqYXhBZGFwdGVyLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHZhciBtYXRjaGVzID0gW107XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuX3JlcXVlc3QgIT0gbnVsbCkge1xcclxcbiAgICAgIC8vIEpTT05QIHJlcXVlc3RzIGNhbm5vdCBhbHdheXMgYmUgYWJvcnRlZFxcclxcbiAgICAgIGlmICgkLmlzRnVuY3Rpb24odGhpcy5fcmVxdWVzdC5hYm9ydCkpIHtcXHJcXG4gICAgICAgIHRoaXMuX3JlcXVlc3QuYWJvcnQoKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdGhpcy5fcmVxdWVzdCA9IG51bGw7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XFxyXFxuICAgICAgdHlwZTogJ0dFVCdcXHJcXG4gICAgfSwgdGhpcy5hamF4T3B0aW9ucyk7XFxyXFxuXFxyXFxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy51cmwgPT09ICdmdW5jdGlvbicpIHtcXHJcXG4gICAgICBvcHRpb25zLnVybCA9IG9wdGlvbnMudXJsLmNhbGwodGhpcy4kZWxlbWVudCwgcGFyYW1zKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xcclxcbiAgICAgIG9wdGlvbnMuZGF0YSA9IG9wdGlvbnMuZGF0YS5jYWxsKHRoaXMuJGVsZW1lbnQsIHBhcmFtcyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gcmVxdWVzdCAoKSB7XFxyXFxuICAgICAgdmFyICRyZXF1ZXN0ID0gb3B0aW9ucy50cmFuc3BvcnQob3B0aW9ucywgZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgICAgIHZhciByZXN1bHRzID0gc2VsZi5wcm9jZXNzUmVzdWx0cyhkYXRhLCBwYXJhbXMpO1xcclxcblxcclxcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xcclxcbiAgICAgICAgICAvLyBDaGVjayB0byBtYWtlIHN1cmUgdGhhdCB0aGUgcmVzcG9uc2UgaW5jbHVkZWQgYSBgcmVzdWx0c2Aga2V5LlxcclxcbiAgICAgICAgICBpZiAoIXJlc3VsdHMgfHwgIXJlc3VsdHMucmVzdWx0cyB8fCAhJC5pc0FycmF5KHJlc3VsdHMucmVzdWx0cykpIHtcXHJcXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxcclxcbiAgICAgICAgICAgICAgJ1NlbGVjdDI6IFRoZSBBSkFYIHJlc3VsdHMgZGlkIG5vdCByZXR1cm4gYW4gYXJyYXkgaW4gdGhlICcgK1xcclxcbiAgICAgICAgICAgICAgJ2ByZXN1bHRzYCBrZXkgb2YgdGhlIHJlc3BvbnNlLidcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBjYWxsYmFjayhyZXN1bHRzKTtcXHJcXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAvLyBBdHRlbXB0IHRvIGRldGVjdCBpZiBhIHJlcXVlc3Qgd2FzIGFib3J0ZWRcXHJcXG4gICAgICAgIC8vIE9ubHkgd29ya3MgaWYgdGhlIHRyYW5zcG9ydCBleHBvc2VzIGEgc3RhdHVzIHByb3BlcnR5XFxyXFxuICAgICAgICBpZiAoJHJlcXVlc3Quc3RhdHVzICYmICRyZXF1ZXN0LnN0YXR1cyA9PT0gJzAnKSB7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czptZXNzYWdlJywge1xcclxcbiAgICAgICAgICBtZXNzYWdlOiAnZXJyb3JMb2FkaW5nJ1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fcmVxdWVzdCA9ICRyZXF1ZXN0O1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLmFqYXhPcHRpb25zLmRlbGF5ICYmIHBhcmFtcy50ZXJtICE9IG51bGwpIHtcXHJcXG4gICAgICBpZiAodGhpcy5fcXVlcnlUaW1lb3V0KSB7XFxyXFxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3F1ZXJ5VGltZW91dCk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHRoaXMuX3F1ZXJ5VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KHJlcXVlc3QsIHRoaXMuYWpheE9wdGlvbnMuZGVsYXkpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHJlcXVlc3QoKTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBBamF4QWRhcHRlcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS90YWdzJyxbXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uICgkKSB7XFxyXFxuICBmdW5jdGlvbiBUYWdzIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIHZhciB0YWdzID0gb3B0aW9ucy5nZXQoJ3RhZ3MnKTtcXHJcXG5cXHJcXG4gICAgdmFyIGNyZWF0ZVRhZyA9IG9wdGlvbnMuZ2V0KCdjcmVhdGVUYWcnKTtcXHJcXG5cXHJcXG4gICAgaWYgKGNyZWF0ZVRhZyAhPT0gdW5kZWZpbmVkKSB7XFxyXFxuICAgICAgdGhpcy5jcmVhdGVUYWcgPSBjcmVhdGVUYWc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGluc2VydFRhZyA9IG9wdGlvbnMuZ2V0KCdpbnNlcnRUYWcnKTtcXHJcXG5cXHJcXG4gICAgaWYgKGluc2VydFRhZyAhPT0gdW5kZWZpbmVkKSB7XFxyXFxuICAgICAgICB0aGlzLmluc2VydFRhZyA9IGluc2VydFRhZztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XFxyXFxuXFxyXFxuICAgIGlmICgkLmlzQXJyYXkodGFncykpIHtcXHJcXG4gICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRhZ3MubGVuZ3RoOyB0KyspIHtcXHJcXG4gICAgICAgIHZhciB0YWcgPSB0YWdzW3RdO1xcclxcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9ub3JtYWxpemVJdGVtKHRhZyk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgJG9wdGlvbiA9IHRoaXMub3B0aW9uKGl0ZW0pO1xcclxcblxcclxcbiAgICAgICAgdGhpcy4kZWxlbWVudC5hcHBlbmQoJG9wdGlvbik7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuICB9XFxyXFxuXFxyXFxuICBUYWdzLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcywgY2FsbGJhY2spIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB0aGlzLl9yZW1vdmVPbGRUYWdzKCk7XFxyXFxuXFxyXFxuICAgIGlmIChwYXJhbXMudGVybSA9PSBudWxsIHx8IHBhcmFtcy5wYWdlICE9IG51bGwpIHtcXHJcXG4gICAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMsIGNhbGxiYWNrKTtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gd3JhcHBlciAob2JqLCBjaGlsZCkge1xcclxcbiAgICAgIHZhciBkYXRhID0gb2JqLnJlc3VsdHM7XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XFxyXFxuICAgICAgICB2YXIgb3B0aW9uID0gZGF0YVtpXTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBjaGVja0NoaWxkcmVuID0gKFxcclxcbiAgICAgICAgICBvcHRpb24uY2hpbGRyZW4gIT0gbnVsbCAmJlxcclxcbiAgICAgICAgICAhd3JhcHBlcih7XFxyXFxuICAgICAgICAgICAgcmVzdWx0czogb3B0aW9uLmNoaWxkcmVuXFxyXFxuICAgICAgICAgIH0sIHRydWUpXFxyXFxuICAgICAgICApO1xcclxcblxcclxcbiAgICAgICAgdmFyIGNoZWNrVGV4dCA9IG9wdGlvbi50ZXh0ID09PSBwYXJhbXMudGVybTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChjaGVja1RleHQgfHwgY2hlY2tDaGlsZHJlbikge1xcclxcbiAgICAgICAgICBpZiAoY2hpbGQpIHtcXHJcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxyXFxuICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgb2JqLmRhdGEgPSBkYXRhO1xcclxcbiAgICAgICAgICBjYWxsYmFjayhvYmopO1xcclxcblxcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChjaGlsZCkge1xcclxcbiAgICAgICAgcmV0dXJuIHRydWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciB0YWcgPSBzZWxmLmNyZWF0ZVRhZyhwYXJhbXMpO1xcclxcblxcclxcbiAgICAgIGlmICh0YWcgIT0gbnVsbCkge1xcclxcbiAgICAgICAgdmFyICRvcHRpb24gPSBzZWxmLm9wdGlvbih0YWcpO1xcclxcbiAgICAgICAgJG9wdGlvbi5hdHRyKCdkYXRhLXNlbGVjdDItdGFnJywgdHJ1ZSk7XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLmFkZE9wdGlvbnMoWyRvcHRpb25dKTtcXHJcXG5cXHJcXG4gICAgICAgIHNlbGYuaW5zZXJ0VGFnKGRhdGEsIHRhZyk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIG9iai5yZXN1bHRzID0gZGF0YTtcXHJcXG5cXHJcXG4gICAgICBjYWxsYmFjayhvYmopO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIHBhcmFtcywgd3JhcHBlcik7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVGFncy5wcm90b3R5cGUuY3JlYXRlVGFnID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zKSB7XFxyXFxuICAgIHZhciB0ZXJtID0gJC50cmltKHBhcmFtcy50ZXJtKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRlcm0gPT09ICcnKSB7XFxyXFxuICAgICAgcmV0dXJuIG51bGw7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIHtcXHJcXG4gICAgICBpZDogdGVybSxcXHJcXG4gICAgICB0ZXh0OiB0ZXJtXFxyXFxuICAgIH07XFxyXFxuICB9O1xcclxcblxcclxcbiAgVGFncy5wcm90b3R5cGUuaW5zZXJ0VGFnID0gZnVuY3Rpb24gKF8sIGRhdGEsIHRhZykge1xcclxcbiAgICBkYXRhLnVuc2hpZnQodGFnKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBUYWdzLnByb3RvdHlwZS5fcmVtb3ZlT2xkVGFncyA9IGZ1bmN0aW9uIChfKSB7XFxyXFxuICAgIHZhciB0YWcgPSB0aGlzLl9sYXN0VGFnO1xcclxcblxcclxcbiAgICB2YXIgJG9wdGlvbnMgPSB0aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbltkYXRhLXNlbGVjdDItdGFnXScpO1xcclxcblxcclxcbiAgICAkb3B0aW9ucy5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZCkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAkKHRoaXMpLnJlbW92ZSgpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gVGFncztcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS90b2tlbml6ZXInLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIGZ1bmN0aW9uIFRva2VuaXplciAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB2YXIgdG9rZW5pemVyID0gb3B0aW9ucy5nZXQoJ3Rva2VuaXplcicpO1xcclxcblxcclxcbiAgICBpZiAodG9rZW5pemVyICE9PSB1bmRlZmluZWQpIHtcXHJcXG4gICAgICB0aGlzLnRva2VuaXplciA9IHRva2VuaXplcjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBUb2tlbml6ZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoID0gIGNvbnRhaW5lci5kcm9wZG93bi4kc2VhcmNoIHx8IGNvbnRhaW5lci5zZWxlY3Rpb24uJHNlYXJjaCB8fFxcclxcbiAgICAgICRjb250YWluZXIuZmluZCgnLnNlbGVjdDItc2VhcmNoX19maWVsZCcpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRva2VuaXplci5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gY3JlYXRlQW5kU2VsZWN0IChkYXRhKSB7XFxyXFxuICAgICAgLy8gTm9ybWFsaXplIHRoZSBkYXRhIG9iamVjdCBzbyB3ZSBjYW4gdXNlIGl0IGZvciBjaGVja3NcXHJcXG4gICAgICB2YXIgaXRlbSA9IHNlbGYuX25vcm1hbGl6ZUl0ZW0oZGF0YSk7XFxyXFxuXFxyXFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGRhdGEgb2JqZWN0IGFscmVhZHkgZXhpc3RzIGFzIGEgdGFnXFxyXFxuICAgICAgLy8gU2VsZWN0IGl0IGlmIGl0IGRvZXNuJ3RcXHJcXG4gICAgICB2YXIgJGV4aXN0aW5nT3B0aW9ucyA9IHNlbGYuJGVsZW1lbnQuZmluZCgnb3B0aW9uJykuZmlsdGVyKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpID09PSBpdGVtLmlkO1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIC8vIElmIGFuIGV4aXN0aW5nIG9wdGlvbiB3YXNuJ3QgZm91bmQgZm9yIGl0LCBjcmVhdGUgdGhlIG9wdGlvblxcclxcbiAgICAgIGlmICghJGV4aXN0aW5nT3B0aW9ucy5sZW5ndGgpIHtcXHJcXG4gICAgICAgIHZhciAkb3B0aW9uID0gc2VsZi5vcHRpb24oaXRlbSk7XFxyXFxuICAgICAgICAkb3B0aW9uLmF0dHIoJ2RhdGEtc2VsZWN0Mi10YWcnLCB0cnVlKTtcXHJcXG5cXHJcXG4gICAgICAgIHNlbGYuX3JlbW92ZU9sZFRhZ3MoKTtcXHJcXG4gICAgICAgIHNlbGYuYWRkT3B0aW9ucyhbJG9wdGlvbl0pO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvLyBTZWxlY3QgdGhlIGl0ZW0sIG5vdyB0aGF0IHdlIGtub3cgdGhlcmUgaXMgYW4gb3B0aW9uIGZvciBpdFxcclxcbiAgICAgIHNlbGVjdChpdGVtKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBmdW5jdGlvbiBzZWxlY3QgKGRhdGEpIHtcXHJcXG4gICAgICBzZWxmLnRyaWdnZXIoJ3NlbGVjdCcsIHtcXHJcXG4gICAgICAgIGRhdGE6IGRhdGFcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBwYXJhbXMudGVybSA9IHBhcmFtcy50ZXJtIHx8ICcnO1xcclxcblxcclxcbiAgICB2YXIgdG9rZW5EYXRhID0gdGhpcy50b2tlbml6ZXIocGFyYW1zLCB0aGlzLm9wdGlvbnMsIGNyZWF0ZUFuZFNlbGVjdCk7XFxyXFxuXFxyXFxuICAgIGlmICh0b2tlbkRhdGEudGVybSAhPT0gcGFyYW1zLnRlcm0pIHtcXHJcXG4gICAgICAvLyBSZXBsYWNlIHRoZSBzZWFyY2ggdGVybSBpZiB3ZSBoYXZlIHRoZSBzZWFyY2ggYm94XFxyXFxuICAgICAgaWYgKHRoaXMuJHNlYXJjaC5sZW5ndGgpIHtcXHJcXG4gICAgICAgIHRoaXMuJHNlYXJjaC52YWwodG9rZW5EYXRhLnRlcm0pO1xcclxcbiAgICAgICAgdGhpcy4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHBhcmFtcy50ZXJtID0gdG9rZW5EYXRhLnRlcm07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVG9rZW5pemVyLnByb3RvdHlwZS50b2tlbml6ZXIgPSBmdW5jdGlvbiAoXywgcGFyYW1zLCBvcHRpb25zLCBjYWxsYmFjaykge1xcclxcbiAgICB2YXIgc2VwYXJhdG9ycyA9IG9wdGlvbnMuZ2V0KCd0b2tlblNlcGFyYXRvcnMnKSB8fCBbXTtcXHJcXG4gICAgdmFyIHRlcm0gPSBwYXJhbXMudGVybTtcXHJcXG4gICAgdmFyIGkgPSAwO1xcclxcblxcclxcbiAgICB2YXIgY3JlYXRlVGFnID0gdGhpcy5jcmVhdGVUYWcgfHwgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHJldHVybiB7XFxyXFxuICAgICAgICBpZDogcGFyYW1zLnRlcm0sXFxyXFxuICAgICAgICB0ZXh0OiBwYXJhbXMudGVybVxcclxcbiAgICAgIH07XFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIHdoaWxlIChpIDwgdGVybS5sZW5ndGgpIHtcXHJcXG4gICAgICB2YXIgdGVybUNoYXIgPSB0ZXJtW2ldO1xcclxcblxcclxcbiAgICAgIGlmICgkLmluQXJyYXkodGVybUNoYXIsIHNlcGFyYXRvcnMpID09PSAtMSkge1xcclxcbiAgICAgICAgaSsrO1xcclxcblxcclxcbiAgICAgICAgY29udGludWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBwYXJ0ID0gdGVybS5zdWJzdHIoMCwgaSk7XFxyXFxuICAgICAgdmFyIHBhcnRQYXJhbXMgPSAkLmV4dGVuZCh7fSwgcGFyYW1zLCB7XFxyXFxuICAgICAgICB0ZXJtOiBwYXJ0XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGRhdGEgPSBjcmVhdGVUYWcocGFydFBhcmFtcyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGRhdGEgPT0gbnVsbCkge1xcclxcbiAgICAgICAgaSsrO1xcclxcbiAgICAgICAgY29udGludWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xcclxcblxcclxcbiAgICAgIC8vIFJlc2V0IHRoZSB0ZXJtIHRvIG5vdCBpbmNsdWRlIHRoZSB0b2tlbml6ZWQgcG9ydGlvblxcclxcbiAgICAgIHRlcm0gPSB0ZXJtLnN1YnN0cihpICsgMSkgfHwgJyc7XFxyXFxuICAgICAgaSA9IDA7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIHtcXHJcXG4gICAgICB0ZXJtOiB0ZXJtXFxyXFxuICAgIH07XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFRva2VuaXplcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9taW5pbXVtSW5wdXRMZW5ndGgnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICBmdW5jdGlvbiBNaW5pbXVtSW5wdXRMZW5ndGggKGRlY29yYXRlZCwgJGUsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy5taW5pbXVtSW5wdXRMZW5ndGggPSBvcHRpb25zLmdldCgnbWluaW11bUlucHV0TGVuZ3RoJyk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE1pbmltdW1JbnB1dExlbmd0aC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHBhcmFtcy50ZXJtID0gcGFyYW1zLnRlcm0gfHwgJyc7XFxyXFxuXFxyXFxuICAgIGlmIChwYXJhbXMudGVybS5sZW5ndGggPCB0aGlzLm1pbmltdW1JbnB1dExlbmd0aCkge1xcclxcbiAgICAgIHRoaXMudHJpZ2dlcigncmVzdWx0czptZXNzYWdlJywge1xcclxcbiAgICAgICAgbWVzc2FnZTogJ2lucHV0VG9vU2hvcnQnLFxcclxcbiAgICAgICAgYXJnczoge1xcclxcbiAgICAgICAgICBtaW5pbXVtOiB0aGlzLm1pbmltdW1JbnB1dExlbmd0aCxcXHJcXG4gICAgICAgICAgaW5wdXQ6IHBhcmFtcy50ZXJtLFxcclxcbiAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMsIGNhbGxiYWNrKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gTWluaW11bUlucHV0TGVuZ3RoO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL21heGltdW1JbnB1dExlbmd0aCcsW1xcclxcblxcclxcbl0sIGZ1bmN0aW9uICgpIHtcXHJcXG4gIGZ1bmN0aW9uIE1heGltdW1JbnB1dExlbmd0aCAoZGVjb3JhdGVkLCAkZSwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLm1heGltdW1JbnB1dExlbmd0aCA9IG9wdGlvbnMuZ2V0KCdtYXhpbXVtSW5wdXRMZW5ndGgnKTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGUsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgTWF4aW11bUlucHV0TGVuZ3RoLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcywgY2FsbGJhY2spIHtcXHJcXG4gICAgcGFyYW1zLnRlcm0gPSBwYXJhbXMudGVybSB8fCAnJztcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMubWF4aW11bUlucHV0TGVuZ3RoID4gMCAmJlxcclxcbiAgICAgICAgcGFyYW1zLnRlcm0ubGVuZ3RoID4gdGhpcy5tYXhpbXVtSW5wdXRMZW5ndGgpIHtcXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgIG1lc3NhZ2U6ICdpbnB1dFRvb0xvbmcnLFxcclxcbiAgICAgICAgYXJnczoge1xcclxcbiAgICAgICAgICBtYXhpbXVtOiB0aGlzLm1heGltdW1JbnB1dExlbmd0aCxcXHJcXG4gICAgICAgICAgaW5wdXQ6IHBhcmFtcy50ZXJtLFxcclxcbiAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMsIGNhbGxiYWNrKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gTWF4aW11bUlucHV0TGVuZ3RoO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL21heGltdW1TZWxlY3Rpb25MZW5ndGgnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKXtcXHJcXG4gIGZ1bmN0aW9uIE1heGltdW1TZWxlY3Rpb25MZW5ndGggKGRlY29yYXRlZCwgJGUsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy5tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoID0gb3B0aW9ucy5nZXQoJ21heGltdW1TZWxlY3Rpb25MZW5ndGgnKTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGUsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgTWF4aW11bVNlbGVjdGlvbkxlbmd0aC5wcm90b3R5cGUucXVlcnkgPVxcclxcbiAgICBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICAgIHRoaXMuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcXHJcXG4gICAgICAgIHZhciBjb3VudCA9IGN1cnJlbnREYXRhICE9IG51bGwgPyBjdXJyZW50RGF0YS5sZW5ndGggOiAwO1xcclxcbiAgICAgICAgaWYgKHNlbGYubWF4aW11bVNlbGVjdGlvbkxlbmd0aCA+IDAgJiZcXHJcXG4gICAgICAgICAgY291bnQgPj0gc2VsZi5tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czptZXNzYWdlJywge1xcclxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdtYXhpbXVtU2VsZWN0ZWQnLFxcclxcbiAgICAgICAgICAgIGFyZ3M6IHtcXHJcXG4gICAgICAgICAgICAgIG1heGltdW06IHNlbGYubWF4aW11bVNlbGVjdGlvbkxlbmd0aFxcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIGRlY29yYXRlZC5jYWxsKHNlbGYsIHBhcmFtcywgY2FsbGJhY2spO1xcclxcbiAgICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBNYXhpbXVtU2VsZWN0aW9uTGVuZ3RoO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bicsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIERyb3Bkb3duICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XFxyXFxuXFxyXFxuICAgIERyb3Bkb3duLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKERyb3Bkb3duLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIERyb3Bkb3duLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkZHJvcGRvd24gPSAkKFxcclxcbiAgICAgICc8c3BhbiBjbGFzcz1cXFwic2VsZWN0Mi1kcm9wZG93blxcXCI+JyArXFxyXFxuICAgICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItcmVzdWx0c1xcXCI+PC9zcGFuPicgK1xcclxcbiAgICAgICc8L3NwYW4+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICAkZHJvcGRvd24uYXR0cignZGlyJywgdGhpcy5vcHRpb25zLmdldCgnZGlyJykpO1xcclxcblxcclxcbiAgICB0aGlzLiRkcm9wZG93biA9ICRkcm9wZG93bjtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRkcm9wZG93bjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBEcm9wZG93bi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgLy8gU2hvdWxkIGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzZXNcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBEcm9wZG93bi5wcm90b3R5cGUucG9zaXRpb24gPSBmdW5jdGlvbiAoJGRyb3Bkb3duLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIC8vIFNob3VsZCBiZSBpbXBsbWVudGVkIGluIHN1YmNsYXNzZXNcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBEcm9wZG93bi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgLy8gUmVtb3ZlIHRoZSBkcm9wZG93biBmcm9tIHRoZSBET01cXHJcXG4gICAgdGhpcy4kZHJvcGRvd24ucmVtb3ZlKCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIERyb3Bkb3duO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9zZWFyY2gnLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4uL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBVdGlscykge1xcclxcbiAgZnVuY3Rpb24gU2VhcmNoICgpIHsgfVxcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XFxyXFxuICAgIHZhciAkcmVuZGVyZWQgPSBkZWNvcmF0ZWQuY2FsbCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgdmFyICRzZWFyY2ggPSAkKFxcclxcbiAgICAgICc8c3BhbiBjbGFzcz1cXFwic2VsZWN0Mi1zZWFyY2ggc2VsZWN0Mi1zZWFyY2gtLWRyb3Bkb3duXFxcIj4nICtcXHJcXG4gICAgICAgICc8aW5wdXQgY2xhc3M9XFxcInNlbGVjdDItc2VhcmNoX19maWVsZFxcXCIgdHlwZT1cXFwic2VhcmNoXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiJyArXFxyXFxuICAgICAgICAnIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBhdXRvY29ycmVjdD1cXFwib2ZmXFxcIiBhdXRvY2FwaXRhbGl6ZT1cXFwib2ZmXFxcIicgK1xcclxcbiAgICAgICAgJyBzcGVsbGNoZWNrPVxcXCJmYWxzZVxcXCIgcm9sZT1cXFwidGV4dGJveFxcXCIgLz4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoQ29udGFpbmVyID0gJHNlYXJjaDtcXHJcXG4gICAgdGhpcy4kc2VhcmNoID0gJHNlYXJjaC5maW5kKCdpbnB1dCcpO1xcclxcblxcclxcbiAgICAkcmVuZGVyZWQucHJlcGVuZCgkc2VhcmNoKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRyZW5kZXJlZDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2gub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdrZXlwcmVzcycsIGV2dCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fa2V5VXBQcmV2ZW50ZWQgPSBldnQuaXNEZWZhdWx0UHJldmVudGVkKCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBicm93c2VycyB3aGljaCBkbyBub3Qgc3VwcG9ydCB0aGUgYGlucHV0YCBldmVudFxcclxcbiAgICAvLyBUaGlzIHdpbGwgcHJldmVudCBkb3VibGUtdHJpZ2dlcmluZyBvZiBldmVudHMgZm9yIGJyb3dzZXJzIHdoaWNoIHN1cHBvcnRcXHJcXG4gICAgLy8gYm90aCB0aGUgYGtleXVwYCBhbmQgYGlucHV0YCBldmVudHMuXFxyXFxuICAgIHRoaXMuJHNlYXJjaC5vbignaW5wdXQnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgLy8gVW5iaW5kIHRoZSBkdXBsaWNhdGVkIGBrZXl1cGAgZXZlbnRcXHJcXG4gICAgICAkKHRoaXMpLm9mZigna2V5dXAnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlYXJjaC5vbigna2V5dXAgaW5wdXQnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi5oYW5kbGVTZWFyY2goZXZ0KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2guYXR0cigndGFiaW5kZXgnLCAwKTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLiRzZWFyY2guZm9jdXMoKTtcXHJcXG5cXHJcXG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICBzZWxmLiRzZWFyY2guZm9jdXMoKTtcXHJcXG4gICAgICB9LCAwKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLmF0dHIoJ3RhYmluZGV4JywgLTEpO1xcclxcblxcclxcbiAgICAgIHNlbGYuJHNlYXJjaC52YWwoJycpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBpZiAoY29udGFpbmVyLmlzT3BlbigpKSB7XFxyXFxuICAgICAgICBzZWxmLiRzZWFyY2guZm9jdXMoKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YWxsJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIGlmIChwYXJhbXMucXVlcnkudGVybSA9PSBudWxsIHx8IHBhcmFtcy5xdWVyeS50ZXJtID09PSAnJykge1xcclxcbiAgICAgICAgdmFyIHNob3dTZWFyY2ggPSBzZWxmLnNob3dTZWFyY2gocGFyYW1zKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChzaG93U2VhcmNoKSB7XFxyXFxuICAgICAgICAgIHNlbGYuJHNlYXJjaENvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1zZWFyY2gtLWhpZGUnKTtcXHJcXG4gICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgIHNlbGYuJHNlYXJjaENvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1zZWFyY2gtLWhpZGUnKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuaGFuZGxlU2VhcmNoID0gZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICBpZiAoIXRoaXMuX2tleVVwUHJldmVudGVkKSB7XFxyXFxuICAgICAgdmFyIGlucHV0ID0gdGhpcy4kc2VhcmNoLnZhbCgpO1xcclxcblxcclxcbiAgICAgIHRoaXMudHJpZ2dlcigncXVlcnknLCB7XFxyXFxuICAgICAgICB0ZXJtOiBpbnB1dFxcclxcbiAgICAgIH0pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuX2tleVVwUHJldmVudGVkID0gZmFsc2U7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5zaG93U2VhcmNoID0gZnVuY3Rpb24gKF8sIHBhcmFtcykge1xcclxcbiAgICByZXR1cm4gdHJ1ZTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gU2VhcmNoO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9oaWRlUGxhY2Vob2xkZXInLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICBmdW5jdGlvbiBIaWRlUGxhY2Vob2xkZXIgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKSB7XFxyXFxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLm5vcm1hbGl6ZVBsYWNlaG9sZGVyKG9wdGlvbnMuZ2V0KCdwbGFjZWhvbGRlcicpKTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIEhpZGVQbGFjZWhvbGRlci5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgZGF0YSkge1xcclxcbiAgICBkYXRhLnJlc3VsdHMgPSB0aGlzLnJlbW92ZVBsYWNlaG9sZGVyKGRhdGEucmVzdWx0cyk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGRhdGEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEhpZGVQbGFjZWhvbGRlci5wcm90b3R5cGUubm9ybWFsaXplUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoXywgcGxhY2Vob2xkZXIpIHtcXHJcXG4gICAgaWYgKHR5cGVvZiBwbGFjZWhvbGRlciA9PT0gJ3N0cmluZycpIHtcXHJcXG4gICAgICBwbGFjZWhvbGRlciA9IHtcXHJcXG4gICAgICAgIGlkOiAnJyxcXHJcXG4gICAgICAgIHRleHQ6IHBsYWNlaG9sZGVyXFxyXFxuICAgICAgfTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gcGxhY2Vob2xkZXI7XFxyXFxuICB9O1xcclxcblxcclxcbiAgSGlkZVBsYWNlaG9sZGVyLnByb3RvdHlwZS5yZW1vdmVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChfLCBkYXRhKSB7XFxyXFxuICAgIHZhciBtb2RpZmllZERhdGEgPSBkYXRhLnNsaWNlKDApO1xcclxcblxcclxcbiAgICBmb3IgKHZhciBkID0gZGF0YS5sZW5ndGggLSAxOyBkID49IDA7IGQtLSkge1xcclxcbiAgICAgIHZhciBpdGVtID0gZGF0YVtkXTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGhpcy5wbGFjZWhvbGRlci5pZCA9PT0gaXRlbS5pZCkge1xcclxcbiAgICAgICAgbW9kaWZpZWREYXRhLnNwbGljZShkLCAxKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIG1vZGlmaWVkRGF0YTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gSGlkZVBsYWNlaG9sZGVyO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9pbmZpbml0ZVNjcm9sbCcsW1xcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoJCkge1xcclxcbiAgZnVuY3Rpb24gSW5maW5pdGVTY3JvbGwgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKSB7XFxyXFxuICAgIHRoaXMubGFzdFBhcmFtcyA9IHt9O1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpO1xcclxcblxcclxcbiAgICB0aGlzLiRsb2FkaW5nTW9yZSA9IHRoaXMuY3JlYXRlTG9hZGluZ01vcmUoKTtcXHJcXG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBJbmZpbml0ZVNjcm9sbC5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgZGF0YSkge1xcclxcbiAgICB0aGlzLiRsb2FkaW5nTW9yZS5yZW1vdmUoKTtcXHJcXG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGRhdGEpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy5zaG93TG9hZGluZ01vcmUoZGF0YSkpIHtcXHJcXG4gICAgICB0aGlzLiRyZXN1bHRzLmFwcGVuZCh0aGlzLiRsb2FkaW5nTW9yZSk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBJbmZpbml0ZVNjcm9sbC5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncXVlcnknLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5sYXN0UGFyYW1zID0gcGFyYW1zO1xcclxcbiAgICAgIHNlbGYubG9hZGluZyA9IHRydWU7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3F1ZXJ5OmFwcGVuZCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLmxhc3RQYXJhbXMgPSBwYXJhbXM7XFxyXFxuICAgICAgc2VsZi5sb2FkaW5nID0gdHJ1ZTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHJlc3VsdHMub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgaXNMb2FkTW9yZVZpc2libGUgPSAkLmNvbnRhaW5zKFxcclxcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxcclxcbiAgICAgICAgc2VsZi4kbG9hZGluZ01vcmVbMF1cXHJcXG4gICAgICApO1xcclxcblxcclxcbiAgICAgIGlmIChzZWxmLmxvYWRpbmcgfHwgIWlzTG9hZE1vcmVWaXNpYmxlKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gc2VsZi4kcmVzdWx0cy5vZmZzZXQoKS50b3AgK1xcclxcbiAgICAgICAgc2VsZi4kcmVzdWx0cy5vdXRlckhlaWdodChmYWxzZSk7XFxyXFxuICAgICAgdmFyIGxvYWRpbmdNb3JlT2Zmc2V0ID0gc2VsZi4kbG9hZGluZ01vcmUub2Zmc2V0KCkudG9wICtcXHJcXG4gICAgICAgIHNlbGYuJGxvYWRpbmdNb3JlLm91dGVySGVpZ2h0KGZhbHNlKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoY3VycmVudE9mZnNldCArIDUwID49IGxvYWRpbmdNb3JlT2Zmc2V0KSB7XFxyXFxuICAgICAgICBzZWxmLmxvYWRNb3JlKCk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBJbmZpbml0ZVNjcm9sbC5wcm90b3R5cGUubG9hZE1vcmUgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMubG9hZGluZyA9IHRydWU7XFxyXFxuXFxyXFxuICAgIHZhciBwYXJhbXMgPSAkLmV4dGVuZCh7fSwge3BhZ2U6IDF9LCB0aGlzLmxhc3RQYXJhbXMpO1xcclxcblxcclxcbiAgICBwYXJhbXMucGFnZSsrO1xcclxcblxcclxcbiAgICB0aGlzLnRyaWdnZXIoJ3F1ZXJ5OmFwcGVuZCcsIHBhcmFtcyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLnNob3dMb2FkaW5nTW9yZSA9IGZ1bmN0aW9uIChfLCBkYXRhKSB7XFxyXFxuICAgIHJldHVybiBkYXRhLnBhZ2luYXRpb24gJiYgZGF0YS5wYWdpbmF0aW9uLm1vcmU7XFxyXFxuICB9O1xcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmNyZWF0ZUxvYWRpbmdNb3JlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJG9wdGlvbiA9ICQoXFxyXFxuICAgICAgJzxsaSAnICtcXHJcXG4gICAgICAnY2xhc3M9XFxcInNlbGVjdDItcmVzdWx0c19fb3B0aW9uIHNlbGVjdDItcmVzdWx0c19fb3B0aW9uLS1sb2FkLW1vcmVcXFwiJyArXFxyXFxuICAgICAgJ3JvbGU9XFxcInRyZWVpdGVtXFxcIiBhcmlhLWRpc2FibGVkPVxcXCJ0cnVlXFxcIj48L2xpPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgdmFyIG1lc3NhZ2UgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0cmFuc2xhdGlvbnMnKS5nZXQoJ2xvYWRpbmdNb3JlJyk7XFxyXFxuXFxyXFxuICAgICRvcHRpb24uaHRtbChtZXNzYWdlKHRoaXMubGFzdFBhcmFtcykpO1xcclxcblxcclxcbiAgICByZXR1cm4gJG9wdGlvbjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gSW5maW5pdGVTY3JvbGw7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL2F0dGFjaEJvZHknLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4uL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBVdGlscykge1xcclxcbiAgZnVuY3Rpb24gQXR0YWNoQm9keSAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLiRkcm9wZG93blBhcmVudCA9IG9wdGlvbnMuZ2V0KCdkcm9wZG93blBhcmVudCcpIHx8ICQoZG9jdW1lbnQuYm9keSk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgc2V0dXBSZXN1bHRzRXZlbnRzID0gZmFsc2U7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLl9zaG93RHJvcGRvd24oKTtcXHJcXG4gICAgICBzZWxmLl9hdHRhY2hQb3NpdGlvbmluZ0hhbmRsZXIoY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoIXNldHVwUmVzdWx0c0V2ZW50cykge1xcclxcbiAgICAgICAgc2V0dXBSZXN1bHRzRXZlbnRzID0gdHJ1ZTtcXHJcXG5cXHJcXG4gICAgICAgIGNvbnRhaW5lci5vbigncmVzdWx0czphbGwnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgIHNlbGYuX3Bvc2l0aW9uRHJvcGRvd24oKTtcXHJcXG4gICAgICAgICAgc2VsZi5fcmVzaXplRHJvcGRvd24oKTtcXHJcXG4gICAgICAgIH0pO1xcclxcblxcclxcbiAgICAgICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmFwcGVuZCcsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgc2VsZi5fcG9zaXRpb25Ecm9wZG93bigpO1xcclxcbiAgICAgICAgICBzZWxmLl9yZXNpemVEcm9wZG93bigpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLl9oaWRlRHJvcGRvd24oKTtcXHJcXG4gICAgICBzZWxmLl9kZXRhY2hQb3NpdGlvbmluZ0hhbmRsZXIoY29udGFpbmVyKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duQ29udGFpbmVyLm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kZHJvcGRvd25Db250YWluZXIucmVtb3ZlKCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUucG9zaXRpb24gPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCAkZHJvcGRvd24sICRjb250YWluZXIpIHtcXHJcXG4gICAgLy8gQ2xvbmUgYWxsIG9mIHRoZSBjb250YWluZXIgY2xhc3Nlc1xcclxcbiAgICAkZHJvcGRvd24uYXR0cignY2xhc3MnLCAkY29udGFpbmVyLmF0dHIoJ2NsYXNzJykpO1xcclxcblxcclxcbiAgICAkZHJvcGRvd24ucmVtb3ZlQ2xhc3MoJ3NlbGVjdDInKTtcXHJcXG4gICAgJGRyb3Bkb3duLmFkZENsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xcclxcblxcclxcbiAgICAkZHJvcGRvd24uY3NzKHtcXHJcXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcXHJcXG4gICAgICB0b3A6IC05OTk5OTlcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lciA9ICRjb250YWluZXI7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xcclxcbiAgICB2YXIgJGNvbnRhaW5lciA9ICQoJzxzcGFuPjwvc3Bhbj4nKTtcXHJcXG5cXHJcXG4gICAgdmFyICRkcm9wZG93biA9IGRlY29yYXRlZC5jYWxsKHRoaXMpO1xcclxcbiAgICAkY29udGFpbmVyLmFwcGVuZCgkZHJvcGRvd24pO1xcclxcblxcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lciA9ICRjb250YWluZXI7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkY29udGFpbmVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLl9oaWRlRHJvcGRvd24gPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duQ29udGFpbmVyLmRldGFjaCgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLl9hdHRhY2hQb3NpdGlvbmluZ0hhbmRsZXIgPVxcclxcbiAgICAgIGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHZhciBzY3JvbGxFdmVudCA9ICdzY3JvbGwuc2VsZWN0Mi4nICsgY29udGFpbmVyLmlkO1xcclxcbiAgICB2YXIgcmVzaXplRXZlbnQgPSAncmVzaXplLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcXHJcXG4gICAgdmFyIG9yaWVudGF0aW9uRXZlbnQgPSAnb3JpZW50YXRpb25jaGFuZ2Uuc2VsZWN0Mi4nICsgY29udGFpbmVyLmlkO1xcclxcblxcclxcbiAgICB2YXIgJHdhdGNoZXJzID0gdGhpcy4kY29udGFpbmVyLnBhcmVudHMoKS5maWx0ZXIoVXRpbHMuaGFzU2Nyb2xsKTtcXHJcXG4gICAgJHdhdGNoZXJzLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICQodGhpcykuZGF0YSgnc2VsZWN0Mi1zY3JvbGwtcG9zaXRpb24nLCB7XFxyXFxuICAgICAgICB4OiAkKHRoaXMpLnNjcm9sbExlZnQoKSxcXHJcXG4gICAgICAgIHk6ICQodGhpcykuc2Nyb2xsVG9wKClcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgICR3YXRjaGVycy5vbihzY3JvbGxFdmVudCwgZnVuY3Rpb24gKGV2KSB7XFxyXFxuICAgICAgdmFyIHBvc2l0aW9uID0gJCh0aGlzKS5kYXRhKCdzZWxlY3QyLXNjcm9sbC1wb3NpdGlvbicpO1xcclxcbiAgICAgICQodGhpcykuc2Nyb2xsVG9wKHBvc2l0aW9uLnkpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgJCh3aW5kb3cpLm9uKHNjcm9sbEV2ZW50ICsgJyAnICsgcmVzaXplRXZlbnQgKyAnICcgKyBvcmllbnRhdGlvbkV2ZW50LFxcclxcbiAgICAgIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgc2VsZi5fcG9zaXRpb25Ecm9wZG93bigpO1xcclxcbiAgICAgIHNlbGYuX3Jlc2l6ZURyb3Bkb3duKCk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLl9kZXRhY2hQb3NpdGlvbmluZ0hhbmRsZXIgPVxcclxcbiAgICAgIGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2Nyb2xsRXZlbnQgPSAnc2Nyb2xsLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcXHJcXG4gICAgdmFyIHJlc2l6ZUV2ZW50ID0gJ3Jlc2l6ZS5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XFxyXFxuICAgIHZhciBvcmllbnRhdGlvbkV2ZW50ID0gJ29yaWVudGF0aW9uY2hhbmdlLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcXHJcXG5cXHJcXG4gICAgdmFyICR3YXRjaGVycyA9IHRoaXMuJGNvbnRhaW5lci5wYXJlbnRzKCkuZmlsdGVyKFV0aWxzLmhhc1Njcm9sbCk7XFxyXFxuICAgICR3YXRjaGVycy5vZmYoc2Nyb2xsRXZlbnQpO1xcclxcblxcclxcbiAgICAkKHdpbmRvdykub2ZmKHNjcm9sbEV2ZW50ICsgJyAnICsgcmVzaXplRXZlbnQgKyAnICcgKyBvcmllbnRhdGlvbkV2ZW50KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fcG9zaXRpb25Ecm9wZG93biA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XFxyXFxuXFxyXFxuICAgIHZhciBpc0N1cnJlbnRseUFib3ZlID0gdGhpcy4kZHJvcGRvd24uaGFzQ2xhc3MoJ3NlbGVjdDItZHJvcGRvd24tLWFib3ZlJyk7XFxyXFxuICAgIHZhciBpc0N1cnJlbnRseUJlbG93ID0gdGhpcy4kZHJvcGRvd24uaGFzQ2xhc3MoJ3NlbGVjdDItZHJvcGRvd24tLWJlbG93Jyk7XFxyXFxuXFxyXFxuICAgIHZhciBuZXdEaXJlY3Rpb24gPSBudWxsO1xcclxcblxcclxcbiAgICB2YXIgb2Zmc2V0ID0gdGhpcy4kY29udGFpbmVyLm9mZnNldCgpO1xcclxcblxcclxcbiAgICBvZmZzZXQuYm90dG9tID0gb2Zmc2V0LnRvcCArIHRoaXMuJGNvbnRhaW5lci5vdXRlckhlaWdodChmYWxzZSk7XFxyXFxuXFxyXFxuICAgIHZhciBjb250YWluZXIgPSB7XFxyXFxuICAgICAgaGVpZ2h0OiB0aGlzLiRjb250YWluZXIub3V0ZXJIZWlnaHQoZmFsc2UpXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci50b3AgPSBvZmZzZXQudG9wO1xcclxcbiAgICBjb250YWluZXIuYm90dG9tID0gb2Zmc2V0LnRvcCArIGNvbnRhaW5lci5oZWlnaHQ7XFxyXFxuXFxyXFxuICAgIHZhciBkcm9wZG93biA9IHtcXHJcXG4gICAgICBoZWlnaHQ6IHRoaXMuJGRyb3Bkb3duLm91dGVySGVpZ2h0KGZhbHNlKVxcclxcbiAgICB9O1xcclxcblxcclxcbiAgICB2YXIgdmlld3BvcnQgPSB7XFxyXFxuICAgICAgdG9wOiAkd2luZG93LnNjcm9sbFRvcCgpLFxcclxcbiAgICAgIGJvdHRvbTogJHdpbmRvdy5zY3JvbGxUb3AoKSArICR3aW5kb3cuaGVpZ2h0KClcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgdmFyIGVub3VnaFJvb21BYm92ZSA9IHZpZXdwb3J0LnRvcCA8IChvZmZzZXQudG9wIC0gZHJvcGRvd24uaGVpZ2h0KTtcXHJcXG4gICAgdmFyIGVub3VnaFJvb21CZWxvdyA9IHZpZXdwb3J0LmJvdHRvbSA+IChvZmZzZXQuYm90dG9tICsgZHJvcGRvd24uaGVpZ2h0KTtcXHJcXG5cXHJcXG4gICAgdmFyIGNzcyA9IHtcXHJcXG4gICAgICBsZWZ0OiBvZmZzZXQubGVmdCxcXHJcXG4gICAgICB0b3A6IGNvbnRhaW5lci5ib3R0b21cXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgLy8gRGV0ZXJtaW5lIHdoYXQgdGhlIHBhcmVudCBlbGVtZW50IGlzIHRvIHVzZSBmb3IgY2FsY2l1bGF0aW5nIHRoZSBvZmZzZXRcXHJcXG4gICAgdmFyICRvZmZzZXRQYXJlbnQgPSB0aGlzLiRkcm9wZG93blBhcmVudDtcXHJcXG5cXHJcXG4gICAgLy8gRm9yIHN0YXRpY2FsbHkgcG9zaXRvbmVkIGVsZW1lbnRzLCB3ZSBuZWVkIHRvIGdldCB0aGUgZWxlbWVudFxcclxcbiAgICAvLyB0aGF0IGlzIGRldGVybWluaW5nIHRoZSBvZmZzZXRcXHJcXG4gICAgaWYgKCRvZmZzZXRQYXJlbnQuY3NzKCdwb3NpdGlvbicpID09PSAnc3RhdGljJykge1xcclxcbiAgICAgICRvZmZzZXRQYXJlbnQgPSAkb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudCgpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBwYXJlbnRPZmZzZXQgPSAkb2Zmc2V0UGFyZW50Lm9mZnNldCgpO1xcclxcblxcclxcbiAgICBjc3MudG9wIC09IHBhcmVudE9mZnNldC50b3A7XFxyXFxuICAgIGNzcy5sZWZ0IC09IHBhcmVudE9mZnNldC5sZWZ0O1xcclxcblxcclxcbiAgICBpZiAoIWlzQ3VycmVudGx5QWJvdmUgJiYgIWlzQ3VycmVudGx5QmVsb3cpIHtcXHJcXG4gICAgICBuZXdEaXJlY3Rpb24gPSAnYmVsb3cnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICghZW5vdWdoUm9vbUJlbG93ICYmIGVub3VnaFJvb21BYm92ZSAmJiAhaXNDdXJyZW50bHlBYm92ZSkge1xcclxcbiAgICAgIG5ld0RpcmVjdGlvbiA9ICdhYm92ZSc7XFxyXFxuICAgIH0gZWxzZSBpZiAoIWVub3VnaFJvb21BYm92ZSAmJiBlbm91Z2hSb29tQmVsb3cgJiYgaXNDdXJyZW50bHlBYm92ZSkge1xcclxcbiAgICAgIG5ld0RpcmVjdGlvbiA9ICdiZWxvdyc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG5ld0RpcmVjdGlvbiA9PSAnYWJvdmUnIHx8XFxyXFxuICAgICAgKGlzQ3VycmVudGx5QWJvdmUgJiYgbmV3RGlyZWN0aW9uICE9PSAnYmVsb3cnKSkge1xcclxcbiAgICAgIGNzcy50b3AgPSBjb250YWluZXIudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCAtIGRyb3Bkb3duLmhlaWdodDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAobmV3RGlyZWN0aW9uICE9IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLiRkcm9wZG93blxcclxcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS1iZWxvdyBzZWxlY3QyLWRyb3Bkb3duLS1hYm92ZScpXFxyXFxuICAgICAgICAuYWRkQ2xhc3MoJ3NlbGVjdDItZHJvcGRvd24tLScgKyBuZXdEaXJlY3Rpb24pO1xcclxcbiAgICAgIHRoaXMuJGNvbnRhaW5lclxcclxcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tYmVsb3cgc2VsZWN0Mi1jb250YWluZXItLWFib3ZlJylcXHJcXG4gICAgICAgIC5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLScgKyBuZXdEaXJlY3Rpb24pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duQ29udGFpbmVyLmNzcyhjc3MpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLl9yZXNpemVEcm9wZG93biA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyIGNzcyA9IHtcXHJcXG4gICAgICB3aWR0aDogdGhpcy4kY29udGFpbmVyLm91dGVyV2lkdGgoZmFsc2UpICsgJ3B4J1xcclxcbiAgICB9O1xcclxcblxcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZHJvcGRvd25BdXRvV2lkdGgnKSkge1xcclxcbiAgICAgIGNzcy5taW5XaWR0aCA9IGNzcy53aWR0aDtcXHJcXG4gICAgICBjc3MucG9zaXRpb24gPSAncmVsYXRpdmUnO1xcclxcbiAgICAgIGNzcy53aWR0aCA9ICdhdXRvJztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRkcm9wZG93bi5jc3MoY3NzKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fc2hvd0Ryb3Bkb3duID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5hcHBlbmRUbyh0aGlzLiRkcm9wZG93blBhcmVudCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuX3Bvc2l0aW9uRHJvcGRvd24oKTtcXHJcXG4gICAgdGhpcy5fcmVzaXplRHJvcGRvd24oKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQXR0YWNoQm9keTtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vbWluaW11bVJlc3VsdHNGb3JTZWFyY2gnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICBmdW5jdGlvbiBjb3VudFJlc3VsdHMgKGRhdGEpIHtcXHJcXG4gICAgdmFyIGNvdW50ID0gMDtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXRhLmxlbmd0aDsgZCsrKSB7XFxyXFxuICAgICAgdmFyIGl0ZW0gPSBkYXRhW2RdO1xcclxcblxcclxcbiAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7XFxyXFxuICAgICAgICBjb3VudCArPSBjb3VudFJlc3VsdHMoaXRlbS5jaGlsZHJlbik7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIGNvdW50Kys7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBjb3VudDtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIGZ1bmN0aW9uIE1pbmltdW1SZXN1bHRzRm9yU2VhcmNoIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcikge1xcclxcbiAgICB0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoID0gb3B0aW9ucy5nZXQoJ21pbmltdW1SZXN1bHRzRm9yU2VhcmNoJyk7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoIDwgMCkge1xcclxcbiAgICAgIHRoaXMubWluaW11bVJlc3VsdHNGb3JTZWFyY2ggPSBJbmZpbml0eTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpO1xcclxcbiAgfVxcclxcblxcclxcbiAgTWluaW11bVJlc3VsdHNGb3JTZWFyY2gucHJvdG90eXBlLnNob3dTZWFyY2ggPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMpIHtcXHJcXG4gICAgaWYgKGNvdW50UmVzdWx0cyhwYXJhbXMuZGF0YS5yZXN1bHRzKSA8IHRoaXMubWluaW11bVJlc3VsdHNGb3JTZWFyY2gpIHtcXHJcXG4gICAgICByZXR1cm4gZmFsc2U7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIGRlY29yYXRlZC5jYWxsKHRoaXMsIHBhcmFtcyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIE1pbmltdW1SZXN1bHRzRm9yU2VhcmNoO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9zZWxlY3RPbkNsb3NlJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gU2VsZWN0T25DbG9zZSAoKSB7IH1cXHJcXG5cXHJcXG4gIFNlbGVjdE9uQ2xvc2UucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuX2hhbmRsZVNlbGVjdE9uQ2xvc2UocGFyYW1zKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0T25DbG9zZS5wcm90b3R5cGUuX2hhbmRsZVNlbGVjdE9uQ2xvc2UgPSBmdW5jdGlvbiAoXywgcGFyYW1zKSB7XFxyXFxuICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLm9yaWdpbmFsU2VsZWN0MkV2ZW50ICE9IG51bGwpIHtcXHJcXG4gICAgICB2YXIgZXZlbnQgPSBwYXJhbXMub3JpZ2luYWxTZWxlY3QyRXZlbnQ7XFxyXFxuXFxyXFxuICAgICAgLy8gRG9uJ3Qgc2VsZWN0IGFuIGl0ZW0gaWYgdGhlIGNsb3NlIGV2ZW50IHdhcyB0cmlnZ2VyZWQgZnJvbSBhIHNlbGVjdCBvclxcclxcbiAgICAgIC8vIHVuc2VsZWN0IGV2ZW50XFxyXFxuICAgICAgaWYgKGV2ZW50Ll90eXBlID09PSAnc2VsZWN0JyB8fCBldmVudC5fdHlwZSA9PT0gJ3Vuc2VsZWN0Jykge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgJGhpZ2hsaWdodGVkUmVzdWx0cyA9IHRoaXMuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XFxyXFxuXFxyXFxuICAgIC8vIE9ubHkgc2VsZWN0IGhpZ2hsaWdodGVkIHJlc3VsdHNcXHJcXG4gICAgaWYgKCRoaWdobGlnaHRlZFJlc3VsdHMubGVuZ3RoIDwgMSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgZGF0YSA9ICRoaWdobGlnaHRlZFJlc3VsdHMuZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAvLyBEb24ndCByZS1zZWxlY3QgYWxyZWFkeSBzZWxlY3RlZCByZXN1bHRlXFxyXFxuICAgIGlmIChcXHJcXG4gICAgICAoZGF0YS5lbGVtZW50ICE9IG51bGwgJiYgZGF0YS5lbGVtZW50LnNlbGVjdGVkKSB8fFxcclxcbiAgICAgIChkYXRhLmVsZW1lbnQgPT0gbnVsbCAmJiBkYXRhLnNlbGVjdGVkKVxcclxcbiAgICApIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCdzZWxlY3QnLCB7XFxyXFxuICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBTZWxlY3RPbkNsb3NlO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9jbG9zZU9uU2VsZWN0JyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gQ2xvc2VPblNlbGVjdCAoKSB7IH1cXHJcXG5cXHJcXG4gIENsb3NlT25TZWxlY3QucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3NlbGVjdCcsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLl9zZWxlY3RUcmlnZ2VyZWQoZXZ0KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigndW5zZWxlY3QnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi5fc2VsZWN0VHJpZ2dlcmVkKGV2dCk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIENsb3NlT25TZWxlY3QucHJvdG90eXBlLl9zZWxlY3RUcmlnZ2VyZWQgPSBmdW5jdGlvbiAoXywgZXZ0KSB7XFxyXFxuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gZXZ0Lm9yaWdpbmFsRXZlbnQ7XFxyXFxuXFxyXFxuICAgIC8vIERvbid0IGNsb3NlIGlmIHRoZSBjb250cm9sIGtleSBpcyBiZWluZyBoZWxkXFxyXFxuICAgIGlmIChvcmlnaW5hbEV2ZW50ICYmIG9yaWdpbmFsRXZlbnQuY3RybEtleSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLnRyaWdnZXIoJ2Nsb3NlJywge1xcclxcbiAgICAgIG9yaWdpbmFsRXZlbnQ6IG9yaWdpbmFsRXZlbnQsXFxyXFxuICAgICAgb3JpZ2luYWxTZWxlY3QyRXZlbnQ6IGV2dFxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQ2xvc2VPblNlbGVjdDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvaTE4bi9lbicsW10sZnVuY3Rpb24gKCkge1xcclxcbiAgLy8gRW5nbGlzaFxcclxcbiAgcmV0dXJuIHtcXHJcXG4gICAgZXJyb3JMb2FkaW5nOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuICdUaGUgcmVzdWx0cyBjb3VsZCBub3QgYmUgbG9hZGVkLic7XFxyXFxuICAgIH0sXFxyXFxuICAgIGlucHV0VG9vTG9uZzogZnVuY3Rpb24gKGFyZ3MpIHtcXHJcXG4gICAgICB2YXIgb3ZlckNoYXJzID0gYXJncy5pbnB1dC5sZW5ndGggLSBhcmdzLm1heGltdW07XFxyXFxuXFxyXFxuICAgICAgdmFyIG1lc3NhZ2UgPSAnUGxlYXNlIGRlbGV0ZSAnICsgb3ZlckNoYXJzICsgJyBjaGFyYWN0ZXInO1xcclxcblxcclxcbiAgICAgIGlmIChvdmVyQ2hhcnMgIT0gMSkge1xcclxcbiAgICAgICAgbWVzc2FnZSArPSAncyc7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybiBtZXNzYWdlO1xcclxcbiAgICB9LFxcclxcbiAgICBpbnB1dFRvb1Nob3J0OiBmdW5jdGlvbiAoYXJncykge1xcclxcbiAgICAgIHZhciByZW1haW5pbmdDaGFycyA9IGFyZ3MubWluaW11bSAtIGFyZ3MuaW5wdXQubGVuZ3RoO1xcclxcblxcclxcbiAgICAgIHZhciBtZXNzYWdlID0gJ1BsZWFzZSBlbnRlciAnICsgcmVtYWluaW5nQ2hhcnMgKyAnIG9yIG1vcmUgY2hhcmFjdGVycyc7XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuIG1lc3NhZ2U7XFxyXFxuICAgIH0sXFxyXFxuICAgIGxvYWRpbmdNb3JlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuICdMb2FkaW5nIG1vcmUgcmVzdWx0c+KApic7XFxyXFxuICAgIH0sXFxyXFxuICAgIG1heGltdW1TZWxlY3RlZDogZnVuY3Rpb24gKGFyZ3MpIHtcXHJcXG4gICAgICB2YXIgbWVzc2FnZSA9ICdZb3UgY2FuIG9ubHkgc2VsZWN0ICcgKyBhcmdzLm1heGltdW0gKyAnIGl0ZW0nO1xcclxcblxcclxcbiAgICAgIGlmIChhcmdzLm1heGltdW0gIT0gMSkge1xcclxcbiAgICAgICAgbWVzc2FnZSArPSAncyc7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybiBtZXNzYWdlO1xcclxcbiAgICB9LFxcclxcbiAgICBub1Jlc3VsdHM6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICByZXR1cm4gJ05vIHJlc3VsdHMgZm91bmQnO1xcclxcbiAgICB9LFxcclxcbiAgICBzZWFyY2hpbmc6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICByZXR1cm4gJ1NlYXJjaGluZ+KApic7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RlZmF1bHRzJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICdyZXF1aXJlJyxcXHJcXG5cXHJcXG4gICcuL3Jlc3VsdHMnLFxcclxcblxcclxcbiAgJy4vc2VsZWN0aW9uL3NpbmdsZScsXFxyXFxuICAnLi9zZWxlY3Rpb24vbXVsdGlwbGUnLFxcclxcbiAgJy4vc2VsZWN0aW9uL3BsYWNlaG9sZGVyJyxcXHJcXG4gICcuL3NlbGVjdGlvbi9hbGxvd0NsZWFyJyxcXHJcXG4gICcuL3NlbGVjdGlvbi9zZWFyY2gnLFxcclxcbiAgJy4vc2VsZWN0aW9uL2V2ZW50UmVsYXknLFxcclxcblxcclxcbiAgJy4vdXRpbHMnLFxcclxcbiAgJy4vdHJhbnNsYXRpb24nLFxcclxcbiAgJy4vZGlhY3JpdGljcycsXFxyXFxuXFxyXFxuICAnLi9kYXRhL3NlbGVjdCcsXFxyXFxuICAnLi9kYXRhL2FycmF5JyxcXHJcXG4gICcuL2RhdGEvYWpheCcsXFxyXFxuICAnLi9kYXRhL3RhZ3MnLFxcclxcbiAgJy4vZGF0YS90b2tlbml6ZXInLFxcclxcbiAgJy4vZGF0YS9taW5pbXVtSW5wdXRMZW5ndGgnLFxcclxcbiAgJy4vZGF0YS9tYXhpbXVtSW5wdXRMZW5ndGgnLFxcclxcbiAgJy4vZGF0YS9tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoJyxcXHJcXG5cXHJcXG4gICcuL2Ryb3Bkb3duJyxcXHJcXG4gICcuL2Ryb3Bkb3duL3NlYXJjaCcsXFxyXFxuICAnLi9kcm9wZG93bi9oaWRlUGxhY2Vob2xkZXInLFxcclxcbiAgJy4vZHJvcGRvd24vaW5maW5pdGVTY3JvbGwnLFxcclxcbiAgJy4vZHJvcGRvd24vYXR0YWNoQm9keScsXFxyXFxuICAnLi9kcm9wZG93bi9taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCcsXFxyXFxuICAnLi9kcm9wZG93bi9zZWxlY3RPbkNsb3NlJyxcXHJcXG4gICcuL2Ryb3Bkb3duL2Nsb3NlT25TZWxlY3QnLFxcclxcblxcclxcbiAgJy4vaTE4bi9lbidcXHJcXG5dLCBmdW5jdGlvbiAoJCwgcmVxdWlyZSxcXHJcXG5cXHJcXG4gICAgICAgICAgICAgUmVzdWx0c0xpc3QsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIFNpbmdsZVNlbGVjdGlvbiwgTXVsdGlwbGVTZWxlY3Rpb24sIFBsYWNlaG9sZGVyLCBBbGxvd0NsZWFyLFxcclxcbiAgICAgICAgICAgICBTZWxlY3Rpb25TZWFyY2gsIEV2ZW50UmVsYXksXFxyXFxuXFxyXFxuICAgICAgICAgICAgIFV0aWxzLCBUcmFuc2xhdGlvbiwgRElBQ1JJVElDUyxcXHJcXG5cXHJcXG4gICAgICAgICAgICAgU2VsZWN0RGF0YSwgQXJyYXlEYXRhLCBBamF4RGF0YSwgVGFncywgVG9rZW5pemVyLFxcclxcbiAgICAgICAgICAgICBNaW5pbXVtSW5wdXRMZW5ndGgsIE1heGltdW1JbnB1dExlbmd0aCwgTWF4aW11bVNlbGVjdGlvbkxlbmd0aCxcXHJcXG5cXHJcXG4gICAgICAgICAgICAgRHJvcGRvd24sIERyb3Bkb3duU2VhcmNoLCBIaWRlUGxhY2Vob2xkZXIsIEluZmluaXRlU2Nyb2xsLFxcclxcbiAgICAgICAgICAgICBBdHRhY2hCb2R5LCBNaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCwgU2VsZWN0T25DbG9zZSwgQ2xvc2VPblNlbGVjdCxcXHJcXG5cXHJcXG4gICAgICAgICAgICAgRW5nbGlzaFRyYW5zbGF0aW9uKSB7XFxyXFxuICBmdW5jdGlvbiBEZWZhdWx0cyAoKSB7XFxyXFxuICAgIHRoaXMucmVzZXQoKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIERlZmF1bHRzLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XFxyXFxuICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyk7XFxyXFxuXFxyXFxuICAgIGlmIChvcHRpb25zLmRhdGFBZGFwdGVyID09IG51bGwpIHtcXHJcXG4gICAgICBpZiAob3B0aW9ucy5hamF4ICE9IG51bGwpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBBamF4RGF0YTtcXHJcXG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YSAhPSBudWxsKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gQXJyYXlEYXRhO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gU2VsZWN0RGF0YTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMubWluaW11bUlucHV0TGVuZ3RoID4gMCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyLFxcclxcbiAgICAgICAgICBNaW5pbXVtSW5wdXRMZW5ndGhcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLm1heGltdW1JbnB1dExlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgTWF4aW11bUlucHV0TGVuZ3RoXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoID4gMCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyLFxcclxcbiAgICAgICAgICBNYXhpbXVtU2VsZWN0aW9uTGVuZ3RoXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy50YWdzKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUob3B0aW9ucy5kYXRhQWRhcHRlciwgVGFncyk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLnRva2VuU2VwYXJhdG9ycyAhPSBudWxsIHx8IG9wdGlvbnMudG9rZW5pemVyICE9IG51bGwpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgVG9rZW5pemVyXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5xdWVyeSAhPSBudWxsKSB7XFxyXFxuICAgICAgICB2YXIgUXVlcnkgPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvcXVlcnknKTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgUXVlcnlcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLmluaXRTZWxlY3Rpb24gIT0gbnVsbCkge1xcclxcbiAgICAgICAgdmFyIEluaXRTZWxlY3Rpb24gPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvaW5pdFNlbGVjdGlvbicpO1xcclxcblxcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyLFxcclxcbiAgICAgICAgICBJbml0U2VsZWN0aW9uXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAob3B0aW9ucy5yZXN1bHRzQWRhcHRlciA9PSBudWxsKSB7XFxyXFxuICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlciA9IFJlc3VsdHNMaXN0O1xcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLmFqYXggIT0gbnVsbCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLnJlc3VsdHNBZGFwdGVyLFxcclxcbiAgICAgICAgICBJbmZpbml0ZVNjcm9sbFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIgIT0gbnVsbCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLnJlc3VsdHNBZGFwdGVyLFxcclxcbiAgICAgICAgICBIaWRlUGxhY2Vob2xkZXJcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLnNlbGVjdE9uQ2xvc2UpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlcixcXHJcXG4gICAgICAgICAgU2VsZWN0T25DbG9zZVxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID09IG51bGwpIHtcXHJcXG4gICAgICBpZiAob3B0aW9ucy5tdWx0aXBsZSkge1xcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBEcm9wZG93bjtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgdmFyIFNlYXJjaGFibGVEcm9wZG93biA9IFV0aWxzLkRlY29yYXRlKERyb3Bkb3duLCBEcm9wZG93blNlYXJjaCk7XFxyXFxuXFxyXFxuICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlciA9IFNlYXJjaGFibGVEcm9wZG93bjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMubWluaW11bVJlc3VsdHNGb3JTZWFyY2ggIT09IDApIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyLFxcclxcbiAgICAgICAgICBNaW5pbXVtUmVzdWx0c0ZvclNlYXJjaFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMuY2xvc2VPblNlbGVjdCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIsXFxyXFxuICAgICAgICAgIENsb3NlT25TZWxlY3RcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25Dc3NDbGFzcyAhPSBudWxsIHx8XFxyXFxuICAgICAgICBvcHRpb25zLmRyb3Bkb3duQ3NzICE9IG51bGwgfHxcXHJcXG4gICAgICAgIG9wdGlvbnMuYWRhcHREcm9wZG93bkNzc0NsYXNzICE9IG51bGxcXHJcXG4gICAgICApIHtcXHJcXG4gICAgICAgIHZhciBEcm9wZG93bkNTUyA9IHJlcXVpcmUob3B0aW9ucy5hbWRCYXNlICsgJ2NvbXBhdC9kcm9wZG93bkNzcycpO1xcclxcblxcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIsXFxyXFxuICAgICAgICAgIERyb3Bkb3duQ1NTXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIsXFxyXFxuICAgICAgICBBdHRhY2hCb2R5XFxyXFxuICAgICAgKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAob3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID09IG51bGwpIHtcXHJcXG4gICAgICBpZiAob3B0aW9ucy5tdWx0aXBsZSkge1xcclxcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gTXVsdGlwbGVTZWxlY3Rpb247XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IFNpbmdsZVNlbGVjdGlvbjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgLy8gQWRkIHRoZSBwbGFjZWhvbGRlciBtaXhpbiBpZiBhIHBsYWNlaG9sZGVyIHdhcyBzcGVjaWZpZWRcXHJcXG4gICAgICBpZiAob3B0aW9ucy5wbGFjZWhvbGRlciAhPSBudWxsKSB7XFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxcclxcbiAgICAgICAgICBQbGFjZWhvbGRlclxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMuYWxsb3dDbGVhcikge1xcclxcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlcixcXHJcXG4gICAgICAgICAgQWxsb3dDbGVhclxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIsXFxyXFxuICAgICAgICAgIFNlbGVjdGlvblNlYXJjaFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKFxcclxcbiAgICAgICAgb3B0aW9ucy5jb250YWluZXJDc3NDbGFzcyAhPSBudWxsIHx8XFxyXFxuICAgICAgICBvcHRpb25zLmNvbnRhaW5lckNzcyAhPSBudWxsIHx8XFxyXFxuICAgICAgICBvcHRpb25zLmFkYXB0Q29udGFpbmVyQ3NzQ2xhc3MgIT0gbnVsbFxcclxcbiAgICAgICkge1xcclxcbiAgICAgICAgdmFyIENvbnRhaW5lckNTUyA9IHJlcXVpcmUob3B0aW9ucy5hbWRCYXNlICsgJ2NvbXBhdC9jb250YWluZXJDc3MnKTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIsXFxyXFxuICAgICAgICAgIENvbnRhaW5lckNTU1xcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIsXFxyXFxuICAgICAgICBFdmVudFJlbGF5XFxyXFxuICAgICAgKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMubGFuZ3VhZ2UgPT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGxhbmd1YWdlIGlzIHNwZWNpZmllZCB3aXRoIGEgcmVnaW9uXFxyXFxuICAgICAgaWYgKG9wdGlvbnMubGFuZ3VhZ2UuaW5kZXhPZignLScpID4gMCkge1xcclxcbiAgICAgICAgLy8gRXh0cmFjdCB0aGUgcmVnaW9uIGluZm9ybWF0aW9uIGlmIGl0IGlzIGluY2x1ZGVkXFxyXFxuICAgICAgICB2YXIgbGFuZ3VhZ2VQYXJ0cyA9IG9wdGlvbnMubGFuZ3VhZ2Uuc3BsaXQoJy0nKTtcXHJcXG4gICAgICAgIHZhciBiYXNlTGFuZ3VhZ2UgPSBsYW5ndWFnZVBhcnRzWzBdO1xcclxcblxcclxcbiAgICAgICAgb3B0aW9ucy5sYW5ndWFnZSA9IFtvcHRpb25zLmxhbmd1YWdlLCBiYXNlTGFuZ3VhZ2VdO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBvcHRpb25zLmxhbmd1YWdlID0gW29wdGlvbnMubGFuZ3VhZ2VdO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoJC5pc0FycmF5KG9wdGlvbnMubGFuZ3VhZ2UpKSB7XFxyXFxuICAgICAgdmFyIGxhbmd1YWdlcyA9IG5ldyBUcmFuc2xhdGlvbigpO1xcclxcbiAgICAgIG9wdGlvbnMubGFuZ3VhZ2UucHVzaCgnZW4nKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgbGFuZ3VhZ2VOYW1lcyA9IG9wdGlvbnMubGFuZ3VhZ2U7XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBsYW5ndWFnZU5hbWVzLmxlbmd0aDsgbCsrKSB7XFxyXFxuICAgICAgICB2YXIgbmFtZSA9IGxhbmd1YWdlTmFtZXNbbF07XFxyXFxuICAgICAgICB2YXIgbGFuZ3VhZ2UgPSB7fTtcXHJcXG5cXHJcXG4gICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgIC8vIFRyeSB0byBsb2FkIGl0IHdpdGggdGhlIG9yaWdpbmFsIG5hbWVcXHJcXG4gICAgICAgICAgbGFuZ3VhZ2UgPSBUcmFuc2xhdGlvbi5sb2FkUGF0aChuYW1lKTtcXHJcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXHJcXG4gICAgICAgICAgdHJ5IHtcXHJcXG4gICAgICAgICAgICAvLyBJZiB3ZSBjb3VsZG4ndCBsb2FkIGl0LCBjaGVjayBpZiBpdCB3YXNuJ3QgdGhlIGZ1bGwgcGF0aFxcclxcbiAgICAgICAgICAgIG5hbWUgPSB0aGlzLmRlZmF1bHRzLmFtZExhbmd1YWdlQmFzZSArIG5hbWU7XFxyXFxuICAgICAgICAgICAgbGFuZ3VhZ2UgPSBUcmFuc2xhdGlvbi5sb2FkUGF0aChuYW1lKTtcXHJcXG4gICAgICAgICAgfSBjYXRjaCAoZXgpIHtcXHJcXG4gICAgICAgICAgICAvLyBUaGUgdHJhbnNsYXRpb24gY291bGQgbm90IGJlIGxvYWRlZCBhdCBhbGwuIFNvbWV0aW1lcyB0aGlzIGlzXFxyXFxuICAgICAgICAgICAgLy8gYmVjYXVzZSBvZiBhIGNvbmZpZ3VyYXRpb24gcHJvYmxlbSwgb3RoZXIgdGltZXMgdGhpcyBjYW4gYmVcXHJcXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG9mIGhvdyBTZWxlY3QyIGhlbHBzIGxvYWQgYWxsIHBvc3NpYmxlIHRyYW5zbGF0aW9uIGZpbGVzLlxcclxcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlYnVnICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xcclxcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxcclxcbiAgICAgICAgICAgICAgICAnU2VsZWN0MjogVGhlIGxhbmd1YWdlIGZpbGUgZm9yIFxcXCInICsgbmFtZSArICdcXFwiIGNvdWxkIG5vdCBiZSAnICtcXHJcXG4gICAgICAgICAgICAgICAgJ2F1dG9tYXRpY2FsbHkgbG9hZGVkLiBBIGZhbGxiYWNrIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLidcXHJcXG4gICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBsYW5ndWFnZXMuZXh0ZW5kKGxhbmd1YWdlKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgb3B0aW9ucy50cmFuc2xhdGlvbnMgPSBsYW5ndWFnZXM7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdmFyIGJhc2VUcmFuc2xhdGlvbiA9IFRyYW5zbGF0aW9uLmxvYWRQYXRoKFxcclxcbiAgICAgICAgdGhpcy5kZWZhdWx0cy5hbWRMYW5ndWFnZUJhc2UgKyAnZW4nXFxyXFxuICAgICAgKTtcXHJcXG4gICAgICB2YXIgY3VzdG9tVHJhbnNsYXRpb24gPSBuZXcgVHJhbnNsYXRpb24ob3B0aW9ucy5sYW5ndWFnZSk7XFxyXFxuXFxyXFxuICAgICAgY3VzdG9tVHJhbnNsYXRpb24uZXh0ZW5kKGJhc2VUcmFuc2xhdGlvbik7XFxyXFxuXFxyXFxuICAgICAgb3B0aW9ucy50cmFuc2xhdGlvbnMgPSBjdXN0b21UcmFuc2xhdGlvbjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gb3B0aW9ucztcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBEZWZhdWx0cy5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIGZ1bmN0aW9uIHN0cmlwRGlhY3JpdGljcyAodGV4dCkge1xcclxcbiAgICAgIC8vIFVzZWQgJ3VuaSByYW5nZSArIG5hbWVkIGZ1bmN0aW9uJyBmcm9tIGh0dHA6Ly9qc3BlcmYuY29tL2RpYWNyaXRpY3MvMThcXHJcXG4gICAgICBmdW5jdGlvbiBtYXRjaChhKSB7XFxyXFxuICAgICAgICByZXR1cm4gRElBQ1JJVElDU1thXSB8fCBhO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9bXlxcXFx1MDAwMC1cXFxcdTAwN0VdL2csIG1hdGNoKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBmdW5jdGlvbiBtYXRjaGVyIChwYXJhbXMsIGRhdGEpIHtcXHJcXG4gICAgICAvLyBBbHdheXMgcmV0dXJuIHRoZSBvYmplY3QgaWYgdGhlcmUgaXMgbm90aGluZyB0byBjb21wYXJlXFxyXFxuICAgICAgaWYgKCQudHJpbShwYXJhbXMudGVybSkgPT09ICcnKSB7XFxyXFxuICAgICAgICByZXR1cm4gZGF0YTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgLy8gRG8gYSByZWN1cnNpdmUgY2hlY2sgZm9yIG9wdGlvbnMgd2l0aCBjaGlsZHJlblxcclxcbiAgICAgIGlmIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xcclxcbiAgICAgICAgLy8gQ2xvbmUgdGhlIGRhdGEgb2JqZWN0IGlmIHRoZXJlIGFyZSBjaGlsZHJlblxcclxcbiAgICAgICAgLy8gVGhpcyBpcyByZXF1aXJlZCBhcyB3ZSBtb2RpZnkgdGhlIG9iamVjdCB0byByZW1vdmUgYW55IG5vbi1tYXRjaGVzXFxyXFxuICAgICAgICB2YXIgbWF0Y2ggPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGF0YSk7XFxyXFxuXFxyXFxuICAgICAgICAvLyBDaGVjayBlYWNoIGNoaWxkIG9mIHRoZSBvcHRpb25cXHJcXG4gICAgICAgIGZvciAodmFyIGMgPSBkYXRhLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSB7XFxyXFxuICAgICAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XFxyXFxuXFxyXFxuICAgICAgICAgIHZhciBtYXRjaGVzID0gbWF0Y2hlcihwYXJhbXMsIGNoaWxkKTtcXHJcXG5cXHJcXG4gICAgICAgICAgLy8gSWYgdGhlcmUgd2Fzbid0IGEgbWF0Y2gsIHJlbW92ZSB0aGUgb2JqZWN0IGluIHRoZSBhcnJheVxcclxcbiAgICAgICAgICBpZiAobWF0Y2hlcyA9PSBudWxsKSB7XFxyXFxuICAgICAgICAgICAgbWF0Y2guY2hpbGRyZW4uc3BsaWNlKGMsIDEpO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAvLyBJZiBhbnkgY2hpbGRyZW4gbWF0Y2hlZCwgcmV0dXJuIHRoZSBuZXcgb2JqZWN0XFxyXFxuICAgICAgICBpZiAobWF0Y2guY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xcclxcbiAgICAgICAgICByZXR1cm4gbWF0Y2g7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAvLyBJZiB0aGVyZSB3ZXJlIG5vIG1hdGNoaW5nIGNoaWxkcmVuLCBjaGVjayBqdXN0IHRoZSBwbGFpbiBvYmplY3RcXHJcXG4gICAgICAgIHJldHVybiBtYXRjaGVyKHBhcmFtcywgbWF0Y2gpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgb3JpZ2luYWwgPSBzdHJpcERpYWNyaXRpY3MoZGF0YS50ZXh0KS50b1VwcGVyQ2FzZSgpO1xcclxcbiAgICAgIHZhciB0ZXJtID0gc3RyaXBEaWFjcml0aWNzKHBhcmFtcy50ZXJtKS50b1VwcGVyQ2FzZSgpO1xcclxcblxcclxcbiAgICAgIC8vIENoZWNrIGlmIHRoZSB0ZXh0IGNvbnRhaW5zIHRoZSB0ZXJtXFxyXFxuICAgICAgaWYgKG9yaWdpbmFsLmluZGV4T2YodGVybSkgPiAtMSkge1xcclxcbiAgICAgICAgcmV0dXJuIGRhdGE7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIC8vIElmIGl0IGRvZXNuJ3QgY29udGFpbiB0aGUgdGVybSwgZG9uJ3QgcmV0dXJuIGFueXRoaW5nXFxyXFxuICAgICAgcmV0dXJuIG51bGw7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy5kZWZhdWx0cyA9IHtcXHJcXG4gICAgICBhbWRCYXNlOiAnLi8nLFxcclxcbiAgICAgIGFtZExhbmd1YWdlQmFzZTogJy4vaTE4bi8nLFxcclxcbiAgICAgIGNsb3NlT25TZWxlY3Q6IHRydWUsXFxyXFxuICAgICAgZGVidWc6IGZhbHNlLFxcclxcbiAgICAgIGRyb3Bkb3duQXV0b1dpZHRoOiBmYWxzZSxcXHJcXG4gICAgICBlc2NhcGVNYXJrdXA6IFV0aWxzLmVzY2FwZU1hcmt1cCxcXHJcXG4gICAgICBsYW5ndWFnZTogRW5nbGlzaFRyYW5zbGF0aW9uLFxcclxcbiAgICAgIG1hdGNoZXI6IG1hdGNoZXIsXFxyXFxuICAgICAgbWluaW11bUlucHV0TGVuZ3RoOiAwLFxcclxcbiAgICAgIG1heGltdW1JbnB1dExlbmd0aDogMCxcXHJcXG4gICAgICBtYXhpbXVtU2VsZWN0aW9uTGVuZ3RoOiAwLFxcclxcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiAwLFxcclxcbiAgICAgIHNlbGVjdE9uQ2xvc2U6IGZhbHNlLFxcclxcbiAgICAgIHNvcnRlcjogZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgICAgIHJldHVybiBkYXRhO1xcclxcbiAgICAgIH0sXFxyXFxuICAgICAgdGVtcGxhdGVSZXN1bHQ6IGZ1bmN0aW9uIChyZXN1bHQpIHtcXHJcXG4gICAgICAgIHJldHVybiByZXN1bHQudGV4dDtcXHJcXG4gICAgICB9LFxcclxcbiAgICAgIHRlbXBsYXRlU2VsZWN0aW9uOiBmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XFxyXFxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uLnRleHQ7XFxyXFxuICAgICAgfSxcXHJcXG4gICAgICB0aGVtZTogJ2RlZmF1bHQnLFxcclxcbiAgICAgIHdpZHRoOiAncmVzb2x2ZSdcXHJcXG4gICAgfTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBEZWZhdWx0cy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcXHJcXG4gICAgdmFyIGNhbWVsS2V5ID0gJC5jYW1lbENhc2Uoa2V5KTtcXHJcXG5cXHJcXG4gICAgdmFyIGRhdGEgPSB7fTtcXHJcXG4gICAgZGF0YVtjYW1lbEtleV0gPSB2YWx1ZTtcXHJcXG5cXHJcXG4gICAgdmFyIGNvbnZlcnRlZERhdGEgPSBVdGlscy5fY29udmVydERhdGEoZGF0YSk7XFxyXFxuXFxyXFxuICAgICQuZXh0ZW5kKHRoaXMuZGVmYXVsdHMsIGNvbnZlcnRlZERhdGEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHZhciBkZWZhdWx0cyA9IG5ldyBEZWZhdWx0cygpO1xcclxcblxcclxcbiAgcmV0dXJuIGRlZmF1bHRzO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9vcHRpb25zJyxbXFxyXFxuICAncmVxdWlyZScsXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuL2RlZmF1bHRzJyxcXHJcXG4gICcuL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uIChyZXF1aXJlLCAkLCBEZWZhdWx0cywgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIE9wdGlvbnMgKG9wdGlvbnMsICRlbGVtZW50KSB7XFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XFxyXFxuXFxyXFxuICAgIGlmICgkZWxlbWVudCAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5mcm9tRWxlbWVudCgkZWxlbWVudCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy5vcHRpb25zID0gRGVmYXVsdHMuYXBwbHkodGhpcy5vcHRpb25zKTtcXHJcXG5cXHJcXG4gICAgaWYgKCRlbGVtZW50ICYmICRlbGVtZW50LmlzKCdpbnB1dCcpKSB7XFxyXFxuICAgICAgdmFyIElucHV0Q29tcGF0ID0gcmVxdWlyZSh0aGlzLmdldCgnYW1kQmFzZScpICsgJ2NvbXBhdC9pbnB1dERhdGEnKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLm9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgIElucHV0Q29tcGF0XFxyXFxuICAgICAgKTtcXHJcXG4gICAgfVxcclxcbiAgfVxcclxcblxcclxcbiAgT3B0aW9ucy5wcm90b3R5cGUuZnJvbUVsZW1lbnQgPSBmdW5jdGlvbiAoJGUpIHtcXHJcXG4gICAgdmFyIGV4Y2x1ZGVkRGF0YSA9IFsnc2VsZWN0MiddO1xcclxcblxcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLm11bHRpcGxlID09IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLm9wdGlvbnMubXVsdGlwbGUgPSAkZS5wcm9wKCdtdWx0aXBsZScpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPT0gbnVsbCkge1xcclxcbiAgICAgIHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9ICRlLnByb3AoJ2Rpc2FibGVkJyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5sYW5ndWFnZSA9PSBudWxsKSB7XFxyXFxuICAgICAgaWYgKCRlLnByb3AoJ2xhbmcnKSkge1xcclxcbiAgICAgICAgdGhpcy5vcHRpb25zLmxhbmd1YWdlID0gJGUucHJvcCgnbGFuZycpLnRvTG93ZXJDYXNlKCk7XFxyXFxuICAgICAgfSBlbHNlIGlmICgkZS5jbG9zZXN0KCdbbGFuZ10nKS5wcm9wKCdsYW5nJykpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5sYW5ndWFnZSA9ICRlLmNsb3Nlc3QoJ1tsYW5nXScpLnByb3AoJ2xhbmcnKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5kaXIgPT0gbnVsbCkge1xcclxcbiAgICAgIGlmICgkZS5wcm9wKCdkaXInKSkge1xcclxcbiAgICAgICAgdGhpcy5vcHRpb25zLmRpciA9ICRlLnByb3AoJ2RpcicpO1xcclxcbiAgICAgIH0gZWxzZSBpZiAoJGUuY2xvc2VzdCgnW2Rpcl0nKS5wcm9wKCdkaXInKSkge1xcclxcbiAgICAgICAgdGhpcy5vcHRpb25zLmRpciA9ICRlLmNsb3Nlc3QoJ1tkaXJdJykucHJvcCgnZGlyJyk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5kaXIgPSAnbHRyJztcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgJGUucHJvcCgnZGlzYWJsZWQnLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQpO1xcclxcbiAgICAkZS5wcm9wKCdtdWx0aXBsZScsIHRoaXMub3B0aW9ucy5tdWx0aXBsZSk7XFxyXFxuXFxyXFxuICAgIGlmICgkZS5kYXRhKCdzZWxlY3QyVGFncycpKSB7XFxyXFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcXHJcXG4gICAgICAgIGNvbnNvbGUud2FybihcXHJcXG4gICAgICAgICAgJ1NlbGVjdDI6IFRoZSBgZGF0YS1zZWxlY3QyLXRhZ3NgIGF0dHJpYnV0ZSBoYXMgYmVlbiBjaGFuZ2VkIHRvICcgK1xcclxcbiAgICAgICAgICAndXNlIHRoZSBgZGF0YS1kYXRhYCBhbmQgYGRhdGEtdGFncz1cXFwidHJ1ZVxcXCJgIGF0dHJpYnV0ZXMgYW5kIHdpbGwgYmUgJyArXFxyXFxuICAgICAgICAgICdyZW1vdmVkIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiBTZWxlY3QyLidcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgICRlLmRhdGEoJ2RhdGEnLCAkZS5kYXRhKCdzZWxlY3QyVGFncycpKTtcXHJcXG4gICAgICAkZS5kYXRhKCd0YWdzJywgdHJ1ZSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKCRlLmRhdGEoJ2FqYXhVcmwnKSkge1xcclxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XFxyXFxuICAgICAgICBjb25zb2xlLndhcm4oXFxyXFxuICAgICAgICAgICdTZWxlY3QyOiBUaGUgYGRhdGEtYWpheC11cmxgIGF0dHJpYnV0ZSBoYXMgYmVlbiBjaGFuZ2VkIHRvICcgK1xcclxcbiAgICAgICAgICAnYGRhdGEtYWpheC0tdXJsYCBhbmQgc3VwcG9ydCBmb3IgdGhlIG9sZCBhdHRyaWJ1dGUgd2lsbCBiZSByZW1vdmVkJyArXFxyXFxuICAgICAgICAgICcgaW4gZnV0dXJlIHZlcnNpb25zIG9mIFNlbGVjdDIuJ1xcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgJGUuYXR0cignYWpheC0tdXJsJywgJGUuZGF0YSgnYWpheFVybCcpKTtcXHJcXG4gICAgICAkZS5kYXRhKCdhamF4LS11cmwnLCAkZS5kYXRhKCdhamF4VXJsJykpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBkYXRhc2V0ID0ge307XFxyXFxuXFxyXFxuICAgIC8vIFByZWZlciB0aGUgZWxlbWVudCdzIGBkYXRhc2V0YCBhdHRyaWJ1dGUgaWYgaXQgZXhpc3RzXFxyXFxuICAgIC8vIGpRdWVyeSAxLnggZG9lcyBub3QgY29ycmVjdGx5IGhhbmRsZSBkYXRhIGF0dHJpYnV0ZXMgd2l0aCBtdWx0aXBsZSBkYXNoZXNcXHJcXG4gICAgaWYgKCQuZm4uanF1ZXJ5ICYmICQuZm4uanF1ZXJ5LnN1YnN0cigwLCAyKSA9PSAnMS4nICYmICRlWzBdLmRhdGFzZXQpIHtcXHJcXG4gICAgICBkYXRhc2V0ID0gJC5leHRlbmQodHJ1ZSwge30sICRlWzBdLmRhdGFzZXQsICRlLmRhdGEoKSk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgZGF0YXNldCA9ICRlLmRhdGEoKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgZGF0YSA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkYXRhc2V0KTtcXHJcXG5cXHJcXG4gICAgZGF0YSA9IFV0aWxzLl9jb252ZXJ0RGF0YShkYXRhKTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcXHJcXG4gICAgICBpZiAoJC5pbkFycmF5KGtleSwgZXhjbHVkZWREYXRhKSA+IC0xKSB7XFxyXFxuICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKCQuaXNQbGFpbk9iamVjdCh0aGlzLm9wdGlvbnNba2V5XSkpIHtcXHJcXG4gICAgICAgICQuZXh0ZW5kKHRoaXMub3B0aW9uc1trZXldLCBkYXRhW2tleV0pO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IGRhdGFba2V5XTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIHRoaXM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgT3B0aW9ucy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xcclxcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zW2tleV07XFxyXFxuICB9O1xcclxcblxcclxcbiAgT3B0aW9ucy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XFxyXFxuICAgIHRoaXMub3B0aW9uc1trZXldID0gdmFsO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBPcHRpb25zO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9jb3JlJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuL29wdGlvbnMnLFxcclxcbiAgJy4vdXRpbHMnLFxcclxcbiAgJy4va2V5cydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgT3B0aW9ucywgVXRpbHMsIEtFWVMpIHtcXHJcXG4gIHZhciBTZWxlY3QyID0gZnVuY3Rpb24gKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIGlmICgkZWxlbWVudC5kYXRhKCdzZWxlY3QyJykgIT0gbnVsbCkge1xcclxcbiAgICAgICRlbGVtZW50LmRhdGEoJ3NlbGVjdDInKS5kZXN0cm95KCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xcclxcblxcclxcbiAgICB0aGlzLmlkID0gdGhpcy5fZ2VuZXJhdGVJZCgkZWxlbWVudCk7XFxyXFxuXFxyXFxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xcclxcblxcclxcbiAgICB0aGlzLm9wdGlvbnMgPSBuZXcgT3B0aW9ucyhvcHRpb25zLCAkZWxlbWVudCk7XFxyXFxuXFxyXFxuICAgIFNlbGVjdDIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XFxyXFxuXFxyXFxuICAgIC8vIFNldCB1cCB0aGUgdGFiaW5kZXhcXHJcXG5cXHJcXG4gICAgdmFyIHRhYmluZGV4ID0gJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSB8fCAwO1xcclxcbiAgICAkZWxlbWVudC5kYXRhKCdvbGQtdGFiaW5kZXgnLCB0YWJpbmRleCk7XFxyXFxuICAgICRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XFxyXFxuXFxyXFxuICAgIC8vIFNldCB1cCBjb250YWluZXJzIGFuZCBhZGFwdGVyc1xcclxcblxcclxcbiAgICB2YXIgRGF0YUFkYXB0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdkYXRhQWRhcHRlcicpO1xcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyID0gbmV3IERhdGFBZGFwdGVyKCRlbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xcclxcblxcclxcbiAgICB2YXIgJGNvbnRhaW5lciA9IHRoaXMucmVuZGVyKCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuX3BsYWNlQ29udGFpbmVyKCRjb250YWluZXIpO1xcclxcblxcclxcbiAgICB2YXIgU2VsZWN0aW9uQWRhcHRlciA9IHRoaXMub3B0aW9ucy5nZXQoJ3NlbGVjdGlvbkFkYXB0ZXInKTtcXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24gPSBuZXcgU2VsZWN0aW9uQWRhcHRlcigkZWxlbWVudCwgdGhpcy5vcHRpb25zKTtcXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb24ucmVuZGVyKCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuc2VsZWN0aW9uLnBvc2l0aW9uKHRoaXMuJHNlbGVjdGlvbiwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIHZhciBEcm9wZG93bkFkYXB0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdkcm9wZG93bkFkYXB0ZXInKTtcXHJcXG4gICAgdGhpcy5kcm9wZG93biA9IG5ldyBEcm9wZG93bkFkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucyk7XFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duID0gdGhpcy5kcm9wZG93bi5yZW5kZXIoKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5kcm9wZG93bi5wb3NpdGlvbih0aGlzLiRkcm9wZG93biwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIHZhciBSZXN1bHRzQWRhcHRlciA9IHRoaXMub3B0aW9ucy5nZXQoJ3Jlc3VsdHNBZGFwdGVyJyk7XFxyXFxuICAgIHRoaXMucmVzdWx0cyA9IG5ldyBSZXN1bHRzQWRhcHRlcigkZWxlbWVudCwgdGhpcy5vcHRpb25zLCB0aGlzLmRhdGFBZGFwdGVyKTtcXHJcXG4gICAgdGhpcy4kcmVzdWx0cyA9IHRoaXMucmVzdWx0cy5yZW5kZXIoKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5yZXN1bHRzLnBvc2l0aW9uKHRoaXMuJHJlc3VsdHMsIHRoaXMuJGRyb3Bkb3duKTtcXHJcXG5cXHJcXG4gICAgLy8gQmluZCBldmVudHNcXHJcXG5cXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICAvLyBCaW5kIHRoZSBjb250YWluZXIgdG8gYWxsIG9mIHRoZSBhZGFwdGVyc1xcclxcbiAgICB0aGlzLl9iaW5kQWRhcHRlcnMoKTtcXHJcXG5cXHJcXG4gICAgLy8gUmVnaXN0ZXIgYW55IERPTSBldmVudCBoYW5kbGVyc1xcclxcbiAgICB0aGlzLl9yZWdpc3RlckRvbUV2ZW50cygpO1xcclxcblxcclxcbiAgICAvLyBSZWdpc3RlciBhbnkgaW50ZXJuYWwgZXZlbnQgaGFuZGxlcnNcXHJcXG4gICAgdGhpcy5fcmVnaXN0ZXJEYXRhRXZlbnRzKCk7XFxyXFxuICAgIHRoaXMuX3JlZ2lzdGVyU2VsZWN0aW9uRXZlbnRzKCk7XFxyXFxuICAgIHRoaXMuX3JlZ2lzdGVyRHJvcGRvd25FdmVudHMoKTtcXHJcXG4gICAgdGhpcy5fcmVnaXN0ZXJSZXN1bHRzRXZlbnRzKCk7XFxyXFxuICAgIHRoaXMuX3JlZ2lzdGVyRXZlbnRzKCk7XFxyXFxuXFxyXFxuICAgIC8vIFNldCB0aGUgaW5pdGlhbCBzdGF0ZVxcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyLmN1cnJlbnQoZnVuY3Rpb24gKGluaXRpYWxEYXRhKSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3Rpb246dXBkYXRlJywge1xcclxcbiAgICAgICAgZGF0YTogaW5pdGlhbERhdGFcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIC8vIEhpZGUgdGhlIG9yaWdpbmFsIHNlbGVjdFxcclxcbiAgICAkZWxlbWVudC5hZGRDbGFzcygnc2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZScpO1xcclxcbiAgICAkZWxlbWVudC5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XFxyXFxuXFxyXFxuICAgIC8vIFN5bmNocm9uaXplIGFueSBtb25pdG9yZWQgYXR0cmlidXRlc1xcclxcbiAgICB0aGlzLl9zeW5jQXR0cmlidXRlcygpO1xcclxcblxcclxcbiAgICAkZWxlbWVudC5kYXRhKCdzZWxlY3QyJywgdGhpcyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKFNlbGVjdDIsIFV0aWxzLk9ic2VydmFibGUpO1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX2dlbmVyYXRlSWQgPSBmdW5jdGlvbiAoJGVsZW1lbnQpIHtcXHJcXG4gICAgdmFyIGlkID0gJyc7XFxyXFxuXFxyXFxuICAgIGlmICgkZWxlbWVudC5hdHRyKCdpZCcpICE9IG51bGwpIHtcXHJcXG4gICAgICBpZCA9ICRlbGVtZW50LmF0dHIoJ2lkJyk7XFxyXFxuICAgIH0gZWxzZSBpZiAoJGVsZW1lbnQuYXR0cignbmFtZScpICE9IG51bGwpIHtcXHJcXG4gICAgICBpZCA9ICRlbGVtZW50LmF0dHIoJ25hbWUnKSArICctJyArIFV0aWxzLmdlbmVyYXRlQ2hhcnMoMik7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgaWQgPSBVdGlscy5nZW5lcmF0ZUNoYXJzKDQpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlkID0gaWQucmVwbGFjZSgvKDp8XFxcXC58XFxcXFt8XFxcXF18LCkvZywgJycpO1xcclxcbiAgICBpZCA9ICdzZWxlY3QyLScgKyBpZDtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIGlkO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLl9wbGFjZUNvbnRhaW5lciA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XFxyXFxuICAgICRjb250YWluZXIuaW5zZXJ0QWZ0ZXIodGhpcy4kZWxlbWVudCk7XFxyXFxuXFxyXFxuICAgIHZhciB3aWR0aCA9IHRoaXMuX3Jlc29sdmVXaWR0aCh0aGlzLiRlbGVtZW50LCB0aGlzLm9wdGlvbnMuZ2V0KCd3aWR0aCcpKTtcXHJcXG5cXHJcXG4gICAgaWYgKHdpZHRoICE9IG51bGwpIHtcXHJcXG4gICAgICAkY29udGFpbmVyLmNzcygnd2lkdGgnLCB3aWR0aCk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVzb2x2ZVdpZHRoID0gZnVuY3Rpb24gKCRlbGVtZW50LCBtZXRob2QpIHtcXHJcXG4gICAgdmFyIFdJRFRIID0gL153aWR0aDooKFstK10/KFswLTldKlxcXFwuKT9bMC05XSspKHB4fGVtfGV4fCV8aW58Y218bW18cHR8cGMpKS9pO1xcclxcblxcclxcbiAgICBpZiAobWV0aG9kID09ICdyZXNvbHZlJykge1xcclxcbiAgICAgIHZhciBzdHlsZVdpZHRoID0gdGhpcy5fcmVzb2x2ZVdpZHRoKCRlbGVtZW50LCAnc3R5bGUnKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoc3R5bGVXaWR0aCAhPSBudWxsKSB7XFxyXFxuICAgICAgICByZXR1cm4gc3R5bGVXaWR0aDtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuIHRoaXMuX3Jlc29sdmVXaWR0aCgkZWxlbWVudCwgJ2VsZW1lbnQnKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAobWV0aG9kID09ICdlbGVtZW50Jykge1xcclxcbiAgICAgIHZhciBlbGVtZW50V2lkdGggPSAkZWxlbWVudC5vdXRlcldpZHRoKGZhbHNlKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoZWxlbWVudFdpZHRoIDw9IDApIHtcXHJcXG4gICAgICAgIHJldHVybiAnYXV0byc7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybiBlbGVtZW50V2lkdGggKyAncHgnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChtZXRob2QgPT0gJ3N0eWxlJykge1xcclxcbiAgICAgIHZhciBzdHlsZSA9ICRlbGVtZW50LmF0dHIoJ3N0eWxlJyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKHR5cGVvZihzdHlsZSkgIT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgICByZXR1cm4gbnVsbDtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyIGF0dHJzID0gc3R5bGUuc3BsaXQoJzsnKTtcXHJcXG5cXHJcXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkgPSBpICsgMSkge1xcclxcbiAgICAgICAgdmFyIGF0dHIgPSBhdHRyc1tpXS5yZXBsYWNlKC9cXFxccy9nLCAnJyk7XFxyXFxuICAgICAgICB2YXIgbWF0Y2hlcyA9IGF0dHIubWF0Y2goV0lEVEgpO1xcclxcblxcclxcbiAgICAgICAgaWYgKG1hdGNoZXMgIT09IG51bGwgJiYgbWF0Y2hlcy5sZW5ndGggPj0gMSkge1xcclxcbiAgICAgICAgICByZXR1cm4gbWF0Y2hlc1sxXTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuIG51bGw7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIG1ldGhvZDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fYmluZEFkYXB0ZXJzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyLmJpbmQodGhpcywgdGhpcy4kY29udGFpbmVyKTtcXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24uYmluZCh0aGlzLCB0aGlzLiRjb250YWluZXIpO1xcclxcblxcclxcbiAgICB0aGlzLmRyb3Bkb3duLmJpbmQodGhpcywgdGhpcy4kY29udGFpbmVyKTtcXHJcXG4gICAgdGhpcy5yZXN1bHRzLmJpbmQodGhpcywgdGhpcy4kY29udGFpbmVyKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJEb21FdmVudHMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy4kZWxlbWVudC5vbignY2hhbmdlLnNlbGVjdDInLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi5kYXRhQWRhcHRlci5jdXJyZW50KGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgICAgICBzZWxmLnRyaWdnZXIoJ3NlbGVjdGlvbjp1cGRhdGUnLCB7XFxyXFxuICAgICAgICAgIGRhdGE6IGRhdGFcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kZWxlbWVudC5vbignZm9jdXMuc2VsZWN0MicsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLnRyaWdnZXIoJ2ZvY3VzJywgZXZ0KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuX3N5bmNBID0gVXRpbHMuYmluZCh0aGlzLl9zeW5jQXR0cmlidXRlcywgdGhpcyk7XFxyXFxuICAgIHRoaXMuX3N5bmNTID0gVXRpbHMuYmluZCh0aGlzLl9zeW5jU3VidHJlZSwgdGhpcyk7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLiRlbGVtZW50WzBdLmF0dGFjaEV2ZW50KSB7XFxyXFxuICAgICAgdGhpcy4kZWxlbWVudFswXS5hdHRhY2hFdmVudCgnb25wcm9wZXJ0eWNoYW5nZScsIHRoaXMuX3N5bmNBKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgb2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fFxcclxcbiAgICAgIHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyIHx8XFxyXFxuICAgICAgd2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXJcXHJcXG4gICAgO1xcclxcblxcclxcbiAgICBpZiAob2JzZXJ2ZXIgIT0gbnVsbCkge1xcclxcbiAgICAgIHRoaXMuX29ic2VydmVyID0gbmV3IG9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcXHJcXG4gICAgICAgICQuZWFjaChtdXRhdGlvbnMsIHNlbGYuX3N5bmNBKTtcXHJcXG4gICAgICAgICQuZWFjaChtdXRhdGlvbnMsIHNlbGYuX3N5bmNTKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgICB0aGlzLl9vYnNlcnZlci5vYnNlcnZlKHRoaXMuJGVsZW1lbnRbMF0sIHtcXHJcXG4gICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXFxyXFxuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXFxyXFxuICAgICAgICBzdWJ0cmVlOiBmYWxzZVxcclxcbiAgICAgIH0pO1xcclxcbiAgICB9IGVsc2UgaWYgKHRoaXMuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcikge1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICdET01BdHRyTW9kaWZpZWQnLFxcclxcbiAgICAgICAgc2VsZi5fc3luY0EsXFxyXFxuICAgICAgICBmYWxzZVxcclxcbiAgICAgICk7XFxyXFxuICAgICAgdGhpcy4kZWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgJ0RPTU5vZGVJbnNlcnRlZCcsXFxyXFxuICAgICAgICBzZWxmLl9zeW5jUyxcXHJcXG4gICAgICAgIGZhbHNlXFxyXFxuICAgICAgKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAnRE9NTm9kZVJlbW92ZWQnLFxcclxcbiAgICAgICAgc2VsZi5fc3luY1MsXFxyXFxuICAgICAgICBmYWxzZVxcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJEYXRhRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuZGF0YUFkYXB0ZXIub24oJyonLCBmdW5jdGlvbiAobmFtZSwgcGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKG5hbWUsIHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLl9yZWdpc3RlclNlbGVjdGlvbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcbiAgICB2YXIgbm9uUmVsYXlFdmVudHMgPSBbJ3RvZ2dsZScsICdmb2N1cyddO1xcclxcblxcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5vbigndG9nZ2xlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYudG9nZ2xlRHJvcGRvd24oKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuc2VsZWN0aW9uLm9uKCdmb2N1cycsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLmZvY3VzKHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5vbignKicsIGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMpIHtcXHJcXG4gICAgICBpZiAoJC5pbkFycmF5KG5hbWUsIG5vblJlbGF5RXZlbnRzKSAhPT0gLTEpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKG5hbWUsIHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLl9yZWdpc3RlckRyb3Bkb3duRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuZHJvcGRvd24ub24oJyonLCBmdW5jdGlvbiAobmFtZSwgcGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKG5hbWUsIHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLl9yZWdpc3RlclJlc3VsdHNFdmVudHMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy5yZXN1bHRzLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJFdmVudHMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRjb250YWluZXIuYWRkQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS1vcGVuJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS1vcGVuJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdlbmFibGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tZGlzYWJsZWQnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMub24oJ2Rpc2FibGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kY29udGFpbmVyLmFkZENsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tZGlzYWJsZWQnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tZm9jdXMnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMub24oJ3F1ZXJ5JywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIGlmICghc2VsZi5pc09wZW4oKSkge1xcclxcbiAgICAgICAgc2VsZi50cmlnZ2VyKCdvcGVuJywge30pO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB0aGlzLmRhdGFBZGFwdGVyLnF1ZXJ5KHBhcmFtcywgZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czphbGwnLCB7XFxyXFxuICAgICAgICAgIGRhdGE6IGRhdGEsXFxyXFxuICAgICAgICAgIHF1ZXJ5OiBwYXJhbXNcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vbigncXVlcnk6YXBwZW5kJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHRoaXMuZGF0YUFkYXB0ZXIucXVlcnkocGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOmFwcGVuZCcsIHtcXHJcXG4gICAgICAgICAgZGF0YTogZGF0YSxcXHJcXG4gICAgICAgICAgcXVlcnk6IHBhcmFtc1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICB2YXIga2V5ID0gZXZ0LndoaWNoO1xcclxcblxcclxcbiAgICAgIGlmIChzZWxmLmlzT3BlbigpKSB7XFxyXFxuICAgICAgICBpZiAoa2V5ID09PSBLRVlTLkVTQyB8fCBrZXkgPT09IEtFWVMuVEFCIHx8XFxyXFxuICAgICAgICAgICAgKGtleSA9PT0gS0VZUy5VUCAmJiBldnQuYWx0S2V5KSkge1xcclxcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IEtFWVMuRU5URVIpIHtcXHJcXG4gICAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOnNlbGVjdCcsIHt9KTtcXHJcXG5cXHJcXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICB9IGVsc2UgaWYgKChrZXkgPT09IEtFWVMuU1BBQ0UgJiYgZXZ0LmN0cmxLZXkpKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czp0b2dnbGUnLCB7fSk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IEtFWVMuVVApIHtcXHJcXG4gICAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOnByZXZpb3VzJywge30pO1xcclxcblxcclxcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLRVlTLkRPV04pIHtcXHJcXG4gICAgICAgICAgc2VsZi50cmlnZ2VyKCdyZXN1bHRzOm5leHQnLCB7fSk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBpZiAoa2V5ID09PSBLRVlTLkVOVEVSIHx8IGtleSA9PT0gS0VZUy5TUEFDRSB8fFxcclxcbiAgICAgICAgICAgIChrZXkgPT09IEtFWVMuRE9XTiAmJiBldnQuYWx0S2V5KSkge1xcclxcbiAgICAgICAgICBzZWxmLm9wZW4oKTtcXHJcXG5cXHJcXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fc3luY0F0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMub3B0aW9ucy5zZXQoJ2Rpc2FibGVkJywgdGhpcy4kZWxlbWVudC5wcm9wKCdkaXNhYmxlZCcpKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2Rpc2FibGVkJykpIHtcXHJcXG4gICAgICBpZiAodGhpcy5pc09wZW4oKSkge1xcclxcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ2Rpc2FibGUnLCB7fSk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCdlbmFibGUnLCB7fSk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fc3luY1N1YnRyZWUgPSBmdW5jdGlvbiAoZXZ0LCBtdXRhdGlvbnMpIHtcXHJcXG4gICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICAvLyBJZ25vcmUgYW55IG11dGF0aW9uIGV2ZW50cyByYWlzZWQgZm9yIGVsZW1lbnRzIHRoYXQgYXJlbid0IG9wdGlvbnMgb3JcXHJcXG4gICAgLy8gb3B0Z3JvdXBzLiBUaGlzIGhhbmRsZXMgdGhlIGNhc2Ugd2hlbiB0aGUgc2VsZWN0IGVsZW1lbnQgaXMgZGVzdHJveWVkXFxyXFxuICAgIGlmIChcXHJcXG4gICAgICBldnQgJiYgZXZ0LnRhcmdldCAmJiAoXFxyXFxuICAgICAgICBldnQudGFyZ2V0Lm5vZGVOYW1lICE9PSAnT1BUSU9OJyAmJiBldnQudGFyZ2V0Lm5vZGVOYW1lICE9PSAnT1BUR1JPVVAnXFxyXFxuICAgICAgKVxcclxcbiAgICApIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKCFtdXRhdGlvbnMpIHtcXHJcXG4gICAgICAvLyBJZiBtdXRhdGlvbiBldmVudHMgYXJlbid0IHN1cHBvcnRlZCwgdGhlbiB3ZSBjYW4gb25seSBhc3N1bWUgdGhhdCB0aGVcXHJcXG4gICAgICAvLyBjaGFuZ2UgYWZmZWN0ZWQgdGhlIHNlbGVjdGlvbnNcXHJcXG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcXHJcXG4gICAgfSBlbHNlIGlmIChtdXRhdGlvbnMuYWRkZWROb2RlcyAmJiBtdXRhdGlvbnMuYWRkZWROb2Rlcy5sZW5ndGggPiAwKSB7XFxyXFxuICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBtdXRhdGlvbnMuYWRkZWROb2Rlcy5sZW5ndGg7IG4rKykge1xcclxcbiAgICAgICAgdmFyIG5vZGUgPSBtdXRhdGlvbnMuYWRkZWROb2Rlc1tuXTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChub2RlLnNlbGVjdGVkKSB7XFxyXFxuICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4gICAgfSBlbHNlIGlmIChtdXRhdGlvbnMucmVtb3ZlZE5vZGVzICYmIG11dGF0aW9ucy5yZW1vdmVkTm9kZXMubGVuZ3RoID4gMCkge1xcclxcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC8vIE9ubHkgcmUtcHVsbCB0aGUgZGF0YSBpZiB3ZSB0aGluayB0aGVyZSBpcyBhIGNoYW5nZVxcclxcbiAgICBpZiAoY2hhbmdlZCkge1xcclxcbiAgICAgIHRoaXMuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0aW9uOnVwZGF0ZScsIHtcXHJcXG4gICAgICAgICAgZGF0YTogY3VycmVudERhdGFcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgLyoqXFxyXFxuICAgKiBPdmVycmlkZSB0aGUgdHJpZ2dlciBtZXRob2QgdG8gYXV0b21hdGljYWxseSB0cmlnZ2VyIHByZS1ldmVudHMgd2hlblxcclxcbiAgICogdGhlcmUgYXJlIGV2ZW50cyB0aGF0IGNhbiBiZSBwcmV2ZW50ZWQuXFxyXFxuICAgKi9cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAobmFtZSwgYXJncykge1xcclxcbiAgICB2YXIgYWN0dWFsVHJpZ2dlciA9IFNlbGVjdDIuX19zdXBlcl9fLnRyaWdnZXI7XFxyXFxuICAgIHZhciBwcmVUcmlnZ2VyTWFwID0ge1xcclxcbiAgICAgICdvcGVuJzogJ29wZW5pbmcnLFxcclxcbiAgICAgICdjbG9zZSc6ICdjbG9zaW5nJyxcXHJcXG4gICAgICAnc2VsZWN0JzogJ3NlbGVjdGluZycsXFxyXFxuICAgICAgJ3Vuc2VsZWN0JzogJ3Vuc2VsZWN0aW5nJ1xcclxcbiAgICB9O1xcclxcblxcclxcbiAgICBpZiAoYXJncyA9PT0gdW5kZWZpbmVkKSB7XFxyXFxuICAgICAgYXJncyA9IHt9O1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChuYW1lIGluIHByZVRyaWdnZXJNYXApIHtcXHJcXG4gICAgICB2YXIgcHJlVHJpZ2dlck5hbWUgPSBwcmVUcmlnZ2VyTWFwW25hbWVdO1xcclxcbiAgICAgIHZhciBwcmVUcmlnZ2VyQXJncyA9IHtcXHJcXG4gICAgICAgIHByZXZlbnRlZDogZmFsc2UsXFxyXFxuICAgICAgICBuYW1lOiBuYW1lLFxcclxcbiAgICAgICAgYXJnczogYXJnc1xcclxcbiAgICAgIH07XFxyXFxuXFxyXFxuICAgICAgYWN0dWFsVHJpZ2dlci5jYWxsKHRoaXMsIHByZVRyaWdnZXJOYW1lLCBwcmVUcmlnZ2VyQXJncyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKHByZVRyaWdnZXJBcmdzLnByZXZlbnRlZCkge1xcclxcbiAgICAgICAgYXJncy5wcmV2ZW50ZWQgPSB0cnVlO1xcclxcblxcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBhY3R1YWxUcmlnZ2VyLmNhbGwodGhpcywgbmFtZSwgYXJncyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUudG9nZ2xlRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XFxyXFxuICAgICAgdGhpcy5jbG9zZSgpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHRoaXMub3BlbigpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCdxdWVyeScsIHt9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgaWYgKCF0aGlzLmlzT3BlbigpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMudHJpZ2dlcignY2xvc2UnLCB7fSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuaXNPcGVuID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICByZXR1cm4gdGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLmhhc0ZvY3VzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICByZXR1cm4gdGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tZm9jdXMnKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIC8vIE5vIG5lZWQgdG8gcmUtdHJpZ2dlciBmb2N1cyBldmVudHMgaWYgd2UgYXJlIGFscmVhZHkgZm9jdXNlZFxcclxcbiAgICBpZiAodGhpcy5oYXNGb2N1cygpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWZvY3VzJyk7XFxyXFxuICAgIHRoaXMudHJpZ2dlcignZm9jdXMnLCB7fSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKGFyZ3MpIHtcXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XFxyXFxuICAgICAgY29uc29sZS53YXJuKFxcclxcbiAgICAgICAgJ1NlbGVjdDI6IFRoZSBgc2VsZWN0MihcXFwiZW5hYmxlXFxcIilgIG1ldGhvZCBoYXMgYmVlbiBkZXByZWNhdGVkIGFuZCB3aWxsJyArXFxyXFxuICAgICAgICAnIGJlIHJlbW92ZWQgaW4gbGF0ZXIgU2VsZWN0MiB2ZXJzaW9ucy4gVXNlICRlbGVtZW50LnByb3AoXFxcImRpc2FibGVkXFxcIiknICtcXHJcXG4gICAgICAgICcgaW5zdGVhZC4nXFxyXFxuICAgICAgKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoYXJncyA9PSBudWxsIHx8IGFyZ3MubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgYXJncyA9IFt0cnVlXTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgZGlzYWJsZWQgPSAhYXJnc1swXTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kZWxlbWVudC5wcm9wKCdkaXNhYmxlZCcsIGRpc2FibGVkKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGVidWcnKSAmJlxcclxcbiAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XFxyXFxuICAgICAgY29uc29sZS53YXJuKFxcclxcbiAgICAgICAgJ1NlbGVjdDI6IERhdGEgY2FuIG5vIGxvbmdlciBiZSBzZXQgdXNpbmcgYHNlbGVjdDIoXFxcImRhdGFcXFwiKWAuIFlvdSAnICtcXHJcXG4gICAgICAgICdzaG91bGQgY29uc2lkZXIgc2V0dGluZyB0aGUgdmFsdWUgaW5zdGVhZCB1c2luZyBgJGVsZW1lbnQudmFsKClgLidcXHJcXG4gICAgICApO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBkYXRhID0gW107XFxyXFxuXFxyXFxuICAgIHRoaXMuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbiAoY3VycmVudERhdGEpIHtcXHJcXG4gICAgICBkYXRhID0gY3VycmVudERhdGE7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICByZXR1cm4gZGF0YTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS52YWwgPSBmdW5jdGlvbiAoYXJncykge1xcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGVidWcnKSAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcXHJcXG4gICAgICBjb25zb2xlLndhcm4oXFxyXFxuICAgICAgICAnU2VsZWN0MjogVGhlIGBzZWxlY3QyKFxcXCJ2YWxcXFwiKWAgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUnICtcXHJcXG4gICAgICAgICcgcmVtb3ZlZCBpbiBsYXRlciBTZWxlY3QyIHZlcnNpb25zLiBVc2UgJGVsZW1lbnQudmFsKCkgaW5zdGVhZC4nXFxyXFxuICAgICAgKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoYXJncyA9PSBudWxsIHx8IGFyZ3MubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQudmFsKCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIG5ld1ZhbCA9IGFyZ3NbMF07XFxyXFxuXFxyXFxuICAgIGlmICgkLmlzQXJyYXkobmV3VmFsKSkge1xcclxcbiAgICAgIG5ld1ZhbCA9ICQubWFwKG5ld1ZhbCwgZnVuY3Rpb24gKG9iaikge1xcclxcbiAgICAgICAgcmV0dXJuIG9iai50b1N0cmluZygpO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQudmFsKG5ld1ZhbCkudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kY29udGFpbmVyLnJlbW92ZSgpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy4kZWxlbWVudFswXS5kZXRhY2hFdmVudCkge1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF0uZGV0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCB0aGlzLl9zeW5jQSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuX29ic2VydmVyICE9IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XFxyXFxuICAgICAgdGhpcy5fb2JzZXJ2ZXIgPSBudWxsO1xcclxcbiAgICB9IGVsc2UgaWYgKHRoaXMuJGVsZW1lbnRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF1cXHJcXG4gICAgICAgIC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01BdHRyTW9kaWZpZWQnLCB0aGlzLl9zeW5jQSwgZmFsc2UpO1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF1cXHJcXG4gICAgICAgIC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCB0aGlzLl9zeW5jUywgZmFsc2UpO1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF1cXHJcXG4gICAgICAgIC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Ob2RlUmVtb3ZlZCcsIHRoaXMuX3N5bmNTLCBmYWxzZSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy5fc3luY0EgPSBudWxsO1xcclxcbiAgICB0aGlzLl9zeW5jUyA9IG51bGw7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQub2ZmKCcuc2VsZWN0MicpO1xcclxcbiAgICB0aGlzLiRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JywgdGhpcy4kZWxlbWVudC5kYXRhKCdvbGQtdGFiaW5kZXgnKSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUnKTtcXHJcXG4gICAgdGhpcy4kZWxlbWVudC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xcclxcbiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoJ3NlbGVjdDInKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5kYXRhQWRhcHRlci5kZXN0cm95KCk7XFxyXFxuICAgIHRoaXMuc2VsZWN0aW9uLmRlc3Ryb3koKTtcXHJcXG4gICAgdGhpcy5kcm9wZG93bi5kZXN0cm95KCk7XFxyXFxuICAgIHRoaXMucmVzdWx0cy5kZXN0cm95KCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuZGF0YUFkYXB0ZXIgPSBudWxsO1xcclxcbiAgICB0aGlzLnNlbGVjdGlvbiA9IG51bGw7XFxyXFxuICAgIHRoaXMuZHJvcGRvd24gPSBudWxsO1xcclxcbiAgICB0aGlzLnJlc3VsdHMgPSBudWxsO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRjb250YWluZXIgPSAkKFxcclxcbiAgICAgICc8c3BhbiBjbGFzcz1cXFwic2VsZWN0MiBzZWxlY3QyLWNvbnRhaW5lclxcXCI+JyArXFxyXFxuICAgICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdGlvblxcXCI+PC9zcGFuPicgK1xcclxcbiAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCJkcm9wZG93bi13cmFwcGVyXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9zcGFuPicgK1xcclxcbiAgICAgICc8L3NwYW4+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICAkY29udGFpbmVyLmF0dHIoJ2RpcicsIHRoaXMub3B0aW9ucy5nZXQoJ2RpcicpKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kY29udGFpbmVyID0gJGNvbnRhaW5lcjtcXHJcXG5cXHJcXG4gICAgdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tJyArIHRoaXMub3B0aW9ucy5nZXQoJ3RoZW1lJykpO1xcclxcblxcclxcbiAgICAkY29udGFpbmVyLmRhdGEoJ2VsZW1lbnQnLCB0aGlzLiRlbGVtZW50KTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRjb250YWluZXI7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFNlbGVjdDI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdqcXVlcnktbW91c2V3aGVlbCcsW1xcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoJCkge1xcclxcbiAgLy8gVXNlZCB0byBzaGltIGpRdWVyeS5tb3VzZXdoZWVsIGZvciBub24tZnVsbCBidWlsZHMuXFxyXFxuICByZXR1cm4gJDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ2pxdWVyeS5zZWxlY3QyJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICdqcXVlcnktbW91c2V3aGVlbCcsXFxyXFxuXFxyXFxuICAnLi9zZWxlY3QyL2NvcmUnLFxcclxcbiAgJy4vc2VsZWN0Mi9kZWZhdWx0cydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgXywgU2VsZWN0MiwgRGVmYXVsdHMpIHtcXHJcXG4gIGlmICgkLmZuLnNlbGVjdDIgPT0gbnVsbCkge1xcclxcbiAgICAvLyBBbGwgbWV0aG9kcyB0aGF0IHNob3VsZCByZXR1cm4gdGhlIGVsZW1lbnRcXHJcXG4gICAgdmFyIHRoaXNNZXRob2RzID0gWydvcGVuJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knXTtcXHJcXG5cXHJcXG4gICAgJC5mbi5zZWxlY3QyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcXHJcXG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcXHJcXG5cXHJcXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSB7XFxyXFxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICB2YXIgaW5zdGFuY2VPcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpO1xcclxcblxcclxcbiAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgU2VsZWN0MigkKHRoaXMpLCBpbnN0YW5jZU9wdGlvbnMpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm4gdGhpcztcXHJcXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xcclxcbiAgICAgICAgdmFyIHJldDtcXHJcXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcXHJcXG5cXHJcXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgIHZhciBpbnN0YW5jZSA9ICQodGhpcykuZGF0YSgnc2VsZWN0MicpO1xcclxcblxcclxcbiAgICAgICAgICBpZiAoaW5zdGFuY2UgPT0gbnVsbCAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7XFxyXFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcXHJcXG4gICAgICAgICAgICAgICdUaGUgc2VsZWN0MihcXFxcJycgKyBvcHRpb25zICsgJ1xcXFwnKSBtZXRob2Qgd2FzIGNhbGxlZCBvbiBhbiAnICtcXHJcXG4gICAgICAgICAgICAgICdlbGVtZW50IHRoYXQgaXMgbm90IHVzaW5nIFNlbGVjdDIuJ1xcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgcmV0ID0gaW5zdGFuY2Vbb3B0aW9uc10uYXBwbHkoaW5zdGFuY2UsIGFyZ3MpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgYmUgcmV0dXJuaW5nIGB0aGlzYFxcclxcbiAgICAgICAgaWYgKCQuaW5BcnJheShvcHRpb25zLCB0aGlzTWV0aG9kcykgPiAtMSkge1xcclxcbiAgICAgICAgICByZXR1cm4gdGhpcztcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIHJldHVybiByZXQ7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMgZm9yIFNlbGVjdDI6ICcgKyBvcHRpb25zKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH07XFxyXFxuICB9XFxyXFxuXFxyXFxuICBpZiAoJC5mbi5zZWxlY3QyLmRlZmF1bHRzID09IG51bGwpIHtcXHJcXG4gICAgJC5mbi5zZWxlY3QyLmRlZmF1bHRzID0gRGVmYXVsdHM7XFxyXFxuICB9XFxyXFxuXFxyXFxuICByZXR1cm4gU2VsZWN0MjtcXHJcXG59KTtcXHJcXG5cXG4gIC8vIFJldHVybiB0aGUgQU1EIGxvYWRlciBjb25maWd1cmF0aW9uIHNvIGl0IGNhbiBiZSB1c2VkIG91dHNpZGUgb2YgdGhpcyBmaWxlXFxyXFxuICByZXR1cm4ge1xcclxcbiAgICBkZWZpbmU6IFMyLmRlZmluZSxcXHJcXG4gICAgcmVxdWlyZTogUzIucmVxdWlyZVxcclxcbiAgfTtcXHJcXG59KCkpO1xcclxcblxcclxcbiAgLy8gQXV0b2xvYWQgdGhlIGpRdWVyeSBiaW5kaW5nc1xcclxcbiAgLy8gV2Uga25vdyB0aGF0IGFsbCBvZiB0aGUgbW9kdWxlcyBleGlzdCBhYm92ZSB0aGlzLCBzbyB3ZSdyZSBzYWZlXFxyXFxuICB2YXIgc2VsZWN0MiA9IFMyLnJlcXVpcmUoJ2pxdWVyeS5zZWxlY3QyJyk7XFxyXFxuXFxyXFxuICAvLyBIb2xkIHRoZSBBTUQgbW9kdWxlIHJlZmVyZW5jZXMgb24gdGhlIGpRdWVyeSBmdW5jdGlvbiB0aGF0IHdhcyBqdXN0IGxvYWRlZFxcclxcbiAgLy8gVGhpcyBhbGxvd3MgU2VsZWN0MiB0byB1c2UgdGhlIGludGVybmFsIGxvYWRlciBvdXRzaWRlIG9mIHRoaXMgZmlsZSwgc3VjaFxcclxcbiAgLy8gYXMgaW4gdGhlIGxhbmd1YWdlIGZpbGVzLlxcclxcbiAgalF1ZXJ5LmZuLnNlbGVjdDIuYW1kID0gUzI7XFxyXFxuXFxyXFxuICAvLyBSZXR1cm4gdGhlIFNlbGVjdDIgaW5zdGFuY2UgZm9yIGFueW9uZSB3aG8gaXMgaW1wb3J0aW5nIGl0LlxcclxcbiAgcmV0dXJuIHNlbGVjdDI7XFxyXFxufSkpO1xcclxcblwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmF3LWxvYWRlciEuL34vc291cmNlLW1hcC1sb2FkZXIhLi9+L3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzXG4gKiogbW9kdWxlIGlkID0gODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=