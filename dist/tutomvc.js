/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 11);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
module.exports = function(src) {
	if (typeof execScript !== "undefined")
		execScript(src);
	else
		eval.call(null, src);
}


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

__webpack_require__(2);
__webpack_require__(7);
__webpack_require__(8);
__webpack_require__(6);
__webpack_require__(9);
(function ($) {
    $(document).ready(function () {
        // Select2FormInput
        $(".form-input-element.select2").each(function () {
            $(this).select2($(this).data());
        });
    });
})(jQuery);


/***/ }),
/* 2 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = "/*!\r\n * Bootstrap-select v1.12.2 (http://silviomoreto.github.io/bootstrap-select)\r\n *\r\n * Copyright 2013-2017 bootstrap-select\r\n * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)\r\n */\r\n\r\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define([\"jquery\"], function (a0) {\n      return (factory(a0));\n    });\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    factory(root[\"jQuery\"]);\n  }\n}(this, function (jQuery) {\n\n(function ($) {\r\n  'use strict';\r\n\r\n  //<editor-fold desc=\"Shims\">\r\n  if (!String.prototype.includes) {\r\n    (function () {\r\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\r\n      var toString = {}.toString;\r\n      var defineProperty = (function () {\r\n        // IE 8 only supports `Object.defineProperty` on DOM elements\r\n        try {\r\n          var object = {};\r\n          var $defineProperty = Object.defineProperty;\r\n          var result = $defineProperty(object, object, object) && $defineProperty;\r\n        } catch (error) {\r\n        }\r\n        return result;\r\n      }());\r\n      var indexOf = ''.indexOf;\r\n      var includes = function (search) {\r\n        if (this == null) {\r\n          throw new TypeError();\r\n        }\r\n        var string = String(this);\r\n        if (search && toString.call(search) == '[object RegExp]') {\r\n          throw new TypeError();\r\n        }\r\n        var stringLength = string.length;\r\n        var searchString = String(search);\r\n        var searchLength = searchString.length;\r\n        var position = arguments.length > 1 ? arguments[1] : undefined;\r\n        // `ToInteger`\r\n        var pos = position ? Number(position) : 0;\r\n        if (pos != pos) { // better `isNaN`\r\n          pos = 0;\r\n        }\r\n        var start = Math.min(Math.max(pos, 0), stringLength);\r\n        // Avoid the `indexOf` call if no match is possible\r\n        if (searchLength + start > stringLength) {\r\n          return false;\r\n        }\r\n        return indexOf.call(string, searchString, pos) != -1;\r\n      };\r\n      if (defineProperty) {\r\n        defineProperty(String.prototype, 'includes', {\r\n          'value': includes,\r\n          'configurable': true,\r\n          'writable': true\r\n        });\r\n      } else {\r\n        String.prototype.includes = includes;\r\n      }\r\n    }());\r\n  }\r\n\r\n  if (!String.prototype.startsWith) {\r\n    (function () {\r\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\r\n      var defineProperty = (function () {\r\n        // IE 8 only supports `Object.defineProperty` on DOM elements\r\n        try {\r\n          var object = {};\r\n          var $defineProperty = Object.defineProperty;\r\n          var result = $defineProperty(object, object, object) && $defineProperty;\r\n        } catch (error) {\r\n        }\r\n        return result;\r\n      }());\r\n      var toString = {}.toString;\r\n      var startsWith = function (search) {\r\n        if (this == null) {\r\n          throw new TypeError();\r\n        }\r\n        var string = String(this);\r\n        if (search && toString.call(search) == '[object RegExp]') {\r\n          throw new TypeError();\r\n        }\r\n        var stringLength = string.length;\r\n        var searchString = String(search);\r\n        var searchLength = searchString.length;\r\n        var position = arguments.length > 1 ? arguments[1] : undefined;\r\n        // `ToInteger`\r\n        var pos = position ? Number(position) : 0;\r\n        if (pos != pos) { // better `isNaN`\r\n          pos = 0;\r\n        }\r\n        var start = Math.min(Math.max(pos, 0), stringLength);\r\n        // Avoid the `indexOf` call if no match is possible\r\n        if (searchLength + start > stringLength) {\r\n          return false;\r\n        }\r\n        var index = -1;\r\n        while (++index < searchLength) {\r\n          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      };\r\n      if (defineProperty) {\r\n        defineProperty(String.prototype, 'startsWith', {\r\n          'value': startsWith,\r\n          'configurable': true,\r\n          'writable': true\r\n        });\r\n      } else {\r\n        String.prototype.startsWith = startsWith;\r\n      }\r\n    }());\r\n  }\r\n\r\n  if (!Object.keys) {\r\n    Object.keys = function (\r\n      o, // object\r\n      k, // key\r\n      r  // result array\r\n      ){\r\n      // initialize object and result\r\n      r=[];\r\n      // iterate over object keys\r\n      for (k in o)\r\n          // fill result array with non-prototypical keys\r\n        r.hasOwnProperty.call(o, k) && r.push(k);\r\n      // return result\r\n      return r;\r\n    };\r\n  }\r\n\r\n  // set data-selected on select element if the value has been programmatically selected\r\n  // prior to initialization of bootstrap-select\r\n  // * consider removing or replacing an alternative method *\r\n  var valHooks = {\r\n    useDefault: false,\r\n    _set: $.valHooks.select.set\r\n  };\r\n\r\n  $.valHooks.select.set = function(elem, value) {\r\n    if (value && !valHooks.useDefault) $(elem).data('selected', true);\r\n\r\n    return valHooks._set.apply(this, arguments);\r\n  };\r\n\r\n  var changed_arguments = null;\r\n  $.fn.triggerNative = function (eventName) {\r\n    var el = this[0],\r\n        event;\r\n\r\n    if (el.dispatchEvent) { // for modern browsers & IE9+\r\n      if (typeof Event === 'function') {\r\n        // For modern browsers\r\n        event = new Event(eventName, {\r\n          bubbles: true\r\n        });\r\n      } else {\r\n        // For IE since it doesn't support Event constructor\r\n        event = document.createEvent('Event');\r\n        event.initEvent(eventName, true, false);\r\n      }\r\n\r\n      el.dispatchEvent(event);\r\n    } else if (el.fireEvent) { // for IE8\r\n      event = document.createEventObject();\r\n      event.eventType = eventName;\r\n      el.fireEvent('on' + eventName, event);\r\n    } else {\r\n      // fall back to jQuery.trigger\r\n      this.trigger(eventName);\r\n    }\r\n  };\r\n  //</editor-fold>\r\n\r\n  // Case insensitive contains search\r\n  $.expr.pseudos.icontains = function (obj, index, meta) {\r\n    var $obj = $(obj);\r\n    var haystack = ($obj.data('tokens') || $obj.text()).toString().toUpperCase();\r\n    return haystack.includes(meta[3].toUpperCase());\r\n  };\r\n\r\n  // Case insensitive begins search\r\n  $.expr.pseudos.ibegins = function (obj, index, meta) {\r\n    var $obj = $(obj);\r\n    var haystack = ($obj.data('tokens') || $obj.text()).toString().toUpperCase();\r\n    return haystack.startsWith(meta[3].toUpperCase());\r\n  };\r\n\r\n  // Case and accent insensitive contains search\r\n  $.expr.pseudos.aicontains = function (obj, index, meta) {\r\n    var $obj = $(obj);\r\n    var haystack = ($obj.data('tokens') || $obj.data('normalizedText') || $obj.text()).toString().toUpperCase();\r\n    return haystack.includes(meta[3].toUpperCase());\r\n  };\r\n\r\n  // Case and accent insensitive begins search\r\n  $.expr.pseudos.aibegins = function (obj, index, meta) {\r\n    var $obj = $(obj);\r\n    var haystack = ($obj.data('tokens') || $obj.data('normalizedText') || $obj.text()).toString().toUpperCase();\r\n    return haystack.startsWith(meta[3].toUpperCase());\r\n  };\r\n\r\n  /**\r\n   * Remove all diatrics from the given text.\r\n   * @access private\r\n   * @param {String} text\r\n   * @returns {String}\r\n   */\r\n  function normalizeToBase(text) {\r\n    var rExps = [\r\n      {re: /[\\xC0-\\xC6]/g, ch: \"A\"},\r\n      {re: /[\\xE0-\\xE6]/g, ch: \"a\"},\r\n      {re: /[\\xC8-\\xCB]/g, ch: \"E\"},\r\n      {re: /[\\xE8-\\xEB]/g, ch: \"e\"},\r\n      {re: /[\\xCC-\\xCF]/g, ch: \"I\"},\r\n      {re: /[\\xEC-\\xEF]/g, ch: \"i\"},\r\n      {re: /[\\xD2-\\xD6]/g, ch: \"O\"},\r\n      {re: /[\\xF2-\\xF6]/g, ch: \"o\"},\r\n      {re: /[\\xD9-\\xDC]/g, ch: \"U\"},\r\n      {re: /[\\xF9-\\xFC]/g, ch: \"u\"},\r\n      {re: /[\\xC7-\\xE7]/g, ch: \"c\"},\r\n      {re: /[\\xD1]/g, ch: \"N\"},\r\n      {re: /[\\xF1]/g, ch: \"n\"}\r\n    ];\r\n    $.each(rExps, function () {\r\n      text = text ? text.replace(this.re, this.ch) : '';\r\n    });\r\n    return text;\r\n  }\r\n\r\n\r\n  // List of HTML entities for escaping.\r\n  var escapeMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#x27;',\r\n    '`': '&#x60;'\r\n  };\r\n  \r\n  var unescapeMap = {\r\n    '&amp;': '&',\r\n    '&lt;': '<',\r\n    '&gt;': '>',\r\n    '&quot;': '\"',\r\n    '&#x27;': \"'\",\r\n    '&#x60;': '`'\r\n  };\r\n\r\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\r\n  var createEscaper = function(map) {\r\n    var escaper = function(match) {\r\n      return map[match];\r\n    };\r\n    // Regexes for identifying a key that needs to be escaped.\r\n    var source = '(?:' + Object.keys(map).join('|') + ')';\r\n    var testRegexp = RegExp(source);\r\n    var replaceRegexp = RegExp(source, 'g');\r\n    return function(string) {\r\n      string = string == null ? '' : '' + string;\r\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\r\n    };\r\n  };\r\n\r\n  var htmlEscape = createEscaper(escapeMap);\r\n  var htmlUnescape = createEscaper(unescapeMap);\r\n\r\n  var Selectpicker = function (element, options) {\r\n    // bootstrap-select has been initialized - revert valHooks.select.set back to its original function\r\n    if (!valHooks.useDefault) {\r\n      $.valHooks.select.set = valHooks._set;\r\n      valHooks.useDefault = true;\r\n    }\r\n\r\n    this.$element = $(element);\r\n    this.$newElement = null;\r\n    this.$button = null;\r\n    this.$menu = null;\r\n    this.$lis = null;\r\n    this.options = options;\r\n\r\n    // If we have no title yet, try to pull it from the html title attribute (jQuery doesnt' pick it up as it's not a\r\n    // data-attribute)\r\n    if (this.options.title === null) {\r\n      this.options.title = this.$element.attr('title');\r\n    }\r\n\r\n    // Format window padding\r\n    var winPad = this.options.windowPadding;\r\n    if (typeof winPad === 'number') {\r\n      this.options.windowPadding = [winPad, winPad, winPad, winPad];\r\n    }\r\n\r\n    //Expose public methods\r\n    this.val = Selectpicker.prototype.val;\r\n    this.render = Selectpicker.prototype.render;\r\n    this.refresh = Selectpicker.prototype.refresh;\r\n    this.setStyle = Selectpicker.prototype.setStyle;\r\n    this.selectAll = Selectpicker.prototype.selectAll;\r\n    this.deselectAll = Selectpicker.prototype.deselectAll;\r\n    this.destroy = Selectpicker.prototype.destroy;\r\n    this.remove = Selectpicker.prototype.remove;\r\n    this.show = Selectpicker.prototype.show;\r\n    this.hide = Selectpicker.prototype.hide;\r\n\r\n    this.init();\r\n  };\r\n\r\n  Selectpicker.VERSION = '1.12.2';\r\n\r\n  // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.\r\n  Selectpicker.DEFAULTS = {\r\n    noneSelectedText: 'Nothing selected',\r\n    noneResultsText: 'No results matched {0}',\r\n    countSelectedText: function (numSelected, numTotal) {\r\n      return (numSelected == 1) ? \"{0} item selected\" : \"{0} items selected\";\r\n    },\r\n    maxOptionsText: function (numAll, numGroup) {\r\n      return [\r\n        (numAll == 1) ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)',\r\n        (numGroup == 1) ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'\r\n      ];\r\n    },\r\n    selectAllText: 'Select All',\r\n    deselectAllText: 'Deselect All',\r\n    doneButton: false,\r\n    doneButtonText: 'Close',\r\n    multipleSeparator: ', ',\r\n    styleBase: 'btn',\r\n    style: 'btn-default',\r\n    size: 'auto',\r\n    title: null,\r\n    selectedTextFormat: 'values',\r\n    width: false,\r\n    container: false,\r\n    hideDisabled: false,\r\n    showSubtext: false,\r\n    showIcon: true,\r\n    showContent: true,\r\n    dropupAuto: true,\r\n    header: false,\r\n    liveSearch: false,\r\n    liveSearchPlaceholder: null,\r\n    liveSearchNormalize: false,\r\n    liveSearchStyle: 'contains',\r\n    actionsBox: false,\r\n    iconBase: 'glyphicon',\r\n    tickIcon: 'glyphicon-ok',\r\n    showTick: false,\r\n    template: {\r\n      caret: '<span class=\"caret\"></span>'\r\n    },\r\n    maxOptions: false,\r\n    mobile: false,\r\n    selectOnTab: false,\r\n    dropdownAlignRight: false,\r\n    windowPadding: 0\r\n  };\r\n\r\n  Selectpicker.prototype = {\r\n\r\n    constructor: Selectpicker,\r\n\r\n    init: function () {\r\n      var that = this,\r\n          id = this.$element.attr('id');\r\n\r\n      this.$element.addClass('bs-select-hidden');\r\n\r\n      // store originalIndex (key) and newIndex (value) in this.liObj for fast accessibility\r\n      // allows us to do this.$lis.eq(that.liObj[index]) instead of this.$lis.filter('[data-original-index=\"' + index + '\"]')\r\n      this.liObj = {};\r\n      this.multiple = this.$element.prop('multiple');\r\n      this.autofocus = this.$element.prop('autofocus');\r\n      this.$newElement = this.createView();\r\n      this.$element\r\n        .after(this.$newElement)\r\n        .appendTo(this.$newElement);\r\n      this.$button = this.$newElement.children('button');\r\n      this.$menu = this.$newElement.children('.dropdown-menu');\r\n      this.$menuInner = this.$menu.children('.inner');\r\n      this.$searchbox = this.$menu.find('input');\r\n\r\n      this.$element.removeClass('bs-select-hidden');\r\n\r\n      if (this.options.dropdownAlignRight === true) this.$menu.addClass('dropdown-menu-right');\r\n\r\n      if (typeof id !== 'undefined') {\r\n        this.$button.attr('data-id', id);\r\n        $('label[for=\"' + id + '\"]').click(function (e) {\r\n          e.preventDefault();\r\n          that.$button.focus();\r\n        });\r\n      }\r\n\r\n      this.checkDisabled();\r\n      this.clickListener();\r\n      if (this.options.liveSearch) this.liveSearchListener();\r\n      this.render();\r\n      this.setStyle();\r\n      this.setWidth();\r\n      if (this.options.container) this.selectPosition();\r\n      this.$menu.data('this', this);\r\n      this.$newElement.data('this', this);\r\n      if (this.options.mobile) this.mobile();\r\n\r\n      this.$newElement.on({\r\n        'hide.bs.dropdown': function (e) {\r\n          that.$menuInner.attr('aria-expanded', false);\r\n          that.$element.trigger('hide.bs.select', e);\r\n        },\r\n        'hidden.bs.dropdown': function (e) {\r\n          that.$element.trigger('hidden.bs.select', e);\r\n        },\r\n        'show.bs.dropdown': function (e) {\r\n          that.$menuInner.attr('aria-expanded', true);\r\n          that.$element.trigger('show.bs.select', e);\r\n        },\r\n        'shown.bs.dropdown': function (e) {\r\n          that.$element.trigger('shown.bs.select', e);\r\n        }\r\n      });\r\n\r\n      if (that.$element[0].hasAttribute('required')) {\r\n        this.$element.on('invalid', function () {\r\n          that.$button\r\n            .addClass('bs-invalid')\r\n            .focus();\r\n\r\n          that.$element.on({\r\n            'focus.bs.select': function () {\r\n              that.$button.focus();\r\n              that.$element.off('focus.bs.select');\r\n            },\r\n            'shown.bs.select': function () {\r\n              that.$element\r\n                .val(that.$element.val()) // set the value to hide the validation message in Chrome when menu is opened\r\n                .off('shown.bs.select');\r\n            },\r\n            'rendered.bs.select': function () {\r\n              // if select is no longer invalid, remove the bs-invalid class\r\n              if (this.validity.valid) that.$button.removeClass('bs-invalid');\r\n              that.$element.off('rendered.bs.select');\r\n            }\r\n          });\r\n        });\r\n      }\r\n\r\n      setTimeout(function () {\r\n        that.$element.trigger('loaded.bs.select');\r\n      });\r\n    },\r\n\r\n    createDropdown: function () {\r\n      // Options\r\n      // If we are multiple or showTick option is set, then add the show-tick class\r\n      var showTick = (this.multiple || this.options.showTick) ? ' show-tick' : '',\r\n          inputGroup = this.$element.parent().hasClass('input-group') ? ' input-group-btn' : '',\r\n          autofocus = this.autofocus ? ' autofocus' : '';\r\n      // Elements\r\n      var header = this.options.header ? '<div class=\"popover-title\"><button type=\"button\" class=\"close\" aria-hidden=\"true\">&times;</button>' + this.options.header + '</div>' : '';\r\n      var searchbox = this.options.liveSearch ?\r\n      '<div class=\"bs-searchbox\">' +\r\n      '<input type=\"text\" class=\"form-control\" autocomplete=\"off\"' +\r\n      (null === this.options.liveSearchPlaceholder ? '' : ' placeholder=\"' + htmlEscape(this.options.liveSearchPlaceholder) + '\"') + ' role=\"textbox\" aria-label=\"Search\">' +\r\n      '</div>'\r\n          : '';\r\n      var actionsbox = this.multiple && this.options.actionsBox ?\r\n      '<div class=\"bs-actionsbox\">' +\r\n      '<div class=\"btn-group btn-group-sm btn-block\">' +\r\n      '<button type=\"button\" class=\"actions-btn bs-select-all btn btn-default\">' +\r\n      this.options.selectAllText +\r\n      '</button>' +\r\n      '<button type=\"button\" class=\"actions-btn bs-deselect-all btn btn-default\">' +\r\n      this.options.deselectAllText +\r\n      '</button>' +\r\n      '</div>' +\r\n      '</div>'\r\n          : '';\r\n      var donebutton = this.multiple && this.options.doneButton ?\r\n      '<div class=\"bs-donebutton\">' +\r\n      '<div class=\"btn-group btn-block\">' +\r\n      '<button type=\"button\" class=\"btn btn-sm btn-default\">' +\r\n      this.options.doneButtonText +\r\n      '</button>' +\r\n      '</div>' +\r\n      '</div>'\r\n          : '';\r\n      var drop =\r\n          '<div class=\"btn-group bootstrap-select' + showTick + inputGroup + '\">' +\r\n          '<button type=\"button\" class=\"' + this.options.styleBase + ' dropdown-toggle\" data-toggle=\"dropdown\"' + autofocus + ' role=\"button\">' +\r\n          '<span class=\"filter-option pull-left\"></span>&nbsp;' +\r\n          '<span class=\"bs-caret\">' +\r\n          this.options.template.caret +\r\n          '</span>' +\r\n          '</button>' +\r\n          '<div class=\"dropdown-menu open\" role=\"combobox\">' +\r\n          header +\r\n          searchbox +\r\n          actionsbox +\r\n          '<ul class=\"dropdown-menu inner\" role=\"listbox\" aria-expanded=\"false\">' +\r\n          '</ul>' +\r\n          donebutton +\r\n          '</div>' +\r\n          '</div>';\r\n\r\n      return $(drop);\r\n    },\r\n\r\n    createView: function () {\r\n      var $drop = this.createDropdown(),\r\n          li = this.createLi();\r\n\r\n      $drop.find('ul')[0].innerHTML = li;\r\n      return $drop;\r\n    },\r\n\r\n    reloadLi: function () {\r\n      // rebuild\r\n      var li = this.createLi();\r\n      this.$menuInner[0].innerHTML = li;\r\n    },\r\n\r\n    createLi: function () {\r\n      var that = this,\r\n          _li = [],\r\n          optID = 0,\r\n          titleOption = document.createElement('option'),\r\n          liIndex = -1; // increment liIndex whenever a new <li> element is created to ensure liObj is correct\r\n\r\n      // Helper functions\r\n      /**\r\n       * @param content\r\n       * @param [index]\r\n       * @param [classes]\r\n       * @param [optgroup]\r\n       * @returns {string}\r\n       */\r\n      var generateLI = function (content, index, classes, optgroup) {\r\n        return '<li' +\r\n            ((typeof classes !== 'undefined' & '' !== classes) ? ' class=\"' + classes + '\"' : '') +\r\n            ((typeof index !== 'undefined' & null !== index) ? ' data-original-index=\"' + index + '\"' : '') +\r\n            ((typeof optgroup !== 'undefined' & null !== optgroup) ? 'data-optgroup=\"' + optgroup + '\"' : '') +\r\n            '>' + content + '</li>';\r\n      };\r\n\r\n      /**\r\n       * @param text\r\n       * @param [classes]\r\n       * @param [inline]\r\n       * @param [tokens]\r\n       * @returns {string}\r\n       */\r\n      var generateA = function (text, classes, inline, tokens) {\r\n        return '<a tabindex=\"0\"' +\r\n            (typeof classes !== 'undefined' ? ' class=\"' + classes + '\"' : '') +\r\n            (inline ? ' style=\"' + inline + '\"' : '') +\r\n            (that.options.liveSearchNormalize ? ' data-normalized-text=\"' + normalizeToBase(htmlEscape($(text).html())) + '\"' : '') +\r\n            (typeof tokens !== 'undefined' || tokens !== null ? ' data-tokens=\"' + tokens + '\"' : '') +\r\n            ' role=\"option\">' + text +\r\n            '<span class=\"' + that.options.iconBase + ' ' + that.options.tickIcon + ' check-mark\"></span>' +\r\n            '</a>';\r\n      };\r\n\r\n      if (this.options.title && !this.multiple) {\r\n        // this option doesn't create a new <li> element, but does add a new option, so liIndex is decreased\r\n        // since liObj is recalculated on every refresh, liIndex needs to be decreased even if the titleOption is already appended\r\n        liIndex--;\r\n\r\n        if (!this.$element.find('.bs-title-option').length) {\r\n          // Use native JS to prepend option (faster)\r\n          var element = this.$element[0];\r\n          titleOption.className = 'bs-title-option';\r\n          titleOption.innerHTML = this.options.title;\r\n          titleOption.value = '';\r\n          element.insertBefore(titleOption, element.firstChild);\r\n          // Check if selected or data-selected attribute is already set on an option. If not, select the titleOption option.\r\n          // the selected item may have been changed by user or programmatically before the bootstrap select plugin runs,\r\n          // if so, the select will have the data-selected attribute\r\n          var $opt = $(element.options[element.selectedIndex]);\r\n          if ($opt.attr('selected') === undefined && this.$element.data('selected') === undefined) {\r\n            titleOption.selected = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.$element.find('option').each(function (index) {\r\n        var $this = $(this);\r\n\r\n        liIndex++;\r\n\r\n        if ($this.hasClass('bs-title-option')) return;\r\n\r\n        // Get the class and text for the option\r\n        var optionClass = this.className || '',\r\n            inline = this.style.cssText,\r\n            text = $this.data('content') ? $this.data('content') : $this.html(),\r\n            tokens = $this.data('tokens') ? $this.data('tokens') : null,\r\n            subtext = typeof $this.data('subtext') !== 'undefined' ? '<small class=\"text-muted\">' + $this.data('subtext') + '</small>' : '',\r\n            icon = typeof $this.data('icon') !== 'undefined' ? '<span class=\"' + that.options.iconBase + ' ' + $this.data('icon') + '\"></span> ' : '',\r\n            $parent = $this.parent(),\r\n            isOptgroup = $parent[0].tagName === 'OPTGROUP',\r\n            isOptgroupDisabled = isOptgroup && $parent[0].disabled,\r\n            isDisabled = this.disabled || isOptgroupDisabled;\r\n\r\n        if (icon !== '' && isDisabled) {\r\n          icon = '<span>' + icon + '</span>';\r\n        }\r\n\r\n        if (that.options.hideDisabled && (isDisabled && !isOptgroup || isOptgroupDisabled)) {\r\n          liIndex--;\r\n          return;\r\n        }\r\n\r\n        if (!$this.data('content')) {\r\n          // Prepend any icon and append any subtext to the main text.\r\n          text = icon + '<span class=\"text\">' + text + subtext + '</span>';\r\n        }\r\n\r\n        if (isOptgroup && $this.data('divider') !== true) {\r\n          if (that.options.hideDisabled && isDisabled) {\r\n            if ($parent.data('allOptionsDisabled') === undefined) {\r\n              var $options = $parent.children();\r\n              $parent.data('allOptionsDisabled', $options.filter(':disabled').length === $options.length);\r\n            }\r\n\r\n            if ($parent.data('allOptionsDisabled')) {\r\n              liIndex--;\r\n              return;\r\n            }\r\n          }\r\n\r\n          var optGroupClass = ' ' + $parent[0].className || '';\r\n\r\n          if ($this.index() === 0) { // Is it the first option of the optgroup?\r\n            optID += 1;\r\n\r\n            // Get the opt group label\r\n            var label = $parent[0].label,\r\n                labelSubtext = typeof $parent.data('subtext') !== 'undefined' ? '<small class=\"text-muted\">' + $parent.data('subtext') + '</small>' : '',\r\n                labelIcon = $parent.data('icon') ? '<span class=\"' + that.options.iconBase + ' ' + $parent.data('icon') + '\"></span> ' : '';\r\n\r\n            label = labelIcon + '<span class=\"text\">' + htmlEscape(label) + labelSubtext + '</span>';\r\n\r\n            if (index !== 0 && _li.length > 0) { // Is it NOT the first option of the select && are there elements in the dropdown?\r\n              liIndex++;\r\n              _li.push(generateLI('', null, 'divider', optID + 'div'));\r\n            }\r\n            liIndex++;\r\n            _li.push(generateLI(label, null, 'dropdown-header' + optGroupClass, optID));\r\n          }\r\n\r\n          if (that.options.hideDisabled && isDisabled) {\r\n            liIndex--;\r\n            return;\r\n          }\r\n\r\n          _li.push(generateLI(generateA(text, 'opt ' + optionClass + optGroupClass, inline, tokens), index, '', optID));\r\n        } else if ($this.data('divider') === true) {\r\n          _li.push(generateLI('', index, 'divider'));\r\n        } else if ($this.data('hidden') === true) {\r\n          _li.push(generateLI(generateA(text, optionClass, inline, tokens), index, 'hidden is-hidden'));\r\n        } else {\r\n          var showDivider = this.previousElementSibling && this.previousElementSibling.tagName === 'OPTGROUP';\r\n\r\n          // if previous element is not an optgroup and hideDisabled is true\r\n          if (!showDivider && that.options.hideDisabled) {\r\n            // get previous elements\r\n            var $prev = $(this).prevAll();\r\n\r\n            for (var i = 0; i < $prev.length; i++) {\r\n              // find the first element in the previous elements that is an optgroup\r\n              if ($prev[i].tagName === 'OPTGROUP') {\r\n                var optGroupDistance = 0;\r\n\r\n                // loop through the options in between the current option and the optgroup\r\n                // and check if they are hidden or disabled\r\n                for (var d = 0; d < i; d++) {\r\n                  var prevOption = $prev[d];\r\n                  if (prevOption.disabled || $(prevOption).data('hidden') === true) optGroupDistance++;\r\n                }\r\n\r\n                // if all of the options between the current option and the optgroup are hidden or disabled, show the divider\r\n                if (optGroupDistance === i) showDivider = true;\r\n\r\n                break;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (showDivider) {\r\n            liIndex++;\r\n            _li.push(generateLI('', null, 'divider', optID + 'div'));\r\n          }\r\n          _li.push(generateLI(generateA(text, optionClass, inline, tokens), index));\r\n        }\r\n\r\n        that.liObj[index] = liIndex;\r\n      });\r\n\r\n      //If we are not multiple, we don't have a selected item, and we don't have a title, select the first element so something is set in the button\r\n      if (!this.multiple && this.$element.find('option:selected').length === 0 && !this.options.title) {\r\n        this.$element.find('option').eq(0).prop('selected', true).attr('selected', 'selected');\r\n      }\r\n\r\n      return _li.join('');\r\n    },\r\n\r\n    findLis: function () {\r\n      if (this.$lis == null) this.$lis = this.$menu.find('li');\r\n      return this.$lis;\r\n    },\r\n\r\n    /**\r\n     * @param [updateLi] defaults to true\r\n     */\r\n    render: function (updateLi) {\r\n      var that = this,\r\n          notDisabled;\r\n\r\n      //Update the LI to match the SELECT\r\n      if (updateLi !== false) {\r\n        this.$element.find('option').each(function (index) {\r\n          var $lis = that.findLis().eq(that.liObj[index]);\r\n\r\n          that.setDisabled(index, this.disabled || this.parentNode.tagName === 'OPTGROUP' && this.parentNode.disabled, $lis);\r\n          that.setSelected(index, this.selected, $lis);\r\n        });\r\n      }\r\n\r\n      this.togglePlaceholder();\r\n\r\n      this.tabIndex();\r\n\r\n      var selectedItems = this.$element.find('option').map(function () {\r\n        if (this.selected) {\r\n          if (that.options.hideDisabled && (this.disabled || this.parentNode.tagName === 'OPTGROUP' && this.parentNode.disabled)) return;\r\n\r\n          var $this = $(this),\r\n              icon = $this.data('icon') && that.options.showIcon ? '<i class=\"' + that.options.iconBase + ' ' + $this.data('icon') + '\"></i> ' : '',\r\n              subtext;\r\n\r\n          if (that.options.showSubtext && $this.data('subtext') && !that.multiple) {\r\n            subtext = ' <small class=\"text-muted\">' + $this.data('subtext') + '</small>';\r\n          } else {\r\n            subtext = '';\r\n          }\r\n          if (typeof $this.attr('title') !== 'undefined') {\r\n            return $this.attr('title');\r\n          } else if ($this.data('content') && that.options.showContent) {\r\n            return $this.data('content').toString();\r\n          } else {\r\n            return icon + $this.html() + subtext;\r\n          }\r\n        }\r\n      }).toArray();\r\n\r\n      //Fixes issue in IE10 occurring when no default option is selected and at least one option is disabled\r\n      //Convert all the values into a comma delimited string\r\n      var title = !this.multiple ? selectedItems[0] : selectedItems.join(this.options.multipleSeparator);\r\n\r\n      //If this is multi select, and the selectText type is count, the show 1 of 2 selected etc..\r\n      if (this.multiple && this.options.selectedTextFormat.indexOf('count') > -1) {\r\n        var max = this.options.selectedTextFormat.split('>');\r\n        if ((max.length > 1 && selectedItems.length > max[1]) || (max.length == 1 && selectedItems.length >= 2)) {\r\n          notDisabled = this.options.hideDisabled ? ', [disabled]' : '';\r\n          var totalCount = this.$element.find('option').not('[data-divider=\"true\"], [data-hidden=\"true\"]' + notDisabled).length,\r\n              tr8nText = (typeof this.options.countSelectedText === 'function') ? this.options.countSelectedText(selectedItems.length, totalCount) : this.options.countSelectedText;\r\n          title = tr8nText.replace('{0}', selectedItems.length.toString()).replace('{1}', totalCount.toString());\r\n        }\r\n      }\r\n\r\n      if (this.options.title == undefined) {\r\n        this.options.title = this.$element.attr('title');\r\n      }\r\n\r\n      if (this.options.selectedTextFormat == 'static') {\r\n        title = this.options.title;\r\n      }\r\n\r\n      //If we dont have a title, then use the default, or if nothing is set at all, use the not selected text\r\n      if (!title) {\r\n        title = typeof this.options.title !== 'undefined' ? this.options.title : this.options.noneSelectedText;\r\n      }\r\n\r\n      //strip all HTML tags and trim the result, then unescape any escaped tags\r\n      this.$button.attr('title', htmlUnescape($.trim(title.replace(/<[^>]*>?/g, ''))));\r\n      this.$button.children('.filter-option').html(title);\r\n\r\n      this.$element.trigger('rendered.bs.select');\r\n    },\r\n\r\n    /**\r\n     * @param [style]\r\n     * @param [status]\r\n     */\r\n    setStyle: function (style, status) {\r\n      if (this.$element.attr('class')) {\r\n        this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\\[.*\\]/gi, ''));\r\n      }\r\n\r\n      var buttonClass = style ? style : this.options.style;\r\n\r\n      if (status == 'add') {\r\n        this.$button.addClass(buttonClass);\r\n      } else if (status == 'remove') {\r\n        this.$button.removeClass(buttonClass);\r\n      } else {\r\n        this.$button.removeClass(this.options.style);\r\n        this.$button.addClass(buttonClass);\r\n      }\r\n    },\r\n\r\n    liHeight: function (refresh) {\r\n      if (!refresh && (this.options.size === false || this.sizeInfo)) return;\r\n\r\n      var newElement = document.createElement('div'),\r\n          menu = document.createElement('div'),\r\n          menuInner = document.createElement('ul'),\r\n          divider = document.createElement('li'),\r\n          li = document.createElement('li'),\r\n          a = document.createElement('a'),\r\n          text = document.createElement('span'),\r\n          header = this.options.header && this.$menu.find('.popover-title').length > 0 ? this.$menu.find('.popover-title')[0].cloneNode(true) : null,\r\n          search = this.options.liveSearch ? document.createElement('div') : null,\r\n          actions = this.options.actionsBox && this.multiple && this.$menu.find('.bs-actionsbox').length > 0 ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,\r\n          doneButton = this.options.doneButton && this.multiple && this.$menu.find('.bs-donebutton').length > 0 ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null;\r\n\r\n      text.className = 'text';\r\n      newElement.className = this.$menu[0].parentNode.className + ' open';\r\n      menu.className = 'dropdown-menu open';\r\n      menuInner.className = 'dropdown-menu inner';\r\n      divider.className = 'divider';\r\n\r\n      text.appendChild(document.createTextNode('Inner text'));\r\n      a.appendChild(text);\r\n      li.appendChild(a);\r\n      menuInner.appendChild(li);\r\n      menuInner.appendChild(divider);\r\n      if (header) menu.appendChild(header);\r\n      if (search) {\r\n        var input = document.createElement('input');\r\n        search.className = 'bs-searchbox';\r\n        input.className = 'form-control';\r\n        search.appendChild(input);\r\n        menu.appendChild(search);\r\n      }\r\n      if (actions) menu.appendChild(actions);\r\n      menu.appendChild(menuInner);\r\n      if (doneButton) menu.appendChild(doneButton);\r\n      newElement.appendChild(menu);\r\n\r\n      document.body.appendChild(newElement);\r\n\r\n      var liHeight = a.offsetHeight,\r\n          headerHeight = header ? header.offsetHeight : 0,\r\n          searchHeight = search ? search.offsetHeight : 0,\r\n          actionsHeight = actions ? actions.offsetHeight : 0,\r\n          doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,\r\n          dividerHeight = $(divider).outerHeight(true),\r\n          // fall back to jQuery if getComputedStyle is not supported\r\n          menuStyle = typeof getComputedStyle === 'function' ? getComputedStyle(menu) : false,\r\n          $menu = menuStyle ? null : $(menu),\r\n          menuPadding = {\r\n            vert: parseInt(menuStyle ? menuStyle.paddingTop : $menu.css('paddingTop')) +\r\n                  parseInt(menuStyle ? menuStyle.paddingBottom : $menu.css('paddingBottom')) +\r\n                  parseInt(menuStyle ? menuStyle.borderTopWidth : $menu.css('borderTopWidth')) +\r\n                  parseInt(menuStyle ? menuStyle.borderBottomWidth : $menu.css('borderBottomWidth')),\r\n            horiz: parseInt(menuStyle ? menuStyle.paddingLeft : $menu.css('paddingLeft')) +\r\n                  parseInt(menuStyle ? menuStyle.paddingRight : $menu.css('paddingRight')) +\r\n                  parseInt(menuStyle ? menuStyle.borderLeftWidth : $menu.css('borderLeftWidth')) +\r\n                  parseInt(menuStyle ? menuStyle.borderRightWidth : $menu.css('borderRightWidth'))\r\n          },\r\n          menuExtras =  {\r\n            vert: menuPadding.vert +\r\n                  parseInt(menuStyle ? menuStyle.marginTop : $menu.css('marginTop')) +\r\n                  parseInt(menuStyle ? menuStyle.marginBottom : $menu.css('marginBottom')) + 2,\r\n            horiz: menuPadding.horiz +\r\n                  parseInt(menuStyle ? menuStyle.marginLeft : $menu.css('marginLeft')) +\r\n                  parseInt(menuStyle ? menuStyle.marginRight : $menu.css('marginRight')) + 2\r\n          }\r\n\r\n      document.body.removeChild(newElement);\r\n\r\n      this.sizeInfo = {\r\n        liHeight: liHeight,\r\n        headerHeight: headerHeight,\r\n        searchHeight: searchHeight,\r\n        actionsHeight: actionsHeight,\r\n        doneButtonHeight: doneButtonHeight,\r\n        dividerHeight: dividerHeight,\r\n        menuPadding: menuPadding,\r\n        menuExtras: menuExtras\r\n      };\r\n    },\r\n\r\n    setSize: function () {\r\n      this.findLis();\r\n      this.liHeight();\r\n\r\n      if (this.options.header) this.$menu.css('padding-top', 0);\r\n      if (this.options.size === false) return;\r\n\r\n      var that = this,\r\n          $menu = this.$menu,\r\n          $menuInner = this.$menuInner,\r\n          $window = $(window),\r\n          selectHeight = this.$newElement[0].offsetHeight,\r\n          selectWidth = this.$newElement[0].offsetWidth,\r\n          liHeight = this.sizeInfo['liHeight'],\r\n          headerHeight = this.sizeInfo['headerHeight'],\r\n          searchHeight = this.sizeInfo['searchHeight'],\r\n          actionsHeight = this.sizeInfo['actionsHeight'],\r\n          doneButtonHeight = this.sizeInfo['doneButtonHeight'],\r\n          divHeight = this.sizeInfo['dividerHeight'],\r\n          menuPadding = this.sizeInfo['menuPadding'],\r\n          menuExtras = this.sizeInfo['menuExtras'],\r\n          notDisabled = this.options.hideDisabled ? '.disabled' : '',\r\n          menuHeight,\r\n          menuWidth,\r\n          getHeight,\r\n          getWidth,\r\n          selectOffsetTop,\r\n          selectOffsetBot,\r\n          selectOffsetLeft,\r\n          selectOffsetRight,\r\n          getPos = function() {\r\n            var pos = that.$newElement.offset(),\r\n                $container = $(that.options.container),\r\n                containerPos;\r\n\r\n            if (that.options.container && !$container.is('body')) {\r\n              containerPos = $container.offset();\r\n              containerPos.top += parseInt($container.css('borderTopWidth'));\r\n              containerPos.left += parseInt($container.css('borderLeftWidth'));\r\n            } else {\r\n              containerPos = { top: 0, left: 0 };\r\n            }\r\n\r\n            var winPad = that.options.windowPadding;\r\n            selectOffsetTop = pos.top - containerPos.top - $window.scrollTop();\r\n            selectOffsetBot = $window.height() - selectOffsetTop - selectHeight - containerPos.top - winPad[2];\r\n            selectOffsetLeft = pos.left - containerPos.left - $window.scrollLeft();\r\n            selectOffsetRight = $window.width() - selectOffsetLeft - selectWidth - containerPos.left - winPad[1];\r\n            selectOffsetTop -= winPad[0];\r\n            selectOffsetLeft -= winPad[3];\r\n          };\r\n\r\n      getPos();\r\n\r\n      if (this.options.size === 'auto') {\r\n        var getSize = function () {\r\n          var minHeight,\r\n              hasClass = function (className, include) {\r\n                return function (element) {\r\n                    if (include) {\r\n                        return (element.classList ? element.classList.contains(className) : $(element).hasClass(className));\r\n                    } else {\r\n                        return !(element.classList ? element.classList.contains(className) : $(element).hasClass(className));\r\n                    }\r\n                };\r\n              },\r\n              lis = that.$menuInner[0].getElementsByTagName('li'),\r\n              lisVisible = Array.prototype.filter ? Array.prototype.filter.call(lis, hasClass('hidden', false)) : that.$lis.not('.hidden'),\r\n              optGroup = Array.prototype.filter ? Array.prototype.filter.call(lisVisible, hasClass('dropdown-header', true)) : lisVisible.filter('.dropdown-header');\r\n\r\n          getPos();\r\n          menuHeight = selectOffsetBot - menuExtras.vert;\r\n          menuWidth = selectOffsetRight - menuExtras.horiz;\r\n\r\n          if (that.options.container) {\r\n            if (!$menu.data('height')) $menu.data('height', $menu.height());\r\n            getHeight = $menu.data('height');\r\n\r\n            if (!$menu.data('width')) $menu.data('width', $menu.width());\r\n            getWidth = $menu.data('width');\r\n          } else {\r\n            getHeight = $menu.height();\r\n            getWidth = $menu.width();\r\n          }\r\n\r\n          if (that.options.dropupAuto) {\r\n            that.$newElement.toggleClass('dropup', selectOffsetTop > selectOffsetBot && (menuHeight - menuExtras.vert) < getHeight);\r\n          }\r\n\r\n          if (that.$newElement.hasClass('dropup')) {\r\n            menuHeight = selectOffsetTop - menuExtras.vert;\r\n          }\r\n\r\n          if (that.options.dropdownAlignRight === 'auto') {\r\n            $menu.toggleClass('dropdown-menu-right', selectOffsetLeft > selectOffsetRight && (menuWidth - menuExtras.horiz) < (getWidth - selectWidth));\r\n          }\r\n\r\n          if ((lisVisible.length + optGroup.length) > 3) {\r\n            minHeight = liHeight * 3 + menuExtras.vert - 2;\r\n          } else {\r\n            minHeight = 0;\r\n          }\r\n\r\n          $menu.css({\r\n            'max-height': menuHeight + 'px',\r\n            'overflow': 'hidden',\r\n            'min-height': minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight + 'px'\r\n          });\r\n          $menuInner.css({\r\n            'max-height': menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding.vert + 'px',\r\n            'overflow-y': 'auto',\r\n            'min-height': Math.max(minHeight - menuPadding.vert, 0) + 'px'\r\n          });\r\n        };\r\n        getSize();\r\n        this.$searchbox.off('input.getSize propertychange.getSize').on('input.getSize propertychange.getSize', getSize);\r\n        $window.off('resize.getSize scroll.getSize').on('resize.getSize scroll.getSize', getSize);\r\n      } else if (this.options.size && this.options.size != 'auto' && this.$lis.not(notDisabled).length > this.options.size) {\r\n        var optIndex = this.$lis.not('.divider').not(notDisabled).children().slice(0, this.options.size).last().parent().index(),\r\n            divLength = this.$lis.slice(0, optIndex + 1).filter('.divider').length;\r\n        menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding.vert;\r\n\r\n        if (that.options.container) {\r\n          if (!$menu.data('height')) $menu.data('height', $menu.height());\r\n          getHeight = $menu.data('height');\r\n        } else {\r\n          getHeight = $menu.height();\r\n        }\r\n\r\n        if (that.options.dropupAuto) {\r\n          //noinspection JSUnusedAssignment\r\n          this.$newElement.toggleClass('dropup', selectOffsetTop > selectOffsetBot && (menuHeight - menuExtras.vert) < getHeight);\r\n        }\r\n        $menu.css({\r\n          'max-height': menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight + 'px',\r\n          'overflow': 'hidden',\r\n          'min-height': ''\r\n        });\r\n        $menuInner.css({\r\n          'max-height': menuHeight - menuPadding.vert + 'px',\r\n          'overflow-y': 'auto',\r\n          'min-height': ''\r\n        });\r\n      }\r\n    },\r\n\r\n    setWidth: function () {\r\n      if (this.options.width === 'auto') {\r\n        this.$menu.css('min-width', '0');\r\n\r\n        // Get correct width if element is hidden\r\n        var $selectClone = this.$menu.parent().clone().appendTo('body'),\r\n            $selectClone2 = this.options.container ? this.$newElement.clone().appendTo('body') : $selectClone,\r\n            ulWidth = $selectClone.children('.dropdown-menu').outerWidth(),\r\n            btnWidth = $selectClone2.css('width', 'auto').children('button').outerWidth();\r\n\r\n        $selectClone.remove();\r\n        $selectClone2.remove();\r\n\r\n        // Set width to whatever's larger, button title or longest option\r\n        this.$newElement.css('width', Math.max(ulWidth, btnWidth) + 'px');\r\n      } else if (this.options.width === 'fit') {\r\n        // Remove inline min-width so width can be changed from 'auto'\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', '').addClass('fit-width');\r\n      } else if (this.options.width) {\r\n        // Remove inline min-width so width can be changed from 'auto'\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', this.options.width);\r\n      } else {\r\n        // Remove inline min-width/width so width can be changed\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', '');\r\n      }\r\n      // Remove fit-width class if width is changed programmatically\r\n      if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {\r\n        this.$newElement.removeClass('fit-width');\r\n      }\r\n    },\r\n\r\n    selectPosition: function () {\r\n      this.$bsContainer = $('<div class=\"bs-container\" />');\r\n\r\n      var that = this,\r\n          $container = $(this.options.container),\r\n          pos,\r\n          containerPos,\r\n          actualHeight,\r\n          getPlacement = function ($element) {\r\n            that.$bsContainer.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass('dropup', $element.hasClass('dropup'));\r\n            pos = $element.offset();\r\n\r\n            if (!$container.is('body')) {\r\n              containerPos = $container.offset();\r\n              containerPos.top += parseInt($container.css('borderTopWidth')) - $container.scrollTop();\r\n              containerPos.left += parseInt($container.css('borderLeftWidth')) - $container.scrollLeft();\r\n            } else {\r\n              containerPos = { top: 0, left: 0 };\r\n            }\r\n\r\n            actualHeight = $element.hasClass('dropup') ? 0 : $element[0].offsetHeight;\r\n\r\n            that.$bsContainer.css({\r\n              'top': pos.top - containerPos.top + actualHeight,\r\n              'left': pos.left - containerPos.left,\r\n              'width': $element[0].offsetWidth\r\n            });\r\n          };\r\n\r\n      this.$button.on('click', function () {\r\n        var $this = $(this);\r\n\r\n        if (that.isDisabled()) {\r\n          return;\r\n        }\r\n\r\n        getPlacement(that.$newElement);\r\n\r\n        that.$bsContainer\r\n          .appendTo(that.options.container)\r\n          .toggleClass('open', !$this.hasClass('open'))\r\n          .append(that.$menu);\r\n      });\r\n\r\n      $(window).on('resize scroll', function () {\r\n        getPlacement(that.$newElement);\r\n      });\r\n\r\n      this.$element.on('hide.bs.select', function () {\r\n        that.$menu.data('height', that.$menu.height());\r\n        that.$bsContainer.detach();\r\n      });\r\n    },\r\n\r\n    /**\r\n     * @param {number} index - the index of the option that is being changed\r\n     * @param {boolean} selected - true if the option is being selected, false if being deselected\r\n     * @param {JQuery} $lis - the 'li' element that is being modified\r\n     */\r\n    setSelected: function (index, selected, $lis) {\r\n      if (!$lis) {\r\n        this.togglePlaceholder(); // check if setSelected is being called by changing the value of the select\r\n        $lis = this.findLis().eq(this.liObj[index]);\r\n      }\r\n\r\n      $lis.toggleClass('selected', selected).find('a').attr('aria-selected', selected);\r\n    },\r\n\r\n    /**\r\n     * @param {number} index - the index of the option that is being disabled\r\n     * @param {boolean} disabled - true if the option is being disabled, false if being enabled\r\n     * @param {JQuery} $lis - the 'li' element that is being modified\r\n     */\r\n    setDisabled: function (index, disabled, $lis) {\r\n      if (!$lis) {\r\n        $lis = this.findLis().eq(this.liObj[index]);\r\n      }\r\n\r\n      if (disabled) {\r\n        $lis.addClass('disabled').children('a').attr('href', '#').attr('tabindex', -1).attr('aria-disabled', true);\r\n      } else {\r\n        $lis.removeClass('disabled').children('a').removeAttr('href').attr('tabindex', 0).attr('aria-disabled', false);\r\n      }\r\n    },\r\n\r\n    isDisabled: function () {\r\n      return this.$element[0].disabled;\r\n    },\r\n\r\n    checkDisabled: function () {\r\n      var that = this;\r\n\r\n      if (this.isDisabled()) {\r\n        this.$newElement.addClass('disabled');\r\n        this.$button.addClass('disabled').attr('tabindex', -1).attr('aria-disabled', true);\r\n      } else {\r\n        if (this.$button.hasClass('disabled')) {\r\n          this.$newElement.removeClass('disabled');\r\n          this.$button.removeClass('disabled').attr('aria-disabled', false);\r\n        }\r\n\r\n        if (this.$button.attr('tabindex') == -1 && !this.$element.data('tabindex')) {\r\n          this.$button.removeAttr('tabindex');\r\n        }\r\n      }\r\n\r\n      this.$button.click(function () {\r\n        return !that.isDisabled();\r\n      });\r\n    },\r\n\r\n    togglePlaceholder: function () {\r\n      var value = this.$element.val();\r\n      this.$button.toggleClass('bs-placeholder', value === null || value === '' || (value.constructor === Array && value.length === 0));\r\n    },\r\n\r\n    tabIndex: function () {\r\n      if (this.$element.data('tabindex') !== this.$element.attr('tabindex') && \r\n        (this.$element.attr('tabindex') !== -98 && this.$element.attr('tabindex') !== '-98')) {\r\n        this.$element.data('tabindex', this.$element.attr('tabindex'));\r\n        this.$button.attr('tabindex', this.$element.data('tabindex'));\r\n      }\r\n\r\n      this.$element.attr('tabindex', -98);\r\n    },\r\n\r\n    clickListener: function () {\r\n      var that = this,\r\n          $document = $(document);\r\n\r\n      $document.data('spaceSelect', false);\r\n\r\n      this.$button.on('keyup', function (e) {\r\n        if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {\r\n            e.preventDefault();\r\n            $document.data('spaceSelect', false);\r\n        }\r\n      });\r\n\r\n      this.$button.on('click', function () {\r\n        that.setSize();\r\n      });\r\n\r\n      this.$element.on('shown.bs.select', function () {\r\n        if (!that.options.liveSearch && !that.multiple) {\r\n          that.$menuInner.find('.selected a').focus();\r\n        } else if (!that.multiple) {\r\n          var selectedIndex = that.liObj[that.$element[0].selectedIndex];\r\n\r\n          if (typeof selectedIndex !== 'number' || that.options.size === false) return;\r\n\r\n          // scroll to selected option\r\n          var offset = that.$lis.eq(selectedIndex)[0].offsetTop - that.$menuInner[0].offsetTop;\r\n          offset = offset - that.$menuInner[0].offsetHeight/2 + that.sizeInfo.liHeight/2;\r\n          that.$menuInner[0].scrollTop = offset;\r\n        }\r\n      });\r\n\r\n      this.$menuInner.on('click', 'li a', function (e) {\r\n        var $this = $(this),\r\n            clickedIndex = $this.parent().data('originalIndex'),\r\n            prevValue = that.$element.val(),\r\n            prevIndex = that.$element.prop('selectedIndex'),\r\n            triggerChange = true;\r\n\r\n        // Don't close on multi choice menu\r\n        if (that.multiple && that.options.maxOptions !== 1) {\r\n          e.stopPropagation();\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        //Don't run if we have been disabled\r\n        if (!that.isDisabled() && !$this.parent().hasClass('disabled')) {\r\n          var $options = that.$element.find('option'),\r\n              $option = $options.eq(clickedIndex),\r\n              state = $option.prop('selected'),\r\n              $optgroup = $option.parent('optgroup'),\r\n              maxOptions = that.options.maxOptions,\r\n              maxOptionsGrp = $optgroup.data('maxOptions') || false;\r\n\r\n          if (!that.multiple) { // Deselect all others if not multi select box\r\n            $options.prop('selected', false);\r\n            $option.prop('selected', true);\r\n            that.$menuInner.find('.selected').removeClass('selected').find('a').attr('aria-selected', false);\r\n            that.setSelected(clickedIndex, true);\r\n          } else { // Toggle the one we have chosen if we are multi select.\r\n            $option.prop('selected', !state);\r\n            that.setSelected(clickedIndex, !state);\r\n            $this.blur();\r\n\r\n            if (maxOptions !== false || maxOptionsGrp !== false) {\r\n              var maxReached = maxOptions < $options.filter(':selected').length,\r\n                  maxReachedGrp = maxOptionsGrp < $optgroup.find('option:selected').length;\r\n\r\n              if ((maxOptions && maxReached) || (maxOptionsGrp && maxReachedGrp)) {\r\n                if (maxOptions && maxOptions == 1) {\r\n                  $options.prop('selected', false);\r\n                  $option.prop('selected', true);\r\n                  that.$menuInner.find('.selected').removeClass('selected');\r\n                  that.setSelected(clickedIndex, true);\r\n                } else if (maxOptionsGrp && maxOptionsGrp == 1) {\r\n                  $optgroup.find('option:selected').prop('selected', false);\r\n                  $option.prop('selected', true);\r\n                  var optgroupID = $this.parent().data('optgroup');\r\n                  that.$menuInner.find('[data-optgroup=\"' + optgroupID + '\"]').removeClass('selected');\r\n                  that.setSelected(clickedIndex, true);\r\n                } else {\r\n                  var maxOptionsText = typeof that.options.maxOptionsText === 'string' ? [that.options.maxOptionsText, that.options.maxOptionsText] : that.options.maxOptionsText,\r\n                      maxOptionsArr = typeof maxOptionsText === 'function' ? maxOptionsText(maxOptions, maxOptionsGrp) : maxOptionsText,\r\n                      maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),\r\n                      maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),\r\n                      $notify = $('<div class=\"notify\"></div>');\r\n                  // If {var} is set in array, replace it\r\n                  /** @deprecated */\r\n                  if (maxOptionsArr[2]) {\r\n                    maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);\r\n                    maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);\r\n                  }\r\n\r\n                  $option.prop('selected', false);\r\n\r\n                  that.$menu.append($notify);\r\n\r\n                  if (maxOptions && maxReached) {\r\n                    $notify.append($('<div>' + maxTxt + '</div>'));\r\n                    triggerChange = false;\r\n                    that.$element.trigger('maxReached.bs.select');\r\n                  }\r\n\r\n                  if (maxOptionsGrp && maxReachedGrp) {\r\n                    $notify.append($('<div>' + maxTxtGrp + '</div>'));\r\n                    triggerChange = false;\r\n                    that.$element.trigger('maxReachedGrp.bs.select');\r\n                  }\r\n\r\n                  setTimeout(function () {\r\n                    that.setSelected(clickedIndex, false);\r\n                  }, 10);\r\n\r\n                  $notify.delay(750).fadeOut(300, function () {\r\n                    $(this).remove();\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          if (!that.multiple || (that.multiple && that.options.maxOptions === 1)) {\r\n            that.$button.focus();\r\n          } else if (that.options.liveSearch) {\r\n            that.$searchbox.focus();\r\n          }\r\n\r\n          // Trigger select 'change'\r\n          if (triggerChange) {\r\n            if ((prevValue != that.$element.val() && that.multiple) || (prevIndex != that.$element.prop('selectedIndex') && !that.multiple)) {\r\n              // $option.prop('selected') is current option state (selected/unselected). state is previous option state.\r\n              changed_arguments = [clickedIndex, $option.prop('selected'), state];\r\n              that.$element\r\n                .triggerNative('change');\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      this.$menu.on('click', 'li.disabled a, .popover-title, .popover-title :not(.close)', function (e) {\r\n        if (e.currentTarget == this) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          if (that.options.liveSearch && !$(e.target).hasClass('close')) {\r\n            that.$searchbox.focus();\r\n          } else {\r\n            that.$button.focus();\r\n          }\r\n        }\r\n      });\r\n\r\n      this.$menuInner.on('click', '.divider, .dropdown-header', function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.focus();\r\n        } else {\r\n          that.$button.focus();\r\n        }\r\n      });\r\n\r\n      this.$menu.on('click', '.popover-title .close', function () {\r\n        that.$button.click();\r\n      });\r\n\r\n      this.$searchbox.on('click', function (e) {\r\n        e.stopPropagation();\r\n      });\r\n\r\n      this.$menu.on('click', '.actions-btn', function (e) {\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.focus();\r\n        } else {\r\n          that.$button.focus();\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if ($(this).hasClass('bs-select-all')) {\r\n          that.selectAll();\r\n        } else {\r\n          that.deselectAll();\r\n        }\r\n      });\r\n\r\n      this.$element.change(function () {\r\n        that.render(false);\r\n        that.$element.trigger('changed.bs.select', changed_arguments);\r\n        changed_arguments = null;\r\n      });\r\n    },\r\n\r\n    liveSearchListener: function () {\r\n      var that = this,\r\n          $no_results = $('<li class=\"no-results\"></li>');\r\n\r\n      this.$button.on('click.dropdown.data-api', function () {\r\n        that.$menuInner.find('.active').removeClass('active');\r\n        if (!!that.$searchbox.val()) {\r\n          that.$searchbox.val('');\r\n          that.$lis.not('.is-hidden').removeClass('hidden');\r\n          if (!!$no_results.parent().length) $no_results.remove();\r\n        }\r\n        if (!that.multiple) that.$menuInner.find('.selected').addClass('active');\r\n        setTimeout(function () {\r\n          that.$searchbox.focus();\r\n        }, 10);\r\n      });\r\n\r\n      this.$searchbox.on('click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api', function (e) {\r\n        e.stopPropagation();\r\n      });\r\n\r\n      this.$searchbox.on('input propertychange', function () {\r\n        that.$lis.not('.is-hidden').removeClass('hidden');\r\n        that.$lis.filter('.active').removeClass('active');\r\n        $no_results.remove();\r\n\r\n        if (that.$searchbox.val()) {\r\n          var $searchBase = that.$lis.not('.is-hidden, .divider, .dropdown-header'),\r\n              $hideItems;\r\n          if (that.options.liveSearchNormalize) {\r\n            $hideItems = $searchBase.find('a').not(':a' + that._searchStyle() + '(\"' + normalizeToBase(that.$searchbox.val()) + '\")');\r\n          } else {\r\n            $hideItems = $searchBase.find('a').not(':' + that._searchStyle() + '(\"' + that.$searchbox.val() + '\")');\r\n          }\r\n\r\n          if ($hideItems.length === $searchBase.length) {\r\n            $no_results.html(that.options.noneResultsText.replace('{0}', '\"' + htmlEscape(that.$searchbox.val()) + '\"'));\r\n            that.$menuInner.append($no_results);\r\n            that.$lis.addClass('hidden');\r\n          } else {\r\n            $hideItems.parent().addClass('hidden');\r\n\r\n            var $lisVisible = that.$lis.not('.hidden'),\r\n                $foundDiv;\r\n\r\n            // hide divider if first or last visible, or if followed by another divider\r\n            $lisVisible.each(function (index) {\r\n              var $this = $(this);\r\n\r\n              if ($this.hasClass('divider')) {\r\n                if ($foundDiv === undefined) {\r\n                  $this.addClass('hidden');\r\n                } else {\r\n                  if ($foundDiv) $foundDiv.addClass('hidden');\r\n                  $foundDiv = $this;\r\n                }\r\n              } else if ($this.hasClass('dropdown-header') && $lisVisible.eq(index + 1).data('optgroup') !== $this.data('optgroup')) {\r\n                $this.addClass('hidden');\r\n              } else {\r\n                $foundDiv = null;\r\n              }\r\n            });\r\n            if ($foundDiv) $foundDiv.addClass('hidden');\r\n\r\n            $searchBase.not('.hidden').first().addClass('active');\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    _searchStyle: function () {\r\n      var styles = {\r\n        begins: 'ibegins',\r\n        startsWith: 'ibegins'\r\n      };\r\n\r\n      return styles[this.options.liveSearchStyle] || 'icontains';\r\n    },\r\n\r\n    val: function (value) {\r\n      if (typeof value !== 'undefined') {\r\n        this.$element.val(value);\r\n        this.render();\r\n\r\n        return this.$element;\r\n      } else {\r\n        return this.$element.val();\r\n      }\r\n    },\r\n\r\n    changeAll: function (status) {\r\n      if (!this.multiple) return;\r\n      if (typeof status === 'undefined') status = true;\r\n\r\n      this.findLis();\r\n\r\n      var $options = this.$element.find('option'),\r\n          $lisVisible = this.$lis.not('.divider, .dropdown-header, .disabled, .hidden'),\r\n          lisVisLen = $lisVisible.length,\r\n          selectedOptions = [];\r\n          \r\n      if (status) {\r\n        if ($lisVisible.filter('.selected').length === $lisVisible.length) return;\r\n      } else {\r\n        if ($lisVisible.filter('.selected').length === 0) return;\r\n      }\r\n          \r\n      $lisVisible.toggleClass('selected', status);\r\n\r\n      for (var i = 0; i < lisVisLen; i++) {\r\n        var origIndex = $lisVisible[i].getAttribute('data-original-index');\r\n        selectedOptions[selectedOptions.length] = $options.eq(origIndex)[0];\r\n      }\r\n\r\n      $(selectedOptions).prop('selected', status);\r\n\r\n      this.render(false);\r\n\r\n      this.togglePlaceholder();\r\n\r\n      this.$element\r\n        .triggerNative('change');\r\n    },\r\n\r\n    selectAll: function () {\r\n      return this.changeAll(true);\r\n    },\r\n\r\n    deselectAll: function () {\r\n      return this.changeAll(false);\r\n    },\r\n\r\n    toggle: function (e) {\r\n      e = e || window.event;\r\n\r\n      if (e) e.stopPropagation();\r\n\r\n      this.$button.trigger('click');\r\n    },\r\n\r\n    keydown: function (e) {\r\n      var $this = $(this),\r\n          $parent = $this.is('input') ? $this.parent().parent() : $this.parent(),\r\n          $items,\r\n          that = $parent.data('this'),\r\n          index,\r\n          next,\r\n          first,\r\n          last,\r\n          prev,\r\n          nextPrev,\r\n          prevIndex,\r\n          isActive,\r\n          selector = ':not(.disabled, .hidden, .dropdown-header, .divider)',\r\n          keyCodeMap = {\r\n            32: ' ',\r\n            48: '0',\r\n            49: '1',\r\n            50: '2',\r\n            51: '3',\r\n            52: '4',\r\n            53: '5',\r\n            54: '6',\r\n            55: '7',\r\n            56: '8',\r\n            57: '9',\r\n            59: ';',\r\n            65: 'a',\r\n            66: 'b',\r\n            67: 'c',\r\n            68: 'd',\r\n            69: 'e',\r\n            70: 'f',\r\n            71: 'g',\r\n            72: 'h',\r\n            73: 'i',\r\n            74: 'j',\r\n            75: 'k',\r\n            76: 'l',\r\n            77: 'm',\r\n            78: 'n',\r\n            79: 'o',\r\n            80: 'p',\r\n            81: 'q',\r\n            82: 'r',\r\n            83: 's',\r\n            84: 't',\r\n            85: 'u',\r\n            86: 'v',\r\n            87: 'w',\r\n            88: 'x',\r\n            89: 'y',\r\n            90: 'z',\r\n            96: '0',\r\n            97: '1',\r\n            98: '2',\r\n            99: '3',\r\n            100: '4',\r\n            101: '5',\r\n            102: '6',\r\n            103: '7',\r\n            104: '8',\r\n            105: '9'\r\n          };\r\n\r\n      if (that.options.liveSearch) $parent = $this.parent().parent();\r\n\r\n      if (that.options.container) $parent = that.$menu;\r\n\r\n      $items = $('[role=\"listbox\"] li', $parent);\r\n\r\n      isActive = that.$newElement.hasClass('open');\r\n\r\n      if (!isActive && (e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 96 && e.keyCode <= 105 || e.keyCode >= 65 && e.keyCode <= 90)) {\r\n        if (!that.options.container) {\r\n          that.setSize();\r\n          that.$menu.parent().addClass('open');\r\n          isActive = true;\r\n        } else {\r\n          that.$button.trigger('click');\r\n        }\r\n        that.$searchbox.focus();\r\n        return;\r\n      }\r\n\r\n      if (that.options.liveSearch) {\r\n        if (/(^9$|27)/.test(e.keyCode.toString(10)) && isActive) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          that.$menuInner.click();\r\n          that.$button.focus();\r\n        }\r\n        // $items contains li elements when liveSearch is enabled\r\n        $items = $('[role=\"listbox\"] li' + selector, $parent);\r\n        if (!$this.val() && !/(38|40)/.test(e.keyCode.toString(10))) {\r\n          if ($items.filter('.active').length === 0) {\r\n            $items = that.$menuInner.find('li');\r\n            if (that.options.liveSearchNormalize) {\r\n              $items = $items.filter(':a' + that._searchStyle() + '(' + normalizeToBase(keyCodeMap[e.keyCode]) + ')');\r\n            } else {\r\n              $items = $items.filter(':' + that._searchStyle() + '(' + keyCodeMap[e.keyCode] + ')');\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!$items.length) return;\r\n\r\n      if (/(38|40)/.test(e.keyCode.toString(10))) {\r\n        index = $items.index($items.find('a').filter(':focus').parent());\r\n        first = $items.filter(selector).first().index();\r\n        last = $items.filter(selector).last().index();\r\n        next = $items.eq(index).nextAll(selector).eq(0).index();\r\n        prev = $items.eq(index).prevAll(selector).eq(0).index();\r\n        nextPrev = $items.eq(next).prevAll(selector).eq(0).index();\r\n\r\n        if (that.options.liveSearch) {\r\n          $items.each(function (i) {\r\n            if (!$(this).hasClass('disabled')) {\r\n              $(this).data('index', i);\r\n            }\r\n          });\r\n          index = $items.index($items.filter('.active'));\r\n          first = $items.first().data('index');\r\n          last = $items.last().data('index');\r\n          next = $items.eq(index).nextAll().eq(0).data('index');\r\n          prev = $items.eq(index).prevAll().eq(0).data('index');\r\n          nextPrev = $items.eq(next).prevAll().eq(0).data('index');\r\n        }\r\n\r\n        prevIndex = $this.data('prevIndex');\r\n\r\n        if (e.keyCode == 38) {\r\n          if (that.options.liveSearch) index--;\r\n          if (index != nextPrev && index > prev) index = prev;\r\n          if (index < first) index = first;\r\n          if (index == prevIndex) index = last;\r\n        } else if (e.keyCode == 40) {\r\n          if (that.options.liveSearch) index++;\r\n          if (index == -1) index = 0;\r\n          if (index != nextPrev && index < next) index = next;\r\n          if (index > last) index = last;\r\n          if (index == prevIndex) index = first;\r\n        }\r\n\r\n        $this.data('prevIndex', index);\r\n\r\n        if (!that.options.liveSearch) {\r\n          $items.eq(index).children('a').focus();\r\n        } else {\r\n          e.preventDefault();\r\n          if (!$this.hasClass('dropdown-toggle')) {\r\n            $items.removeClass('active').eq(index).addClass('active').children('a').focus();\r\n            $this.focus();\r\n          }\r\n        }\r\n\r\n      } else if (!$this.is('input')) {\r\n        var keyIndex = [],\r\n            count,\r\n            prevKey;\r\n\r\n        $items.each(function () {\r\n          if (!$(this).hasClass('disabled')) {\r\n            if ($.trim($(this).children('a').text().toLowerCase()).substring(0, 1) == keyCodeMap[e.keyCode]) {\r\n              keyIndex.push($(this).index());\r\n            }\r\n          }\r\n        });\r\n\r\n        count = $(document).data('keycount');\r\n        count++;\r\n        $(document).data('keycount', count);\r\n\r\n        prevKey = $.trim($(':focus').text().toLowerCase()).substring(0, 1);\r\n\r\n        if (prevKey != keyCodeMap[e.keyCode]) {\r\n          count = 1;\r\n          $(document).data('keycount', count);\r\n        } else if (count >= keyIndex.length) {\r\n          $(document).data('keycount', 0);\r\n          if (count > keyIndex.length) count = 1;\r\n        }\r\n\r\n        $items.eq(keyIndex[count - 1]).children('a').focus();\r\n      }\r\n\r\n      // Select focused option if \"Enter\", \"Spacebar\" or \"Tab\" (when selectOnTab is true) are pressed inside the menu.\r\n      if ((/(13|32)/.test(e.keyCode.toString(10)) || (/(^9$)/.test(e.keyCode.toString(10)) && that.options.selectOnTab)) && isActive) {\r\n        if (!/(32)/.test(e.keyCode.toString(10))) e.preventDefault();\r\n        if (!that.options.liveSearch) {\r\n          var elem = $(':focus');\r\n          elem.click();\r\n          // Bring back focus for multiselects\r\n          elem.focus();\r\n          // Prevent screen from scrolling if the user hit the spacebar\r\n          e.preventDefault();\r\n          // Fixes spacebar selection of dropdown items in FF & IE\r\n          $(document).data('spaceSelect', true);\r\n        } else if (!/(32)/.test(e.keyCode.toString(10))) {\r\n          that.$menuInner.find('.active a').click();\r\n          $this.focus();\r\n        }\r\n        $(document).data('keycount', 0);\r\n      }\r\n\r\n      if ((/(^9$|27)/.test(e.keyCode.toString(10)) && isActive && (that.multiple || that.options.liveSearch)) || (/(27)/.test(e.keyCode.toString(10)) && !isActive)) {\r\n        that.$menu.parent().removeClass('open');\r\n        if (that.options.container) that.$newElement.removeClass('open');\r\n        that.$button.focus();\r\n      }\r\n    },\r\n\r\n    mobile: function () {\r\n      this.$element.addClass('mobile-device');\r\n    },\r\n\r\n    refresh: function () {\r\n      this.$lis = null;\r\n      this.liObj = {};\r\n      this.reloadLi();\r\n      this.render();\r\n      this.checkDisabled();\r\n      this.liHeight(true);\r\n      this.setStyle();\r\n      this.setWidth();\r\n      if (this.$lis) this.$searchbox.trigger('propertychange');\r\n\r\n      this.$element.trigger('refreshed.bs.select');\r\n    },\r\n\r\n    hide: function () {\r\n      this.$newElement.hide();\r\n    },\r\n\r\n    show: function () {\r\n      this.$newElement.show();\r\n    },\r\n\r\n    remove: function () {\r\n      this.$newElement.remove();\r\n      this.$element.remove();\r\n    },\r\n\r\n    destroy: function () {\r\n      this.$newElement.before(this.$element).remove();\r\n\r\n      if (this.$bsContainer) {\r\n        this.$bsContainer.remove();\r\n      } else {\r\n        this.$menu.remove();\r\n      }\r\n\r\n      this.$element\r\n        .off('.bs.select')\r\n        .removeData('selectpicker')\r\n        .removeClass('bs-select-hidden selectpicker');\r\n    }\r\n  };\r\n\r\n  // SELECTPICKER PLUGIN DEFINITION\r\n  // ==============================\r\n  function Plugin(option) {\r\n    // get the args of the outer function..\r\n    var args = arguments;\r\n    // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them\r\n    // to get lost/corrupted in android 2.3 and IE9 #715 #775\r\n    var _option = option;\r\n\r\n    [].shift.apply(args);\r\n\r\n    var value;\r\n    var chain = this.each(function () {\r\n      var $this = $(this);\r\n      if ($this.is('select')) {\r\n        var data = $this.data('selectpicker'),\r\n            options = typeof _option == 'object' && _option;\r\n\r\n        if (!data) {\r\n          var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, $this.data(), options);\r\n          config.template = $.extend({}, Selectpicker.DEFAULTS.template, ($.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.template : {}), $this.data().template, options.template);\r\n          $this.data('selectpicker', (data = new Selectpicker(this, config)));\r\n        } else if (options) {\r\n          for (var i in options) {\r\n            if (options.hasOwnProperty(i)) {\r\n              data.options[i] = options[i];\r\n            }\r\n          }\r\n        }\r\n\r\n        if (typeof _option == 'string') {\r\n          if (data[_option] instanceof Function) {\r\n            value = data[_option].apply(data, args);\r\n          } else {\r\n            value = data.options[_option];\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (typeof value !== 'undefined') {\r\n      //noinspection JSUnusedAssignment\r\n      return value;\r\n    } else {\r\n      return chain;\r\n    }\r\n  }\r\n\r\n  var old = $.fn.selectpicker;\r\n  $.fn.selectpicker = Plugin;\r\n  $.fn.selectpicker.Constructor = Selectpicker;\r\n\r\n  // SELECTPICKER NO CONFLICT\r\n  // ========================\r\n  $.fn.selectpicker.noConflict = function () {\r\n    $.fn.selectpicker = old;\r\n    return this;\r\n  };\r\n\r\n  $(document)\r\n      .data('keycount', 0)\r\n      .on('keydown.bs.select', '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=\"listbox\"], .bs-searchbox input', Selectpicker.prototype.keydown)\r\n      .on('focusin.modal', '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=\"listbox\"], .bs-searchbox input', function (e) {\r\n        e.stopPropagation();\r\n      });\r\n\r\n  // SELECTPICKER DATA-API\r\n  // =====================\r\n  $(window).on('load.bs.select.data-api', function () {\r\n    $('.selectpicker').each(function () {\r\n      var $selectpicker = $(this);\r\n      Plugin.call($selectpicker, $selectpicker.data());\r\n    })\r\n  });\r\n})(jQuery);\r\n\n\n}));\n"

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = "/*!\n * Bootstrap v3.3.7 (http://getbootstrap.com)\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under the MIT license\n */\n\nif (typeof jQuery === 'undefined') {\n  throw new Error('Bootstrap\\'s JavaScript requires jQuery')\n}\n\n+function ($) {\n  'use strict';\n  var version = $.fn.jquery.split(' ')[0].split('.')\n  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1) || (version[0] > 3)) {\n    throw new Error('Bootstrap\\'s JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4')\n  }\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: transition.js v3.3.7\n * http://getbootstrap.com/javascript/#transitions\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      WebkitTransition : 'webkitTransitionEnd',\n      MozTransition    : 'transitionend',\n      OTransition      : 'oTransitionEnd otransitionend',\n      transition       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n\n    return false // explicit for ie8 (  ._.)\n  }\n\n  // http://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false\n    var $el = this\n    $(this).one('bsTransitionEnd', function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n\n  $(function () {\n    $.support.transition = transitionEnd()\n\n    if (!$.support.transition) return\n\n    $.event.special.bsTransitionEnd = {\n      bindType: $.support.transition.end,\n      delegateType: $.support.transition.end,\n      handle: function (e) {\n        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)\n      }\n    }\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: alert.js v3.3.7\n * http://getbootstrap.com/javascript/#alerts\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // ALERT CLASS DEFINITION\n  // ======================\n\n  var dismiss = '[data-dismiss=\"alert\"]'\n  var Alert   = function (el) {\n    $(el).on('click', dismiss, this.close)\n  }\n\n  Alert.VERSION = '3.3.7'\n\n  Alert.TRANSITION_DURATION = 150\n\n  Alert.prototype.close = function (e) {\n    var $this    = $(this)\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = $(selector === '#' ? [] : selector)\n\n    if (e) e.preventDefault()\n\n    if (!$parent.length) {\n      $parent = $this.closest('.alert')\n    }\n\n    $parent.trigger(e = $.Event('close.bs.alert'))\n\n    if (e.isDefaultPrevented()) return\n\n    $parent.removeClass('in')\n\n    function removeElement() {\n      // detach from parent, fire event then clean up data\n      $parent.detach().trigger('closed.bs.alert').remove()\n    }\n\n    $.support.transition && $parent.hasClass('fade') ?\n      $parent\n        .one('bsTransitionEnd', removeElement)\n        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :\n      removeElement()\n  }\n\n\n  // ALERT PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.alert')\n\n      if (!data) $this.data('bs.alert', (data = new Alert(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.alert\n\n  $.fn.alert             = Plugin\n  $.fn.alert.Constructor = Alert\n\n\n  // ALERT NO CONFLICT\n  // =================\n\n  $.fn.alert.noConflict = function () {\n    $.fn.alert = old\n    return this\n  }\n\n\n  // ALERT DATA-API\n  // ==============\n\n  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: button.js v3.3.7\n * http://getbootstrap.com/javascript/#buttons\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // BUTTON PUBLIC CLASS DEFINITION\n  // ==============================\n\n  var Button = function (element, options) {\n    this.$element  = $(element)\n    this.options   = $.extend({}, Button.DEFAULTS, options)\n    this.isLoading = false\n  }\n\n  Button.VERSION  = '3.3.7'\n\n  Button.DEFAULTS = {\n    loadingText: 'loading...'\n  }\n\n  Button.prototype.setState = function (state) {\n    var d    = 'disabled'\n    var $el  = this.$element\n    var val  = $el.is('input') ? 'val' : 'html'\n    var data = $el.data()\n\n    state += 'Text'\n\n    if (data.resetText == null) $el.data('resetText', $el[val]())\n\n    // push to event loop to allow forms to submit\n    setTimeout($.proxy(function () {\n      $el[val](data[state] == null ? this.options[state] : data[state])\n\n      if (state == 'loadingText') {\n        this.isLoading = true\n        $el.addClass(d).attr(d, d).prop(d, true)\n      } else if (this.isLoading) {\n        this.isLoading = false\n        $el.removeClass(d).removeAttr(d).prop(d, false)\n      }\n    }, this), 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var changed = true\n    var $parent = this.$element.closest('[data-toggle=\"buttons\"]')\n\n    if ($parent.length) {\n      var $input = this.$element.find('input')\n      if ($input.prop('type') == 'radio') {\n        if ($input.prop('checked')) changed = false\n        $parent.find('.active').removeClass('active')\n        this.$element.addClass('active')\n      } else if ($input.prop('type') == 'checkbox') {\n        if (($input.prop('checked')) !== this.$element.hasClass('active')) changed = false\n        this.$element.toggleClass('active')\n      }\n      $input.prop('checked', this.$element.hasClass('active'))\n      if (changed) $input.trigger('change')\n    } else {\n      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))\n      this.$element.toggleClass('active')\n    }\n  }\n\n\n  // BUTTON PLUGIN DEFINITION\n  // ========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.button')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.button', (data = new Button(this, options)))\n\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  var old = $.fn.button\n\n  $.fn.button             = Plugin\n  $.fn.button.Constructor = Button\n\n\n  // BUTTON NO CONFLICT\n  // ==================\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n  // BUTTON DATA-API\n  // ===============\n\n  $(document)\n    .on('click.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\n      var $btn = $(e.target).closest('.btn')\n      Plugin.call($btn, 'toggle')\n      if (!($(e.target).is('input[type=\"radio\"], input[type=\"checkbox\"]'))) {\n        // Prevent double click on radios, and the double selections (so cancellation) on checkboxes\n        e.preventDefault()\n        // The target component still receive the focus\n        if ($btn.is('input,button')) $btn.trigger('focus')\n        else $btn.find('input:visible,button:visible').first().trigger('focus')\n      }\n    })\n    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\n      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))\n    })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: carousel.js v3.3.7\n * http://getbootstrap.com/javascript/#carousel\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CAROUSEL CLASS DEFINITION\n  // =========================\n\n  var Carousel = function (element, options) {\n    this.$element    = $(element)\n    this.$indicators = this.$element.find('.carousel-indicators')\n    this.options     = options\n    this.paused      = null\n    this.sliding     = null\n    this.interval    = null\n    this.$active     = null\n    this.$items      = null\n\n    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))\n\n    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))\n      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))\n  }\n\n  Carousel.VERSION  = '3.3.7'\n\n  Carousel.TRANSITION_DURATION = 600\n\n  Carousel.DEFAULTS = {\n    interval: 5000,\n    pause: 'hover',\n    wrap: true,\n    keyboard: true\n  }\n\n  Carousel.prototype.keydown = function (e) {\n    if (/input|textarea/i.test(e.target.tagName)) return\n    switch (e.which) {\n      case 37: this.prev(); break\n      case 39: this.next(); break\n      default: return\n    }\n\n    e.preventDefault()\n  }\n\n  Carousel.prototype.cycle = function (e) {\n    e || (this.paused = false)\n\n    this.interval && clearInterval(this.interval)\n\n    this.options.interval\n      && !this.paused\n      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\n\n    return this\n  }\n\n  Carousel.prototype.getItemIndex = function (item) {\n    this.$items = item.parent().children('.item')\n    return this.$items.index(item || this.$active)\n  }\n\n  Carousel.prototype.getItemForDirection = function (direction, active) {\n    var activeIndex = this.getItemIndex(active)\n    var willWrap = (direction == 'prev' && activeIndex === 0)\n                || (direction == 'next' && activeIndex == (this.$items.length - 1))\n    if (willWrap && !this.options.wrap) return active\n    var delta = direction == 'prev' ? -1 : 1\n    var itemIndex = (activeIndex + delta) % this.$items.length\n    return this.$items.eq(itemIndex)\n  }\n\n  Carousel.prototype.to = function (pos) {\n    var that        = this\n    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n    if (pos > (this.$items.length - 1) || pos < 0) return\n\n    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, \"slid\"\n    if (activeIndex == pos) return this.pause().cycle()\n\n    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n  }\n\n  Carousel.prototype.pause = function (e) {\n    e || (this.paused = true)\n\n    if (this.$element.find('.next, .prev').length && $.support.transition) {\n      this.$element.trigger($.support.transition.end)\n      this.cycle(true)\n    }\n\n    this.interval = clearInterval(this.interval)\n\n    return this\n  }\n\n  Carousel.prototype.next = function () {\n    if (this.sliding) return\n    return this.slide('next')\n  }\n\n  Carousel.prototype.prev = function () {\n    if (this.sliding) return\n    return this.slide('prev')\n  }\n\n  Carousel.prototype.slide = function (type, next) {\n    var $active   = this.$element.find('.item.active')\n    var $next     = next || this.getItemForDirection(type, $active)\n    var isCycling = this.interval\n    var direction = type == 'next' ? 'left' : 'right'\n    var that      = this\n\n    if ($next.hasClass('active')) return (this.sliding = false)\n\n    var relatedTarget = $next[0]\n    var slideEvent = $.Event('slide.bs.carousel', {\n      relatedTarget: relatedTarget,\n      direction: direction\n    })\n    this.$element.trigger(slideEvent)\n    if (slideEvent.isDefaultPrevented()) return\n\n    this.sliding = true\n\n    isCycling && this.pause()\n\n    if (this.$indicators.length) {\n      this.$indicators.find('.active').removeClass('active')\n      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n      $nextIndicator && $nextIndicator.addClass('active')\n    }\n\n    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n    if ($.support.transition && this.$element.hasClass('slide')) {\n      $next.addClass(type)\n      $next[0].offsetWidth // force reflow\n      $active.addClass(direction)\n      $next.addClass(direction)\n      $active\n        .one('bsTransitionEnd', function () {\n          $next.removeClass([type, direction].join(' ')).addClass('active')\n          $active.removeClass(['active', direction].join(' '))\n          that.sliding = false\n          setTimeout(function () {\n            that.$element.trigger(slidEvent)\n          }, 0)\n        })\n        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)\n    } else {\n      $active.removeClass('active')\n      $next.addClass('active')\n      this.sliding = false\n      this.$element.trigger(slidEvent)\n    }\n\n    isCycling && this.cycle()\n\n    return this\n  }\n\n\n  // CAROUSEL PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.carousel')\n      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n      var action  = typeof option == 'string' ? option : options.slide\n\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))\n      if (typeof option == 'number') data.to(option)\n      else if (action) data[action]()\n      else if (options.interval) data.pause().cycle()\n    })\n  }\n\n  var old = $.fn.carousel\n\n  $.fn.carousel             = Plugin\n  $.fn.carousel.Constructor = Carousel\n\n\n  // CAROUSEL NO CONFLICT\n  // ====================\n\n  $.fn.carousel.noConflict = function () {\n    $.fn.carousel = old\n    return this\n  }\n\n\n  // CAROUSEL DATA-API\n  // =================\n\n  var clickHandler = function (e) {\n    var href\n    var $this   = $(this)\n    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\n    if (!$target.hasClass('carousel')) return\n    var options = $.extend({}, $target.data(), $this.data())\n    var slideIndex = $this.attr('data-slide-to')\n    if (slideIndex) options.interval = false\n\n    Plugin.call($target, options)\n\n    if (slideIndex) {\n      $target.data('bs.carousel').to(slideIndex)\n    }\n\n    e.preventDefault()\n  }\n\n  $(document)\n    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)\n    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)\n\n  $(window).on('load', function () {\n    $('[data-ride=\"carousel\"]').each(function () {\n      var $carousel = $(this)\n      Plugin.call($carousel, $carousel.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: collapse.js v3.3.7\n * http://getbootstrap.com/javascript/#collapse\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n/* jshint latedef: false */\n\n+function ($) {\n  'use strict';\n\n  // COLLAPSE PUBLIC CLASS DEFINITION\n  // ================================\n\n  var Collapse = function (element, options) {\n    this.$element      = $(element)\n    this.options       = $.extend({}, Collapse.DEFAULTS, options)\n    this.$trigger      = $('[data-toggle=\"collapse\"][href=\"#' + element.id + '\"],' +\n                           '[data-toggle=\"collapse\"][data-target=\"#' + element.id + '\"]')\n    this.transitioning = null\n\n    if (this.options.parent) {\n      this.$parent = this.getParent()\n    } else {\n      this.addAriaAndCollapsedClass(this.$element, this.$trigger)\n    }\n\n    if (this.options.toggle) this.toggle()\n  }\n\n  Collapse.VERSION  = '3.3.7'\n\n  Collapse.TRANSITION_DURATION = 350\n\n  Collapse.DEFAULTS = {\n    toggle: true\n  }\n\n  Collapse.prototype.dimension = function () {\n    var hasWidth = this.$element.hasClass('width')\n    return hasWidth ? 'width' : 'height'\n  }\n\n  Collapse.prototype.show = function () {\n    if (this.transitioning || this.$element.hasClass('in')) return\n\n    var activesData\n    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')\n\n    if (actives && actives.length) {\n      activesData = actives.data('bs.collapse')\n      if (activesData && activesData.transitioning) return\n    }\n\n    var startEvent = $.Event('show.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    if (actives && actives.length) {\n      Plugin.call(actives, 'hide')\n      activesData || actives.data('bs.collapse', null)\n    }\n\n    var dimension = this.dimension()\n\n    this.$element\n      .removeClass('collapse')\n      .addClass('collapsing')[dimension](0)\n      .attr('aria-expanded', true)\n\n    this.$trigger\n      .removeClass('collapsed')\n      .attr('aria-expanded', true)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse in')[dimension]('')\n      this.transitioning = 0\n      this.$element\n        .trigger('shown.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    var scrollSize = $.camelCase(['scroll', dimension].join('-'))\n\n    this.$element\n      .one('bsTransitionEnd', $.proxy(complete, this))\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])\n  }\n\n  Collapse.prototype.hide = function () {\n    if (this.transitioning || !this.$element.hasClass('in')) return\n\n    var startEvent = $.Event('hide.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    var dimension = this.dimension()\n\n    this.$element[dimension](this.$element[dimension]())[0].offsetHeight\n\n    this.$element\n      .addClass('collapsing')\n      .removeClass('collapse in')\n      .attr('aria-expanded', false)\n\n    this.$trigger\n      .addClass('collapsed')\n      .attr('aria-expanded', false)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.transitioning = 0\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse')\n        .trigger('hidden.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    this.$element\n      [dimension](0)\n      .one('bsTransitionEnd', $.proxy(complete, this))\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)\n  }\n\n  Collapse.prototype.toggle = function () {\n    this[this.$element.hasClass('in') ? 'hide' : 'show']()\n  }\n\n  Collapse.prototype.getParent = function () {\n    return $(this.options.parent)\n      .find('[data-toggle=\"collapse\"][data-parent=\"' + this.options.parent + '\"]')\n      .each($.proxy(function (i, element) {\n        var $element = $(element)\n        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)\n      }, this))\n      .end()\n  }\n\n  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {\n    var isOpen = $element.hasClass('in')\n\n    $element.attr('aria-expanded', isOpen)\n    $trigger\n      .toggleClass('collapsed', !isOpen)\n      .attr('aria-expanded', isOpen)\n  }\n\n  function getTargetFromTrigger($trigger) {\n    var href\n    var target = $trigger.attr('data-target')\n      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') // strip for ie7\n\n    return $(target)\n  }\n\n\n  // COLLAPSE PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.collapse')\n      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.collapse\n\n  $.fn.collapse             = Plugin\n  $.fn.collapse.Constructor = Collapse\n\n\n  // COLLAPSE NO CONFLICT\n  // ====================\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n  // COLLAPSE DATA-API\n  // =================\n\n  $(document).on('click.bs.collapse.data-api', '[data-toggle=\"collapse\"]', function (e) {\n    var $this   = $(this)\n\n    if (!$this.attr('data-target')) e.preventDefault()\n\n    var $target = getTargetFromTrigger($this)\n    var data    = $target.data('bs.collapse')\n    var option  = data ? 'toggle' : $this.data()\n\n    Plugin.call($target, option)\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: dropdown.js v3.3.7\n * http://getbootstrap.com/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop'\n  var toggle   = '[data-toggle=\"dropdown\"]'\n  var Dropdown = function (element) {\n    $(element).on('click.bs.dropdown', this.toggle)\n  }\n\n  Dropdown.VERSION = '3.3.7'\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = selector && $(selector)\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n  function clearMenus(e) {\n    if (e && e.which === 3) return\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $this         = $(this)\n      var $parent       = getParent($this)\n      var relatedTarget = { relatedTarget: this }\n\n      if (!$parent.hasClass('open')) return\n\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return\n\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this.attr('aria-expanded', 'false')\n      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))\n    })\n  }\n\n  Dropdown.prototype.toggle = function (e) {\n    var $this = $(this)\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    clearMenus()\n\n    if (!isActive) {\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n        // if mobile we use a backdrop because click events don't delegate\n        $(document.createElement('div'))\n          .addClass('dropdown-backdrop')\n          .insertAfter($(this))\n          .on('click', clearMenus)\n      }\n\n      var relatedTarget = { relatedTarget: this }\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this\n        .trigger('focus')\n        .attr('aria-expanded', 'true')\n\n      $parent\n        .toggleClass('open')\n        .trigger($.Event('shown.bs.dropdown', relatedTarget))\n    }\n\n    return false\n  }\n\n  Dropdown.prototype.keydown = function (e) {\n    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return\n\n    var $this = $(this)\n\n    e.preventDefault()\n    e.stopPropagation()\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    if (!isActive && e.which != 27 || isActive && e.which == 27) {\n      if (e.which == 27) $parent.find(toggle).trigger('focus')\n      return $this.trigger('click')\n    }\n\n    var desc = ' li:not(.disabled):visible a'\n    var $items = $parent.find('.dropdown-menu' + desc)\n\n    if (!$items.length) return\n\n    var index = $items.index(e.target)\n\n    if (e.which == 38 && index > 0)                 index--         // up\n    if (e.which == 40 && index < $items.length - 1) index++         // down\n    if (!~index)                                    index = 0\n\n    $items.eq(index).trigger('focus')\n  }\n\n\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown             = Plugin\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)\n    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: modal.js v3.3.7\n * http://getbootstrap.com/javascript/#modals\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // MODAL CLASS DEFINITION\n  // ======================\n\n  var Modal = function (element, options) {\n    this.options             = options\n    this.$body               = $(document.body)\n    this.$element            = $(element)\n    this.$dialog             = this.$element.find('.modal-dialog')\n    this.$backdrop           = null\n    this.isShown             = null\n    this.originalBodyPad     = null\n    this.scrollbarWidth      = 0\n    this.ignoreBackdropClick = false\n\n    if (this.options.remote) {\n      this.$element\n        .find('.modal-content')\n        .load(this.options.remote, $.proxy(function () {\n          this.$element.trigger('loaded.bs.modal')\n        }, this))\n    }\n  }\n\n  Modal.VERSION  = '3.3.7'\n\n  Modal.TRANSITION_DURATION = 300\n  Modal.BACKDROP_TRANSITION_DURATION = 150\n\n  Modal.DEFAULTS = {\n    backdrop: true,\n    keyboard: true,\n    show: true\n  }\n\n  Modal.prototype.toggle = function (_relatedTarget) {\n    return this.isShown ? this.hide() : this.show(_relatedTarget)\n  }\n\n  Modal.prototype.show = function (_relatedTarget) {\n    var that = this\n    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\n\n    this.$element.trigger(e)\n\n    if (this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = true\n\n    this.checkScrollbar()\n    this.setScrollbar()\n    this.$body.addClass('modal-open')\n\n    this.escape()\n    this.resize()\n\n    this.$element.on('click.dismiss.bs.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\n\n    this.$dialog.on('mousedown.dismiss.bs.modal', function () {\n      that.$element.one('mouseup.dismiss.bs.modal', function (e) {\n        if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true\n      })\n    })\n\n    this.backdrop(function () {\n      var transition = $.support.transition && that.$element.hasClass('fade')\n\n      if (!that.$element.parent().length) {\n        that.$element.appendTo(that.$body) // don't move modals dom position\n      }\n\n      that.$element\n        .show()\n        .scrollTop(0)\n\n      that.adjustDialog()\n\n      if (transition) {\n        that.$element[0].offsetWidth // force reflow\n      }\n\n      that.$element.addClass('in')\n\n      that.enforceFocus()\n\n      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\n\n      transition ?\n        that.$dialog // wait for modal to slide in\n          .one('bsTransitionEnd', function () {\n            that.$element.trigger('focus').trigger(e)\n          })\n          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\n        that.$element.trigger('focus').trigger(e)\n    })\n  }\n\n  Modal.prototype.hide = function (e) {\n    if (e) e.preventDefault()\n\n    e = $.Event('hide.bs.modal')\n\n    this.$element.trigger(e)\n\n    if (!this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = false\n\n    this.escape()\n    this.resize()\n\n    $(document).off('focusin.bs.modal')\n\n    this.$element\n      .removeClass('in')\n      .off('click.dismiss.bs.modal')\n      .off('mouseup.dismiss.bs.modal')\n\n    this.$dialog.off('mousedown.dismiss.bs.modal')\n\n    $.support.transition && this.$element.hasClass('fade') ?\n      this.$element\n        .one('bsTransitionEnd', $.proxy(this.hideModal, this))\n        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\n      this.hideModal()\n  }\n\n  Modal.prototype.enforceFocus = function () {\n    $(document)\n      .off('focusin.bs.modal') // guard against infinite focus loop\n      .on('focusin.bs.modal', $.proxy(function (e) {\n        if (document !== e.target &&\n            this.$element[0] !== e.target &&\n            !this.$element.has(e.target).length) {\n          this.$element.trigger('focus')\n        }\n      }, this))\n  }\n\n  Modal.prototype.escape = function () {\n    if (this.isShown && this.options.keyboard) {\n      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {\n        e.which == 27 && this.hide()\n      }, this))\n    } else if (!this.isShown) {\n      this.$element.off('keydown.dismiss.bs.modal')\n    }\n  }\n\n  Modal.prototype.resize = function () {\n    if (this.isShown) {\n      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))\n    } else {\n      $(window).off('resize.bs.modal')\n    }\n  }\n\n  Modal.prototype.hideModal = function () {\n    var that = this\n    this.$element.hide()\n    this.backdrop(function () {\n      that.$body.removeClass('modal-open')\n      that.resetAdjustments()\n      that.resetScrollbar()\n      that.$element.trigger('hidden.bs.modal')\n    })\n  }\n\n  Modal.prototype.removeBackdrop = function () {\n    this.$backdrop && this.$backdrop.remove()\n    this.$backdrop = null\n  }\n\n  Modal.prototype.backdrop = function (callback) {\n    var that = this\n    var animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n    if (this.isShown && this.options.backdrop) {\n      var doAnimate = $.support.transition && animate\n\n      this.$backdrop = $(document.createElement('div'))\n        .addClass('modal-backdrop ' + animate)\n        .appendTo(this.$body)\n\n      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {\n        if (this.ignoreBackdropClick) {\n          this.ignoreBackdropClick = false\n          return\n        }\n        if (e.target !== e.currentTarget) return\n        this.options.backdrop == 'static'\n          ? this.$element[0].focus()\n          : this.hide()\n      }, this))\n\n      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n      this.$backdrop.addClass('in')\n\n      if (!callback) return\n\n      doAnimate ?\n        this.$backdrop\n          .one('bsTransitionEnd', callback)\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\n        callback()\n\n    } else if (!this.isShown && this.$backdrop) {\n      this.$backdrop.removeClass('in')\n\n      var callbackRemove = function () {\n        that.removeBackdrop()\n        callback && callback()\n      }\n      $.support.transition && this.$element.hasClass('fade') ?\n        this.$backdrop\n          .one('bsTransitionEnd', callbackRemove)\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\n        callbackRemove()\n\n    } else if (callback) {\n      callback()\n    }\n  }\n\n  // these following methods are used to handle overflowing modals\n\n  Modal.prototype.handleUpdate = function () {\n    this.adjustDialog()\n  }\n\n  Modal.prototype.adjustDialog = function () {\n    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight\n\n    this.$element.css({\n      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',\n      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''\n    })\n  }\n\n  Modal.prototype.resetAdjustments = function () {\n    this.$element.css({\n      paddingLeft: '',\n      paddingRight: ''\n    })\n  }\n\n  Modal.prototype.checkScrollbar = function () {\n    var fullWindowWidth = window.innerWidth\n    if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8\n      var documentElementRect = document.documentElement.getBoundingClientRect()\n      fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)\n    }\n    this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth\n    this.scrollbarWidth = this.measureScrollbar()\n  }\n\n  Modal.prototype.setScrollbar = function () {\n    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)\n    this.originalBodyPad = document.body.style.paddingRight || ''\n    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)\n  }\n\n  Modal.prototype.resetScrollbar = function () {\n    this.$body.css('padding-right', this.originalBodyPad)\n  }\n\n  Modal.prototype.measureScrollbar = function () { // thx walsh\n    var scrollDiv = document.createElement('div')\n    scrollDiv.className = 'modal-scrollbar-measure'\n    this.$body.append(scrollDiv)\n    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth\n    this.$body[0].removeChild(scrollDiv)\n    return scrollbarWidth\n  }\n\n\n  // MODAL PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option, _relatedTarget) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.modal')\n      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option](_relatedTarget)\n      else if (options.show) data.show(_relatedTarget)\n    })\n  }\n\n  var old = $.fn.modal\n\n  $.fn.modal             = Plugin\n  $.fn.modal.Constructor = Modal\n\n\n  // MODAL NO CONFLICT\n  // =================\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n  // MODAL DATA-API\n  // ==============\n\n  $(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this   = $(this)\n    var href    = $this.attr('href')\n    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) // strip for ie7\n    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\n    if ($this.is('a')) e.preventDefault()\n\n    $target.one('show.bs.modal', function (showEvent) {\n      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown\n      $target.one('hidden.bs.modal', function () {\n        $this.is(':visible') && $this.trigger('focus')\n      })\n    })\n    Plugin.call($target, option, this)\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tooltip.js v3.3.7\n * http://getbootstrap.com/javascript/#tooltip\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TOOLTIP PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Tooltip = function (element, options) {\n    this.type       = null\n    this.options    = null\n    this.enabled    = null\n    this.timeout    = null\n    this.hoverState = null\n    this.$element   = null\n    this.inState    = null\n\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.VERSION  = '3.3.7'\n\n  Tooltip.TRANSITION_DURATION = 150\n\n  Tooltip.DEFAULTS = {\n    animation: true,\n    placement: 'top',\n    selector: false,\n    template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n    trigger: 'hover focus',\n    title: '',\n    delay: 0,\n    html: false,\n    container: false,\n    viewport: {\n      selector: 'body',\n      padding: 0\n    }\n  }\n\n  Tooltip.prototype.init = function (type, element, options) {\n    this.enabled   = true\n    this.type      = type\n    this.$element  = $(element)\n    this.options   = this.getOptions(options)\n    this.$viewport = this.options.viewport && $($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : (this.options.viewport.selector || this.options.viewport))\n    this.inState   = { click: false, hover: false, focus: false }\n\n    if (this.$element[0] instanceof document.constructor && !this.options.selector) {\n      throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!')\n    }\n\n    var triggers = this.options.trigger.split(' ')\n\n    for (var i = triggers.length; i--;) {\n      var trigger = triggers[i]\n\n      if (trigger == 'click') {\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n      } else if (trigger != 'manual') {\n        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'\n        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'\n\n        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n      }\n    }\n\n    this.options.selector ?\n      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n      this.fixTitle()\n  }\n\n  Tooltip.prototype.getDefaults = function () {\n    return Tooltip.DEFAULTS\n  }\n\n  Tooltip.prototype.getOptions = function (options) {\n    options = $.extend({}, this.getDefaults(), this.$element.data(), options)\n\n    if (options.delay && typeof options.delay == 'number') {\n      options.delay = {\n        show: options.delay,\n        hide: options.delay\n      }\n    }\n\n    return options\n  }\n\n  Tooltip.prototype.getDelegateOptions = function () {\n    var options  = {}\n    var defaults = this.getDefaults()\n\n    this._options && $.each(this._options, function (key, value) {\n      if (defaults[key] != value) options[key] = value\n    })\n\n    return options\n  }\n\n  Tooltip.prototype.enter = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget).data('bs.' + this.type)\n\n    if (!self) {\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n      $(obj.currentTarget).data('bs.' + this.type, self)\n    }\n\n    if (obj instanceof $.Event) {\n      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true\n    }\n\n    if (self.tip().hasClass('in') || self.hoverState == 'in') {\n      self.hoverState = 'in'\n      return\n    }\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'in'\n\n    if (!self.options.delay || !self.options.delay.show) return self.show()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'in') self.show()\n    }, self.options.delay.show)\n  }\n\n  Tooltip.prototype.isInStateTrue = function () {\n    for (var key in this.inState) {\n      if (this.inState[key]) return true\n    }\n\n    return false\n  }\n\n  Tooltip.prototype.leave = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget).data('bs.' + this.type)\n\n    if (!self) {\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n      $(obj.currentTarget).data('bs.' + this.type, self)\n    }\n\n    if (obj instanceof $.Event) {\n      self.inState[obj.type == 'focusout' ? 'focus' : 'hover'] = false\n    }\n\n    if (self.isInStateTrue()) return\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'out'\n\n    if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'out') self.hide()\n    }, self.options.delay.hide)\n  }\n\n  Tooltip.prototype.show = function () {\n    var e = $.Event('show.bs.' + this.type)\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(e)\n\n      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])\n      if (e.isDefaultPrevented() || !inDom) return\n      var that = this\n\n      var $tip = this.tip()\n\n      var tipId = this.getUID(this.type)\n\n      this.setContent()\n      $tip.attr('id', tipId)\n      this.$element.attr('aria-describedby', tipId)\n\n      if (this.options.animation) $tip.addClass('fade')\n\n      var placement = typeof this.options.placement == 'function' ?\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\n        this.options.placement\n\n      var autoToken = /\\s?auto?\\s?/i\n      var autoPlace = autoToken.test(placement)\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n      $tip\n        .detach()\n        .css({ top: 0, left: 0, display: 'block' })\n        .addClass(placement)\n        .data('bs.' + this.type, this)\n\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n      this.$element.trigger('inserted.bs.' + this.type)\n\n      var pos          = this.getPosition()\n      var actualWidth  = $tip[0].offsetWidth\n      var actualHeight = $tip[0].offsetHeight\n\n      if (autoPlace) {\n        var orgPlacement = placement\n        var viewportDim = this.getPosition(this.$viewport)\n\n        placement = placement == 'bottom' && pos.bottom + actualHeight > viewportDim.bottom ? 'top'    :\n                    placement == 'top'    && pos.top    - actualHeight < viewportDim.top    ? 'bottom' :\n                    placement == 'right'  && pos.right  + actualWidth  > viewportDim.width  ? 'left'   :\n                    placement == 'left'   && pos.left   - actualWidth  < viewportDim.left   ? 'right'  :\n                    placement\n\n        $tip\n          .removeClass(orgPlacement)\n          .addClass(placement)\n      }\n\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n\n      this.applyPlacement(calculatedOffset, placement)\n\n      var complete = function () {\n        var prevHoverState = that.hoverState\n        that.$element.trigger('shown.bs.' + that.type)\n        that.hoverState = null\n\n        if (prevHoverState == 'out') that.leave(that)\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        $tip\n          .one('bsTransitionEnd', complete)\n          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n        complete()\n    }\n  }\n\n  Tooltip.prototype.applyPlacement = function (offset, placement) {\n    var $tip   = this.tip()\n    var width  = $tip[0].offsetWidth\n    var height = $tip[0].offsetHeight\n\n    // manually read margins because getBoundingClientRect includes difference\n    var marginTop = parseInt($tip.css('margin-top'), 10)\n    var marginLeft = parseInt($tip.css('margin-left'), 10)\n\n    // we must check for NaN for ie 8/9\n    if (isNaN(marginTop))  marginTop  = 0\n    if (isNaN(marginLeft)) marginLeft = 0\n\n    offset.top  += marginTop\n    offset.left += marginLeft\n\n    // $.fn.offset doesn't round pixel values\n    // so we use setOffset directly with our own function B-0\n    $.offset.setOffset($tip[0], $.extend({\n      using: function (props) {\n        $tip.css({\n          top: Math.round(props.top),\n          left: Math.round(props.left)\n        })\n      }\n    }, offset), 0)\n\n    $tip.addClass('in')\n\n    // check to see if placing tip in new offset caused the tip to resize itself\n    var actualWidth  = $tip[0].offsetWidth\n    var actualHeight = $tip[0].offsetHeight\n\n    if (placement == 'top' && actualHeight != height) {\n      offset.top = offset.top + height - actualHeight\n    }\n\n    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)\n\n    if (delta.left) offset.left += delta.left\n    else offset.top += delta.top\n\n    var isVertical          = /top|bottom/.test(placement)\n    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight\n    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'\n\n    $tip.offset(offset)\n    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)\n  }\n\n  Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {\n    this.arrow()\n      .css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')\n      .css(isVertical ? 'top' : 'left', '')\n  }\n\n  Tooltip.prototype.setContent = function () {\n    var $tip  = this.tip()\n    var title = this.getTitle()\n\n    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n    $tip.removeClass('fade in top bottom left right')\n  }\n\n  Tooltip.prototype.hide = function (callback) {\n    var that = this\n    var $tip = $(this.$tip)\n    var e    = $.Event('hide.bs.' + this.type)\n\n    function complete() {\n      if (that.hoverState != 'in') $tip.detach()\n      if (that.$element) { // TODO: Check whether guarding this code with this `if` is really necessary.\n        that.$element\n          .removeAttr('aria-describedby')\n          .trigger('hidden.bs.' + that.type)\n      }\n      callback && callback()\n    }\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    $tip.removeClass('in')\n\n    $.support.transition && $tip.hasClass('fade') ?\n      $tip\n        .one('bsTransitionEnd', complete)\n        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n      complete()\n\n    this.hoverState = null\n\n    return this\n  }\n\n  Tooltip.prototype.fixTitle = function () {\n    var $e = this.$element\n    if ($e.attr('title') || typeof $e.attr('data-original-title') != 'string') {\n      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n    }\n  }\n\n  Tooltip.prototype.hasContent = function () {\n    return this.getTitle()\n  }\n\n  Tooltip.prototype.getPosition = function ($element) {\n    $element   = $element || this.$element\n\n    var el     = $element[0]\n    var isBody = el.tagName == 'BODY'\n\n    var elRect    = el.getBoundingClientRect()\n    if (elRect.width == null) {\n      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093\n      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })\n    }\n    var isSvg = window.SVGElement && el instanceof window.SVGElement\n    // Avoid using $.offset() on SVGs since it gives incorrect results in jQuery 3.\n    // See https://github.com/twbs/bootstrap/issues/20280\n    var elOffset  = isBody ? { top: 0, left: 0 } : (isSvg ? null : $element.offset())\n    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }\n    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null\n\n    return $.extend({}, elRect, scroll, outerDims, elOffset)\n  }\n\n  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\n    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :\n           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :\n           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\n        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }\n\n  }\n\n  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {\n    var delta = { top: 0, left: 0 }\n    if (!this.$viewport) return delta\n\n    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0\n    var viewportDimensions = this.getPosition(this.$viewport)\n\n    if (/right|left/.test(placement)) {\n      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll\n      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight\n      if (topEdgeOffset < viewportDimensions.top) { // top overflow\n        delta.top = viewportDimensions.top - topEdgeOffset\n      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow\n        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset\n      }\n    } else {\n      var leftEdgeOffset  = pos.left - viewportPadding\n      var rightEdgeOffset = pos.left + viewportPadding + actualWidth\n      if (leftEdgeOffset < viewportDimensions.left) { // left overflow\n        delta.left = viewportDimensions.left - leftEdgeOffset\n      } else if (rightEdgeOffset > viewportDimensions.right) { // right overflow\n        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset\n      }\n    }\n\n    return delta\n  }\n\n  Tooltip.prototype.getTitle = function () {\n    var title\n    var $e = this.$element\n    var o  = this.options\n\n    title = $e.attr('data-original-title')\n      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n    return title\n  }\n\n  Tooltip.prototype.getUID = function (prefix) {\n    do prefix += ~~(Math.random() * 1000000)\n    while (document.getElementById(prefix))\n    return prefix\n  }\n\n  Tooltip.prototype.tip = function () {\n    if (!this.$tip) {\n      this.$tip = $(this.options.template)\n      if (this.$tip.length != 1) {\n        throw new Error(this.type + ' `template` option must consist of exactly 1 top-level element!')\n      }\n    }\n    return this.$tip\n  }\n\n  Tooltip.prototype.arrow = function () {\n    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))\n  }\n\n  Tooltip.prototype.enable = function () {\n    this.enabled = true\n  }\n\n  Tooltip.prototype.disable = function () {\n    this.enabled = false\n  }\n\n  Tooltip.prototype.toggleEnabled = function () {\n    this.enabled = !this.enabled\n  }\n\n  Tooltip.prototype.toggle = function (e) {\n    var self = this\n    if (e) {\n      self = $(e.currentTarget).data('bs.' + this.type)\n      if (!self) {\n        self = new this.constructor(e.currentTarget, this.getDelegateOptions())\n        $(e.currentTarget).data('bs.' + this.type, self)\n      }\n    }\n\n    if (e) {\n      self.inState.click = !self.inState.click\n      if (self.isInStateTrue()) self.enter(self)\n      else self.leave(self)\n    } else {\n      self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\n    }\n  }\n\n  Tooltip.prototype.destroy = function () {\n    var that = this\n    clearTimeout(this.timeout)\n    this.hide(function () {\n      that.$element.off('.' + that.type).removeData('bs.' + that.type)\n      if (that.$tip) {\n        that.$tip.detach()\n      }\n      that.$tip = null\n      that.$arrow = null\n      that.$viewport = null\n      that.$element = null\n    })\n  }\n\n\n  // TOOLTIP PLUGIN DEFINITION\n  // =========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.tooltip')\n      var options = typeof option == 'object' && option\n\n      if (!data && /destroy|hide/.test(option)) return\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip             = Plugin\n  $.fn.tooltip.Constructor = Tooltip\n\n\n  // TOOLTIP NO CONFLICT\n  // ===================\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: popover.js v3.3.7\n * http://getbootstrap.com/javascript/#popovers\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // POPOVER PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Popover = function (element, options) {\n    this.init('popover', element, options)\n  }\n\n  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')\n\n  Popover.VERSION  = '3.3.7'\n\n  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {\n    placement: 'right',\n    trigger: 'click',\n    content: '',\n    template: '<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n  })\n\n\n  // NOTE: POPOVER EXTENDS tooltip.js\n  // ================================\n\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)\n\n  Popover.prototype.constructor = Popover\n\n  Popover.prototype.getDefaults = function () {\n    return Popover.DEFAULTS\n  }\n\n  Popover.prototype.setContent = function () {\n    var $tip    = this.tip()\n    var title   = this.getTitle()\n    var content = this.getContent()\n\n    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\n    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events\n      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'\n    ](content)\n\n    $tip.removeClass('fade top bottom left right in')\n\n    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do\n    // this manually by checking the contents.\n    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()\n  }\n\n  Popover.prototype.hasContent = function () {\n    return this.getTitle() || this.getContent()\n  }\n\n  Popover.prototype.getContent = function () {\n    var $e = this.$element\n    var o  = this.options\n\n    return $e.attr('data-content')\n      || (typeof o.content == 'function' ?\n            o.content.call($e[0]) :\n            o.content)\n  }\n\n  Popover.prototype.arrow = function () {\n    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))\n  }\n\n\n  // POPOVER PLUGIN DEFINITION\n  // =========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.popover')\n      var options = typeof option == 'object' && option\n\n      if (!data && /destroy|hide/.test(option)) return\n      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.popover\n\n  $.fn.popover             = Plugin\n  $.fn.popover.Constructor = Popover\n\n\n  // POPOVER NO CONFLICT\n  // ===================\n\n  $.fn.popover.noConflict = function () {\n    $.fn.popover = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: scrollspy.js v3.3.7\n * http://getbootstrap.com/javascript/#scrollspy\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // SCROLLSPY CLASS DEFINITION\n  // ==========================\n\n  function ScrollSpy(element, options) {\n    this.$body          = $(document.body)\n    this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)\n    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)\n    this.selector       = (this.options.target || '') + ' .nav li > a'\n    this.offsets        = []\n    this.targets        = []\n    this.activeTarget   = null\n    this.scrollHeight   = 0\n\n    this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.VERSION  = '3.3.7'\n\n  ScrollSpy.DEFAULTS = {\n    offset: 10\n  }\n\n  ScrollSpy.prototype.getScrollHeight = function () {\n    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)\n  }\n\n  ScrollSpy.prototype.refresh = function () {\n    var that          = this\n    var offsetMethod  = 'offset'\n    var offsetBase    = 0\n\n    this.offsets      = []\n    this.targets      = []\n    this.scrollHeight = this.getScrollHeight()\n\n    if (!$.isWindow(this.$scrollElement[0])) {\n      offsetMethod = 'position'\n      offsetBase   = this.$scrollElement.scrollTop()\n    }\n\n    this.$body\n      .find(this.selector)\n      .map(function () {\n        var $el   = $(this)\n        var href  = $el.data('target') || $el.attr('href')\n        var $href = /^#./.test(href) && $(href)\n\n        return ($href\n          && $href.length\n          && $href.is(':visible')\n          && [[$href[offsetMethod]().top + offsetBase, href]]) || null\n      })\n      .sort(function (a, b) { return a[0] - b[0] })\n      .each(function () {\n        that.offsets.push(this[0])\n        that.targets.push(this[1])\n      })\n  }\n\n  ScrollSpy.prototype.process = function () {\n    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset\n    var scrollHeight = this.getScrollHeight()\n    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()\n    var offsets      = this.offsets\n    var targets      = this.targets\n    var activeTarget = this.activeTarget\n    var i\n\n    if (this.scrollHeight != scrollHeight) {\n      this.refresh()\n    }\n\n    if (scrollTop >= maxScroll) {\n      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)\n    }\n\n    if (activeTarget && scrollTop < offsets[0]) {\n      this.activeTarget = null\n      return this.clear()\n    }\n\n    for (i = offsets.length; i--;) {\n      activeTarget != targets[i]\n        && scrollTop >= offsets[i]\n        && (offsets[i + 1] === undefined || scrollTop < offsets[i + 1])\n        && this.activate(targets[i])\n    }\n  }\n\n  ScrollSpy.prototype.activate = function (target) {\n    this.activeTarget = target\n\n    this.clear()\n\n    var selector = this.selector +\n      '[data-target=\"' + target + '\"],' +\n      this.selector + '[href=\"' + target + '\"]'\n\n    var active = $(selector)\n      .parents('li')\n      .addClass('active')\n\n    if (active.parent('.dropdown-menu').length) {\n      active = active\n        .closest('li.dropdown')\n        .addClass('active')\n    }\n\n    active.trigger('activate.bs.scrollspy')\n  }\n\n  ScrollSpy.prototype.clear = function () {\n    $(this.selector)\n      .parentsUntil(this.options.target, '.active')\n      .removeClass('active')\n  }\n\n\n  // SCROLLSPY PLUGIN DEFINITION\n  // ===========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.scrollspy')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.scrollspy\n\n  $.fn.scrollspy             = Plugin\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n\n  // SCROLLSPY NO CONFLICT\n  // =====================\n\n  $.fn.scrollspy.noConflict = function () {\n    $.fn.scrollspy = old\n    return this\n  }\n\n\n  // SCROLLSPY DATA-API\n  // ==================\n\n  $(window).on('load.bs.scrollspy.data-api', function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      Plugin.call($spy, $spy.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tab.js v3.3.7\n * http://getbootstrap.com/javascript/#tabs\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TAB CLASS DEFINITION\n  // ====================\n\n  var Tab = function (element) {\n    // jscs:disable requireDollarBeforejQueryAssignment\n    this.element = $(element)\n    // jscs:enable requireDollarBeforejQueryAssignment\n  }\n\n  Tab.VERSION = '3.3.7'\n\n  Tab.TRANSITION_DURATION = 150\n\n  Tab.prototype.show = function () {\n    var $this    = this.element\n    var $ul      = $this.closest('ul:not(.dropdown-menu)')\n    var selector = $this.data('target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    if ($this.parent('li').hasClass('active')) return\n\n    var $previous = $ul.find('.active:last a')\n    var hideEvent = $.Event('hide.bs.tab', {\n      relatedTarget: $this[0]\n    })\n    var showEvent = $.Event('show.bs.tab', {\n      relatedTarget: $previous[0]\n    })\n\n    $previous.trigger(hideEvent)\n    $this.trigger(showEvent)\n\n    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return\n\n    var $target = $(selector)\n\n    this.activate($this.closest('li'), $ul)\n    this.activate($target, $target.parent(), function () {\n      $previous.trigger({\n        type: 'hidden.bs.tab',\n        relatedTarget: $this[0]\n      })\n      $this.trigger({\n        type: 'shown.bs.tab',\n        relatedTarget: $previous[0]\n      })\n    })\n  }\n\n  Tab.prototype.activate = function (element, container, callback) {\n    var $active    = container.find('> .active')\n    var transition = callback\n      && $.support.transition\n      && ($active.length && $active.hasClass('fade') || !!container.find('> .fade').length)\n\n    function next() {\n      $active\n        .removeClass('active')\n        .find('> .dropdown-menu > .active')\n          .removeClass('active')\n        .end()\n        .find('[data-toggle=\"tab\"]')\n          .attr('aria-expanded', false)\n\n      element\n        .addClass('active')\n        .find('[data-toggle=\"tab\"]')\n          .attr('aria-expanded', true)\n\n      if (transition) {\n        element[0].offsetWidth // reflow for transition\n        element.addClass('in')\n      } else {\n        element.removeClass('fade')\n      }\n\n      if (element.parent('.dropdown-menu').length) {\n        element\n          .closest('li.dropdown')\n            .addClass('active')\n          .end()\n          .find('[data-toggle=\"tab\"]')\n            .attr('aria-expanded', true)\n      }\n\n      callback && callback()\n    }\n\n    $active.length && transition ?\n      $active\n        .one('bsTransitionEnd', next)\n        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :\n      next()\n\n    $active.removeClass('in')\n  }\n\n\n  // TAB PLUGIN DEFINITION\n  // =====================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.tab')\n\n      if (!data) $this.data('bs.tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.tab\n\n  $.fn.tab             = Plugin\n  $.fn.tab.Constructor = Tab\n\n\n  // TAB NO CONFLICT\n  // ===============\n\n  $.fn.tab.noConflict = function () {\n    $.fn.tab = old\n    return this\n  }\n\n\n  // TAB DATA-API\n  // ============\n\n  var clickHandler = function (e) {\n    e.preventDefault()\n    Plugin.call($(this), 'show')\n  }\n\n  $(document)\n    .on('click.bs.tab.data-api', '[data-toggle=\"tab\"]', clickHandler)\n    .on('click.bs.tab.data-api', '[data-toggle=\"pill\"]', clickHandler)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: affix.js v3.3.7\n * http://getbootstrap.com/javascript/#affix\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // AFFIX CLASS DEFINITION\n  // ======================\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, Affix.DEFAULTS, options)\n\n    this.$target = $(this.options.target)\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\n\n    this.$element     = $(element)\n    this.affixed      = null\n    this.unpin        = null\n    this.pinnedOffset = null\n\n    this.checkPosition()\n  }\n\n  Affix.VERSION  = '3.3.7'\n\n  Affix.RESET    = 'affix affix-top affix-bottom'\n\n  Affix.DEFAULTS = {\n    offset: 0,\n    target: window\n  }\n\n  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {\n    var scrollTop    = this.$target.scrollTop()\n    var position     = this.$element.offset()\n    var targetHeight = this.$target.height()\n\n    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false\n\n    if (this.affixed == 'bottom') {\n      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'\n      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'\n    }\n\n    var initializing   = this.affixed == null\n    var colliderTop    = initializing ? scrollTop : position.top\n    var colliderHeight = initializing ? targetHeight : height\n\n    if (offsetTop != null && scrollTop <= offsetTop) return 'top'\n    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'\n\n    return false\n  }\n\n  Affix.prototype.getPinnedOffset = function () {\n    if (this.pinnedOffset) return this.pinnedOffset\n    this.$element.removeClass(Affix.RESET).addClass('affix')\n    var scrollTop = this.$target.scrollTop()\n    var position  = this.$element.offset()\n    return (this.pinnedOffset = position.top - scrollTop)\n  }\n\n  Affix.prototype.checkPositionWithEventLoop = function () {\n    setTimeout($.proxy(this.checkPosition, this), 1)\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var height       = this.$element.height()\n    var offset       = this.options.offset\n    var offsetTop    = offset.top\n    var offsetBottom = offset.bottom\n    var scrollHeight = Math.max($(document).height(), $(document.body).height())\n\n    if (typeof offset != 'object')         offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\n\n    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)\n\n    if (this.affixed != affix) {\n      if (this.unpin != null) this.$element.css('top', '')\n\n      var affixType = 'affix' + (affix ? '-' + affix : '')\n      var e         = $.Event(affixType + '.bs.affix')\n\n      this.$element.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      this.affixed = affix\n      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\n\n      this.$element\n        .removeClass(Affix.RESET)\n        .addClass(affixType)\n        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')\n    }\n\n    if (affix == 'bottom') {\n      this.$element.offset({\n        top: scrollHeight - height - offsetBottom\n      })\n    }\n  }\n\n\n  // AFFIX PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.affix')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.affix\n\n  $.fn.affix             = Plugin\n  $.fn.affix.Constructor = Affix\n\n\n  // AFFIX NO CONFLICT\n  // =================\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n  // AFFIX DATA-API\n  // ==============\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n      var data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom\n      if (data.offsetTop    != null) data.offset.top    = data.offsetTop\n\n      Plugin.call($spy, data)\n    })\n  })\n\n}(jQuery);\n"

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = "/*!\r\n * Select2 4.0.3\r\n * https://select2.github.io\r\n *\r\n * Released under the MIT license\r\n * https://github.com/select2/select2/blob/master/LICENSE.md\r\n */\r\n(function (factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define(['jquery'], factory);\r\n  } else if (typeof exports === 'object') {\r\n    // Node/CommonJS\r\n    factory(require('jquery'));\r\n  } else {\r\n    // Browser globals\r\n    factory(jQuery);\r\n  }\r\n}(function (jQuery) {\r\n  // This is needed so we can catch the AMD loader configuration and use it\r\n  // The inner file should be wrapped (by `banner.start.js`) in a function that\r\n  // returns the AMD loader references.\r\n  var S2 =\r\n(function () {\r\n  // Restore the Select2 AMD loader so it can be used\r\n  // Needed mostly in the language files, where the loader is not inserted\r\n  if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd) {\r\n    var S2 = jQuery.fn.select2.amd;\r\n  }\r\nvar S2;(function () { if (!S2 || !S2.requirejs) {\nif (!S2) { S2 = {}; } else { require = S2; }\n/**\n * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // Node .js allowance:\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                //Lop off the last part of baseParts, so that . matches the\n                //\"directory\" and not name of the baseName's module. For instance,\n                //baseName of \"one/two/three\", maps to \"one/two/three.js\", but we\n                //want the directory, \"one/two\" for this normalization.\n                name = baseParts.slice(0, baseParts.length - 1).concat(name);\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\nS2.requirejs = requirejs;S2.require = require;S2.define = define;\n}\n}());\nS2.define(\"almond\", function(){});\n\n/* global jQuery:false, $:false */\r\nS2.define('jquery',[],function () {\r\n  var _$ = jQuery || $;\r\n\r\n  if (_$ == null && console && console.error) {\r\n    console.error(\r\n      'Select2: An instance of jQuery or a jQuery-compatible library was not ' +\r\n      'found. Make sure that you are including jQuery before Select2 on your ' +\r\n      'web page.'\r\n    );\r\n  }\r\n\r\n  return _$;\r\n});\r\n\nS2.define('select2/utils',[\r\n  'jquery'\r\n], function ($) {\r\n  var Utils = {};\r\n\r\n  Utils.Extend = function (ChildClass, SuperClass) {\r\n    var __hasProp = {}.hasOwnProperty;\r\n\r\n    function BaseConstructor () {\r\n      this.constructor = ChildClass;\r\n    }\r\n\r\n    for (var key in SuperClass) {\r\n      if (__hasProp.call(SuperClass, key)) {\r\n        ChildClass[key] = SuperClass[key];\r\n      }\r\n    }\r\n\r\n    BaseConstructor.prototype = SuperClass.prototype;\r\n    ChildClass.prototype = new BaseConstructor();\r\n    ChildClass.__super__ = SuperClass.prototype;\r\n\r\n    return ChildClass;\r\n  };\r\n\r\n  function getMethods (theClass) {\r\n    var proto = theClass.prototype;\r\n\r\n    var methods = [];\r\n\r\n    for (var methodName in proto) {\r\n      var m = proto[methodName];\r\n\r\n      if (typeof m !== 'function') {\r\n        continue;\r\n      }\r\n\r\n      if (methodName === 'constructor') {\r\n        continue;\r\n      }\r\n\r\n      methods.push(methodName);\r\n    }\r\n\r\n    return methods;\r\n  }\r\n\r\n  Utils.Decorate = function (SuperClass, DecoratorClass) {\r\n    var decoratedMethods = getMethods(DecoratorClass);\r\n    var superMethods = getMethods(SuperClass);\r\n\r\n    function DecoratedClass () {\r\n      var unshift = Array.prototype.unshift;\r\n\r\n      var argCount = DecoratorClass.prototype.constructor.length;\r\n\r\n      var calledConstructor = SuperClass.prototype.constructor;\r\n\r\n      if (argCount > 0) {\r\n        unshift.call(arguments, SuperClass.prototype.constructor);\r\n\r\n        calledConstructor = DecoratorClass.prototype.constructor;\r\n      }\r\n\r\n      calledConstructor.apply(this, arguments);\r\n    }\r\n\r\n    DecoratorClass.displayName = SuperClass.displayName;\r\n\r\n    function ctr () {\r\n      this.constructor = DecoratedClass;\r\n    }\r\n\r\n    DecoratedClass.prototype = new ctr();\r\n\r\n    for (var m = 0; m < superMethods.length; m++) {\r\n        var superMethod = superMethods[m];\r\n\r\n        DecoratedClass.prototype[superMethod] =\r\n          SuperClass.prototype[superMethod];\r\n    }\r\n\r\n    var calledMethod = function (methodName) {\r\n      // Stub out the original method if it's not decorating an actual method\r\n      var originalMethod = function () {};\r\n\r\n      if (methodName in DecoratedClass.prototype) {\r\n        originalMethod = DecoratedClass.prototype[methodName];\r\n      }\r\n\r\n      var decoratedMethod = DecoratorClass.prototype[methodName];\r\n\r\n      return function () {\r\n        var unshift = Array.prototype.unshift;\r\n\r\n        unshift.call(arguments, originalMethod);\r\n\r\n        return decoratedMethod.apply(this, arguments);\r\n      };\r\n    };\r\n\r\n    for (var d = 0; d < decoratedMethods.length; d++) {\r\n      var decoratedMethod = decoratedMethods[d];\r\n\r\n      DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod);\r\n    }\r\n\r\n    return DecoratedClass;\r\n  };\r\n\r\n  var Observable = function () {\r\n    this.listeners = {};\r\n  };\r\n\r\n  Observable.prototype.on = function (event, callback) {\r\n    this.listeners = this.listeners || {};\r\n\r\n    if (event in this.listeners) {\r\n      this.listeners[event].push(callback);\r\n    } else {\r\n      this.listeners[event] = [callback];\r\n    }\r\n  };\r\n\r\n  Observable.prototype.trigger = function (event) {\r\n    var slice = Array.prototype.slice;\r\n    var params = slice.call(arguments, 1);\r\n\r\n    this.listeners = this.listeners || {};\r\n\r\n    // Params should always come in as an array\r\n    if (params == null) {\r\n      params = [];\r\n    }\r\n\r\n    // If there are no arguments to the event, use a temporary object\r\n    if (params.length === 0) {\r\n      params.push({});\r\n    }\r\n\r\n    // Set the `_type` of the first object to the event\r\n    params[0]._type = event;\r\n\r\n    if (event in this.listeners) {\r\n      this.invoke(this.listeners[event], slice.call(arguments, 1));\r\n    }\r\n\r\n    if ('*' in this.listeners) {\r\n      this.invoke(this.listeners['*'], arguments);\r\n    }\r\n  };\r\n\r\n  Observable.prototype.invoke = function (listeners, params) {\r\n    for (var i = 0, len = listeners.length; i < len; i++) {\r\n      listeners[i].apply(this, params);\r\n    }\r\n  };\r\n\r\n  Utils.Observable = Observable;\r\n\r\n  Utils.generateChars = function (length) {\r\n    var chars = '';\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      var randomChar = Math.floor(Math.random() * 36);\r\n      chars += randomChar.toString(36);\r\n    }\r\n\r\n    return chars;\r\n  };\r\n\r\n  Utils.bind = function (func, context) {\r\n    return function () {\r\n      func.apply(context, arguments);\r\n    };\r\n  };\r\n\r\n  Utils._convertData = function (data) {\r\n    for (var originalKey in data) {\r\n      var keys = originalKey.split('-');\r\n\r\n      var dataLevel = data;\r\n\r\n      if (keys.length === 1) {\r\n        continue;\r\n      }\r\n\r\n      for (var k = 0; k < keys.length; k++) {\r\n        var key = keys[k];\r\n\r\n        // Lowercase the first letter\r\n        // By default, dash-separated becomes camelCase\r\n        key = key.substring(0, 1).toLowerCase() + key.substring(1);\r\n\r\n        if (!(key in dataLevel)) {\r\n          dataLevel[key] = {};\r\n        }\r\n\r\n        if (k == keys.length - 1) {\r\n          dataLevel[key] = data[originalKey];\r\n        }\r\n\r\n        dataLevel = dataLevel[key];\r\n      }\r\n\r\n      delete data[originalKey];\r\n    }\r\n\r\n    return data;\r\n  };\r\n\r\n  Utils.hasScroll = function (index, el) {\r\n    // Adapted from the function created by @ShadowScripter\r\n    // and adapted by @BillBarry on the Stack Exchange Code Review website.\r\n    // The original code can be found at\r\n    // http://codereview.stackexchange.com/q/13338\r\n    // and was designed to be used with the Sizzle selector engine.\r\n\r\n    var $el = $(el);\r\n    var overflowX = el.style.overflowX;\r\n    var overflowY = el.style.overflowY;\r\n\r\n    //Check both x and y declarations\r\n    if (overflowX === overflowY &&\r\n        (overflowY === 'hidden' || overflowY === 'visible')) {\r\n      return false;\r\n    }\r\n\r\n    if (overflowX === 'scroll' || overflowY === 'scroll') {\r\n      return true;\r\n    }\r\n\r\n    return ($el.innerHeight() < el.scrollHeight ||\r\n      $el.innerWidth() < el.scrollWidth);\r\n  };\r\n\r\n  Utils.escapeMarkup = function (markup) {\r\n    var replaceMap = {\r\n      '\\\\': '&#92;',\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      '\\'': '&#39;',\r\n      '/': '&#47;'\r\n    };\r\n\r\n    // Do not try to escape the markup if it's not a string\r\n    if (typeof markup !== 'string') {\r\n      return markup;\r\n    }\r\n\r\n    return String(markup).replace(/[&<>\"'\\/\\\\]/g, function (match) {\r\n      return replaceMap[match];\r\n    });\r\n  };\r\n\r\n  // Append an array of jQuery nodes to a given element.\r\n  Utils.appendMany = function ($element, $nodes) {\r\n    // jQuery 1.7.x does not support $.fn.append() with an array\r\n    // Fall back to a jQuery object collection using $.fn.add()\r\n    if ($.fn.jquery.substr(0, 3) === '1.7') {\r\n      var $jqNodes = $();\r\n\r\n      $.map($nodes, function (node) {\r\n        $jqNodes = $jqNodes.add(node);\r\n      });\r\n\r\n      $nodes = $jqNodes;\r\n    }\r\n\r\n    $element.append($nodes);\r\n  };\r\n\r\n  return Utils;\r\n});\r\n\nS2.define('select2/results',[\r\n  'jquery',\r\n  './utils'\r\n], function ($, Utils) {\r\n  function Results ($element, options, dataAdapter) {\r\n    this.$element = $element;\r\n    this.data = dataAdapter;\r\n    this.options = options;\r\n\r\n    Results.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(Results, Utils.Observable);\r\n\r\n  Results.prototype.render = function () {\r\n    var $results = $(\r\n      '<ul class=\"select2-results__options\" role=\"tree\"></ul>'\r\n    );\r\n\r\n    if (this.options.get('multiple')) {\r\n      $results.attr('aria-multiselectable', 'true');\r\n    }\r\n\r\n    this.$results = $results;\r\n\r\n    return $results;\r\n  };\r\n\r\n  Results.prototype.clear = function () {\r\n    this.$results.empty();\r\n  };\r\n\r\n  Results.prototype.displayMessage = function (params) {\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    this.clear();\r\n    this.hideLoading();\r\n\r\n    var $message = $(\r\n      '<li role=\"treeitem\" aria-live=\"assertive\"' +\r\n      ' class=\"select2-results__option\"></li>'\r\n    );\r\n\r\n    var message = this.options.get('translations').get(params.message);\r\n\r\n    $message.append(\r\n      escapeMarkup(\r\n        message(params.args)\r\n      )\r\n    );\r\n\r\n    $message[0].className += ' select2-results__message';\r\n\r\n    this.$results.append($message);\r\n  };\r\n\r\n  Results.prototype.hideMessages = function () {\r\n    this.$results.find('.select2-results__message').remove();\r\n  };\r\n\r\n  Results.prototype.append = function (data) {\r\n    this.hideLoading();\r\n\r\n    var $options = [];\r\n\r\n    if (data.results == null || data.results.length === 0) {\r\n      if (this.$results.children().length === 0) {\r\n        this.trigger('results:message', {\r\n          message: 'noResults'\r\n        });\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    data.results = this.sort(data.results);\r\n\r\n    for (var d = 0; d < data.results.length; d++) {\r\n      var item = data.results[d];\r\n\r\n      var $option = this.option(item);\r\n\r\n      $options.push($option);\r\n    }\r\n\r\n    this.$results.append($options);\r\n  };\r\n\r\n  Results.prototype.position = function ($results, $dropdown) {\r\n    var $resultsContainer = $dropdown.find('.select2-results');\r\n    $resultsContainer.append($results);\r\n  };\r\n\r\n  Results.prototype.sort = function (data) {\r\n    var sorter = this.options.get('sorter');\r\n\r\n    return sorter(data);\r\n  };\r\n\r\n  Results.prototype.highlightFirstItem = function () {\r\n    var $options = this.$results\r\n      .find('.select2-results__option[aria-selected]');\r\n\r\n    var $selected = $options.filter('[aria-selected=true]');\r\n\r\n    // Check if there are any selected options\r\n    if ($selected.length > 0) {\r\n      // If there are selected options, highlight the first\r\n      $selected.first().trigger('mouseenter');\r\n    } else {\r\n      // If there are no selected options, highlight the first option\r\n      // in the dropdown\r\n      $options.first().trigger('mouseenter');\r\n    }\r\n\r\n    this.ensureHighlightVisible();\r\n  };\r\n\r\n  Results.prototype.setClasses = function () {\r\n    var self = this;\r\n\r\n    this.data.current(function (selected) {\r\n      var selectedIds = $.map(selected, function (s) {\r\n        return s.id.toString();\r\n      });\r\n\r\n      var $options = self.$results\r\n        .find('.select2-results__option[aria-selected]');\r\n\r\n      $options.each(function () {\r\n        var $option = $(this);\r\n\r\n        var item = $.data(this, 'data');\r\n\r\n        // id needs to be converted to a string when comparing\r\n        var id = '' + item.id;\r\n\r\n        if ((item.element != null && item.element.selected) ||\r\n            (item.element == null && $.inArray(id, selectedIds) > -1)) {\r\n          $option.attr('aria-selected', 'true');\r\n        } else {\r\n          $option.attr('aria-selected', 'false');\r\n        }\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n  Results.prototype.showLoading = function (params) {\r\n    this.hideLoading();\r\n\r\n    var loadingMore = this.options.get('translations').get('searching');\r\n\r\n    var loading = {\r\n      disabled: true,\r\n      loading: true,\r\n      text: loadingMore(params)\r\n    };\r\n    var $loading = this.option(loading);\r\n    $loading.className += ' loading-results';\r\n\r\n    this.$results.prepend($loading);\r\n  };\r\n\r\n  Results.prototype.hideLoading = function () {\r\n    this.$results.find('.loading-results').remove();\r\n  };\r\n\r\n  Results.prototype.option = function (data) {\r\n    var option = document.createElement('li');\r\n    option.className = 'select2-results__option';\r\n\r\n    var attrs = {\r\n      'role': 'treeitem',\r\n      'aria-selected': 'false'\r\n    };\r\n\r\n    if (data.disabled) {\r\n      delete attrs['aria-selected'];\r\n      attrs['aria-disabled'] = 'true';\r\n    }\r\n\r\n    if (data.id == null) {\r\n      delete attrs['aria-selected'];\r\n    }\r\n\r\n    if (data._resultId != null) {\r\n      option.id = data._resultId;\r\n    }\r\n\r\n    if (data.title) {\r\n      option.title = data.title;\r\n    }\r\n\r\n    if (data.children) {\r\n      attrs.role = 'group';\r\n      attrs['aria-label'] = data.text;\r\n      delete attrs['aria-selected'];\r\n    }\r\n\r\n    for (var attr in attrs) {\r\n      var val = attrs[attr];\r\n\r\n      option.setAttribute(attr, val);\r\n    }\r\n\r\n    if (data.children) {\r\n      var $option = $(option);\r\n\r\n      var label = document.createElement('strong');\r\n      label.className = 'select2-results__group';\r\n\r\n      var $label = $(label);\r\n      this.template(data, label);\r\n\r\n      var $children = [];\r\n\r\n      for (var c = 0; c < data.children.length; c++) {\r\n        var child = data.children[c];\r\n\r\n        var $child = this.option(child);\r\n\r\n        $children.push($child);\r\n      }\r\n\r\n      var $childrenContainer = $('<ul></ul>', {\r\n        'class': 'select2-results__options select2-results__options--nested'\r\n      });\r\n\r\n      $childrenContainer.append($children);\r\n\r\n      $option.append(label);\r\n      $option.append($childrenContainer);\r\n    } else {\r\n      this.template(data, option);\r\n    }\r\n\r\n    $.data(option, 'data', data);\r\n\r\n    return option;\r\n  };\r\n\r\n  Results.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    var id = container.id + '-results';\r\n\r\n    this.$results.attr('id', id);\r\n\r\n    container.on('results:all', function (params) {\r\n      self.clear();\r\n      self.append(params.data);\r\n\r\n      if (container.isOpen()) {\r\n        self.setClasses();\r\n        self.highlightFirstItem();\r\n      }\r\n    });\r\n\r\n    container.on('results:append', function (params) {\r\n      self.append(params.data);\r\n\r\n      if (container.isOpen()) {\r\n        self.setClasses();\r\n      }\r\n    });\r\n\r\n    container.on('query', function (params) {\r\n      self.hideMessages();\r\n      self.showLoading(params);\r\n    });\r\n\r\n    container.on('select', function () {\r\n      if (!container.isOpen()) {\r\n        return;\r\n      }\r\n\r\n      self.setClasses();\r\n      self.highlightFirstItem();\r\n    });\r\n\r\n    container.on('unselect', function () {\r\n      if (!container.isOpen()) {\r\n        return;\r\n      }\r\n\r\n      self.setClasses();\r\n      self.highlightFirstItem();\r\n    });\r\n\r\n    container.on('open', function () {\r\n      // When the dropdown is open, aria-expended=\"true\"\r\n      self.$results.attr('aria-expanded', 'true');\r\n      self.$results.attr('aria-hidden', 'false');\r\n\r\n      self.setClasses();\r\n      self.ensureHighlightVisible();\r\n    });\r\n\r\n    container.on('close', function () {\r\n      // When the dropdown is closed, aria-expended=\"false\"\r\n      self.$results.attr('aria-expanded', 'false');\r\n      self.$results.attr('aria-hidden', 'true');\r\n      self.$results.removeAttr('aria-activedescendant');\r\n    });\r\n\r\n    container.on('results:toggle', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      if ($highlighted.length === 0) {\r\n        return;\r\n      }\r\n\r\n      $highlighted.trigger('mouseup');\r\n    });\r\n\r\n    container.on('results:select', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      if ($highlighted.length === 0) {\r\n        return;\r\n      }\r\n\r\n      var data = $highlighted.data('data');\r\n\r\n      if ($highlighted.attr('aria-selected') == 'true') {\r\n        self.trigger('close', {});\r\n      } else {\r\n        self.trigger('select', {\r\n          data: data\r\n        });\r\n      }\r\n    });\r\n\r\n    container.on('results:previous', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      var $options = self.$results.find('[aria-selected]');\r\n\r\n      var currentIndex = $options.index($highlighted);\r\n\r\n      // If we are already at te top, don't move further\r\n      if (currentIndex === 0) {\r\n        return;\r\n      }\r\n\r\n      var nextIndex = currentIndex - 1;\r\n\r\n      // If none are highlighted, highlight the first\r\n      if ($highlighted.length === 0) {\r\n        nextIndex = 0;\r\n      }\r\n\r\n      var $next = $options.eq(nextIndex);\r\n\r\n      $next.trigger('mouseenter');\r\n\r\n      var currentOffset = self.$results.offset().top;\r\n      var nextTop = $next.offset().top;\r\n      var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);\r\n\r\n      if (nextIndex === 0) {\r\n        self.$results.scrollTop(0);\r\n      } else if (nextTop - currentOffset < 0) {\r\n        self.$results.scrollTop(nextOffset);\r\n      }\r\n    });\r\n\r\n    container.on('results:next', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      var $options = self.$results.find('[aria-selected]');\r\n\r\n      var currentIndex = $options.index($highlighted);\r\n\r\n      var nextIndex = currentIndex + 1;\r\n\r\n      // If we are at the last option, stay there\r\n      if (nextIndex >= $options.length) {\r\n        return;\r\n      }\r\n\r\n      var $next = $options.eq(nextIndex);\r\n\r\n      $next.trigger('mouseenter');\r\n\r\n      var currentOffset = self.$results.offset().top +\r\n        self.$results.outerHeight(false);\r\n      var nextBottom = $next.offset().top + $next.outerHeight(false);\r\n      var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;\r\n\r\n      if (nextIndex === 0) {\r\n        self.$results.scrollTop(0);\r\n      } else if (nextBottom > currentOffset) {\r\n        self.$results.scrollTop(nextOffset);\r\n      }\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      params.element.addClass('select2-results__option--highlighted');\r\n    });\r\n\r\n    container.on('results:message', function (params) {\r\n      self.displayMessage(params);\r\n    });\r\n\r\n    if ($.fn.mousewheel) {\r\n      this.$results.on('mousewheel', function (e) {\r\n        var top = self.$results.scrollTop();\r\n\r\n        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;\r\n\r\n        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;\r\n        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();\r\n\r\n        if (isAtTop) {\r\n          self.$results.scrollTop(0);\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        } else if (isAtBottom) {\r\n          self.$results.scrollTop(\r\n            self.$results.get(0).scrollHeight - self.$results.height()\r\n          );\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      });\r\n    }\r\n\r\n    this.$results.on('mouseup', '.select2-results__option[aria-selected]',\r\n      function (evt) {\r\n      var $this = $(this);\r\n\r\n      var data = $this.data('data');\r\n\r\n      if ($this.attr('aria-selected') === 'true') {\r\n        if (self.options.get('multiple')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('close', {});\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      self.trigger('select', {\r\n        originalEvent: evt,\r\n        data: data\r\n      });\r\n    });\r\n\r\n    this.$results.on('mouseenter', '.select2-results__option[aria-selected]',\r\n      function (evt) {\r\n      var data = $(this).data('data');\r\n\r\n      self.getHighlightedResults()\r\n          .removeClass('select2-results__option--highlighted');\r\n\r\n      self.trigger('results:focus', {\r\n        data: data,\r\n        element: $(this)\r\n      });\r\n    });\r\n  };\r\n\r\n  Results.prototype.getHighlightedResults = function () {\r\n    var $highlighted = this.$results\r\n    .find('.select2-results__option--highlighted');\r\n\r\n    return $highlighted;\r\n  };\r\n\r\n  Results.prototype.destroy = function () {\r\n    this.$results.remove();\r\n  };\r\n\r\n  Results.prototype.ensureHighlightVisible = function () {\r\n    var $highlighted = this.getHighlightedResults();\r\n\r\n    if ($highlighted.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $options = this.$results.find('[aria-selected]');\r\n\r\n    var currentIndex = $options.index($highlighted);\r\n\r\n    var currentOffset = this.$results.offset().top;\r\n    var nextTop = $highlighted.offset().top;\r\n    var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);\r\n\r\n    var offsetDelta = nextTop - currentOffset;\r\n    nextOffset -= $highlighted.outerHeight(false) * 2;\r\n\r\n    if (currentIndex <= 2) {\r\n      this.$results.scrollTop(0);\r\n    } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {\r\n      this.$results.scrollTop(nextOffset);\r\n    }\r\n  };\r\n\r\n  Results.prototype.template = function (result, container) {\r\n    var template = this.options.get('templateResult');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    var content = template(result, container);\r\n\r\n    if (content == null) {\r\n      container.style.display = 'none';\r\n    } else if (typeof content === 'string') {\r\n      container.innerHTML = escapeMarkup(content);\r\n    } else {\r\n      $(container).append(content);\r\n    }\r\n  };\r\n\r\n  return Results;\r\n});\r\n\nS2.define('select2/keys',[\r\n\r\n], function () {\r\n  var KEYS = {\r\n    BACKSPACE: 8,\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    SHIFT: 16,\r\n    CTRL: 17,\r\n    ALT: 18,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    PAGE_UP: 33,\r\n    PAGE_DOWN: 34,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n    DELETE: 46\r\n  };\r\n\r\n  return KEYS;\r\n});\r\n\nS2.define('select2/selection/base',[\r\n  'jquery',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, Utils, KEYS) {\r\n  function BaseSelection ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    BaseSelection.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(BaseSelection, Utils.Observable);\r\n\r\n  BaseSelection.prototype.render = function () {\r\n    var $selection = $(\r\n      '<span class=\"select2-selection\" role=\"combobox\" ' +\r\n      ' aria-haspopup=\"true\" aria-expanded=\"false\">' +\r\n      '</span>'\r\n    );\r\n\r\n    this._tabindex = 0;\r\n\r\n    if (this.$element.data('old-tabindex') != null) {\r\n      this._tabindex = this.$element.data('old-tabindex');\r\n    } else if (this.$element.attr('tabindex') != null) {\r\n      this._tabindex = this.$element.attr('tabindex');\r\n    }\r\n\r\n    $selection.attr('title', this.$element.attr('title'));\r\n    $selection.attr('tabindex', this._tabindex);\r\n\r\n    this.$selection = $selection;\r\n\r\n    return $selection;\r\n  };\r\n\r\n  BaseSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    var id = container.id + '-container';\r\n    var resultsId = container.id + '-results';\r\n\r\n    this.container = container;\r\n\r\n    this.$selection.on('focus', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this.$selection.on('blur', function (evt) {\r\n      self._handleBlur(evt);\r\n    });\r\n\r\n    this.$selection.on('keydown', function (evt) {\r\n      self.trigger('keypress', evt);\r\n\r\n      if (evt.which === KEYS.SPACE) {\r\n        evt.preventDefault();\r\n      }\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      self.$selection.attr('aria-activedescendant', params.data._resultId);\r\n    });\r\n\r\n    container.on('selection:update', function (params) {\r\n      self.update(params.data);\r\n    });\r\n\r\n    container.on('open', function () {\r\n      // When the dropdown is open, aria-expanded=\"true\"\r\n      self.$selection.attr('aria-expanded', 'true');\r\n      self.$selection.attr('aria-owns', resultsId);\r\n\r\n      self._attachCloseHandler(container);\r\n    });\r\n\r\n    container.on('close', function () {\r\n      // When the dropdown is closed, aria-expanded=\"false\"\r\n      self.$selection.attr('aria-expanded', 'false');\r\n      self.$selection.removeAttr('aria-activedescendant');\r\n      self.$selection.removeAttr('aria-owns');\r\n\r\n      self.$selection.focus();\r\n\r\n      self._detachCloseHandler(container);\r\n    });\r\n\r\n    container.on('enable', function () {\r\n      self.$selection.attr('tabindex', self._tabindex);\r\n    });\r\n\r\n    container.on('disable', function () {\r\n      self.$selection.attr('tabindex', '-1');\r\n    });\r\n  };\r\n\r\n  BaseSelection.prototype._handleBlur = function (evt) {\r\n    var self = this;\r\n\r\n    // This needs to be delayed as the active element is the body when the tab\r\n    // key is pressed, possibly along with others.\r\n    window.setTimeout(function () {\r\n      // Don't trigger `blur` if the focus is still in the selection\r\n      if (\r\n        (document.activeElement == self.$selection[0]) ||\r\n        ($.contains(self.$selection[0], document.activeElement))\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      self.trigger('blur', evt);\r\n    }, 1);\r\n  };\r\n\r\n  BaseSelection.prototype._attachCloseHandler = function (container) {\r\n    var self = this;\r\n\r\n    $(document.body).on('mousedown.select2.' + container.id, function (e) {\r\n      var $target = $(e.target);\r\n\r\n      var $select = $target.closest('.select2');\r\n\r\n      var $all = $('.select2.select2-container--open');\r\n\r\n      $all.each(function () {\r\n        var $this = $(this);\r\n\r\n        if (this == $select[0]) {\r\n          return;\r\n        }\r\n\r\n        var $element = $this.data('element');\r\n\r\n        $element.select2('close');\r\n      });\r\n    });\r\n  };\r\n\r\n  BaseSelection.prototype._detachCloseHandler = function (container) {\r\n    $(document.body).off('mousedown.select2.' + container.id);\r\n  };\r\n\r\n  BaseSelection.prototype.position = function ($selection, $container) {\r\n    var $selectionContainer = $container.find('.selection');\r\n    $selectionContainer.append($selection);\r\n  };\r\n\r\n  BaseSelection.prototype.destroy = function () {\r\n    this._detachCloseHandler(this.container);\r\n  };\r\n\r\n  BaseSelection.prototype.update = function (data) {\r\n    throw new Error('The `update` method must be defined in child classes.');\r\n  };\r\n\r\n  return BaseSelection;\r\n});\r\n\nS2.define('select2/selection/single',[\r\n  'jquery',\r\n  './base',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, BaseSelection, Utils, KEYS) {\r\n  function SingleSelection () {\r\n    SingleSelection.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Utils.Extend(SingleSelection, BaseSelection);\r\n\r\n  SingleSelection.prototype.render = function () {\r\n    var $selection = SingleSelection.__super__.render.call(this);\r\n\r\n    $selection.addClass('select2-selection--single');\r\n\r\n    $selection.html(\r\n      '<span class=\"select2-selection__rendered\"></span>' +\r\n      '<span class=\"select2-selection__arrow\" role=\"presentation\">' +\r\n        '<b role=\"presentation\"></b>' +\r\n      '</span>'\r\n    );\r\n\r\n    return $selection;\r\n  };\r\n\r\n  SingleSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    SingleSelection.__super__.bind.apply(this, arguments);\r\n\r\n    var id = container.id + '-container';\r\n\r\n    this.$selection.find('.select2-selection__rendered').attr('id', id);\r\n    this.$selection.attr('aria-labelledby', id);\r\n\r\n    this.$selection.on('mousedown', function (evt) {\r\n      // Only respond to left clicks\r\n      if (evt.which !== 1) {\r\n        return;\r\n      }\r\n\r\n      self.trigger('toggle', {\r\n        originalEvent: evt\r\n      });\r\n    });\r\n\r\n    this.$selection.on('focus', function (evt) {\r\n      // User focuses on the container\r\n    });\r\n\r\n    this.$selection.on('blur', function (evt) {\r\n      // User exits the container\r\n    });\r\n\r\n    container.on('focus', function (evt) {\r\n      if (!container.isOpen()) {\r\n        self.$selection.focus();\r\n      }\r\n    });\r\n\r\n    container.on('selection:update', function (params) {\r\n      self.update(params.data);\r\n    });\r\n  };\r\n\r\n  SingleSelection.prototype.clear = function () {\r\n    this.$selection.find('.select2-selection__rendered').empty();\r\n  };\r\n\r\n  SingleSelection.prototype.display = function (data, container) {\r\n    var template = this.options.get('templateSelection');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    return escapeMarkup(template(data, container));\r\n  };\r\n\r\n  SingleSelection.prototype.selectionContainer = function () {\r\n    return $('<span></span>');\r\n  };\r\n\r\n  SingleSelection.prototype.update = function (data) {\r\n    if (data.length === 0) {\r\n      this.clear();\r\n      return;\r\n    }\r\n\r\n    var selection = data[0];\r\n\r\n    var $rendered = this.$selection.find('.select2-selection__rendered');\r\n    var formatted = this.display(selection, $rendered);\r\n\r\n    $rendered.empty().append(formatted);\r\n    $rendered.prop('title', selection.title || selection.text);\r\n  };\r\n\r\n  return SingleSelection;\r\n});\r\n\nS2.define('select2/selection/multiple',[\r\n  'jquery',\r\n  './base',\r\n  '../utils'\r\n], function ($, BaseSelection, Utils) {\r\n  function MultipleSelection ($element, options) {\r\n    MultipleSelection.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Utils.Extend(MultipleSelection, BaseSelection);\r\n\r\n  MultipleSelection.prototype.render = function () {\r\n    var $selection = MultipleSelection.__super__.render.call(this);\r\n\r\n    $selection.addClass('select2-selection--multiple');\r\n\r\n    $selection.html(\r\n      '<ul class=\"select2-selection__rendered\"></ul>'\r\n    );\r\n\r\n    return $selection;\r\n  };\r\n\r\n  MultipleSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    MultipleSelection.__super__.bind.apply(this, arguments);\r\n\r\n    this.$selection.on('click', function (evt) {\r\n      self.trigger('toggle', {\r\n        originalEvent: evt\r\n      });\r\n    });\r\n\r\n    this.$selection.on(\r\n      'click',\r\n      '.select2-selection__choice__remove',\r\n      function (evt) {\r\n        // Ignore the event if it is disabled\r\n        if (self.options.get('disabled')) {\r\n          return;\r\n        }\r\n\r\n        var $remove = $(this);\r\n        var $selection = $remove.parent();\r\n\r\n        var data = $selection.data('data');\r\n\r\n        self.trigger('unselect', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  MultipleSelection.prototype.clear = function () {\r\n    this.$selection.find('.select2-selection__rendered').empty();\r\n  };\r\n\r\n  MultipleSelection.prototype.display = function (data, container) {\r\n    var template = this.options.get('templateSelection');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    return escapeMarkup(template(data, container));\r\n  };\r\n\r\n  MultipleSelection.prototype.selectionContainer = function () {\r\n    var $container = $(\r\n      '<li class=\"select2-selection__choice\">' +\r\n        '<span class=\"select2-selection__choice__remove\" role=\"presentation\">' +\r\n          '&times;' +\r\n        '</span>' +\r\n      '</li>'\r\n    );\r\n\r\n    return $container;\r\n  };\r\n\r\n  MultipleSelection.prototype.update = function (data) {\r\n    this.clear();\r\n\r\n    if (data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $selections = [];\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var selection = data[d];\r\n\r\n      var $selection = this.selectionContainer();\r\n      var formatted = this.display(selection, $selection);\r\n\r\n      $selection.append(formatted);\r\n      $selection.prop('title', selection.title || selection.text);\r\n\r\n      $selection.data('data', selection);\r\n\r\n      $selections.push($selection);\r\n    }\r\n\r\n    var $rendered = this.$selection.find('.select2-selection__rendered');\r\n\r\n    Utils.appendMany($rendered, $selections);\r\n  };\r\n\r\n  return MultipleSelection;\r\n});\r\n\nS2.define('select2/selection/placeholder',[\r\n  '../utils'\r\n], function (Utils) {\r\n  function Placeholder (decorated, $element, options) {\r\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Placeholder.prototype.normalizePlaceholder = function (_, placeholder) {\r\n    if (typeof placeholder === 'string') {\r\n      placeholder = {\r\n        id: '',\r\n        text: placeholder\r\n      };\r\n    }\r\n\r\n    return placeholder;\r\n  };\r\n\r\n  Placeholder.prototype.createPlaceholder = function (decorated, placeholder) {\r\n    var $placeholder = this.selectionContainer();\r\n\r\n    $placeholder.html(this.display(placeholder));\r\n    $placeholder.addClass('select2-selection__placeholder')\r\n                .removeClass('select2-selection__choice');\r\n\r\n    return $placeholder;\r\n  };\r\n\r\n  Placeholder.prototype.update = function (decorated, data) {\r\n    var singlePlaceholder = (\r\n      data.length == 1 && data[0].id != this.placeholder.id\r\n    );\r\n    var multipleSelections = data.length > 1;\r\n\r\n    if (multipleSelections || singlePlaceholder) {\r\n      return decorated.call(this, data);\r\n    }\r\n\r\n    this.clear();\r\n\r\n    var $placeholder = this.createPlaceholder(this.placeholder);\r\n\r\n    this.$selection.find('.select2-selection__rendered').append($placeholder);\r\n  };\r\n\r\n  return Placeholder;\r\n});\r\n\nS2.define('select2/selection/allowClear',[\r\n  'jquery',\r\n  '../keys'\r\n], function ($, KEYS) {\r\n  function AllowClear () { }\r\n\r\n  AllowClear.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    if (this.placeholder == null) {\r\n      if (this.options.get('debug') && window.console && console.error) {\r\n        console.error(\r\n          'Select2: The `allowClear` option should be used in combination ' +\r\n          'with the `placeholder` option.'\r\n        );\r\n      }\r\n    }\r\n\r\n    this.$selection.on('mousedown', '.select2-selection__clear',\r\n      function (evt) {\r\n        self._handleClear(evt);\r\n    });\r\n\r\n    container.on('keypress', function (evt) {\r\n      self._handleKeyboardClear(evt, container);\r\n    });\r\n  };\r\n\r\n  AllowClear.prototype._handleClear = function (_, evt) {\r\n    // Ignore the event if it is disabled\r\n    if (this.options.get('disabled')) {\r\n      return;\r\n    }\r\n\r\n    var $clear = this.$selection.find('.select2-selection__clear');\r\n\r\n    // Ignore the event if nothing has been selected\r\n    if ($clear.length === 0) {\r\n      return;\r\n    }\r\n\r\n    evt.stopPropagation();\r\n\r\n    var data = $clear.data('data');\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var unselectData = {\r\n        data: data[d]\r\n      };\r\n\r\n      // Trigger the `unselect` event, so people can prevent it from being\r\n      // cleared.\r\n      this.trigger('unselect', unselectData);\r\n\r\n      // If the event was prevented, don't clear it out.\r\n      if (unselectData.prevented) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.$element.val(this.placeholder.id).trigger('change');\r\n\r\n    this.trigger('toggle', {});\r\n  };\r\n\r\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\r\n    if (container.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\r\n      this._handleClear(evt);\r\n    }\r\n  };\r\n\r\n  AllowClear.prototype.update = function (decorated, data) {\r\n    decorated.call(this, data);\r\n\r\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\r\n        data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $remove = $(\r\n      '<span class=\"select2-selection__clear\">' +\r\n        '&times;' +\r\n      '</span>'\r\n    );\r\n    $remove.data('data', data);\r\n\r\n    this.$selection.find('.select2-selection__rendered').prepend($remove);\r\n  };\r\n\r\n  return AllowClear;\r\n});\r\n\nS2.define('select2/selection/search',[\r\n  'jquery',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, Utils, KEYS) {\r\n  function Search (decorated, $element, options) {\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Search.prototype.render = function (decorated) {\r\n    var $search = $(\r\n      '<li class=\"select2-search select2-search--inline\">' +\r\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\r\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\r\n        ' spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" />' +\r\n      '</li>'\r\n    );\r\n\r\n    this.$searchContainer = $search;\r\n    this.$search = $search.find('input');\r\n\r\n    var $rendered = decorated.call(this);\r\n\r\n    this._transferTabIndex();\r\n\r\n    return $rendered;\r\n  };\r\n\r\n  Search.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('open', function () {\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self.$search.val('');\r\n      self.$search.removeAttr('aria-activedescendant');\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('enable', function () {\r\n      self.$search.prop('disabled', false);\r\n\r\n      self._transferTabIndex();\r\n    });\r\n\r\n    container.on('disable', function () {\r\n      self.$search.prop('disabled', true);\r\n    });\r\n\r\n    container.on('focus', function (evt) {\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      self.$search.attr('aria-activedescendant', params.id);\r\n    });\r\n\r\n    this.$selection.on('focusin', '.select2-search--inline', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this.$selection.on('focusout', '.select2-search--inline', function (evt) {\r\n      self._handleBlur(evt);\r\n    });\r\n\r\n    this.$selection.on('keydown', '.select2-search--inline', function (evt) {\r\n      evt.stopPropagation();\r\n\r\n      self.trigger('keypress', evt);\r\n\r\n      self._keyUpPrevented = evt.isDefaultPrevented();\r\n\r\n      var key = evt.which;\r\n\r\n      if (key === KEYS.BACKSPACE && self.$search.val() === '') {\r\n        var $previousChoice = self.$searchContainer\r\n          .prev('.select2-selection__choice');\r\n\r\n        if ($previousChoice.length > 0) {\r\n          var item = $previousChoice.data('data');\r\n\r\n          self.searchRemoveChoice(item);\r\n\r\n          evt.preventDefault();\r\n        }\r\n      }\r\n    });\r\n\r\n    // Try to detect the IE version should the `documentMode` property that\r\n    // is stored on the document. This is only implemented in IE and is\r\n    // slightly cleaner than doing a user agent check.\r\n    // This property is not available in Edge, but Edge also doesn't have\r\n    // this bug.\r\n    var msie = document.documentMode;\r\n    var disableInputEvents = msie && msie <= 11;\r\n\r\n    // Workaround for browsers which do not support the `input` event\r\n    // This will prevent double-triggering of events for browsers which support\r\n    // both the `keyup` and `input` events.\r\n    this.$selection.on(\r\n      'input.searchcheck',\r\n      '.select2-search--inline',\r\n      function (evt) {\r\n        // IE will trigger the `input` event when a placeholder is used on a\r\n        // search box. To get around this issue, we are forced to ignore all\r\n        // `input` events in IE and keep using `keyup`.\r\n        if (disableInputEvents) {\r\n          self.$selection.off('input.search input.searchcheck');\r\n          return;\r\n        }\r\n\r\n        // Unbind the duplicated `keyup` event\r\n        self.$selection.off('keyup.search');\r\n      }\r\n    );\r\n\r\n    this.$selection.on(\r\n      'keyup.search input.search',\r\n      '.select2-search--inline',\r\n      function (evt) {\r\n        // IE will trigger the `input` event when a placeholder is used on a\r\n        // search box. To get around this issue, we are forced to ignore all\r\n        // `input` events in IE and keep using `keyup`.\r\n        if (disableInputEvents && evt.type === 'input') {\r\n          self.$selection.off('input.search input.searchcheck');\r\n          return;\r\n        }\r\n\r\n        var key = evt.which;\r\n\r\n        // We can freely ignore events from modifier keys\r\n        if (key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {\r\n          return;\r\n        }\r\n\r\n        // Tabbing will be handled during the `keydown` phase\r\n        if (key == KEYS.TAB) {\r\n          return;\r\n        }\r\n\r\n        self.handleSearch(evt);\r\n      }\r\n    );\r\n  };\r\n\r\n  /**\r\n   * This method will transfer the tabindex attribute from the rendered\r\n   * selection to the search box. This allows for the search box to be used as\r\n   * the primary focus instead of the selection container.\r\n   *\r\n   * @private\r\n   */\r\n  Search.prototype._transferTabIndex = function (decorated) {\r\n    this.$search.attr('tabindex', this.$selection.attr('tabindex'));\r\n    this.$selection.attr('tabindex', '-1');\r\n  };\r\n\r\n  Search.prototype.createPlaceholder = function (decorated, placeholder) {\r\n    this.$search.attr('placeholder', placeholder.text);\r\n  };\r\n\r\n  Search.prototype.update = function (decorated, data) {\r\n    var searchHadFocus = this.$search[0] == document.activeElement;\r\n\r\n    this.$search.attr('placeholder', '');\r\n\r\n    decorated.call(this, data);\r\n\r\n    this.$selection.find('.select2-selection__rendered')\r\n                   .append(this.$searchContainer);\r\n\r\n    this.resizeSearch();\r\n    if (searchHadFocus) {\r\n      this.$search.focus();\r\n    }\r\n  };\r\n\r\n  Search.prototype.handleSearch = function () {\r\n    this.resizeSearch();\r\n\r\n    if (!this._keyUpPrevented) {\r\n      var input = this.$search.val();\r\n\r\n      this.trigger('query', {\r\n        term: input\r\n      });\r\n    }\r\n\r\n    this._keyUpPrevented = false;\r\n  };\r\n\r\n  Search.prototype.searchRemoveChoice = function (decorated, item) {\r\n    this.trigger('unselect', {\r\n      data: item\r\n    });\r\n\r\n    this.$search.val(item.text);\r\n    this.handleSearch();\r\n  };\r\n\r\n  Search.prototype.resizeSearch = function () {\r\n    this.$search.css('width', '25px');\r\n\r\n    var width = '';\r\n\r\n    if (this.$search.attr('placeholder') !== '') {\r\n      width = this.$selection.find('.select2-selection__rendered').innerWidth();\r\n    } else {\r\n      var minimumWidth = this.$search.val().length + 1;\r\n\r\n      width = (minimumWidth * 0.75) + 'em';\r\n    }\r\n\r\n    this.$search.css('width', width);\r\n  };\r\n\r\n  return Search;\r\n});\r\n\nS2.define('select2/selection/eventRelay',[\r\n  'jquery'\r\n], function ($) {\r\n  function EventRelay () { }\r\n\r\n  EventRelay.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n    var relayEvents = [\r\n      'open', 'opening',\r\n      'close', 'closing',\r\n      'select', 'selecting',\r\n      'unselect', 'unselecting'\r\n    ];\r\n\r\n    var preventableEvents = ['opening', 'closing', 'selecting', 'unselecting'];\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('*', function (name, params) {\r\n      // Ignore events that should not be relayed\r\n      if ($.inArray(name, relayEvents) === -1) {\r\n        return;\r\n      }\r\n\r\n      // The parameters should always be an object\r\n      params = params || {};\r\n\r\n      // Generate the jQuery event for the Select2 event\r\n      var evt = $.Event('select2:' + name, {\r\n        params: params\r\n      });\r\n\r\n      self.$element.trigger(evt);\r\n\r\n      // Only handle preventable events if it was one\r\n      if ($.inArray(name, preventableEvents) === -1) {\r\n        return;\r\n      }\r\n\r\n      params.prevented = evt.isDefaultPrevented();\r\n    });\r\n  };\r\n\r\n  return EventRelay;\r\n});\r\n\nS2.define('select2/translation',[\r\n  'jquery',\r\n  'require'\r\n], function ($, require) {\r\n  function Translation (dict) {\r\n    this.dict = dict || {};\r\n  }\r\n\r\n  Translation.prototype.all = function () {\r\n    return this.dict;\r\n  };\r\n\r\n  Translation.prototype.get = function (key) {\r\n    return this.dict[key];\r\n  };\r\n\r\n  Translation.prototype.extend = function (translation) {\r\n    this.dict = $.extend({}, translation.all(), this.dict);\r\n  };\r\n\r\n  // Static functions\r\n\r\n  Translation._cache = {};\r\n\r\n  Translation.loadPath = function (path) {\r\n    if (!(path in Translation._cache)) {\r\n      var translations = require(path);\r\n\r\n      Translation._cache[path] = translations;\r\n    }\r\n\r\n    return new Translation(Translation._cache[path]);\r\n  };\r\n\r\n  return Translation;\r\n});\r\n\nS2.define('select2/diacritics',[\r\n\r\n], function () {\r\n  var diacritics = {\r\n    '\\u24B6': 'A',\r\n    '\\uFF21': 'A',\r\n    '\\u00C0': 'A',\r\n    '\\u00C1': 'A',\r\n    '\\u00C2': 'A',\r\n    '\\u1EA6': 'A',\r\n    '\\u1EA4': 'A',\r\n    '\\u1EAA': 'A',\r\n    '\\u1EA8': 'A',\r\n    '\\u00C3': 'A',\r\n    '\\u0100': 'A',\r\n    '\\u0102': 'A',\r\n    '\\u1EB0': 'A',\r\n    '\\u1EAE': 'A',\r\n    '\\u1EB4': 'A',\r\n    '\\u1EB2': 'A',\r\n    '\\u0226': 'A',\r\n    '\\u01E0': 'A',\r\n    '\\u00C4': 'A',\r\n    '\\u01DE': 'A',\r\n    '\\u1EA2': 'A',\r\n    '\\u00C5': 'A',\r\n    '\\u01FA': 'A',\r\n    '\\u01CD': 'A',\r\n    '\\u0200': 'A',\r\n    '\\u0202': 'A',\r\n    '\\u1EA0': 'A',\r\n    '\\u1EAC': 'A',\r\n    '\\u1EB6': 'A',\r\n    '\\u1E00': 'A',\r\n    '\\u0104': 'A',\r\n    '\\u023A': 'A',\r\n    '\\u2C6F': 'A',\r\n    '\\uA732': 'AA',\r\n    '\\u00C6': 'AE',\r\n    '\\u01FC': 'AE',\r\n    '\\u01E2': 'AE',\r\n    '\\uA734': 'AO',\r\n    '\\uA736': 'AU',\r\n    '\\uA738': 'AV',\r\n    '\\uA73A': 'AV',\r\n    '\\uA73C': 'AY',\r\n    '\\u24B7': 'B',\r\n    '\\uFF22': 'B',\r\n    '\\u1E02': 'B',\r\n    '\\u1E04': 'B',\r\n    '\\u1E06': 'B',\r\n    '\\u0243': 'B',\r\n    '\\u0182': 'B',\r\n    '\\u0181': 'B',\r\n    '\\u24B8': 'C',\r\n    '\\uFF23': 'C',\r\n    '\\u0106': 'C',\r\n    '\\u0108': 'C',\r\n    '\\u010A': 'C',\r\n    '\\u010C': 'C',\r\n    '\\u00C7': 'C',\r\n    '\\u1E08': 'C',\r\n    '\\u0187': 'C',\r\n    '\\u023B': 'C',\r\n    '\\uA73E': 'C',\r\n    '\\u24B9': 'D',\r\n    '\\uFF24': 'D',\r\n    '\\u1E0A': 'D',\r\n    '\\u010E': 'D',\r\n    '\\u1E0C': 'D',\r\n    '\\u1E10': 'D',\r\n    '\\u1E12': 'D',\r\n    '\\u1E0E': 'D',\r\n    '\\u0110': 'D',\r\n    '\\u018B': 'D',\r\n    '\\u018A': 'D',\r\n    '\\u0189': 'D',\r\n    '\\uA779': 'D',\r\n    '\\u01F1': 'DZ',\r\n    '\\u01C4': 'DZ',\r\n    '\\u01F2': 'Dz',\r\n    '\\u01C5': 'Dz',\r\n    '\\u24BA': 'E',\r\n    '\\uFF25': 'E',\r\n    '\\u00C8': 'E',\r\n    '\\u00C9': 'E',\r\n    '\\u00CA': 'E',\r\n    '\\u1EC0': 'E',\r\n    '\\u1EBE': 'E',\r\n    '\\u1EC4': 'E',\r\n    '\\u1EC2': 'E',\r\n    '\\u1EBC': 'E',\r\n    '\\u0112': 'E',\r\n    '\\u1E14': 'E',\r\n    '\\u1E16': 'E',\r\n    '\\u0114': 'E',\r\n    '\\u0116': 'E',\r\n    '\\u00CB': 'E',\r\n    '\\u1EBA': 'E',\r\n    '\\u011A': 'E',\r\n    '\\u0204': 'E',\r\n    '\\u0206': 'E',\r\n    '\\u1EB8': 'E',\r\n    '\\u1EC6': 'E',\r\n    '\\u0228': 'E',\r\n    '\\u1E1C': 'E',\r\n    '\\u0118': 'E',\r\n    '\\u1E18': 'E',\r\n    '\\u1E1A': 'E',\r\n    '\\u0190': 'E',\r\n    '\\u018E': 'E',\r\n    '\\u24BB': 'F',\r\n    '\\uFF26': 'F',\r\n    '\\u1E1E': 'F',\r\n    '\\u0191': 'F',\r\n    '\\uA77B': 'F',\r\n    '\\u24BC': 'G',\r\n    '\\uFF27': 'G',\r\n    '\\u01F4': 'G',\r\n    '\\u011C': 'G',\r\n    '\\u1E20': 'G',\r\n    '\\u011E': 'G',\r\n    '\\u0120': 'G',\r\n    '\\u01E6': 'G',\r\n    '\\u0122': 'G',\r\n    '\\u01E4': 'G',\r\n    '\\u0193': 'G',\r\n    '\\uA7A0': 'G',\r\n    '\\uA77D': 'G',\r\n    '\\uA77E': 'G',\r\n    '\\u24BD': 'H',\r\n    '\\uFF28': 'H',\r\n    '\\u0124': 'H',\r\n    '\\u1E22': 'H',\r\n    '\\u1E26': 'H',\r\n    '\\u021E': 'H',\r\n    '\\u1E24': 'H',\r\n    '\\u1E28': 'H',\r\n    '\\u1E2A': 'H',\r\n    '\\u0126': 'H',\r\n    '\\u2C67': 'H',\r\n    '\\u2C75': 'H',\r\n    '\\uA78D': 'H',\r\n    '\\u24BE': 'I',\r\n    '\\uFF29': 'I',\r\n    '\\u00CC': 'I',\r\n    '\\u00CD': 'I',\r\n    '\\u00CE': 'I',\r\n    '\\u0128': 'I',\r\n    '\\u012A': 'I',\r\n    '\\u012C': 'I',\r\n    '\\u0130': 'I',\r\n    '\\u00CF': 'I',\r\n    '\\u1E2E': 'I',\r\n    '\\u1EC8': 'I',\r\n    '\\u01CF': 'I',\r\n    '\\u0208': 'I',\r\n    '\\u020A': 'I',\r\n    '\\u1ECA': 'I',\r\n    '\\u012E': 'I',\r\n    '\\u1E2C': 'I',\r\n    '\\u0197': 'I',\r\n    '\\u24BF': 'J',\r\n    '\\uFF2A': 'J',\r\n    '\\u0134': 'J',\r\n    '\\u0248': 'J',\r\n    '\\u24C0': 'K',\r\n    '\\uFF2B': 'K',\r\n    '\\u1E30': 'K',\r\n    '\\u01E8': 'K',\r\n    '\\u1E32': 'K',\r\n    '\\u0136': 'K',\r\n    '\\u1E34': 'K',\r\n    '\\u0198': 'K',\r\n    '\\u2C69': 'K',\r\n    '\\uA740': 'K',\r\n    '\\uA742': 'K',\r\n    '\\uA744': 'K',\r\n    '\\uA7A2': 'K',\r\n    '\\u24C1': 'L',\r\n    '\\uFF2C': 'L',\r\n    '\\u013F': 'L',\r\n    '\\u0139': 'L',\r\n    '\\u013D': 'L',\r\n    '\\u1E36': 'L',\r\n    '\\u1E38': 'L',\r\n    '\\u013B': 'L',\r\n    '\\u1E3C': 'L',\r\n    '\\u1E3A': 'L',\r\n    '\\u0141': 'L',\r\n    '\\u023D': 'L',\r\n    '\\u2C62': 'L',\r\n    '\\u2C60': 'L',\r\n    '\\uA748': 'L',\r\n    '\\uA746': 'L',\r\n    '\\uA780': 'L',\r\n    '\\u01C7': 'LJ',\r\n    '\\u01C8': 'Lj',\r\n    '\\u24C2': 'M',\r\n    '\\uFF2D': 'M',\r\n    '\\u1E3E': 'M',\r\n    '\\u1E40': 'M',\r\n    '\\u1E42': 'M',\r\n    '\\u2C6E': 'M',\r\n    '\\u019C': 'M',\r\n    '\\u24C3': 'N',\r\n    '\\uFF2E': 'N',\r\n    '\\u01F8': 'N',\r\n    '\\u0143': 'N',\r\n    '\\u00D1': 'N',\r\n    '\\u1E44': 'N',\r\n    '\\u0147': 'N',\r\n    '\\u1E46': 'N',\r\n    '\\u0145': 'N',\r\n    '\\u1E4A': 'N',\r\n    '\\u1E48': 'N',\r\n    '\\u0220': 'N',\r\n    '\\u019D': 'N',\r\n    '\\uA790': 'N',\r\n    '\\uA7A4': 'N',\r\n    '\\u01CA': 'NJ',\r\n    '\\u01CB': 'Nj',\r\n    '\\u24C4': 'O',\r\n    '\\uFF2F': 'O',\r\n    '\\u00D2': 'O',\r\n    '\\u00D3': 'O',\r\n    '\\u00D4': 'O',\r\n    '\\u1ED2': 'O',\r\n    '\\u1ED0': 'O',\r\n    '\\u1ED6': 'O',\r\n    '\\u1ED4': 'O',\r\n    '\\u00D5': 'O',\r\n    '\\u1E4C': 'O',\r\n    '\\u022C': 'O',\r\n    '\\u1E4E': 'O',\r\n    '\\u014C': 'O',\r\n    '\\u1E50': 'O',\r\n    '\\u1E52': 'O',\r\n    '\\u014E': 'O',\r\n    '\\u022E': 'O',\r\n    '\\u0230': 'O',\r\n    '\\u00D6': 'O',\r\n    '\\u022A': 'O',\r\n    '\\u1ECE': 'O',\r\n    '\\u0150': 'O',\r\n    '\\u01D1': 'O',\r\n    '\\u020C': 'O',\r\n    '\\u020E': 'O',\r\n    '\\u01A0': 'O',\r\n    '\\u1EDC': 'O',\r\n    '\\u1EDA': 'O',\r\n    '\\u1EE0': 'O',\r\n    '\\u1EDE': 'O',\r\n    '\\u1EE2': 'O',\r\n    '\\u1ECC': 'O',\r\n    '\\u1ED8': 'O',\r\n    '\\u01EA': 'O',\r\n    '\\u01EC': 'O',\r\n    '\\u00D8': 'O',\r\n    '\\u01FE': 'O',\r\n    '\\u0186': 'O',\r\n    '\\u019F': 'O',\r\n    '\\uA74A': 'O',\r\n    '\\uA74C': 'O',\r\n    '\\u01A2': 'OI',\r\n    '\\uA74E': 'OO',\r\n    '\\u0222': 'OU',\r\n    '\\u24C5': 'P',\r\n    '\\uFF30': 'P',\r\n    '\\u1E54': 'P',\r\n    '\\u1E56': 'P',\r\n    '\\u01A4': 'P',\r\n    '\\u2C63': 'P',\r\n    '\\uA750': 'P',\r\n    '\\uA752': 'P',\r\n    '\\uA754': 'P',\r\n    '\\u24C6': 'Q',\r\n    '\\uFF31': 'Q',\r\n    '\\uA756': 'Q',\r\n    '\\uA758': 'Q',\r\n    '\\u024A': 'Q',\r\n    '\\u24C7': 'R',\r\n    '\\uFF32': 'R',\r\n    '\\u0154': 'R',\r\n    '\\u1E58': 'R',\r\n    '\\u0158': 'R',\r\n    '\\u0210': 'R',\r\n    '\\u0212': 'R',\r\n    '\\u1E5A': 'R',\r\n    '\\u1E5C': 'R',\r\n    '\\u0156': 'R',\r\n    '\\u1E5E': 'R',\r\n    '\\u024C': 'R',\r\n    '\\u2C64': 'R',\r\n    '\\uA75A': 'R',\r\n    '\\uA7A6': 'R',\r\n    '\\uA782': 'R',\r\n    '\\u24C8': 'S',\r\n    '\\uFF33': 'S',\r\n    '\\u1E9E': 'S',\r\n    '\\u015A': 'S',\r\n    '\\u1E64': 'S',\r\n    '\\u015C': 'S',\r\n    '\\u1E60': 'S',\r\n    '\\u0160': 'S',\r\n    '\\u1E66': 'S',\r\n    '\\u1E62': 'S',\r\n    '\\u1E68': 'S',\r\n    '\\u0218': 'S',\r\n    '\\u015E': 'S',\r\n    '\\u2C7E': 'S',\r\n    '\\uA7A8': 'S',\r\n    '\\uA784': 'S',\r\n    '\\u24C9': 'T',\r\n    '\\uFF34': 'T',\r\n    '\\u1E6A': 'T',\r\n    '\\u0164': 'T',\r\n    '\\u1E6C': 'T',\r\n    '\\u021A': 'T',\r\n    '\\u0162': 'T',\r\n    '\\u1E70': 'T',\r\n    '\\u1E6E': 'T',\r\n    '\\u0166': 'T',\r\n    '\\u01AC': 'T',\r\n    '\\u01AE': 'T',\r\n    '\\u023E': 'T',\r\n    '\\uA786': 'T',\r\n    '\\uA728': 'TZ',\r\n    '\\u24CA': 'U',\r\n    '\\uFF35': 'U',\r\n    '\\u00D9': 'U',\r\n    '\\u00DA': 'U',\r\n    '\\u00DB': 'U',\r\n    '\\u0168': 'U',\r\n    '\\u1E78': 'U',\r\n    '\\u016A': 'U',\r\n    '\\u1E7A': 'U',\r\n    '\\u016C': 'U',\r\n    '\\u00DC': 'U',\r\n    '\\u01DB': 'U',\r\n    '\\u01D7': 'U',\r\n    '\\u01D5': 'U',\r\n    '\\u01D9': 'U',\r\n    '\\u1EE6': 'U',\r\n    '\\u016E': 'U',\r\n    '\\u0170': 'U',\r\n    '\\u01D3': 'U',\r\n    '\\u0214': 'U',\r\n    '\\u0216': 'U',\r\n    '\\u01AF': 'U',\r\n    '\\u1EEA': 'U',\r\n    '\\u1EE8': 'U',\r\n    '\\u1EEE': 'U',\r\n    '\\u1EEC': 'U',\r\n    '\\u1EF0': 'U',\r\n    '\\u1EE4': 'U',\r\n    '\\u1E72': 'U',\r\n    '\\u0172': 'U',\r\n    '\\u1E76': 'U',\r\n    '\\u1E74': 'U',\r\n    '\\u0244': 'U',\r\n    '\\u24CB': 'V',\r\n    '\\uFF36': 'V',\r\n    '\\u1E7C': 'V',\r\n    '\\u1E7E': 'V',\r\n    '\\u01B2': 'V',\r\n    '\\uA75E': 'V',\r\n    '\\u0245': 'V',\r\n    '\\uA760': 'VY',\r\n    '\\u24CC': 'W',\r\n    '\\uFF37': 'W',\r\n    '\\u1E80': 'W',\r\n    '\\u1E82': 'W',\r\n    '\\u0174': 'W',\r\n    '\\u1E86': 'W',\r\n    '\\u1E84': 'W',\r\n    '\\u1E88': 'W',\r\n    '\\u2C72': 'W',\r\n    '\\u24CD': 'X',\r\n    '\\uFF38': 'X',\r\n    '\\u1E8A': 'X',\r\n    '\\u1E8C': 'X',\r\n    '\\u24CE': 'Y',\r\n    '\\uFF39': 'Y',\r\n    '\\u1EF2': 'Y',\r\n    '\\u00DD': 'Y',\r\n    '\\u0176': 'Y',\r\n    '\\u1EF8': 'Y',\r\n    '\\u0232': 'Y',\r\n    '\\u1E8E': 'Y',\r\n    '\\u0178': 'Y',\r\n    '\\u1EF6': 'Y',\r\n    '\\u1EF4': 'Y',\r\n    '\\u01B3': 'Y',\r\n    '\\u024E': 'Y',\r\n    '\\u1EFE': 'Y',\r\n    '\\u24CF': 'Z',\r\n    '\\uFF3A': 'Z',\r\n    '\\u0179': 'Z',\r\n    '\\u1E90': 'Z',\r\n    '\\u017B': 'Z',\r\n    '\\u017D': 'Z',\r\n    '\\u1E92': 'Z',\r\n    '\\u1E94': 'Z',\r\n    '\\u01B5': 'Z',\r\n    '\\u0224': 'Z',\r\n    '\\u2C7F': 'Z',\r\n    '\\u2C6B': 'Z',\r\n    '\\uA762': 'Z',\r\n    '\\u24D0': 'a',\r\n    '\\uFF41': 'a',\r\n    '\\u1E9A': 'a',\r\n    '\\u00E0': 'a',\r\n    '\\u00E1': 'a',\r\n    '\\u00E2': 'a',\r\n    '\\u1EA7': 'a',\r\n    '\\u1EA5': 'a',\r\n    '\\u1EAB': 'a',\r\n    '\\u1EA9': 'a',\r\n    '\\u00E3': 'a',\r\n    '\\u0101': 'a',\r\n    '\\u0103': 'a',\r\n    '\\u1EB1': 'a',\r\n    '\\u1EAF': 'a',\r\n    '\\u1EB5': 'a',\r\n    '\\u1EB3': 'a',\r\n    '\\u0227': 'a',\r\n    '\\u01E1': 'a',\r\n    '\\u00E4': 'a',\r\n    '\\u01DF': 'a',\r\n    '\\u1EA3': 'a',\r\n    '\\u00E5': 'a',\r\n    '\\u01FB': 'a',\r\n    '\\u01CE': 'a',\r\n    '\\u0201': 'a',\r\n    '\\u0203': 'a',\r\n    '\\u1EA1': 'a',\r\n    '\\u1EAD': 'a',\r\n    '\\u1EB7': 'a',\r\n    '\\u1E01': 'a',\r\n    '\\u0105': 'a',\r\n    '\\u2C65': 'a',\r\n    '\\u0250': 'a',\r\n    '\\uA733': 'aa',\r\n    '\\u00E6': 'ae',\r\n    '\\u01FD': 'ae',\r\n    '\\u01E3': 'ae',\r\n    '\\uA735': 'ao',\r\n    '\\uA737': 'au',\r\n    '\\uA739': 'av',\r\n    '\\uA73B': 'av',\r\n    '\\uA73D': 'ay',\r\n    '\\u24D1': 'b',\r\n    '\\uFF42': 'b',\r\n    '\\u1E03': 'b',\r\n    '\\u1E05': 'b',\r\n    '\\u1E07': 'b',\r\n    '\\u0180': 'b',\r\n    '\\u0183': 'b',\r\n    '\\u0253': 'b',\r\n    '\\u24D2': 'c',\r\n    '\\uFF43': 'c',\r\n    '\\u0107': 'c',\r\n    '\\u0109': 'c',\r\n    '\\u010B': 'c',\r\n    '\\u010D': 'c',\r\n    '\\u00E7': 'c',\r\n    '\\u1E09': 'c',\r\n    '\\u0188': 'c',\r\n    '\\u023C': 'c',\r\n    '\\uA73F': 'c',\r\n    '\\u2184': 'c',\r\n    '\\u24D3': 'd',\r\n    '\\uFF44': 'd',\r\n    '\\u1E0B': 'd',\r\n    '\\u010F': 'd',\r\n    '\\u1E0D': 'd',\r\n    '\\u1E11': 'd',\r\n    '\\u1E13': 'd',\r\n    '\\u1E0F': 'd',\r\n    '\\u0111': 'd',\r\n    '\\u018C': 'd',\r\n    '\\u0256': 'd',\r\n    '\\u0257': 'd',\r\n    '\\uA77A': 'd',\r\n    '\\u01F3': 'dz',\r\n    '\\u01C6': 'dz',\r\n    '\\u24D4': 'e',\r\n    '\\uFF45': 'e',\r\n    '\\u00E8': 'e',\r\n    '\\u00E9': 'e',\r\n    '\\u00EA': 'e',\r\n    '\\u1EC1': 'e',\r\n    '\\u1EBF': 'e',\r\n    '\\u1EC5': 'e',\r\n    '\\u1EC3': 'e',\r\n    '\\u1EBD': 'e',\r\n    '\\u0113': 'e',\r\n    '\\u1E15': 'e',\r\n    '\\u1E17': 'e',\r\n    '\\u0115': 'e',\r\n    '\\u0117': 'e',\r\n    '\\u00EB': 'e',\r\n    '\\u1EBB': 'e',\r\n    '\\u011B': 'e',\r\n    '\\u0205': 'e',\r\n    '\\u0207': 'e',\r\n    '\\u1EB9': 'e',\r\n    '\\u1EC7': 'e',\r\n    '\\u0229': 'e',\r\n    '\\u1E1D': 'e',\r\n    '\\u0119': 'e',\r\n    '\\u1E19': 'e',\r\n    '\\u1E1B': 'e',\r\n    '\\u0247': 'e',\r\n    '\\u025B': 'e',\r\n    '\\u01DD': 'e',\r\n    '\\u24D5': 'f',\r\n    '\\uFF46': 'f',\r\n    '\\u1E1F': 'f',\r\n    '\\u0192': 'f',\r\n    '\\uA77C': 'f',\r\n    '\\u24D6': 'g',\r\n    '\\uFF47': 'g',\r\n    '\\u01F5': 'g',\r\n    '\\u011D': 'g',\r\n    '\\u1E21': 'g',\r\n    '\\u011F': 'g',\r\n    '\\u0121': 'g',\r\n    '\\u01E7': 'g',\r\n    '\\u0123': 'g',\r\n    '\\u01E5': 'g',\r\n    '\\u0260': 'g',\r\n    '\\uA7A1': 'g',\r\n    '\\u1D79': 'g',\r\n    '\\uA77F': 'g',\r\n    '\\u24D7': 'h',\r\n    '\\uFF48': 'h',\r\n    '\\u0125': 'h',\r\n    '\\u1E23': 'h',\r\n    '\\u1E27': 'h',\r\n    '\\u021F': 'h',\r\n    '\\u1E25': 'h',\r\n    '\\u1E29': 'h',\r\n    '\\u1E2B': 'h',\r\n    '\\u1E96': 'h',\r\n    '\\u0127': 'h',\r\n    '\\u2C68': 'h',\r\n    '\\u2C76': 'h',\r\n    '\\u0265': 'h',\r\n    '\\u0195': 'hv',\r\n    '\\u24D8': 'i',\r\n    '\\uFF49': 'i',\r\n    '\\u00EC': 'i',\r\n    '\\u00ED': 'i',\r\n    '\\u00EE': 'i',\r\n    '\\u0129': 'i',\r\n    '\\u012B': 'i',\r\n    '\\u012D': 'i',\r\n    '\\u00EF': 'i',\r\n    '\\u1E2F': 'i',\r\n    '\\u1EC9': 'i',\r\n    '\\u01D0': 'i',\r\n    '\\u0209': 'i',\r\n    '\\u020B': 'i',\r\n    '\\u1ECB': 'i',\r\n    '\\u012F': 'i',\r\n    '\\u1E2D': 'i',\r\n    '\\u0268': 'i',\r\n    '\\u0131': 'i',\r\n    '\\u24D9': 'j',\r\n    '\\uFF4A': 'j',\r\n    '\\u0135': 'j',\r\n    '\\u01F0': 'j',\r\n    '\\u0249': 'j',\r\n    '\\u24DA': 'k',\r\n    '\\uFF4B': 'k',\r\n    '\\u1E31': 'k',\r\n    '\\u01E9': 'k',\r\n    '\\u1E33': 'k',\r\n    '\\u0137': 'k',\r\n    '\\u1E35': 'k',\r\n    '\\u0199': 'k',\r\n    '\\u2C6A': 'k',\r\n    '\\uA741': 'k',\r\n    '\\uA743': 'k',\r\n    '\\uA745': 'k',\r\n    '\\uA7A3': 'k',\r\n    '\\u24DB': 'l',\r\n    '\\uFF4C': 'l',\r\n    '\\u0140': 'l',\r\n    '\\u013A': 'l',\r\n    '\\u013E': 'l',\r\n    '\\u1E37': 'l',\r\n    '\\u1E39': 'l',\r\n    '\\u013C': 'l',\r\n    '\\u1E3D': 'l',\r\n    '\\u1E3B': 'l',\r\n    '\\u017F': 'l',\r\n    '\\u0142': 'l',\r\n    '\\u019A': 'l',\r\n    '\\u026B': 'l',\r\n    '\\u2C61': 'l',\r\n    '\\uA749': 'l',\r\n    '\\uA781': 'l',\r\n    '\\uA747': 'l',\r\n    '\\u01C9': 'lj',\r\n    '\\u24DC': 'm',\r\n    '\\uFF4D': 'm',\r\n    '\\u1E3F': 'm',\r\n    '\\u1E41': 'm',\r\n    '\\u1E43': 'm',\r\n    '\\u0271': 'm',\r\n    '\\u026F': 'm',\r\n    '\\u24DD': 'n',\r\n    '\\uFF4E': 'n',\r\n    '\\u01F9': 'n',\r\n    '\\u0144': 'n',\r\n    '\\u00F1': 'n',\r\n    '\\u1E45': 'n',\r\n    '\\u0148': 'n',\r\n    '\\u1E47': 'n',\r\n    '\\u0146': 'n',\r\n    '\\u1E4B': 'n',\r\n    '\\u1E49': 'n',\r\n    '\\u019E': 'n',\r\n    '\\u0272': 'n',\r\n    '\\u0149': 'n',\r\n    '\\uA791': 'n',\r\n    '\\uA7A5': 'n',\r\n    '\\u01CC': 'nj',\r\n    '\\u24DE': 'o',\r\n    '\\uFF4F': 'o',\r\n    '\\u00F2': 'o',\r\n    '\\u00F3': 'o',\r\n    '\\u00F4': 'o',\r\n    '\\u1ED3': 'o',\r\n    '\\u1ED1': 'o',\r\n    '\\u1ED7': 'o',\r\n    '\\u1ED5': 'o',\r\n    '\\u00F5': 'o',\r\n    '\\u1E4D': 'o',\r\n    '\\u022D': 'o',\r\n    '\\u1E4F': 'o',\r\n    '\\u014D': 'o',\r\n    '\\u1E51': 'o',\r\n    '\\u1E53': 'o',\r\n    '\\u014F': 'o',\r\n    '\\u022F': 'o',\r\n    '\\u0231': 'o',\r\n    '\\u00F6': 'o',\r\n    '\\u022B': 'o',\r\n    '\\u1ECF': 'o',\r\n    '\\u0151': 'o',\r\n    '\\u01D2': 'o',\r\n    '\\u020D': 'o',\r\n    '\\u020F': 'o',\r\n    '\\u01A1': 'o',\r\n    '\\u1EDD': 'o',\r\n    '\\u1EDB': 'o',\r\n    '\\u1EE1': 'o',\r\n    '\\u1EDF': 'o',\r\n    '\\u1EE3': 'o',\r\n    '\\u1ECD': 'o',\r\n    '\\u1ED9': 'o',\r\n    '\\u01EB': 'o',\r\n    '\\u01ED': 'o',\r\n    '\\u00F8': 'o',\r\n    '\\u01FF': 'o',\r\n    '\\u0254': 'o',\r\n    '\\uA74B': 'o',\r\n    '\\uA74D': 'o',\r\n    '\\u0275': 'o',\r\n    '\\u01A3': 'oi',\r\n    '\\u0223': 'ou',\r\n    '\\uA74F': 'oo',\r\n    '\\u24DF': 'p',\r\n    '\\uFF50': 'p',\r\n    '\\u1E55': 'p',\r\n    '\\u1E57': 'p',\r\n    '\\u01A5': 'p',\r\n    '\\u1D7D': 'p',\r\n    '\\uA751': 'p',\r\n    '\\uA753': 'p',\r\n    '\\uA755': 'p',\r\n    '\\u24E0': 'q',\r\n    '\\uFF51': 'q',\r\n    '\\u024B': 'q',\r\n    '\\uA757': 'q',\r\n    '\\uA759': 'q',\r\n    '\\u24E1': 'r',\r\n    '\\uFF52': 'r',\r\n    '\\u0155': 'r',\r\n    '\\u1E59': 'r',\r\n    '\\u0159': 'r',\r\n    '\\u0211': 'r',\r\n    '\\u0213': 'r',\r\n    '\\u1E5B': 'r',\r\n    '\\u1E5D': 'r',\r\n    '\\u0157': 'r',\r\n    '\\u1E5F': 'r',\r\n    '\\u024D': 'r',\r\n    '\\u027D': 'r',\r\n    '\\uA75B': 'r',\r\n    '\\uA7A7': 'r',\r\n    '\\uA783': 'r',\r\n    '\\u24E2': 's',\r\n    '\\uFF53': 's',\r\n    '\\u00DF': 's',\r\n    '\\u015B': 's',\r\n    '\\u1E65': 's',\r\n    '\\u015D': 's',\r\n    '\\u1E61': 's',\r\n    '\\u0161': 's',\r\n    '\\u1E67': 's',\r\n    '\\u1E63': 's',\r\n    '\\u1E69': 's',\r\n    '\\u0219': 's',\r\n    '\\u015F': 's',\r\n    '\\u023F': 's',\r\n    '\\uA7A9': 's',\r\n    '\\uA785': 's',\r\n    '\\u1E9B': 's',\r\n    '\\u24E3': 't',\r\n    '\\uFF54': 't',\r\n    '\\u1E6B': 't',\r\n    '\\u1E97': 't',\r\n    '\\u0165': 't',\r\n    '\\u1E6D': 't',\r\n    '\\u021B': 't',\r\n    '\\u0163': 't',\r\n    '\\u1E71': 't',\r\n    '\\u1E6F': 't',\r\n    '\\u0167': 't',\r\n    '\\u01AD': 't',\r\n    '\\u0288': 't',\r\n    '\\u2C66': 't',\r\n    '\\uA787': 't',\r\n    '\\uA729': 'tz',\r\n    '\\u24E4': 'u',\r\n    '\\uFF55': 'u',\r\n    '\\u00F9': 'u',\r\n    '\\u00FA': 'u',\r\n    '\\u00FB': 'u',\r\n    '\\u0169': 'u',\r\n    '\\u1E79': 'u',\r\n    '\\u016B': 'u',\r\n    '\\u1E7B': 'u',\r\n    '\\u016D': 'u',\r\n    '\\u00FC': 'u',\r\n    '\\u01DC': 'u',\r\n    '\\u01D8': 'u',\r\n    '\\u01D6': 'u',\r\n    '\\u01DA': 'u',\r\n    '\\u1EE7': 'u',\r\n    '\\u016F': 'u',\r\n    '\\u0171': 'u',\r\n    '\\u01D4': 'u',\r\n    '\\u0215': 'u',\r\n    '\\u0217': 'u',\r\n    '\\u01B0': 'u',\r\n    '\\u1EEB': 'u',\r\n    '\\u1EE9': 'u',\r\n    '\\u1EEF': 'u',\r\n    '\\u1EED': 'u',\r\n    '\\u1EF1': 'u',\r\n    '\\u1EE5': 'u',\r\n    '\\u1E73': 'u',\r\n    '\\u0173': 'u',\r\n    '\\u1E77': 'u',\r\n    '\\u1E75': 'u',\r\n    '\\u0289': 'u',\r\n    '\\u24E5': 'v',\r\n    '\\uFF56': 'v',\r\n    '\\u1E7D': 'v',\r\n    '\\u1E7F': 'v',\r\n    '\\u028B': 'v',\r\n    '\\uA75F': 'v',\r\n    '\\u028C': 'v',\r\n    '\\uA761': 'vy',\r\n    '\\u24E6': 'w',\r\n    '\\uFF57': 'w',\r\n    '\\u1E81': 'w',\r\n    '\\u1E83': 'w',\r\n    '\\u0175': 'w',\r\n    '\\u1E87': 'w',\r\n    '\\u1E85': 'w',\r\n    '\\u1E98': 'w',\r\n    '\\u1E89': 'w',\r\n    '\\u2C73': 'w',\r\n    '\\u24E7': 'x',\r\n    '\\uFF58': 'x',\r\n    '\\u1E8B': 'x',\r\n    '\\u1E8D': 'x',\r\n    '\\u24E8': 'y',\r\n    '\\uFF59': 'y',\r\n    '\\u1EF3': 'y',\r\n    '\\u00FD': 'y',\r\n    '\\u0177': 'y',\r\n    '\\u1EF9': 'y',\r\n    '\\u0233': 'y',\r\n    '\\u1E8F': 'y',\r\n    '\\u00FF': 'y',\r\n    '\\u1EF7': 'y',\r\n    '\\u1E99': 'y',\r\n    '\\u1EF5': 'y',\r\n    '\\u01B4': 'y',\r\n    '\\u024F': 'y',\r\n    '\\u1EFF': 'y',\r\n    '\\u24E9': 'z',\r\n    '\\uFF5A': 'z',\r\n    '\\u017A': 'z',\r\n    '\\u1E91': 'z',\r\n    '\\u017C': 'z',\r\n    '\\u017E': 'z',\r\n    '\\u1E93': 'z',\r\n    '\\u1E95': 'z',\r\n    '\\u01B6': 'z',\r\n    '\\u0225': 'z',\r\n    '\\u0240': 'z',\r\n    '\\u2C6C': 'z',\r\n    '\\uA763': 'z',\r\n    '\\u0386': '\\u0391',\r\n    '\\u0388': '\\u0395',\r\n    '\\u0389': '\\u0397',\r\n    '\\u038A': '\\u0399',\r\n    '\\u03AA': '\\u0399',\r\n    '\\u038C': '\\u039F',\r\n    '\\u038E': '\\u03A5',\r\n    '\\u03AB': '\\u03A5',\r\n    '\\u038F': '\\u03A9',\r\n    '\\u03AC': '\\u03B1',\r\n    '\\u03AD': '\\u03B5',\r\n    '\\u03AE': '\\u03B7',\r\n    '\\u03AF': '\\u03B9',\r\n    '\\u03CA': '\\u03B9',\r\n    '\\u0390': '\\u03B9',\r\n    '\\u03CC': '\\u03BF',\r\n    '\\u03CD': '\\u03C5',\r\n    '\\u03CB': '\\u03C5',\r\n    '\\u03B0': '\\u03C5',\r\n    '\\u03C9': '\\u03C9',\r\n    '\\u03C2': '\\u03C3'\r\n  };\r\n\r\n  return diacritics;\r\n});\r\n\nS2.define('select2/data/base',[\r\n  '../utils'\r\n], function (Utils) {\r\n  function BaseAdapter ($element, options) {\r\n    BaseAdapter.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(BaseAdapter, Utils.Observable);\r\n\r\n  BaseAdapter.prototype.current = function (callback) {\r\n    throw new Error('The `current` method must be defined in child classes.');\r\n  };\r\n\r\n  BaseAdapter.prototype.query = function (params, callback) {\r\n    throw new Error('The `query` method must be defined in child classes.');\r\n  };\r\n\r\n  BaseAdapter.prototype.bind = function (container, $container) {\r\n    // Can be implemented in subclasses\r\n  };\r\n\r\n  BaseAdapter.prototype.destroy = function () {\r\n    // Can be implemented in subclasses\r\n  };\r\n\r\n  BaseAdapter.prototype.generateResultId = function (container, data) {\r\n    var id = container.id + '-result-';\r\n\r\n    id += Utils.generateChars(4);\r\n\r\n    if (data.id != null) {\r\n      id += '-' + data.id.toString();\r\n    } else {\r\n      id += '-' + Utils.generateChars(4);\r\n    }\r\n    return id;\r\n  };\r\n\r\n  return BaseAdapter;\r\n});\r\n\nS2.define('select2/data/select',[\r\n  './base',\r\n  '../utils',\r\n  'jquery'\r\n], function (BaseAdapter, Utils, $) {\r\n  function SelectAdapter ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    SelectAdapter.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(SelectAdapter, BaseAdapter);\r\n\r\n  SelectAdapter.prototype.current = function (callback) {\r\n    var data = [];\r\n    var self = this;\r\n\r\n    this.$element.find(':selected').each(function () {\r\n      var $option = $(this);\r\n\r\n      var option = self.item($option);\r\n\r\n      data.push(option);\r\n    });\r\n\r\n    callback(data);\r\n  };\r\n\r\n  SelectAdapter.prototype.select = function (data) {\r\n    var self = this;\r\n\r\n    data.selected = true;\r\n\r\n    // If data.element is a DOM node, use it instead\r\n    if ($(data.element).is('option')) {\r\n      data.element.selected = true;\r\n\r\n      this.$element.trigger('change');\r\n\r\n      return;\r\n    }\r\n\r\n    if (this.$element.prop('multiple')) {\r\n      this.current(function (currentData) {\r\n        var val = [];\r\n\r\n        data = [data];\r\n        data.push.apply(data, currentData);\r\n\r\n        for (var d = 0; d < data.length; d++) {\r\n          var id = data[d].id;\r\n\r\n          if ($.inArray(id, val) === -1) {\r\n            val.push(id);\r\n          }\r\n        }\r\n\r\n        self.$element.val(val);\r\n        self.$element.trigger('change');\r\n      });\r\n    } else {\r\n      var val = data.id;\r\n\r\n      this.$element.val(val);\r\n      this.$element.trigger('change');\r\n    }\r\n  };\r\n\r\n  SelectAdapter.prototype.unselect = function (data) {\r\n    var self = this;\r\n\r\n    if (!this.$element.prop('multiple')) {\r\n      return;\r\n    }\r\n\r\n    data.selected = false;\r\n\r\n    if ($(data.element).is('option')) {\r\n      data.element.selected = false;\r\n\r\n      this.$element.trigger('change');\r\n\r\n      return;\r\n    }\r\n\r\n    this.current(function (currentData) {\r\n      var val = [];\r\n\r\n      for (var d = 0; d < currentData.length; d++) {\r\n        var id = currentData[d].id;\r\n\r\n        if (id !== data.id && $.inArray(id, val) === -1) {\r\n          val.push(id);\r\n        }\r\n      }\r\n\r\n      self.$element.val(val);\r\n\r\n      self.$element.trigger('change');\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    this.container = container;\r\n\r\n    container.on('select', function (params) {\r\n      self.select(params.data);\r\n    });\r\n\r\n    container.on('unselect', function (params) {\r\n      self.unselect(params.data);\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.destroy = function () {\r\n    // Remove anything added to child elements\r\n    this.$element.find('*').each(function () {\r\n      // Remove any custom data set by Select2\r\n      $.removeData(this, 'data');\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.query = function (params, callback) {\r\n    var data = [];\r\n    var self = this;\r\n\r\n    var $options = this.$element.children();\r\n\r\n    $options.each(function () {\r\n      var $option = $(this);\r\n\r\n      if (!$option.is('option') && !$option.is('optgroup')) {\r\n        return;\r\n      }\r\n\r\n      var option = self.item($option);\r\n\r\n      var matches = self.matches(params, option);\r\n\r\n      if (matches !== null) {\r\n        data.push(matches);\r\n      }\r\n    });\r\n\r\n    callback({\r\n      results: data\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.addOptions = function ($options) {\r\n    Utils.appendMany(this.$element, $options);\r\n  };\r\n\r\n  SelectAdapter.prototype.option = function (data) {\r\n    var option;\r\n\r\n    if (data.children) {\r\n      option = document.createElement('optgroup');\r\n      option.label = data.text;\r\n    } else {\r\n      option = document.createElement('option');\r\n\r\n      if (option.textContent !== undefined) {\r\n        option.textContent = data.text;\r\n      } else {\r\n        option.innerText = data.text;\r\n      }\r\n    }\r\n\r\n    if (data.id) {\r\n      option.value = data.id;\r\n    }\r\n\r\n    if (data.disabled) {\r\n      option.disabled = true;\r\n    }\r\n\r\n    if (data.selected) {\r\n      option.selected = true;\r\n    }\r\n\r\n    if (data.title) {\r\n      option.title = data.title;\r\n    }\r\n\r\n    var $option = $(option);\r\n\r\n    var normalizedData = this._normalizeItem(data);\r\n    normalizedData.element = option;\r\n\r\n    // Override the option's data with the combined data\r\n    $.data(option, 'data', normalizedData);\r\n\r\n    return $option;\r\n  };\r\n\r\n  SelectAdapter.prototype.item = function ($option) {\r\n    var data = {};\r\n\r\n    data = $.data($option[0], 'data');\r\n\r\n    if (data != null) {\r\n      return data;\r\n    }\r\n\r\n    if ($option.is('option')) {\r\n      data = {\r\n        id: $option.val(),\r\n        text: $option.text(),\r\n        disabled: $option.prop('disabled'),\r\n        selected: $option.prop('selected'),\r\n        title: $option.prop('title')\r\n      };\r\n    } else if ($option.is('optgroup')) {\r\n      data = {\r\n        text: $option.prop('label'),\r\n        children: [],\r\n        title: $option.prop('title')\r\n      };\r\n\r\n      var $children = $option.children('option');\r\n      var children = [];\r\n\r\n      for (var c = 0; c < $children.length; c++) {\r\n        var $child = $($children[c]);\r\n\r\n        var child = this.item($child);\r\n\r\n        children.push(child);\r\n      }\r\n\r\n      data.children = children;\r\n    }\r\n\r\n    data = this._normalizeItem(data);\r\n    data.element = $option[0];\r\n\r\n    $.data($option[0], 'data', data);\r\n\r\n    return data;\r\n  };\r\n\r\n  SelectAdapter.prototype._normalizeItem = function (item) {\r\n    if (!$.isPlainObject(item)) {\r\n      item = {\r\n        id: item,\r\n        text: item\r\n      };\r\n    }\r\n\r\n    item = $.extend({}, {\r\n      text: ''\r\n    }, item);\r\n\r\n    var defaults = {\r\n      selected: false,\r\n      disabled: false\r\n    };\r\n\r\n    if (item.id != null) {\r\n      item.id = item.id.toString();\r\n    }\r\n\r\n    if (item.text != null) {\r\n      item.text = item.text.toString();\r\n    }\r\n\r\n    if (item._resultId == null && item.id && this.container != null) {\r\n      item._resultId = this.generateResultId(this.container, item);\r\n    }\r\n\r\n    return $.extend({}, defaults, item);\r\n  };\r\n\r\n  SelectAdapter.prototype.matches = function (params, data) {\r\n    var matcher = this.options.get('matcher');\r\n\r\n    return matcher(params, data);\r\n  };\r\n\r\n  return SelectAdapter;\r\n});\r\n\nS2.define('select2/data/array',[\r\n  './select',\r\n  '../utils',\r\n  'jquery'\r\n], function (SelectAdapter, Utils, $) {\r\n  function ArrayAdapter ($element, options) {\r\n    var data = options.get('data') || [];\r\n\r\n    ArrayAdapter.__super__.constructor.call(this, $element, options);\r\n\r\n    this.addOptions(this.convertToOptions(data));\r\n  }\r\n\r\n  Utils.Extend(ArrayAdapter, SelectAdapter);\r\n\r\n  ArrayAdapter.prototype.select = function (data) {\r\n    var $option = this.$element.find('option').filter(function (i, elm) {\r\n      return elm.value == data.id.toString();\r\n    });\r\n\r\n    if ($option.length === 0) {\r\n      $option = this.option(data);\r\n\r\n      this.addOptions($option);\r\n    }\r\n\r\n    ArrayAdapter.__super__.select.call(this, data);\r\n  };\r\n\r\n  ArrayAdapter.prototype.convertToOptions = function (data) {\r\n    var self = this;\r\n\r\n    var $existing = this.$element.find('option');\r\n    var existingIds = $existing.map(function () {\r\n      return self.item($(this)).id;\r\n    }).get();\r\n\r\n    var $options = [];\r\n\r\n    // Filter out all items except for the one passed in the argument\r\n    function onlyItem (item) {\r\n      return function () {\r\n        return $(this).val() == item.id;\r\n      };\r\n    }\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var item = this._normalizeItem(data[d]);\r\n\r\n      // Skip items which were pre-loaded, only merge the data\r\n      if ($.inArray(item.id, existingIds) >= 0) {\r\n        var $existingOption = $existing.filter(onlyItem(item));\r\n\r\n        var existingData = this.item($existingOption);\r\n        var newData = $.extend(true, {}, item, existingData);\r\n\r\n        var $newOption = this.option(newData);\r\n\r\n        $existingOption.replaceWith($newOption);\r\n\r\n        continue;\r\n      }\r\n\r\n      var $option = this.option(item);\r\n\r\n      if (item.children) {\r\n        var $children = this.convertToOptions(item.children);\r\n\r\n        Utils.appendMany($option, $children);\r\n      }\r\n\r\n      $options.push($option);\r\n    }\r\n\r\n    return $options;\r\n  };\r\n\r\n  return ArrayAdapter;\r\n});\r\n\nS2.define('select2/data/ajax',[\r\n  './array',\r\n  '../utils',\r\n  'jquery'\r\n], function (ArrayAdapter, Utils, $) {\r\n  function AjaxAdapter ($element, options) {\r\n    this.ajaxOptions = this._applyDefaults(options.get('ajax'));\r\n\r\n    if (this.ajaxOptions.processResults != null) {\r\n      this.processResults = this.ajaxOptions.processResults;\r\n    }\r\n\r\n    AjaxAdapter.__super__.constructor.call(this, $element, options);\r\n  }\r\n\r\n  Utils.Extend(AjaxAdapter, ArrayAdapter);\r\n\r\n  AjaxAdapter.prototype._applyDefaults = function (options) {\r\n    var defaults = {\r\n      data: function (params) {\r\n        return $.extend({}, params, {\r\n          q: params.term\r\n        });\r\n      },\r\n      transport: function (params, success, failure) {\r\n        var $request = $.ajax(params);\r\n\r\n        $request.then(success);\r\n        $request.fail(failure);\r\n\r\n        return $request;\r\n      }\r\n    };\r\n\r\n    return $.extend({}, defaults, options, true);\r\n  };\r\n\r\n  AjaxAdapter.prototype.processResults = function (results) {\r\n    return results;\r\n  };\r\n\r\n  AjaxAdapter.prototype.query = function (params, callback) {\r\n    var matches = [];\r\n    var self = this;\r\n\r\n    if (this._request != null) {\r\n      // JSONP requests cannot always be aborted\r\n      if ($.isFunction(this._request.abort)) {\r\n        this._request.abort();\r\n      }\r\n\r\n      this._request = null;\r\n    }\r\n\r\n    var options = $.extend({\r\n      type: 'GET'\r\n    }, this.ajaxOptions);\r\n\r\n    if (typeof options.url === 'function') {\r\n      options.url = options.url.call(this.$element, params);\r\n    }\r\n\r\n    if (typeof options.data === 'function') {\r\n      options.data = options.data.call(this.$element, params);\r\n    }\r\n\r\n    function request () {\r\n      var $request = options.transport(options, function (data) {\r\n        var results = self.processResults(data, params);\r\n\r\n        if (self.options.get('debug') && window.console && console.error) {\r\n          // Check to make sure that the response included a `results` key.\r\n          if (!results || !results.results || !$.isArray(results.results)) {\r\n            console.error(\r\n              'Select2: The AJAX results did not return an array in the ' +\r\n              '`results` key of the response.'\r\n            );\r\n          }\r\n        }\r\n\r\n        callback(results);\r\n      }, function () {\r\n        // Attempt to detect if a request was aborted\r\n        // Only works if the transport exposes a status property\r\n        if ($request.status && $request.status === '0') {\r\n          return;\r\n        }\r\n\r\n        self.trigger('results:message', {\r\n          message: 'errorLoading'\r\n        });\r\n      });\r\n\r\n      self._request = $request;\r\n    }\r\n\r\n    if (this.ajaxOptions.delay && params.term != null) {\r\n      if (this._queryTimeout) {\r\n        window.clearTimeout(this._queryTimeout);\r\n      }\r\n\r\n      this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay);\r\n    } else {\r\n      request();\r\n    }\r\n  };\r\n\r\n  return AjaxAdapter;\r\n});\r\n\nS2.define('select2/data/tags',[\r\n  'jquery'\r\n], function ($) {\r\n  function Tags (decorated, $element, options) {\r\n    var tags = options.get('tags');\r\n\r\n    var createTag = options.get('createTag');\r\n\r\n    if (createTag !== undefined) {\r\n      this.createTag = createTag;\r\n    }\r\n\r\n    var insertTag = options.get('insertTag');\r\n\r\n    if (insertTag !== undefined) {\r\n        this.insertTag = insertTag;\r\n    }\r\n\r\n    decorated.call(this, $element, options);\r\n\r\n    if ($.isArray(tags)) {\r\n      for (var t = 0; t < tags.length; t++) {\r\n        var tag = tags[t];\r\n        var item = this._normalizeItem(tag);\r\n\r\n        var $option = this.option(item);\r\n\r\n        this.$element.append($option);\r\n      }\r\n    }\r\n  }\r\n\r\n  Tags.prototype.query = function (decorated, params, callback) {\r\n    var self = this;\r\n\r\n    this._removeOldTags();\r\n\r\n    if (params.term == null || params.page != null) {\r\n      decorated.call(this, params, callback);\r\n      return;\r\n    }\r\n\r\n    function wrapper (obj, child) {\r\n      var data = obj.results;\r\n\r\n      for (var i = 0; i < data.length; i++) {\r\n        var option = data[i];\r\n\r\n        var checkChildren = (\r\n          option.children != null &&\r\n          !wrapper({\r\n            results: option.children\r\n          }, true)\r\n        );\r\n\r\n        var checkText = option.text === params.term;\r\n\r\n        if (checkText || checkChildren) {\r\n          if (child) {\r\n            return false;\r\n          }\r\n\r\n          obj.data = data;\r\n          callback(obj);\r\n\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (child) {\r\n        return true;\r\n      }\r\n\r\n      var tag = self.createTag(params);\r\n\r\n      if (tag != null) {\r\n        var $option = self.option(tag);\r\n        $option.attr('data-select2-tag', true);\r\n\r\n        self.addOptions([$option]);\r\n\r\n        self.insertTag(data, tag);\r\n      }\r\n\r\n      obj.results = data;\r\n\r\n      callback(obj);\r\n    }\r\n\r\n    decorated.call(this, params, wrapper);\r\n  };\r\n\r\n  Tags.prototype.createTag = function (decorated, params) {\r\n    var term = $.trim(params.term);\r\n\r\n    if (term === '') {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      id: term,\r\n      text: term\r\n    };\r\n  };\r\n\r\n  Tags.prototype.insertTag = function (_, data, tag) {\r\n    data.unshift(tag);\r\n  };\r\n\r\n  Tags.prototype._removeOldTags = function (_) {\r\n    var tag = this._lastTag;\r\n\r\n    var $options = this.$element.find('option[data-select2-tag]');\r\n\r\n    $options.each(function () {\r\n      if (this.selected) {\r\n        return;\r\n      }\r\n\r\n      $(this).remove();\r\n    });\r\n  };\r\n\r\n  return Tags;\r\n});\r\n\nS2.define('select2/data/tokenizer',[\r\n  'jquery'\r\n], function ($) {\r\n  function Tokenizer (decorated, $element, options) {\r\n    var tokenizer = options.get('tokenizer');\r\n\r\n    if (tokenizer !== undefined) {\r\n      this.tokenizer = tokenizer;\r\n    }\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Tokenizer.prototype.bind = function (decorated, container, $container) {\r\n    decorated.call(this, container, $container);\r\n\r\n    this.$search =  container.dropdown.$search || container.selection.$search ||\r\n      $container.find('.select2-search__field');\r\n  };\r\n\r\n  Tokenizer.prototype.query = function (decorated, params, callback) {\r\n    var self = this;\r\n\r\n    function createAndSelect (data) {\r\n      // Normalize the data object so we can use it for checks\r\n      var item = self._normalizeItem(data);\r\n\r\n      // Check if the data object already exists as a tag\r\n      // Select it if it doesn't\r\n      var $existingOptions = self.$element.find('option').filter(function () {\r\n        return $(this).val() === item.id;\r\n      });\r\n\r\n      // If an existing option wasn't found for it, create the option\r\n      if (!$existingOptions.length) {\r\n        var $option = self.option(item);\r\n        $option.attr('data-select2-tag', true);\r\n\r\n        self._removeOldTags();\r\n        self.addOptions([$option]);\r\n      }\r\n\r\n      // Select the item, now that we know there is an option for it\r\n      select(item);\r\n    }\r\n\r\n    function select (data) {\r\n      self.trigger('select', {\r\n        data: data\r\n      });\r\n    }\r\n\r\n    params.term = params.term || '';\r\n\r\n    var tokenData = this.tokenizer(params, this.options, createAndSelect);\r\n\r\n    if (tokenData.term !== params.term) {\r\n      // Replace the search term if we have the search box\r\n      if (this.$search.length) {\r\n        this.$search.val(tokenData.term);\r\n        this.$search.focus();\r\n      }\r\n\r\n      params.term = tokenData.term;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  Tokenizer.prototype.tokenizer = function (_, params, options, callback) {\r\n    var separators = options.get('tokenSeparators') || [];\r\n    var term = params.term;\r\n    var i = 0;\r\n\r\n    var createTag = this.createTag || function (params) {\r\n      return {\r\n        id: params.term,\r\n        text: params.term\r\n      };\r\n    };\r\n\r\n    while (i < term.length) {\r\n      var termChar = term[i];\r\n\r\n      if ($.inArray(termChar, separators) === -1) {\r\n        i++;\r\n\r\n        continue;\r\n      }\r\n\r\n      var part = term.substr(0, i);\r\n      var partParams = $.extend({}, params, {\r\n        term: part\r\n      });\r\n\r\n      var data = createTag(partParams);\r\n\r\n      if (data == null) {\r\n        i++;\r\n        continue;\r\n      }\r\n\r\n      callback(data);\r\n\r\n      // Reset the term to not include the tokenized portion\r\n      term = term.substr(i + 1) || '';\r\n      i = 0;\r\n    }\r\n\r\n    return {\r\n      term: term\r\n    };\r\n  };\r\n\r\n  return Tokenizer;\r\n});\r\n\nS2.define('select2/data/minimumInputLength',[\r\n\r\n], function () {\r\n  function MinimumInputLength (decorated, $e, options) {\r\n    this.minimumInputLength = options.get('minimumInputLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MinimumInputLength.prototype.query = function (decorated, params, callback) {\r\n    params.term = params.term || '';\r\n\r\n    if (params.term.length < this.minimumInputLength) {\r\n      this.trigger('results:message', {\r\n        message: 'inputTooShort',\r\n        args: {\r\n          minimum: this.minimumInputLength,\r\n          input: params.term,\r\n          params: params\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  return MinimumInputLength;\r\n});\r\n\nS2.define('select2/data/maximumInputLength',[\r\n\r\n], function () {\r\n  function MaximumInputLength (decorated, $e, options) {\r\n    this.maximumInputLength = options.get('maximumInputLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MaximumInputLength.prototype.query = function (decorated, params, callback) {\r\n    params.term = params.term || '';\r\n\r\n    if (this.maximumInputLength > 0 &&\r\n        params.term.length > this.maximumInputLength) {\r\n      this.trigger('results:message', {\r\n        message: 'inputTooLong',\r\n        args: {\r\n          maximum: this.maximumInputLength,\r\n          input: params.term,\r\n          params: params\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  return MaximumInputLength;\r\n});\r\n\nS2.define('select2/data/maximumSelectionLength',[\r\n\r\n], function (){\r\n  function MaximumSelectionLength (decorated, $e, options) {\r\n    this.maximumSelectionLength = options.get('maximumSelectionLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MaximumSelectionLength.prototype.query =\r\n    function (decorated, params, callback) {\r\n      var self = this;\r\n\r\n      this.current(function (currentData) {\r\n        var count = currentData != null ? currentData.length : 0;\r\n        if (self.maximumSelectionLength > 0 &&\r\n          count >= self.maximumSelectionLength) {\r\n          self.trigger('results:message', {\r\n            message: 'maximumSelected',\r\n            args: {\r\n              maximum: self.maximumSelectionLength\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        decorated.call(self, params, callback);\r\n      });\r\n  };\r\n\r\n  return MaximumSelectionLength;\r\n});\r\n\nS2.define('select2/dropdown',[\r\n  'jquery',\r\n  './utils'\r\n], function ($, Utils) {\r\n  function Dropdown ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    Dropdown.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(Dropdown, Utils.Observable);\r\n\r\n  Dropdown.prototype.render = function () {\r\n    var $dropdown = $(\r\n      '<span class=\"select2-dropdown\">' +\r\n        '<span class=\"select2-results\"></span>' +\r\n      '</span>'\r\n    );\r\n\r\n    $dropdown.attr('dir', this.options.get('dir'));\r\n\r\n    this.$dropdown = $dropdown;\r\n\r\n    return $dropdown;\r\n  };\r\n\r\n  Dropdown.prototype.bind = function () {\r\n    // Should be implemented in subclasses\r\n  };\r\n\r\n  Dropdown.prototype.position = function ($dropdown, $container) {\r\n    // Should be implmented in subclasses\r\n  };\r\n\r\n  Dropdown.prototype.destroy = function () {\r\n    // Remove the dropdown from the DOM\r\n    this.$dropdown.remove();\r\n  };\r\n\r\n  return Dropdown;\r\n});\r\n\nS2.define('select2/dropdown/search',[\r\n  'jquery',\r\n  '../utils'\r\n], function ($, Utils) {\r\n  function Search () { }\r\n\r\n  Search.prototype.render = function (decorated) {\r\n    var $rendered = decorated.call(this);\r\n\r\n    var $search = $(\r\n      '<span class=\"select2-search select2-search--dropdown\">' +\r\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\r\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\r\n        ' spellcheck=\"false\" role=\"textbox\" />' +\r\n      '</span>'\r\n    );\r\n\r\n    this.$searchContainer = $search;\r\n    this.$search = $search.find('input');\r\n\r\n    $rendered.prepend($search);\r\n\r\n    return $rendered;\r\n  };\r\n\r\n  Search.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    this.$search.on('keydown', function (evt) {\r\n      self.trigger('keypress', evt);\r\n\r\n      self._keyUpPrevented = evt.isDefaultPrevented();\r\n    });\r\n\r\n    // Workaround for browsers which do not support the `input` event\r\n    // This will prevent double-triggering of events for browsers which support\r\n    // both the `keyup` and `input` events.\r\n    this.$search.on('input', function (evt) {\r\n      // Unbind the duplicated `keyup` event\r\n      $(this).off('keyup');\r\n    });\r\n\r\n    this.$search.on('keyup input', function (evt) {\r\n      self.handleSearch(evt);\r\n    });\r\n\r\n    container.on('open', function () {\r\n      self.$search.attr('tabindex', 0);\r\n\r\n      self.$search.focus();\r\n\r\n      window.setTimeout(function () {\r\n        self.$search.focus();\r\n      }, 0);\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self.$search.attr('tabindex', -1);\r\n\r\n      self.$search.val('');\r\n    });\r\n\r\n    container.on('focus', function () {\r\n      if (container.isOpen()) {\r\n        self.$search.focus();\r\n      }\r\n    });\r\n\r\n    container.on('results:all', function (params) {\r\n      if (params.query.term == null || params.query.term === '') {\r\n        var showSearch = self.showSearch(params);\r\n\r\n        if (showSearch) {\r\n          self.$searchContainer.removeClass('select2-search--hide');\r\n        } else {\r\n          self.$searchContainer.addClass('select2-search--hide');\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  Search.prototype.handleSearch = function (evt) {\r\n    if (!this._keyUpPrevented) {\r\n      var input = this.$search.val();\r\n\r\n      this.trigger('query', {\r\n        term: input\r\n      });\r\n    }\r\n\r\n    this._keyUpPrevented = false;\r\n  };\r\n\r\n  Search.prototype.showSearch = function (_, params) {\r\n    return true;\r\n  };\r\n\r\n  return Search;\r\n});\r\n\nS2.define('select2/dropdown/hidePlaceholder',[\r\n\r\n], function () {\r\n  function HidePlaceholder (decorated, $element, options, dataAdapter) {\r\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n  }\r\n\r\n  HidePlaceholder.prototype.append = function (decorated, data) {\r\n    data.results = this.removePlaceholder(data.results);\r\n\r\n    decorated.call(this, data);\r\n  };\r\n\r\n  HidePlaceholder.prototype.normalizePlaceholder = function (_, placeholder) {\r\n    if (typeof placeholder === 'string') {\r\n      placeholder = {\r\n        id: '',\r\n        text: placeholder\r\n      };\r\n    }\r\n\r\n    return placeholder;\r\n  };\r\n\r\n  HidePlaceholder.prototype.removePlaceholder = function (_, data) {\r\n    var modifiedData = data.slice(0);\r\n\r\n    for (var d = data.length - 1; d >= 0; d--) {\r\n      var item = data[d];\r\n\r\n      if (this.placeholder.id === item.id) {\r\n        modifiedData.splice(d, 1);\r\n      }\r\n    }\r\n\r\n    return modifiedData;\r\n  };\r\n\r\n  return HidePlaceholder;\r\n});\r\n\nS2.define('select2/dropdown/infiniteScroll',[\r\n  'jquery'\r\n], function ($) {\r\n  function InfiniteScroll (decorated, $element, options, dataAdapter) {\r\n    this.lastParams = {};\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n\r\n    this.$loadingMore = this.createLoadingMore();\r\n    this.loading = false;\r\n  }\r\n\r\n  InfiniteScroll.prototype.append = function (decorated, data) {\r\n    this.$loadingMore.remove();\r\n    this.loading = false;\r\n\r\n    decorated.call(this, data);\r\n\r\n    if (this.showLoadingMore(data)) {\r\n      this.$results.append(this.$loadingMore);\r\n    }\r\n  };\r\n\r\n  InfiniteScroll.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('query', function (params) {\r\n      self.lastParams = params;\r\n      self.loading = true;\r\n    });\r\n\r\n    container.on('query:append', function (params) {\r\n      self.lastParams = params;\r\n      self.loading = true;\r\n    });\r\n\r\n    this.$results.on('scroll', function () {\r\n      var isLoadMoreVisible = $.contains(\r\n        document.documentElement,\r\n        self.$loadingMore[0]\r\n      );\r\n\r\n      if (self.loading || !isLoadMoreVisible) {\r\n        return;\r\n      }\r\n\r\n      var currentOffset = self.$results.offset().top +\r\n        self.$results.outerHeight(false);\r\n      var loadingMoreOffset = self.$loadingMore.offset().top +\r\n        self.$loadingMore.outerHeight(false);\r\n\r\n      if (currentOffset + 50 >= loadingMoreOffset) {\r\n        self.loadMore();\r\n      }\r\n    });\r\n  };\r\n\r\n  InfiniteScroll.prototype.loadMore = function () {\r\n    this.loading = true;\r\n\r\n    var params = $.extend({}, {page: 1}, this.lastParams);\r\n\r\n    params.page++;\r\n\r\n    this.trigger('query:append', params);\r\n  };\r\n\r\n  InfiniteScroll.prototype.showLoadingMore = function (_, data) {\r\n    return data.pagination && data.pagination.more;\r\n  };\r\n\r\n  InfiniteScroll.prototype.createLoadingMore = function () {\r\n    var $option = $(\r\n      '<li ' +\r\n      'class=\"select2-results__option select2-results__option--load-more\"' +\r\n      'role=\"treeitem\" aria-disabled=\"true\"></li>'\r\n    );\r\n\r\n    var message = this.options.get('translations').get('loadingMore');\r\n\r\n    $option.html(message(this.lastParams));\r\n\r\n    return $option;\r\n  };\r\n\r\n  return InfiniteScroll;\r\n});\r\n\nS2.define('select2/dropdown/attachBody',[\r\n  'jquery',\r\n  '../utils'\r\n], function ($, Utils) {\r\n  function AttachBody (decorated, $element, options) {\r\n    this.$dropdownParent = options.get('dropdownParent') || $(document.body);\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  AttachBody.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    var setupResultsEvents = false;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('open', function () {\r\n      self._showDropdown();\r\n      self._attachPositioningHandler(container);\r\n\r\n      if (!setupResultsEvents) {\r\n        setupResultsEvents = true;\r\n\r\n        container.on('results:all', function () {\r\n          self._positionDropdown();\r\n          self._resizeDropdown();\r\n        });\r\n\r\n        container.on('results:append', function () {\r\n          self._positionDropdown();\r\n          self._resizeDropdown();\r\n        });\r\n      }\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self._hideDropdown();\r\n      self._detachPositioningHandler(container);\r\n    });\r\n\r\n    this.$dropdownContainer.on('mousedown', function (evt) {\r\n      evt.stopPropagation();\r\n    });\r\n  };\r\n\r\n  AttachBody.prototype.destroy = function (decorated) {\r\n    decorated.call(this);\r\n\r\n    this.$dropdownContainer.remove();\r\n  };\r\n\r\n  AttachBody.prototype.position = function (decorated, $dropdown, $container) {\r\n    // Clone all of the container classes\r\n    $dropdown.attr('class', $container.attr('class'));\r\n\r\n    $dropdown.removeClass('select2');\r\n    $dropdown.addClass('select2-container--open');\r\n\r\n    $dropdown.css({\r\n      position: 'absolute',\r\n      top: -999999\r\n    });\r\n\r\n    this.$container = $container;\r\n  };\r\n\r\n  AttachBody.prototype.render = function (decorated) {\r\n    var $container = $('<span></span>');\r\n\r\n    var $dropdown = decorated.call(this);\r\n    $container.append($dropdown);\r\n\r\n    this.$dropdownContainer = $container;\r\n\r\n    return $container;\r\n  };\r\n\r\n  AttachBody.prototype._hideDropdown = function (decorated) {\r\n    this.$dropdownContainer.detach();\r\n  };\r\n\r\n  AttachBody.prototype._attachPositioningHandler =\r\n      function (decorated, container) {\r\n    var self = this;\r\n\r\n    var scrollEvent = 'scroll.select2.' + container.id;\r\n    var resizeEvent = 'resize.select2.' + container.id;\r\n    var orientationEvent = 'orientationchange.select2.' + container.id;\r\n\r\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\r\n    $watchers.each(function () {\r\n      $(this).data('select2-scroll-position', {\r\n        x: $(this).scrollLeft(),\r\n        y: $(this).scrollTop()\r\n      });\r\n    });\r\n\r\n    $watchers.on(scrollEvent, function (ev) {\r\n      var position = $(this).data('select2-scroll-position');\r\n      $(this).scrollTop(position.y);\r\n    });\r\n\r\n    $(window).on(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent,\r\n      function (e) {\r\n      self._positionDropdown();\r\n      self._resizeDropdown();\r\n    });\r\n  };\r\n\r\n  AttachBody.prototype._detachPositioningHandler =\r\n      function (decorated, container) {\r\n    var scrollEvent = 'scroll.select2.' + container.id;\r\n    var resizeEvent = 'resize.select2.' + container.id;\r\n    var orientationEvent = 'orientationchange.select2.' + container.id;\r\n\r\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\r\n    $watchers.off(scrollEvent);\r\n\r\n    $(window).off(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent);\r\n  };\r\n\r\n  AttachBody.prototype._positionDropdown = function () {\r\n    var $window = $(window);\r\n\r\n    var isCurrentlyAbove = this.$dropdown.hasClass('select2-dropdown--above');\r\n    var isCurrentlyBelow = this.$dropdown.hasClass('select2-dropdown--below');\r\n\r\n    var newDirection = null;\r\n\r\n    var offset = this.$container.offset();\r\n\r\n    offset.bottom = offset.top + this.$container.outerHeight(false);\r\n\r\n    var container = {\r\n      height: this.$container.outerHeight(false)\r\n    };\r\n\r\n    container.top = offset.top;\r\n    container.bottom = offset.top + container.height;\r\n\r\n    var dropdown = {\r\n      height: this.$dropdown.outerHeight(false)\r\n    };\r\n\r\n    var viewport = {\r\n      top: $window.scrollTop(),\r\n      bottom: $window.scrollTop() + $window.height()\r\n    };\r\n\r\n    var enoughRoomAbove = viewport.top < (offset.top - dropdown.height);\r\n    var enoughRoomBelow = viewport.bottom > (offset.bottom + dropdown.height);\r\n\r\n    var css = {\r\n      left: offset.left,\r\n      top: container.bottom\r\n    };\r\n\r\n    // Determine what the parent element is to use for calciulating the offset\r\n    var $offsetParent = this.$dropdownParent;\r\n\r\n    // For statically positoned elements, we need to get the element\r\n    // that is determining the offset\r\n    if ($offsetParent.css('position') === 'static') {\r\n      $offsetParent = $offsetParent.offsetParent();\r\n    }\r\n\r\n    var parentOffset = $offsetParent.offset();\r\n\r\n    css.top -= parentOffset.top;\r\n    css.left -= parentOffset.left;\r\n\r\n    if (!isCurrentlyAbove && !isCurrentlyBelow) {\r\n      newDirection = 'below';\r\n    }\r\n\r\n    if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {\r\n      newDirection = 'above';\r\n    } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {\r\n      newDirection = 'below';\r\n    }\r\n\r\n    if (newDirection == 'above' ||\r\n      (isCurrentlyAbove && newDirection !== 'below')) {\r\n      css.top = container.top - parentOffset.top - dropdown.height;\r\n    }\r\n\r\n    if (newDirection != null) {\r\n      this.$dropdown\r\n        .removeClass('select2-dropdown--below select2-dropdown--above')\r\n        .addClass('select2-dropdown--' + newDirection);\r\n      this.$container\r\n        .removeClass('select2-container--below select2-container--above')\r\n        .addClass('select2-container--' + newDirection);\r\n    }\r\n\r\n    this.$dropdownContainer.css(css);\r\n  };\r\n\r\n  AttachBody.prototype._resizeDropdown = function () {\r\n    var css = {\r\n      width: this.$container.outerWidth(false) + 'px'\r\n    };\r\n\r\n    if (this.options.get('dropdownAutoWidth')) {\r\n      css.minWidth = css.width;\r\n      css.position = 'relative';\r\n      css.width = 'auto';\r\n    }\r\n\r\n    this.$dropdown.css(css);\r\n  };\r\n\r\n  AttachBody.prototype._showDropdown = function (decorated) {\r\n    this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n\r\n    this._positionDropdown();\r\n    this._resizeDropdown();\r\n  };\r\n\r\n  return AttachBody;\r\n});\r\n\nS2.define('select2/dropdown/minimumResultsForSearch',[\r\n\r\n], function () {\r\n  function countResults (data) {\r\n    var count = 0;\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var item = data[d];\r\n\r\n      if (item.children) {\r\n        count += countResults(item.children);\r\n      } else {\r\n        count++;\r\n      }\r\n    }\r\n\r\n    return count;\r\n  }\r\n\r\n  function MinimumResultsForSearch (decorated, $element, options, dataAdapter) {\r\n    this.minimumResultsForSearch = options.get('minimumResultsForSearch');\r\n\r\n    if (this.minimumResultsForSearch < 0) {\r\n      this.minimumResultsForSearch = Infinity;\r\n    }\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n  }\r\n\r\n  MinimumResultsForSearch.prototype.showSearch = function (decorated, params) {\r\n    if (countResults(params.data.results) < this.minimumResultsForSearch) {\r\n      return false;\r\n    }\r\n\r\n    return decorated.call(this, params);\r\n  };\r\n\r\n  return MinimumResultsForSearch;\r\n});\r\n\nS2.define('select2/dropdown/selectOnClose',[\r\n\r\n], function () {\r\n  function SelectOnClose () { }\r\n\r\n  SelectOnClose.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('close', function (params) {\r\n      self._handleSelectOnClose(params);\r\n    });\r\n  };\r\n\r\n  SelectOnClose.prototype._handleSelectOnClose = function (_, params) {\r\n    if (params && params.originalSelect2Event != null) {\r\n      var event = params.originalSelect2Event;\r\n\r\n      // Don't select an item if the close event was triggered from a select or\r\n      // unselect event\r\n      if (event._type === 'select' || event._type === 'unselect') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var $highlightedResults = this.getHighlightedResults();\r\n\r\n    // Only select highlighted results\r\n    if ($highlightedResults.length < 1) {\r\n      return;\r\n    }\r\n\r\n    var data = $highlightedResults.data('data');\r\n\r\n    // Don't re-select already selected resulte\r\n    if (\r\n      (data.element != null && data.element.selected) ||\r\n      (data.element == null && data.selected)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('select', {\r\n        data: data\r\n    });\r\n  };\r\n\r\n  return SelectOnClose;\r\n});\r\n\nS2.define('select2/dropdown/closeOnSelect',[\r\n\r\n], function () {\r\n  function CloseOnSelect () { }\r\n\r\n  CloseOnSelect.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('select', function (evt) {\r\n      self._selectTriggered(evt);\r\n    });\r\n\r\n    container.on('unselect', function (evt) {\r\n      self._selectTriggered(evt);\r\n    });\r\n  };\r\n\r\n  CloseOnSelect.prototype._selectTriggered = function (_, evt) {\r\n    var originalEvent = evt.originalEvent;\r\n\r\n    // Don't close if the control key is being held\r\n    if (originalEvent && originalEvent.ctrlKey) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('close', {\r\n      originalEvent: originalEvent,\r\n      originalSelect2Event: evt\r\n    });\r\n  };\r\n\r\n  return CloseOnSelect;\r\n});\r\n\nS2.define('select2/i18n/en',[],function () {\r\n  // English\r\n  return {\r\n    errorLoading: function () {\r\n      return 'The results could not be loaded.';\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n\r\n      var message = 'Please delete ' + overChars + ' character';\r\n\r\n      if (overChars != 1) {\r\n        message += 's';\r\n      }\r\n\r\n      return message;\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n\r\n      var message = 'Please enter ' + remainingChars + ' or more characters';\r\n\r\n      return message;\r\n    },\r\n    loadingMore: function () {\r\n      return 'Loading more results';\r\n    },\r\n    maximumSelected: function (args) {\r\n      var message = 'You can only select ' + args.maximum + ' item';\r\n\r\n      if (args.maximum != 1) {\r\n        message += 's';\r\n      }\r\n\r\n      return message;\r\n    },\r\n    noResults: function () {\r\n      return 'No results found';\r\n    },\r\n    searching: function () {\r\n      return 'Searching';\r\n    }\r\n  };\r\n});\r\n\nS2.define('select2/defaults',[\r\n  'jquery',\r\n  'require',\r\n\r\n  './results',\r\n\r\n  './selection/single',\r\n  './selection/multiple',\r\n  './selection/placeholder',\r\n  './selection/allowClear',\r\n  './selection/search',\r\n  './selection/eventRelay',\r\n\r\n  './utils',\r\n  './translation',\r\n  './diacritics',\r\n\r\n  './data/select',\r\n  './data/array',\r\n  './data/ajax',\r\n  './data/tags',\r\n  './data/tokenizer',\r\n  './data/minimumInputLength',\r\n  './data/maximumInputLength',\r\n  './data/maximumSelectionLength',\r\n\r\n  './dropdown',\r\n  './dropdown/search',\r\n  './dropdown/hidePlaceholder',\r\n  './dropdown/infiniteScroll',\r\n  './dropdown/attachBody',\r\n  './dropdown/minimumResultsForSearch',\r\n  './dropdown/selectOnClose',\r\n  './dropdown/closeOnSelect',\r\n\r\n  './i18n/en'\r\n], function ($, require,\r\n\r\n             ResultsList,\r\n\r\n             SingleSelection, MultipleSelection, Placeholder, AllowClear,\r\n             SelectionSearch, EventRelay,\r\n\r\n             Utils, Translation, DIACRITICS,\r\n\r\n             SelectData, ArrayData, AjaxData, Tags, Tokenizer,\r\n             MinimumInputLength, MaximumInputLength, MaximumSelectionLength,\r\n\r\n             Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll,\r\n             AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect,\r\n\r\n             EnglishTranslation) {\r\n  function Defaults () {\r\n    this.reset();\r\n  }\r\n\r\n  Defaults.prototype.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MinimumInputLength\r\n        );\r\n      }\r\n\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MaximumInputLength\r\n        );\r\n      }\r\n\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MaximumSelectionLength\r\n        );\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          Tokenizer\r\n        );\r\n      }\r\n\r\n      if (options.query != null) {\r\n        var Query = require(options.amdBase + 'compat/query');\r\n\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          Query\r\n        );\r\n      }\r\n\r\n      if (options.initSelection != null) {\r\n        var InitSelection = require(options.amdBase + 'compat/initSelection');\r\n\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          InitSelection\r\n        );\r\n      }\r\n    }\r\n\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList;\r\n\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          InfiniteScroll\r\n        );\r\n      }\r\n\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          HidePlaceholder\r\n        );\r\n      }\r\n\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          SelectOnClose\r\n        );\r\n      }\r\n    }\r\n\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.multiple) {\r\n        options.dropdownAdapter = Dropdown;\r\n      } else {\r\n        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);\r\n\r\n        options.dropdownAdapter = SearchableDropdown;\r\n      }\r\n\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          MinimumResultsForSearch\r\n        );\r\n      }\r\n\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          CloseOnSelect\r\n        );\r\n      }\r\n\r\n      if (\r\n        options.dropdownCssClass != null ||\r\n        options.dropdownCss != null ||\r\n        options.adaptDropdownCssClass != null\r\n      ) {\r\n        var DropdownCSS = require(options.amdBase + 'compat/dropdownCss');\r\n\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          DropdownCSS\r\n        );\r\n      }\r\n\r\n      options.dropdownAdapter = Utils.Decorate(\r\n        options.dropdownAdapter,\r\n        AttachBody\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      }\r\n\r\n      // Add the placeholder mixin if a placeholder was specified\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          Placeholder\r\n        );\r\n      }\r\n\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          AllowClear\r\n        );\r\n      }\r\n\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          SelectionSearch\r\n        );\r\n      }\r\n\r\n      if (\r\n        options.containerCssClass != null ||\r\n        options.containerCss != null ||\r\n        options.adaptContainerCssClass != null\r\n      ) {\r\n        var ContainerCSS = require(options.amdBase + 'compat/containerCss');\r\n\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          ContainerCSS\r\n        );\r\n      }\r\n\r\n      options.selectionAdapter = Utils.Decorate(\r\n        options.selectionAdapter,\r\n        EventRelay\r\n      );\r\n    }\r\n\r\n    if (typeof options.language === 'string') {\r\n      // Check if the language is specified with a region\r\n      if (options.language.indexOf('-') > 0) {\r\n        // Extract the region information if it is included\r\n        var languageParts = options.language.split('-');\r\n        var baseLanguage = languageParts[0];\r\n\r\n        options.language = [options.language, baseLanguage];\r\n      } else {\r\n        options.language = [options.language];\r\n      }\r\n    }\r\n\r\n    if ($.isArray(options.language)) {\r\n      var languages = new Translation();\r\n      options.language.push('en');\r\n\r\n      var languageNames = options.language;\r\n\r\n      for (var l = 0; l < languageNames.length; l++) {\r\n        var name = languageNames[l];\r\n        var language = {};\r\n\r\n        try {\r\n          // Try to load it with the original name\r\n          language = Translation.loadPath(name);\r\n        } catch (e) {\r\n          try {\r\n            // If we couldn't load it, check if it wasn't the full path\r\n            name = this.defaults.amdLanguageBase + name;\r\n            language = Translation.loadPath(name);\r\n          } catch (ex) {\r\n            // The translation could not be loaded at all. Sometimes this is\r\n            // because of a configuration problem, other times this can be\r\n            // because of how Select2 helps load all possible translation files.\r\n            if (options.debug && window.console && console.warn) {\r\n              console.warn(\r\n                'Select2: The language file for \"' + name + '\" could not be ' +\r\n                'automatically loaded. A fallback will be used instead.'\r\n              );\r\n            }\r\n\r\n            continue;\r\n          }\r\n        }\r\n\r\n        languages.extend(language);\r\n      }\r\n\r\n      options.translations = languages;\r\n    } else {\r\n      var baseTranslation = Translation.loadPath(\r\n        this.defaults.amdLanguageBase + 'en'\r\n      );\r\n      var customTranslation = new Translation(options.language);\r\n\r\n      customTranslation.extend(baseTranslation);\r\n\r\n      options.translations = customTranslation;\r\n    }\r\n\r\n    return options;\r\n  };\r\n\r\n  Defaults.prototype.reset = function () {\r\n    function stripDiacritics (text) {\r\n      // Used 'uni range + named function' from http://jsperf.com/diacritics/18\r\n      function match(a) {\r\n        return DIACRITICS[a] || a;\r\n      }\r\n\r\n      return text.replace(/[^\\u0000-\\u007E]/g, match);\r\n    }\r\n\r\n    function matcher (params, data) {\r\n      // Always return the object if there is nothing to compare\r\n      if ($.trim(params.term) === '') {\r\n        return data;\r\n      }\r\n\r\n      // Do a recursive check for options with children\r\n      if (data.children && data.children.length > 0) {\r\n        // Clone the data object if there are children\r\n        // This is required as we modify the object to remove any non-matches\r\n        var match = $.extend(true, {}, data);\r\n\r\n        // Check each child of the option\r\n        for (var c = data.children.length - 1; c >= 0; c--) {\r\n          var child = data.children[c];\r\n\r\n          var matches = matcher(params, child);\r\n\r\n          // If there wasn't a match, remove the object in the array\r\n          if (matches == null) {\r\n            match.children.splice(c, 1);\r\n          }\r\n        }\r\n\r\n        // If any children matched, return the new object\r\n        if (match.children.length > 0) {\r\n          return match;\r\n        }\r\n\r\n        // If there were no matching children, check just the plain object\r\n        return matcher(params, match);\r\n      }\r\n\r\n      var original = stripDiacritics(data.text).toUpperCase();\r\n      var term = stripDiacritics(params.term).toUpperCase();\r\n\r\n      // Check if the text contains the term\r\n      if (original.indexOf(term) > -1) {\r\n        return data;\r\n      }\r\n\r\n      // If it doesn't contain the term, don't return anything\r\n      return null;\r\n    }\r\n\r\n    this.defaults = {\r\n      amdBase: './',\r\n      amdLanguageBase: './i18n/',\r\n      closeOnSelect: true,\r\n      debug: false,\r\n      dropdownAutoWidth: false,\r\n      escapeMarkup: Utils.escapeMarkup,\r\n      language: EnglishTranslation,\r\n      matcher: matcher,\r\n      minimumInputLength: 0,\r\n      maximumInputLength: 0,\r\n      maximumSelectionLength: 0,\r\n      minimumResultsForSearch: 0,\r\n      selectOnClose: false,\r\n      sorter: function (data) {\r\n        return data;\r\n      },\r\n      templateResult: function (result) {\r\n        return result.text;\r\n      },\r\n      templateSelection: function (selection) {\r\n        return selection.text;\r\n      },\r\n      theme: 'default',\r\n      width: 'resolve'\r\n    };\r\n  };\r\n\r\n  Defaults.prototype.set = function (key, value) {\r\n    var camelKey = $.camelCase(key);\r\n\r\n    var data = {};\r\n    data[camelKey] = value;\r\n\r\n    var convertedData = Utils._convertData(data);\r\n\r\n    $.extend(this.defaults, convertedData);\r\n  };\r\n\r\n  var defaults = new Defaults();\r\n\r\n  return defaults;\r\n});\r\n\nS2.define('select2/options',[\r\n  'require',\r\n  'jquery',\r\n  './defaults',\r\n  './utils'\r\n], function (require, $, Defaults, Utils) {\r\n  function Options (options, $element) {\r\n    this.options = options;\r\n\r\n    if ($element != null) {\r\n      this.fromElement($element);\r\n    }\r\n\r\n    this.options = Defaults.apply(this.options);\r\n\r\n    if ($element && $element.is('input')) {\r\n      var InputCompat = require(this.get('amdBase') + 'compat/inputData');\r\n\r\n      this.options.dataAdapter = Utils.Decorate(\r\n        this.options.dataAdapter,\r\n        InputCompat\r\n      );\r\n    }\r\n  }\r\n\r\n  Options.prototype.fromElement = function ($e) {\r\n    var excludedData = ['select2'];\r\n\r\n    if (this.options.multiple == null) {\r\n      this.options.multiple = $e.prop('multiple');\r\n    }\r\n\r\n    if (this.options.disabled == null) {\r\n      this.options.disabled = $e.prop('disabled');\r\n    }\r\n\r\n    if (this.options.language == null) {\r\n      if ($e.prop('lang')) {\r\n        this.options.language = $e.prop('lang').toLowerCase();\r\n      } else if ($e.closest('[lang]').prop('lang')) {\r\n        this.options.language = $e.closest('[lang]').prop('lang');\r\n      }\r\n    }\r\n\r\n    if (this.options.dir == null) {\r\n      if ($e.prop('dir')) {\r\n        this.options.dir = $e.prop('dir');\r\n      } else if ($e.closest('[dir]').prop('dir')) {\r\n        this.options.dir = $e.closest('[dir]').prop('dir');\r\n      } else {\r\n        this.options.dir = 'ltr';\r\n      }\r\n    }\r\n\r\n    $e.prop('disabled', this.options.disabled);\r\n    $e.prop('multiple', this.options.multiple);\r\n\r\n    if ($e.data('select2Tags')) {\r\n      if (this.options.debug && window.console && console.warn) {\r\n        console.warn(\r\n          'Select2: The `data-select2-tags` attribute has been changed to ' +\r\n          'use the `data-data` and `data-tags=\"true\"` attributes and will be ' +\r\n          'removed in future versions of Select2.'\r\n        );\r\n      }\r\n\r\n      $e.data('data', $e.data('select2Tags'));\r\n      $e.data('tags', true);\r\n    }\r\n\r\n    if ($e.data('ajaxUrl')) {\r\n      if (this.options.debug && window.console && console.warn) {\r\n        console.warn(\r\n          'Select2: The `data-ajax-url` attribute has been changed to ' +\r\n          '`data-ajax--url` and support for the old attribute will be removed' +\r\n          ' in future versions of Select2.'\r\n        );\r\n      }\r\n\r\n      $e.attr('ajax--url', $e.data('ajaxUrl'));\r\n      $e.data('ajax--url', $e.data('ajaxUrl'));\r\n    }\r\n\r\n    var dataset = {};\r\n\r\n    // Prefer the element's `dataset` attribute if it exists\r\n    // jQuery 1.x does not correctly handle data attributes with multiple dashes\r\n    if ($.fn.jquery && $.fn.jquery.substr(0, 2) == '1.' && $e[0].dataset) {\r\n      dataset = $.extend(true, {}, $e[0].dataset, $e.data());\r\n    } else {\r\n      dataset = $e.data();\r\n    }\r\n\r\n    var data = $.extend(true, {}, dataset);\r\n\r\n    data = Utils._convertData(data);\r\n\r\n    for (var key in data) {\r\n      if ($.inArray(key, excludedData) > -1) {\r\n        continue;\r\n      }\r\n\r\n      if ($.isPlainObject(this.options[key])) {\r\n        $.extend(this.options[key], data[key]);\r\n      } else {\r\n        this.options[key] = data[key];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  Options.prototype.get = function (key) {\r\n    return this.options[key];\r\n  };\r\n\r\n  Options.prototype.set = function (key, val) {\r\n    this.options[key] = val;\r\n  };\r\n\r\n  return Options;\r\n});\r\n\nS2.define('select2/core',[\r\n  'jquery',\r\n  './options',\r\n  './utils',\r\n  './keys'\r\n], function ($, Options, Utils, KEYS) {\r\n  var Select2 = function ($element, options) {\r\n    if ($element.data('select2') != null) {\r\n      $element.data('select2').destroy();\r\n    }\r\n\r\n    this.$element = $element;\r\n\r\n    this.id = this._generateId($element);\r\n\r\n    options = options || {};\r\n\r\n    this.options = new Options(options, $element);\r\n\r\n    Select2.__super__.constructor.call(this);\r\n\r\n    // Set up the tabindex\r\n\r\n    var tabindex = $element.attr('tabindex') || 0;\r\n    $element.data('old-tabindex', tabindex);\r\n    $element.attr('tabindex', '-1');\r\n\r\n    // Set up containers and adapters\r\n\r\n    var DataAdapter = this.options.get('dataAdapter');\r\n    this.dataAdapter = new DataAdapter($element, this.options);\r\n\r\n    var $container = this.render();\r\n\r\n    this._placeContainer($container);\r\n\r\n    var SelectionAdapter = this.options.get('selectionAdapter');\r\n    this.selection = new SelectionAdapter($element, this.options);\r\n    this.$selection = this.selection.render();\r\n\r\n    this.selection.position(this.$selection, $container);\r\n\r\n    var DropdownAdapter = this.options.get('dropdownAdapter');\r\n    this.dropdown = new DropdownAdapter($element, this.options);\r\n    this.$dropdown = this.dropdown.render();\r\n\r\n    this.dropdown.position(this.$dropdown, $container);\r\n\r\n    var ResultsAdapter = this.options.get('resultsAdapter');\r\n    this.results = new ResultsAdapter($element, this.options, this.dataAdapter);\r\n    this.$results = this.results.render();\r\n\r\n    this.results.position(this.$results, this.$dropdown);\r\n\r\n    // Bind events\r\n\r\n    var self = this;\r\n\r\n    // Bind the container to all of the adapters\r\n    this._bindAdapters();\r\n\r\n    // Register any DOM event handlers\r\n    this._registerDomEvents();\r\n\r\n    // Register any internal event handlers\r\n    this._registerDataEvents();\r\n    this._registerSelectionEvents();\r\n    this._registerDropdownEvents();\r\n    this._registerResultsEvents();\r\n    this._registerEvents();\r\n\r\n    // Set the initial state\r\n    this.dataAdapter.current(function (initialData) {\r\n      self.trigger('selection:update', {\r\n        data: initialData\r\n      });\r\n    });\r\n\r\n    // Hide the original select\r\n    $element.addClass('select2-hidden-accessible');\r\n    $element.attr('aria-hidden', 'true');\r\n\r\n    // Synchronize any monitored attributes\r\n    this._syncAttributes();\r\n\r\n    $element.data('select2', this);\r\n  };\r\n\r\n  Utils.Extend(Select2, Utils.Observable);\r\n\r\n  Select2.prototype._generateId = function ($element) {\r\n    var id = '';\r\n\r\n    if ($element.attr('id') != null) {\r\n      id = $element.attr('id');\r\n    } else if ($element.attr('name') != null) {\r\n      id = $element.attr('name') + '-' + Utils.generateChars(2);\r\n    } else {\r\n      id = Utils.generateChars(4);\r\n    }\r\n\r\n    id = id.replace(/(:|\\.|\\[|\\]|,)/g, '');\r\n    id = 'select2-' + id;\r\n\r\n    return id;\r\n  };\r\n\r\n  Select2.prototype._placeContainer = function ($container) {\r\n    $container.insertAfter(this.$element);\r\n\r\n    var width = this._resolveWidth(this.$element, this.options.get('width'));\r\n\r\n    if (width != null) {\r\n      $container.css('width', width);\r\n    }\r\n  };\r\n\r\n  Select2.prototype._resolveWidth = function ($element, method) {\r\n    var WIDTH = /^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;\r\n\r\n    if (method == 'resolve') {\r\n      var styleWidth = this._resolveWidth($element, 'style');\r\n\r\n      if (styleWidth != null) {\r\n        return styleWidth;\r\n      }\r\n\r\n      return this._resolveWidth($element, 'element');\r\n    }\r\n\r\n    if (method == 'element') {\r\n      var elementWidth = $element.outerWidth(false);\r\n\r\n      if (elementWidth <= 0) {\r\n        return 'auto';\r\n      }\r\n\r\n      return elementWidth + 'px';\r\n    }\r\n\r\n    if (method == 'style') {\r\n      var style = $element.attr('style');\r\n\r\n      if (typeof(style) !== 'string') {\r\n        return null;\r\n      }\r\n\r\n      var attrs = style.split(';');\r\n\r\n      for (var i = 0, l = attrs.length; i < l; i = i + 1) {\r\n        var attr = attrs[i].replace(/\\s/g, '');\r\n        var matches = attr.match(WIDTH);\r\n\r\n        if (matches !== null && matches.length >= 1) {\r\n          return matches[1];\r\n        }\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    return method;\r\n  };\r\n\r\n  Select2.prototype._bindAdapters = function () {\r\n    this.dataAdapter.bind(this, this.$container);\r\n    this.selection.bind(this, this.$container);\r\n\r\n    this.dropdown.bind(this, this.$container);\r\n    this.results.bind(this, this.$container);\r\n  };\r\n\r\n  Select2.prototype._registerDomEvents = function () {\r\n    var self = this;\r\n\r\n    this.$element.on('change.select2', function () {\r\n      self.dataAdapter.current(function (data) {\r\n        self.trigger('selection:update', {\r\n          data: data\r\n        });\r\n      });\r\n    });\r\n\r\n    this.$element.on('focus.select2', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this._syncA = Utils.bind(this._syncAttributes, this);\r\n    this._syncS = Utils.bind(this._syncSubtree, this);\r\n\r\n    if (this.$element[0].attachEvent) {\r\n      this.$element[0].attachEvent('onpropertychange', this._syncA);\r\n    }\r\n\r\n    var observer = window.MutationObserver ||\r\n      window.WebKitMutationObserver ||\r\n      window.MozMutationObserver\r\n    ;\r\n\r\n    if (observer != null) {\r\n      this._observer = new observer(function (mutations) {\r\n        $.each(mutations, self._syncA);\r\n        $.each(mutations, self._syncS);\r\n      });\r\n      this._observer.observe(this.$element[0], {\r\n        attributes: true,\r\n        childList: true,\r\n        subtree: false\r\n      });\r\n    } else if (this.$element[0].addEventListener) {\r\n      this.$element[0].addEventListener(\r\n        'DOMAttrModified',\r\n        self._syncA,\r\n        false\r\n      );\r\n      this.$element[0].addEventListener(\r\n        'DOMNodeInserted',\r\n        self._syncS,\r\n        false\r\n      );\r\n      this.$element[0].addEventListener(\r\n        'DOMNodeRemoved',\r\n        self._syncS,\r\n        false\r\n      );\r\n    }\r\n  };\r\n\r\n  Select2.prototype._registerDataEvents = function () {\r\n    var self = this;\r\n\r\n    this.dataAdapter.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerSelectionEvents = function () {\r\n    var self = this;\r\n    var nonRelayEvents = ['toggle', 'focus'];\r\n\r\n    this.selection.on('toggle', function () {\r\n      self.toggleDropdown();\r\n    });\r\n\r\n    this.selection.on('focus', function (params) {\r\n      self.focus(params);\r\n    });\r\n\r\n    this.selection.on('*', function (name, params) {\r\n      if ($.inArray(name, nonRelayEvents) !== -1) {\r\n        return;\r\n      }\r\n\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerDropdownEvents = function () {\r\n    var self = this;\r\n\r\n    this.dropdown.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerResultsEvents = function () {\r\n    var self = this;\r\n\r\n    this.results.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerEvents = function () {\r\n    var self = this;\r\n\r\n    this.on('open', function () {\r\n      self.$container.addClass('select2-container--open');\r\n    });\r\n\r\n    this.on('close', function () {\r\n      self.$container.removeClass('select2-container--open');\r\n    });\r\n\r\n    this.on('enable', function () {\r\n      self.$container.removeClass('select2-container--disabled');\r\n    });\r\n\r\n    this.on('disable', function () {\r\n      self.$container.addClass('select2-container--disabled');\r\n    });\r\n\r\n    this.on('blur', function () {\r\n      self.$container.removeClass('select2-container--focus');\r\n    });\r\n\r\n    this.on('query', function (params) {\r\n      if (!self.isOpen()) {\r\n        self.trigger('open', {});\r\n      }\r\n\r\n      this.dataAdapter.query(params, function (data) {\r\n        self.trigger('results:all', {\r\n          data: data,\r\n          query: params\r\n        });\r\n      });\r\n    });\r\n\r\n    this.on('query:append', function (params) {\r\n      this.dataAdapter.query(params, function (data) {\r\n        self.trigger('results:append', {\r\n          data: data,\r\n          query: params\r\n        });\r\n      });\r\n    });\r\n\r\n    this.on('keypress', function (evt) {\r\n      var key = evt.which;\r\n\r\n      if (self.isOpen()) {\r\n        if (key === KEYS.ESC || key === KEYS.TAB ||\r\n            (key === KEYS.UP && evt.altKey)) {\r\n          self.close();\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.ENTER) {\r\n          self.trigger('results:select', {});\r\n\r\n          evt.preventDefault();\r\n        } else if ((key === KEYS.SPACE && evt.ctrlKey)) {\r\n          self.trigger('results:toggle', {});\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.UP) {\r\n          self.trigger('results:previous', {});\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.DOWN) {\r\n          self.trigger('results:next', {});\r\n\r\n          evt.preventDefault();\r\n        }\r\n      } else {\r\n        if (key === KEYS.ENTER || key === KEYS.SPACE ||\r\n            (key === KEYS.DOWN && evt.altKey)) {\r\n          self.open();\r\n\r\n          evt.preventDefault();\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  Select2.prototype._syncAttributes = function () {\r\n    this.options.set('disabled', this.$element.prop('disabled'));\r\n\r\n    if (this.options.get('disabled')) {\r\n      if (this.isOpen()) {\r\n        this.close();\r\n      }\r\n\r\n      this.trigger('disable', {});\r\n    } else {\r\n      this.trigger('enable', {});\r\n    }\r\n  };\r\n\r\n  Select2.prototype._syncSubtree = function (evt, mutations) {\r\n    var changed = false;\r\n    var self = this;\r\n\r\n    // Ignore any mutation events raised for elements that aren't options or\r\n    // optgroups. This handles the case when the select element is destroyed\r\n    if (\r\n      evt && evt.target && (\r\n        evt.target.nodeName !== 'OPTION' && evt.target.nodeName !== 'OPTGROUP'\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (!mutations) {\r\n      // If mutation events aren't supported, then we can only assume that the\r\n      // change affected the selections\r\n      changed = true;\r\n    } else if (mutations.addedNodes && mutations.addedNodes.length > 0) {\r\n      for (var n = 0; n < mutations.addedNodes.length; n++) {\r\n        var node = mutations.addedNodes[n];\r\n\r\n        if (node.selected) {\r\n          changed = true;\r\n        }\r\n      }\r\n    } else if (mutations.removedNodes && mutations.removedNodes.length > 0) {\r\n      changed = true;\r\n    }\r\n\r\n    // Only re-pull the data if we think there is a change\r\n    if (changed) {\r\n      this.dataAdapter.current(function (currentData) {\r\n        self.trigger('selection:update', {\r\n          data: currentData\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Override the trigger method to automatically trigger pre-events when\r\n   * there are events that can be prevented.\r\n   */\r\n  Select2.prototype.trigger = function (name, args) {\r\n    var actualTrigger = Select2.__super__.trigger;\r\n    var preTriggerMap = {\r\n      'open': 'opening',\r\n      'close': 'closing',\r\n      'select': 'selecting',\r\n      'unselect': 'unselecting'\r\n    };\r\n\r\n    if (args === undefined) {\r\n      args = {};\r\n    }\r\n\r\n    if (name in preTriggerMap) {\r\n      var preTriggerName = preTriggerMap[name];\r\n      var preTriggerArgs = {\r\n        prevented: false,\r\n        name: name,\r\n        args: args\r\n      };\r\n\r\n      actualTrigger.call(this, preTriggerName, preTriggerArgs);\r\n\r\n      if (preTriggerArgs.prevented) {\r\n        args.prevented = true;\r\n\r\n        return;\r\n      }\r\n    }\r\n\r\n    actualTrigger.call(this, name, args);\r\n  };\r\n\r\n  Select2.prototype.toggleDropdown = function () {\r\n    if (this.options.get('disabled')) {\r\n      return;\r\n    }\r\n\r\n    if (this.isOpen()) {\r\n      this.close();\r\n    } else {\r\n      this.open();\r\n    }\r\n  };\r\n\r\n  Select2.prototype.open = function () {\r\n    if (this.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('query', {});\r\n  };\r\n\r\n  Select2.prototype.close = function () {\r\n    if (!this.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('close', {});\r\n  };\r\n\r\n  Select2.prototype.isOpen = function () {\r\n    return this.$container.hasClass('select2-container--open');\r\n  };\r\n\r\n  Select2.prototype.hasFocus = function () {\r\n    return this.$container.hasClass('select2-container--focus');\r\n  };\r\n\r\n  Select2.prototype.focus = function (data) {\r\n    // No need to re-trigger focus events if we are already focused\r\n    if (this.hasFocus()) {\r\n      return;\r\n    }\r\n\r\n    this.$container.addClass('select2-container--focus');\r\n    this.trigger('focus', {});\r\n  };\r\n\r\n  Select2.prototype.enable = function (args) {\r\n    if (this.options.get('debug') && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: The `select2(\"enable\")` method has been deprecated and will' +\r\n        ' be removed in later Select2 versions. Use $element.prop(\"disabled\")' +\r\n        ' instead.'\r\n      );\r\n    }\r\n\r\n    if (args == null || args.length === 0) {\r\n      args = [true];\r\n    }\r\n\r\n    var disabled = !args[0];\r\n\r\n    this.$element.prop('disabled', disabled);\r\n  };\r\n\r\n  Select2.prototype.data = function () {\r\n    if (this.options.get('debug') &&\r\n        arguments.length > 0 && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: Data can no longer be set using `select2(\"data\")`. You ' +\r\n        'should consider setting the value instead using `$element.val()`.'\r\n      );\r\n    }\r\n\r\n    var data = [];\r\n\r\n    this.dataAdapter.current(function (currentData) {\r\n      data = currentData;\r\n    });\r\n\r\n    return data;\r\n  };\r\n\r\n  Select2.prototype.val = function (args) {\r\n    if (this.options.get('debug') && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: The `select2(\"val\")` method has been deprecated and will be' +\r\n        ' removed in later Select2 versions. Use $element.val() instead.'\r\n      );\r\n    }\r\n\r\n    if (args == null || args.length === 0) {\r\n      return this.$element.val();\r\n    }\r\n\r\n    var newVal = args[0];\r\n\r\n    if ($.isArray(newVal)) {\r\n      newVal = $.map(newVal, function (obj) {\r\n        return obj.toString();\r\n      });\r\n    }\r\n\r\n    this.$element.val(newVal).trigger('change');\r\n  };\r\n\r\n  Select2.prototype.destroy = function () {\r\n    this.$container.remove();\r\n\r\n    if (this.$element[0].detachEvent) {\r\n      this.$element[0].detachEvent('onpropertychange', this._syncA);\r\n    }\r\n\r\n    if (this._observer != null) {\r\n      this._observer.disconnect();\r\n      this._observer = null;\r\n    } else if (this.$element[0].removeEventListener) {\r\n      this.$element[0]\r\n        .removeEventListener('DOMAttrModified', this._syncA, false);\r\n      this.$element[0]\r\n        .removeEventListener('DOMNodeInserted', this._syncS, false);\r\n      this.$element[0]\r\n        .removeEventListener('DOMNodeRemoved', this._syncS, false);\r\n    }\r\n\r\n    this._syncA = null;\r\n    this._syncS = null;\r\n\r\n    this.$element.off('.select2');\r\n    this.$element.attr('tabindex', this.$element.data('old-tabindex'));\r\n\r\n    this.$element.removeClass('select2-hidden-accessible');\r\n    this.$element.attr('aria-hidden', 'false');\r\n    this.$element.removeData('select2');\r\n\r\n    this.dataAdapter.destroy();\r\n    this.selection.destroy();\r\n    this.dropdown.destroy();\r\n    this.results.destroy();\r\n\r\n    this.dataAdapter = null;\r\n    this.selection = null;\r\n    this.dropdown = null;\r\n    this.results = null;\r\n  };\r\n\r\n  Select2.prototype.render = function () {\r\n    var $container = $(\r\n      '<span class=\"select2 select2-container\">' +\r\n        '<span class=\"selection\"></span>' +\r\n        '<span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span>' +\r\n      '</span>'\r\n    );\r\n\r\n    $container.attr('dir', this.options.get('dir'));\r\n\r\n    this.$container = $container;\r\n\r\n    this.$container.addClass('select2-container--' + this.options.get('theme'));\r\n\r\n    $container.data('element', this.$element);\r\n\r\n    return $container;\r\n  };\r\n\r\n  return Select2;\r\n});\r\n\nS2.define('jquery-mousewheel',[\r\n  'jquery'\r\n], function ($) {\r\n  // Used to shim jQuery.mousewheel for non-full builds.\r\n  return $;\r\n});\r\n\nS2.define('jquery.select2',[\r\n  'jquery',\r\n  'jquery-mousewheel',\r\n\r\n  './select2/core',\r\n  './select2/defaults'\r\n], function ($, _, Select2, Defaults) {\r\n  if ($.fn.select2 == null) {\r\n    // All methods that should return the element\r\n    var thisMethods = ['open', 'close', 'destroy'];\r\n\r\n    $.fn.select2 = function (options) {\r\n      options = options || {};\r\n\r\n      if (typeof options === 'object') {\r\n        this.each(function () {\r\n          var instanceOptions = $.extend(true, {}, options);\r\n\r\n          var instance = new Select2($(this), instanceOptions);\r\n        });\r\n\r\n        return this;\r\n      } else if (typeof options === 'string') {\r\n        var ret;\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n        this.each(function () {\r\n          var instance = $(this).data('select2');\r\n\r\n          if (instance == null && window.console && console.error) {\r\n            console.error(\r\n              'The select2(\\'' + options + '\\') method was called on an ' +\r\n              'element that is not using Select2.'\r\n            );\r\n          }\r\n\r\n          ret = instance[options].apply(instance, args);\r\n        });\r\n\r\n        // Check if we should be returning `this`\r\n        if ($.inArray(options, thisMethods) > -1) {\r\n          return this;\r\n        }\r\n\r\n        return ret;\r\n      } else {\r\n        throw new Error('Invalid arguments for Select2: ' + options);\r\n      }\r\n    };\r\n  }\r\n\r\n  if ($.fn.select2.defaults == null) {\r\n    $.fn.select2.defaults = Defaults;\r\n  }\r\n\r\n  return Select2;\r\n});\r\n\n  // Return the AMD loader configuration so it can be used outside of this file\r\n  return {\r\n    define: S2.define,\r\n    require: S2.require\r\n  };\r\n}());\r\n\r\n  // Autoload the jQuery bindings\r\n  // We know that all of the modules exist above this, so we're safe\r\n  var select2 = S2.require('jquery.select2');\r\n\r\n  // Hold the AMD module references on the jQuery function that was just loaded\r\n  // This allows Select2 to use the internal loader outside of this file, such\r\n  // as in the language files.\r\n  jQuery.fn.select2.amd = S2;\r\n\r\n  // Return the Select2 instance for anyone who is importing it.\r\n  return select2;\r\n}));\r\n"

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(0)(__webpack_require__(3))

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(0)(__webpack_require__(4))

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(0)(__webpack_require__(5))

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var WPAttachmentFormInput_1 = __webpack_require__(10);
jQuery(document).ready(function () {
    jQuery(".wpattachmentforminput").each(function () {
        new WPAttachmentFormInput_1.WPAttachmentFormInput(jQuery(this), jQuery(this).data());
    });
    //	jQuery( ".wpattachmentforminput .btn-remove" ).click( function ( e )
    //	{
    //		e.preventDefault();
    //		var $el = $( this );
    //		$el.closest( ".list-group-item" ).remove();
    //
    //		new WPAttachmentFormInput( $( $( this ).data( "target" ) ), "render" );
    //	} );
    //	jQuery( ".wpattachmentforminput .btn-add" ).click( function ( e )
    //	{
    //		new WPAttachmentFormInput( $( $( this ).data( "target" ) ), "open" );
    //	} );
});


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var WPAttachmentFormInput = (function () {
    function WPAttachmentFormInput($el, options) {
        var _this = this;
        this.options = {
            max: -1,
            title: "",
            buttonText: "",
            type: null,
            frame: "select"
        };
        this.$el = $el;
        // Model
        this.options = jQuery.extend({}, this.options, options);
        // View
        this.template = _.template(this.$el.find("textarea.underscore-template").val());
        this.wpMedia = wp.media({
            title: this.options.title,
            multiple: this.options.max < 0 || this.options.max > 1 ? true : false,
            library: this.options.type ? { type: this.options.type } : undefined,
            button: { text: this.options.buttonText },
            frame: this.options.frame
        });
        // Controller
        this.wpMedia.on("select", function () { return _this.onWPMediaSelect(); });
        this.$el.on("click", ".btn-add", function () { return _this.open(); });
        this.$el.on("click", ".btn-remove", function (e) { return _this.onRemoveClick(e); });
        this.render();
    }
    WPAttachmentFormInput.prototype.render = function () {
        if (this.count >= this.options.max && this.options.max >= 0)
            this.$el.find(".btn-add").prop("disabled", "disabled");
        else
            this.$el.find(".btn-add").prop("disabled", null);
    };
    WPAttachmentFormInput.prototype.open = function () {
        this.wpMedia.open();
    };
    ;
    WPAttachmentFormInput.prototype.add = function (attachmentModel) {
        var __this = this;
        attachmentModel.src = attachmentModel.icon;
        if (!attachmentModel.width)
            attachmentModel.width = "";
        if (!attachmentModel.height)
            attachmentModel.height = "";
        if (attachmentModel.sizes) {
            if (attachmentModel.sizes.thumbnail && attachmentModel.sizes.thumbnail.url) {
                attachmentModel.src = attachmentModel.sizes.thumbnail.url;
            }
            else if (attachmentModel.sizes.full && attachmentModel.sizes.full.url) {
                attachmentModel.src = attachmentModel.sizes.full.url;
            }
        }
        var $el = jQuery(this.template(attachmentModel));
        this.$el.find(".list-group").append($el);
    };
    ;
    Object.defineProperty(WPAttachmentFormInput.prototype, "count", {
        /* SET AND GET */
        get: function () {
            return this.$el.find(".list-group-item").length;
        },
        enumerable: true,
        configurable: true
    });
    /* EVENT HANDLERS */
    WPAttachmentFormInput.prototype.onWPMediaSelect = function () {
        var selection = this.wpMedia.state().get('selection');
        var __this = this;
        selection.each(function (attachment) {
            if (__this.options.max < 0 || __this.count < __this.options.max) {
                __this.add(attachment.toJSON());
            }
        });
        this.render();
    };
    ;
    WPAttachmentFormInput.prototype.onRemoveClick = function (e) {
        e.preventDefault();
        var $el = jQuery(e.currentTarget);
        $el.closest(".list-group-item").remove();
        this.render();
    };
    return WPAttachmentFormInput;
}());
exports.WPAttachmentFormInput = WPAttachmentFormInput;


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1);


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgY2RjM2JkZmM2OTA0MWJhNDBjMjEiLCJ3ZWJwYWNrOi8vLy4vfi9zY3JpcHQtbG9hZGVyL2FkZFNjcmlwdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdHNjL3R1dG9tdmMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xlc3MvdHV0b212Yy5sZXNzIiwid2VicGFjazovLy8uL34vYm9vdHN0cmFwLXNlbGVjdC9kaXN0L2pzL2Jvb3RzdHJhcC1zZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zZWxlY3QyL2Rpc3QvanMvc2VsZWN0Mi5qcyIsIndlYnBhY2s6Ly8vLi9+L2Jvb3RzdHJhcC1zZWxlY3QvZGlzdC9qcy9ib290c3RyYXAtc2VsZWN0LmpzP2MxOGIiLCJ3ZWJwYWNrOi8vLy4vfi9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanM/MzhhYiIsIndlYnBhY2s6Ly8vLi9+L3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzPzQ4NWYiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzYy9wbHVnaW5zL2pRdWVyeVdQQXR0YWNobWVudEZvcm1JbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHNjL3dwL2Zvcm0vaW5wdXRzL1dQQXR0YWNobWVudEZvcm1JbnB1dC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsbURBQTJDLGNBQWM7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJC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RSxDQUFDO1FBQ25CLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBRSxDQUFDLENBQUMsYUFBYSxDQUFFLENBQUM7UUFDcEMsR0FBRyxDQUFDLE9BQU8sQ0FBRSxrQkFBa0IsQ0FBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzNDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNmLENBQUM7SUFDRiw0QkFBQztBQUFELENBQUM7QUFoR1ksNkJBQXFCLHdCQWdHakMiLCJmaWxlIjoidHV0b212Yy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBjZGMzYmRmYzY5MDQxYmE0MGMyMSIsIi8qXHJcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcbiovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc3JjKSB7XHJcblx0aWYgKHR5cGVvZiBleGVjU2NyaXB0ICE9PSBcInVuZGVmaW5lZFwiKVxyXG5cdFx0ZXhlY1NjcmlwdChzcmMpO1xyXG5cdGVsc2VcclxuXHRcdGV2YWwuY2FsbChudWxsLCBzcmMpO1xyXG59XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zY3JpcHQtbG9hZGVyL2FkZFNjcmlwdC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgXCIuLi9sZXNzL3R1dG9tdmMubGVzc1wiO1xuaW1wb3J0IFwic2NyaXB0LWxvYWRlciFib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanNcIjtcbmltcG9ydCBcInNjcmlwdC1sb2FkZXIhc2VsZWN0Mi9kaXN0L2pzL3NlbGVjdDIuanNcIjtcbmltcG9ydCBcInNjcmlwdC1sb2FkZXIhYm9vdHN0cmFwLXNlbGVjdC9kaXN0L2pzL2Jvb3RzdHJhcC1zZWxlY3QuanNcIjtcbmltcG9ydCBcIi4vcGx1Z2lucy9qUXVlcnlXUEF0dGFjaG1lbnRGb3JtSW5wdXRcIjtcblxuKGZ1bmN0aW9uKCAkIClcbntcblx0JCggZG9jdW1lbnQgKS5yZWFkeSggZnVuY3Rpb24oKVxuXHR7XG5cdFx0Ly8gU2VsZWN0MkZvcm1JbnB1dFxuXHRcdCQoIFwiLmZvcm0taW5wdXQtZWxlbWVudC5zZWxlY3QyXCIgKS5lYWNoKCBmdW5jdGlvbigpXG5cdFx0e1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoICQoIHRoaXMgKS5kYXRhKCkgKTtcblx0XHR9ICk7XG5cdH0gKTtcbn0pKCBqUXVlcnkgKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdHNjL3R1dG9tdmMudHMiLCIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xlc3MvdHV0b212Yy5sZXNzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCIvKiFcXHJcXG4gKiBCb290c3RyYXAtc2VsZWN0IHYxLjEyLjIgKGh0dHA6Ly9zaWx2aW9tb3JldG8uZ2l0aHViLmlvL2Jvb3RzdHJhcC1zZWxlY3QpXFxyXFxuICpcXHJcXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE3IGJvb3RzdHJhcC1zZWxlY3RcXHJcXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS9zaWx2aW9tb3JldG8vYm9vdHN0cmFwLXNlbGVjdC9ibG9iL21hc3Rlci9MSUNFTlNFKVxcclxcbiAqL1xcclxcblxcclxcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUgdW5sZXNzIGFtZE1vZHVsZUlkIGlzIHNldFxcbiAgICBkZWZpbmUoW1xcXCJqcXVlcnlcXFwiXSwgZnVuY3Rpb24gKGEwKSB7XFxuICAgICAgcmV0dXJuIChmYWN0b3J5KGEwKSk7XFxuICAgIH0pO1xcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xcbiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcXG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXFxuICAgIC8vIGxpa2UgTm9kZS5cXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXFxcImpxdWVyeVxcXCIpKTtcXG4gIH0gZWxzZSB7XFxuICAgIGZhY3Rvcnkocm9vdFtcXFwialF1ZXJ5XFxcIl0pO1xcbiAgfVxcbn0odGhpcywgZnVuY3Rpb24gKGpRdWVyeSkge1xcblxcbihmdW5jdGlvbiAoJCkge1xcclxcbiAgJ3VzZSBzdHJpY3QnO1xcclxcblxcclxcbiAgLy88ZWRpdG9yLWZvbGQgZGVzYz1cXFwiU2hpbXNcXFwiPlxcclxcbiAgaWYgKCFTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKSB7XFxyXFxuICAgIChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgJ3VzZSBzdHJpY3QnOyAvLyBuZWVkZWQgdG8gc3VwcG9ydCBgYXBwbHlgL2BjYWxsYCB3aXRoIGB1bmRlZmluZWRgL2BudWxsYFxcclxcbiAgICAgIHZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xcclxcbiAgICAgIHZhciBkZWZpbmVQcm9wZXJ0eSA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAvLyBJRSA4IG9ubHkgc3VwcG9ydHMgYE9iamVjdC5kZWZpbmVQcm9wZXJ0eWAgb24gRE9NIGVsZW1lbnRzXFxyXFxuICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XFxyXFxuICAgICAgICAgIHZhciAkZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XFxyXFxuICAgICAgICAgIHZhciByZXN1bHQgPSAkZGVmaW5lUHJvcGVydHkob2JqZWN0LCBvYmplY3QsIG9iamVjdCkgJiYgJGRlZmluZVByb3BlcnR5O1xcclxcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHJldHVybiByZXN1bHQ7XFxyXFxuICAgICAgfSgpKTtcXHJcXG4gICAgICB2YXIgaW5kZXhPZiA9ICcnLmluZGV4T2Y7XFxyXFxuICAgICAgdmFyIGluY2x1ZGVzID0gZnVuY3Rpb24gKHNlYXJjaCkge1xcclxcbiAgICAgICAgaWYgKHRoaXMgPT0gbnVsbCkge1xcclxcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICB2YXIgc3RyaW5nID0gU3RyaW5nKHRoaXMpO1xcclxcbiAgICAgICAgaWYgKHNlYXJjaCAmJiB0b1N0cmluZy5jYWxsKHNlYXJjaCkgPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcXHJcXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgdmFyIHN0cmluZ0xlbmd0aCA9IHN0cmluZy5sZW5ndGg7XFxyXFxuICAgICAgICB2YXIgc2VhcmNoU3RyaW5nID0gU3RyaW5nKHNlYXJjaCk7XFxyXFxuICAgICAgICB2YXIgc2VhcmNoTGVuZ3RoID0gc2VhcmNoU3RyaW5nLmxlbmd0aDtcXHJcXG4gICAgICAgIHZhciBwb3NpdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xcclxcbiAgICAgICAgLy8gYFRvSW50ZWdlcmBcXHJcXG4gICAgICAgIHZhciBwb3MgPSBwb3NpdGlvbiA/IE51bWJlcihwb3NpdGlvbikgOiAwO1xcclxcbiAgICAgICAgaWYgKHBvcyAhPSBwb3MpIHsgLy8gYmV0dGVyIGBpc05hTmBcXHJcXG4gICAgICAgICAgcG9zID0gMDtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKE1hdGgubWF4KHBvcywgMCksIHN0cmluZ0xlbmd0aCk7XFxyXFxuICAgICAgICAvLyBBdm9pZCB0aGUgYGluZGV4T2ZgIGNhbGwgaWYgbm8gbWF0Y2ggaXMgcG9zc2libGVcXHJcXG4gICAgICAgIGlmIChzZWFyY2hMZW5ndGggKyBzdGFydCA+IHN0cmluZ0xlbmd0aCkge1xcclxcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICByZXR1cm4gaW5kZXhPZi5jYWxsKHN0cmluZywgc2VhcmNoU3RyaW5nLCBwb3MpICE9IC0xO1xcclxcbiAgICAgIH07XFxyXFxuICAgICAgaWYgKGRlZmluZVByb3BlcnR5KSB7XFxyXFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCAnaW5jbHVkZXMnLCB7XFxyXFxuICAgICAgICAgICd2YWx1ZSc6IGluY2x1ZGVzLFxcclxcbiAgICAgICAgICAnY29uZmlndXJhYmxlJzogdHJ1ZSxcXHJcXG4gICAgICAgICAgJ3dyaXRhYmxlJzogdHJ1ZVxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMgPSBpbmNsdWRlcztcXHJcXG4gICAgICB9XFxyXFxuICAgIH0oKSk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBpZiAoIVN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCkge1xcclxcbiAgICAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICd1c2Ugc3RyaWN0JzsgLy8gbmVlZGVkIHRvIHN1cHBvcnQgYGFwcGx5YC9gY2FsbGAgd2l0aCBgdW5kZWZpbmVkYC9gbnVsbGBcXHJcXG4gICAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgLy8gSUUgOCBvbmx5IHN1cHBvcnRzIGBPYmplY3QuZGVmaW5lUHJvcGVydHlgIG9uIERPTSBlbGVtZW50c1xcclxcbiAgICAgICAgdHJ5IHtcXHJcXG4gICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xcclxcbiAgICAgICAgICB2YXIgJGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xcclxcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gJGRlZmluZVByb3BlcnR5KG9iamVjdCwgb2JqZWN0LCBvYmplY3QpICYmICRkZWZpbmVQcm9wZXJ0eTtcXHJcXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xcclxcbiAgICAgIH0oKSk7XFxyXFxuICAgICAgdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XFxyXFxuICAgICAgdmFyIHN0YXJ0c1dpdGggPSBmdW5jdGlvbiAoc2VhcmNoKSB7XFxyXFxuICAgICAgICBpZiAodGhpcyA9PSBudWxsKSB7XFxyXFxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHZhciBzdHJpbmcgPSBTdHJpbmcodGhpcyk7XFxyXFxuICAgICAgICBpZiAoc2VhcmNoICYmIHRvU3RyaW5nLmNhbGwoc2VhcmNoKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xcclxcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICB2YXIgc3RyaW5nTGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcXHJcXG4gICAgICAgIHZhciBzZWFyY2hTdHJpbmcgPSBTdHJpbmcoc2VhcmNoKTtcXHJcXG4gICAgICAgIHZhciBzZWFyY2hMZW5ndGggPSBzZWFyY2hTdHJpbmcubGVuZ3RoO1xcclxcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XFxyXFxuICAgICAgICAvLyBgVG9JbnRlZ2VyYFxcclxcbiAgICAgICAgdmFyIHBvcyA9IHBvc2l0aW9uID8gTnVtYmVyKHBvc2l0aW9uKSA6IDA7XFxyXFxuICAgICAgICBpZiAocG9zICE9IHBvcykgeyAvLyBiZXR0ZXIgYGlzTmFOYFxcclxcbiAgICAgICAgICBwb3MgPSAwO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5taW4oTWF0aC5tYXgocG9zLCAwKSwgc3RyaW5nTGVuZ3RoKTtcXHJcXG4gICAgICAgIC8vIEF2b2lkIHRoZSBgaW5kZXhPZmAgY2FsbCBpZiBubyBtYXRjaCBpcyBwb3NzaWJsZVxcclxcbiAgICAgICAgaWYgKHNlYXJjaExlbmd0aCArIHN0YXJ0ID4gc3RyaW5nTGVuZ3RoKSB7XFxyXFxuICAgICAgICAgIHJldHVybiBmYWxzZTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xcclxcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBzZWFyY2hMZW5ndGgpIHtcXHJcXG4gICAgICAgICAgaWYgKHN0cmluZy5jaGFyQ29kZUF0KHN0YXJ0ICsgaW5kZXgpICE9IHNlYXJjaFN0cmluZy5jaGFyQ29kZUF0KGluZGV4KSkge1xcclxcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgcmV0dXJuIHRydWU7XFxyXFxuICAgICAgfTtcXHJcXG4gICAgICBpZiAoZGVmaW5lUHJvcGVydHkpIHtcXHJcXG4gICAgICAgIGRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsICdzdGFydHNXaXRoJywge1xcclxcbiAgICAgICAgICAndmFsdWUnOiBzdGFydHNXaXRoLFxcclxcbiAgICAgICAgICAnY29uZmlndXJhYmxlJzogdHJ1ZSxcXHJcXG4gICAgICAgICAgJ3dyaXRhYmxlJzogdHJ1ZVxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCA9IHN0YXJ0c1dpdGg7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KCkpO1xcclxcbiAgfVxcclxcblxcclxcbiAgaWYgKCFPYmplY3Qua2V5cykge1xcclxcbiAgICBPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIChcXHJcXG4gICAgICBvLCAvLyBvYmplY3RcXHJcXG4gICAgICBrLCAvLyBrZXlcXHJcXG4gICAgICByICAvLyByZXN1bHQgYXJyYXlcXHJcXG4gICAgICApe1xcclxcbiAgICAgIC8vIGluaXRpYWxpemUgb2JqZWN0IGFuZCByZXN1bHRcXHJcXG4gICAgICByPVtdO1xcclxcbiAgICAgIC8vIGl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xcclxcbiAgICAgIGZvciAoayBpbiBvKVxcclxcbiAgICAgICAgICAvLyBmaWxsIHJlc3VsdCBhcnJheSB3aXRoIG5vbi1wcm90b3R5cGljYWwga2V5c1xcclxcbiAgICAgICAgci5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspICYmIHIucHVzaChrKTtcXHJcXG4gICAgICAvLyByZXR1cm4gcmVzdWx0XFxyXFxuICAgICAgcmV0dXJuIHI7XFxyXFxuICAgIH07XFxyXFxuICB9XFxyXFxuXFxyXFxuICAvLyBzZXQgZGF0YS1zZWxlY3RlZCBvbiBzZWxlY3QgZWxlbWVudCBpZiB0aGUgdmFsdWUgaGFzIGJlZW4gcHJvZ3JhbW1hdGljYWxseSBzZWxlY3RlZFxcclxcbiAgLy8gcHJpb3IgdG8gaW5pdGlhbGl6YXRpb24gb2YgYm9vdHN0cmFwLXNlbGVjdFxcclxcbiAgLy8gKiBjb25zaWRlciByZW1vdmluZyBvciByZXBsYWNpbmcgYW4gYWx0ZXJuYXRpdmUgbWV0aG9kICpcXHJcXG4gIHZhciB2YWxIb29rcyA9IHtcXHJcXG4gICAgdXNlRGVmYXVsdDogZmFsc2UsXFxyXFxuICAgIF9zZXQ6ICQudmFsSG9va3Muc2VsZWN0LnNldFxcclxcbiAgfTtcXHJcXG5cXHJcXG4gICQudmFsSG9va3Muc2VsZWN0LnNldCA9IGZ1bmN0aW9uKGVsZW0sIHZhbHVlKSB7XFxyXFxuICAgIGlmICh2YWx1ZSAmJiAhdmFsSG9va3MudXNlRGVmYXVsdCkgJChlbGVtKS5kYXRhKCdzZWxlY3RlZCcsIHRydWUpO1xcclxcblxcclxcbiAgICByZXR1cm4gdmFsSG9va3MuX3NldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHZhciBjaGFuZ2VkX2FyZ3VtZW50cyA9IG51bGw7XFxyXFxuICAkLmZuLnRyaWdnZXJOYXRpdmUgPSBmdW5jdGlvbiAoZXZlbnROYW1lKSB7XFxyXFxuICAgIHZhciBlbCA9IHRoaXNbMF0sXFxyXFxuICAgICAgICBldmVudDtcXHJcXG5cXHJcXG4gICAgaWYgKGVsLmRpc3BhdGNoRXZlbnQpIHsgLy8gZm9yIG1vZGVybiBicm93c2VycyAmIElFOStcXHJcXG4gICAgICBpZiAodHlwZW9mIEV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XFxyXFxuICAgICAgICAvLyBGb3IgbW9kZXJuIGJyb3dzZXJzXFxyXFxuICAgICAgICBldmVudCA9IG5ldyBFdmVudChldmVudE5hbWUsIHtcXHJcXG4gICAgICAgICAgYnViYmxlczogdHJ1ZVxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIC8vIEZvciBJRSBzaW5jZSBpdCBkb2Vzbid0IHN1cHBvcnQgRXZlbnQgY29uc3RydWN0b3JcXHJcXG4gICAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XFxyXFxuICAgICAgICBldmVudC5pbml0RXZlbnQoZXZlbnROYW1lLCB0cnVlLCBmYWxzZSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGVsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xcclxcbiAgICB9IGVsc2UgaWYgKGVsLmZpcmVFdmVudCkgeyAvLyBmb3IgSUU4XFxyXFxuICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xcclxcbiAgICAgIGV2ZW50LmV2ZW50VHlwZSA9IGV2ZW50TmFtZTtcXHJcXG4gICAgICBlbC5maXJlRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgZXZlbnQpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIC8vIGZhbGwgYmFjayB0byBqUXVlcnkudHJpZ2dlclxcclxcbiAgICAgIHRoaXMudHJpZ2dlcihldmVudE5hbWUpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcbiAgLy88L2VkaXRvci1mb2xkPlxcclxcblxcclxcbiAgLy8gQ2FzZSBpbnNlbnNpdGl2ZSBjb250YWlucyBzZWFyY2hcXHJcXG4gICQuZXhwci5wc2V1ZG9zLmljb250YWlucyA9IGZ1bmN0aW9uIChvYmosIGluZGV4LCBtZXRhKSB7XFxyXFxuICAgIHZhciAkb2JqID0gJChvYmopO1xcclxcbiAgICB2YXIgaGF5c3RhY2sgPSAoJG9iai5kYXRhKCd0b2tlbnMnKSB8fCAkb2JqLnRleHQoKSkudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xcclxcbiAgICByZXR1cm4gaGF5c3RhY2suaW5jbHVkZXMobWV0YVszXS50b1VwcGVyQ2FzZSgpKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBDYXNlIGluc2Vuc2l0aXZlIGJlZ2lucyBzZWFyY2hcXHJcXG4gICQuZXhwci5wc2V1ZG9zLmliZWdpbnMgPSBmdW5jdGlvbiAob2JqLCBpbmRleCwgbWV0YSkge1xcclxcbiAgICB2YXIgJG9iaiA9ICQob2JqKTtcXHJcXG4gICAgdmFyIGhheXN0YWNrID0gKCRvYmouZGF0YSgndG9rZW5zJykgfHwgJG9iai50ZXh0KCkpLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKTtcXHJcXG4gICAgcmV0dXJuIGhheXN0YWNrLnN0YXJ0c1dpdGgobWV0YVszXS50b1VwcGVyQ2FzZSgpKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBDYXNlIGFuZCBhY2NlbnQgaW5zZW5zaXRpdmUgY29udGFpbnMgc2VhcmNoXFxyXFxuICAkLmV4cHIucHNldWRvcy5haWNvbnRhaW5zID0gZnVuY3Rpb24gKG9iaiwgaW5kZXgsIG1ldGEpIHtcXHJcXG4gICAgdmFyICRvYmogPSAkKG9iaik7XFxyXFxuICAgIHZhciBoYXlzdGFjayA9ICgkb2JqLmRhdGEoJ3Rva2VucycpIHx8ICRvYmouZGF0YSgnbm9ybWFsaXplZFRleHQnKSB8fCAkb2JqLnRleHQoKSkudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xcclxcbiAgICByZXR1cm4gaGF5c3RhY2suaW5jbHVkZXMobWV0YVszXS50b1VwcGVyQ2FzZSgpKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBDYXNlIGFuZCBhY2NlbnQgaW5zZW5zaXRpdmUgYmVnaW5zIHNlYXJjaFxcclxcbiAgJC5leHByLnBzZXVkb3MuYWliZWdpbnMgPSBmdW5jdGlvbiAob2JqLCBpbmRleCwgbWV0YSkge1xcclxcbiAgICB2YXIgJG9iaiA9ICQob2JqKTtcXHJcXG4gICAgdmFyIGhheXN0YWNrID0gKCRvYmouZGF0YSgndG9rZW5zJykgfHwgJG9iai5kYXRhKCdub3JtYWxpemVkVGV4dCcpIHx8ICRvYmoudGV4dCgpKS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCk7XFxyXFxuICAgIHJldHVybiBoYXlzdGFjay5zdGFydHNXaXRoKG1ldGFbM10udG9VcHBlckNhc2UoKSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgLyoqXFxyXFxuICAgKiBSZW1vdmUgYWxsIGRpYXRyaWNzIGZyb20gdGhlIGdpdmVuIHRleHQuXFxyXFxuICAgKiBAYWNjZXNzIHByaXZhdGVcXHJcXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XFxyXFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfVxcclxcbiAgICovXFxyXFxuICBmdW5jdGlvbiBub3JtYWxpemVUb0Jhc2UodGV4dCkge1xcclxcbiAgICB2YXIgckV4cHMgPSBbXFxyXFxuICAgICAge3JlOiAvW1xcXFx4QzAtXFxcXHhDNl0vZywgY2g6IFxcXCJBXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RTAtXFxcXHhFNl0vZywgY2g6IFxcXCJhXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4QzgtXFxcXHhDQl0vZywgY2g6IFxcXCJFXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RTgtXFxcXHhFQl0vZywgY2g6IFxcXCJlXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4Q0MtXFxcXHhDRl0vZywgY2g6IFxcXCJJXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RUMtXFxcXHhFRl0vZywgY2g6IFxcXCJpXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RDItXFxcXHhENl0vZywgY2g6IFxcXCJPXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RjItXFxcXHhGNl0vZywgY2g6IFxcXCJvXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RDktXFxcXHhEQ10vZywgY2g6IFxcXCJVXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RjktXFxcXHhGQ10vZywgY2g6IFxcXCJ1XFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4QzctXFxcXHhFN10vZywgY2g6IFxcXCJjXFxcIn0sXFxyXFxuICAgICAge3JlOiAvW1xcXFx4RDFdL2csIGNoOiBcXFwiTlxcXCJ9LFxcclxcbiAgICAgIHtyZTogL1tcXFxceEYxXS9nLCBjaDogXFxcIm5cXFwifVxcclxcbiAgICBdO1xcclxcbiAgICAkLmVhY2gockV4cHMsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB0ZXh0ID0gdGV4dCA/IHRleHQucmVwbGFjZSh0aGlzLnJlLCB0aGlzLmNoKSA6ICcnO1xcclxcbiAgICB9KTtcXHJcXG4gICAgcmV0dXJuIHRleHQ7XFxyXFxuICB9XFxyXFxuXFxyXFxuXFxyXFxuICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxcclxcbiAgdmFyIGVzY2FwZU1hcCA9IHtcXHJcXG4gICAgJyYnOiAnJmFtcDsnLFxcclxcbiAgICAnPCc6ICcmbHQ7JyxcXHJcXG4gICAgJz4nOiAnJmd0OycsXFxyXFxuICAgICdcXFwiJzogJyZxdW90OycsXFxyXFxuICAgIFxcXCInXFxcIjogJyYjeDI3OycsXFxyXFxuICAgICdgJzogJyYjeDYwOydcXHJcXG4gIH07XFxyXFxuICBcXHJcXG4gIHZhciB1bmVzY2FwZU1hcCA9IHtcXHJcXG4gICAgJyZhbXA7JzogJyYnLFxcclxcbiAgICAnJmx0Oyc6ICc8JyxcXHJcXG4gICAgJyZndDsnOiAnPicsXFxyXFxuICAgICcmcXVvdDsnOiAnXFxcIicsXFxyXFxuICAgICcmI3gyNzsnOiBcXFwiJ1xcXCIsXFxyXFxuICAgICcmI3g2MDsnOiAnYCdcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBGdW5jdGlvbnMgZm9yIGVzY2FwaW5nIGFuZCB1bmVzY2FwaW5nIHN0cmluZ3MgdG8vZnJvbSBIVE1MIGludGVycG9sYXRpb24uXFxyXFxuICB2YXIgY3JlYXRlRXNjYXBlciA9IGZ1bmN0aW9uKG1hcCkge1xcclxcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XFxyXFxuICAgICAgcmV0dXJuIG1hcFttYXRjaF07XFxyXFxuICAgIH07XFxyXFxuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZC5cXHJcXG4gICAgdmFyIHNvdXJjZSA9ICcoPzonICsgT2JqZWN0LmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XFxyXFxuICAgIHZhciB0ZXN0UmVnZXhwID0gUmVnRXhwKHNvdXJjZSk7XFxyXFxuICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTtcXHJcXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xcclxcbiAgICAgIHN0cmluZyA9IHN0cmluZyA9PSBudWxsID8gJycgOiAnJyArIHN0cmluZztcXHJcXG4gICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZztcXHJcXG4gICAgfTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICB2YXIgaHRtbEVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTtcXHJcXG4gIHZhciBodG1sVW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcXHJcXG5cXHJcXG4gIHZhciBTZWxlY3RwaWNrZXIgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICAvLyBib290c3RyYXAtc2VsZWN0IGhhcyBiZWVuIGluaXRpYWxpemVkIC0gcmV2ZXJ0IHZhbEhvb2tzLnNlbGVjdC5zZXQgYmFjayB0byBpdHMgb3JpZ2luYWwgZnVuY3Rpb25cXHJcXG4gICAgaWYgKCF2YWxIb29rcy51c2VEZWZhdWx0KSB7XFxyXFxuICAgICAgJC52YWxIb29rcy5zZWxlY3Quc2V0ID0gdmFsSG9va3MuX3NldDtcXHJcXG4gICAgICB2YWxIb29rcy51c2VEZWZhdWx0ID0gdHJ1ZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcXHJcXG4gICAgdGhpcy4kbmV3RWxlbWVudCA9IG51bGw7XFxyXFxuICAgIHRoaXMuJGJ1dHRvbiA9IG51bGw7XFxyXFxuICAgIHRoaXMuJG1lbnUgPSBudWxsO1xcclxcbiAgICB0aGlzLiRsaXMgPSBudWxsO1xcclxcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xcclxcblxcclxcbiAgICAvLyBJZiB3ZSBoYXZlIG5vIHRpdGxlIHlldCwgdHJ5IHRvIHB1bGwgaXQgZnJvbSB0aGUgaHRtbCB0aXRsZSBhdHRyaWJ1dGUgKGpRdWVyeSBkb2VzbnQnIHBpY2sgaXQgdXAgYXMgaXQncyBub3QgYVxcclxcbiAgICAvLyBkYXRhLWF0dHJpYnV0ZSlcXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy50aXRsZSA9PT0gbnVsbCkge1xcclxcbiAgICAgIHRoaXMub3B0aW9ucy50aXRsZSA9IHRoaXMuJGVsZW1lbnQuYXR0cigndGl0bGUnKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAvLyBGb3JtYXQgd2luZG93IHBhZGRpbmdcXHJcXG4gICAgdmFyIHdpblBhZCA9IHRoaXMub3B0aW9ucy53aW5kb3dQYWRkaW5nO1xcclxcbiAgICBpZiAodHlwZW9mIHdpblBhZCA9PT0gJ251bWJlcicpIHtcXHJcXG4gICAgICB0aGlzLm9wdGlvbnMud2luZG93UGFkZGluZyA9IFt3aW5QYWQsIHdpblBhZCwgd2luUGFkLCB3aW5QYWRdO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC8vRXhwb3NlIHB1YmxpYyBtZXRob2RzXFxyXFxuICAgIHRoaXMudmFsID0gU2VsZWN0cGlja2VyLnByb3RvdHlwZS52YWw7XFxyXFxuICAgIHRoaXMucmVuZGVyID0gU2VsZWN0cGlja2VyLnByb3RvdHlwZS5yZW5kZXI7XFxyXFxuICAgIHRoaXMucmVmcmVzaCA9IFNlbGVjdHBpY2tlci5wcm90b3R5cGUucmVmcmVzaDtcXHJcXG4gICAgdGhpcy5zZXRTdHlsZSA9IFNlbGVjdHBpY2tlci5wcm90b3R5cGUuc2V0U3R5bGU7XFxyXFxuICAgIHRoaXMuc2VsZWN0QWxsID0gU2VsZWN0cGlja2VyLnByb3RvdHlwZS5zZWxlY3RBbGw7XFxyXFxuICAgIHRoaXMuZGVzZWxlY3RBbGwgPSBTZWxlY3RwaWNrZXIucHJvdG90eXBlLmRlc2VsZWN0QWxsO1xcclxcbiAgICB0aGlzLmRlc3Ryb3kgPSBTZWxlY3RwaWNrZXIucHJvdG90eXBlLmRlc3Ryb3k7XFxyXFxuICAgIHRoaXMucmVtb3ZlID0gU2VsZWN0cGlja2VyLnByb3RvdHlwZS5yZW1vdmU7XFxyXFxuICAgIHRoaXMuc2hvdyA9IFNlbGVjdHBpY2tlci5wcm90b3R5cGUuc2hvdztcXHJcXG4gICAgdGhpcy5oaWRlID0gU2VsZWN0cGlja2VyLnByb3RvdHlwZS5oaWRlO1xcclxcblxcclxcbiAgICB0aGlzLmluaXQoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RwaWNrZXIuVkVSU0lPTiA9ICcxLjEyLjInO1xcclxcblxcclxcbiAgLy8gcGFydCBvZiB0aGlzIGlzIGR1cGxpY2F0ZWQgaW4gaTE4bi9kZWZhdWx0cy1lbl9VUy5qcy4gTWFrZSBzdXJlIHRvIHVwZGF0ZSBib3RoLlxcclxcbiAgU2VsZWN0cGlja2VyLkRFRkFVTFRTID0ge1xcclxcbiAgICBub25lU2VsZWN0ZWRUZXh0OiAnTm90aGluZyBzZWxlY3RlZCcsXFxyXFxuICAgIG5vbmVSZXN1bHRzVGV4dDogJ05vIHJlc3VsdHMgbWF0Y2hlZCB7MH0nLFxcclxcbiAgICBjb3VudFNlbGVjdGVkVGV4dDogZnVuY3Rpb24gKG51bVNlbGVjdGVkLCBudW1Ub3RhbCkge1xcclxcbiAgICAgIHJldHVybiAobnVtU2VsZWN0ZWQgPT0gMSkgPyBcXFwiezB9IGl0ZW0gc2VsZWN0ZWRcXFwiIDogXFxcInswfSBpdGVtcyBzZWxlY3RlZFxcXCI7XFxyXFxuICAgIH0sXFxyXFxuICAgIG1heE9wdGlvbnNUZXh0OiBmdW5jdGlvbiAobnVtQWxsLCBudW1Hcm91cCkge1xcclxcbiAgICAgIHJldHVybiBbXFxyXFxuICAgICAgICAobnVtQWxsID09IDEpID8gJ0xpbWl0IHJlYWNoZWQgKHtufSBpdGVtIG1heCknIDogJ0xpbWl0IHJlYWNoZWQgKHtufSBpdGVtcyBtYXgpJyxcXHJcXG4gICAgICAgIChudW1Hcm91cCA9PSAxKSA/ICdHcm91cCBsaW1pdCByZWFjaGVkICh7bn0gaXRlbSBtYXgpJyA6ICdHcm91cCBsaW1pdCByZWFjaGVkICh7bn0gaXRlbXMgbWF4KSdcXHJcXG4gICAgICBdO1xcclxcbiAgICB9LFxcclxcbiAgICBzZWxlY3RBbGxUZXh0OiAnU2VsZWN0IEFsbCcsXFxyXFxuICAgIGRlc2VsZWN0QWxsVGV4dDogJ0Rlc2VsZWN0IEFsbCcsXFxyXFxuICAgIGRvbmVCdXR0b246IGZhbHNlLFxcclxcbiAgICBkb25lQnV0dG9uVGV4dDogJ0Nsb3NlJyxcXHJcXG4gICAgbXVsdGlwbGVTZXBhcmF0b3I6ICcsICcsXFxyXFxuICAgIHN0eWxlQmFzZTogJ2J0bicsXFxyXFxuICAgIHN0eWxlOiAnYnRuLWRlZmF1bHQnLFxcclxcbiAgICBzaXplOiAnYXV0bycsXFxyXFxuICAgIHRpdGxlOiBudWxsLFxcclxcbiAgICBzZWxlY3RlZFRleHRGb3JtYXQ6ICd2YWx1ZXMnLFxcclxcbiAgICB3aWR0aDogZmFsc2UsXFxyXFxuICAgIGNvbnRhaW5lcjogZmFsc2UsXFxyXFxuICAgIGhpZGVEaXNhYmxlZDogZmFsc2UsXFxyXFxuICAgIHNob3dTdWJ0ZXh0OiBmYWxzZSxcXHJcXG4gICAgc2hvd0ljb246IHRydWUsXFxyXFxuICAgIHNob3dDb250ZW50OiB0cnVlLFxcclxcbiAgICBkcm9wdXBBdXRvOiB0cnVlLFxcclxcbiAgICBoZWFkZXI6IGZhbHNlLFxcclxcbiAgICBsaXZlU2VhcmNoOiBmYWxzZSxcXHJcXG4gICAgbGl2ZVNlYXJjaFBsYWNlaG9sZGVyOiBudWxsLFxcclxcbiAgICBsaXZlU2VhcmNoTm9ybWFsaXplOiBmYWxzZSxcXHJcXG4gICAgbGl2ZVNlYXJjaFN0eWxlOiAnY29udGFpbnMnLFxcclxcbiAgICBhY3Rpb25zQm94OiBmYWxzZSxcXHJcXG4gICAgaWNvbkJhc2U6ICdnbHlwaGljb24nLFxcclxcbiAgICB0aWNrSWNvbjogJ2dseXBoaWNvbi1vaycsXFxyXFxuICAgIHNob3dUaWNrOiBmYWxzZSxcXHJcXG4gICAgdGVtcGxhdGU6IHtcXHJcXG4gICAgICBjYXJldDogJzxzcGFuIGNsYXNzPVxcXCJjYXJldFxcXCI+PC9zcGFuPidcXHJcXG4gICAgfSxcXHJcXG4gICAgbWF4T3B0aW9uczogZmFsc2UsXFxyXFxuICAgIG1vYmlsZTogZmFsc2UsXFxyXFxuICAgIHNlbGVjdE9uVGFiOiBmYWxzZSxcXHJcXG4gICAgZHJvcGRvd25BbGlnblJpZ2h0OiBmYWxzZSxcXHJcXG4gICAgd2luZG93UGFkZGluZzogMFxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdHBpY2tlci5wcm90b3R5cGUgPSB7XFxyXFxuXFxyXFxuICAgIGNvbnN0cnVjdG9yOiBTZWxlY3RwaWNrZXIsXFxyXFxuXFxyXFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgdGhhdCA9IHRoaXMsXFxyXFxuICAgICAgICAgIGlkID0gdGhpcy4kZWxlbWVudC5hdHRyKCdpZCcpO1xcclxcblxcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoJ2JzLXNlbGVjdC1oaWRkZW4nKTtcXHJcXG5cXHJcXG4gICAgICAvLyBzdG9yZSBvcmlnaW5hbEluZGV4IChrZXkpIGFuZCBuZXdJbmRleCAodmFsdWUpIGluIHRoaXMubGlPYmogZm9yIGZhc3QgYWNjZXNzaWJpbGl0eVxcclxcbiAgICAgIC8vIGFsbG93cyB1cyB0byBkbyB0aGlzLiRsaXMuZXEodGhhdC5saU9ialtpbmRleF0pIGluc3RlYWQgb2YgdGhpcy4kbGlzLmZpbHRlcignW2RhdGEtb3JpZ2luYWwtaW5kZXg9XFxcIicgKyBpbmRleCArICdcXFwiXScpXFxyXFxuICAgICAgdGhpcy5saU9iaiA9IHt9O1xcclxcbiAgICAgIHRoaXMubXVsdGlwbGUgPSB0aGlzLiRlbGVtZW50LnByb3AoJ211bHRpcGxlJyk7XFxyXFxuICAgICAgdGhpcy5hdXRvZm9jdXMgPSB0aGlzLiRlbGVtZW50LnByb3AoJ2F1dG9mb2N1cycpO1xcclxcbiAgICAgIHRoaXMuJG5ld0VsZW1lbnQgPSB0aGlzLmNyZWF0ZVZpZXcoKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50XFxyXFxuICAgICAgICAuYWZ0ZXIodGhpcy4kbmV3RWxlbWVudClcXHJcXG4gICAgICAgIC5hcHBlbmRUbyh0aGlzLiRuZXdFbGVtZW50KTtcXHJcXG4gICAgICB0aGlzLiRidXR0b24gPSB0aGlzLiRuZXdFbGVtZW50LmNoaWxkcmVuKCdidXR0b24nKTtcXHJcXG4gICAgICB0aGlzLiRtZW51ID0gdGhpcy4kbmV3RWxlbWVudC5jaGlsZHJlbignLmRyb3Bkb3duLW1lbnUnKTtcXHJcXG4gICAgICB0aGlzLiRtZW51SW5uZXIgPSB0aGlzLiRtZW51LmNoaWxkcmVuKCcuaW5uZXInKTtcXHJcXG4gICAgICB0aGlzLiRzZWFyY2hib3ggPSB0aGlzLiRtZW51LmZpbmQoJ2lucHV0Jyk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygnYnMtc2VsZWN0LWhpZGRlbicpO1xcclxcblxcclxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZHJvcGRvd25BbGlnblJpZ2h0ID09PSB0cnVlKSB0aGlzLiRtZW51LmFkZENsYXNzKCdkcm9wZG93bi1tZW51LXJpZ2h0Jyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKHR5cGVvZiBpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcXHJcXG4gICAgICAgIHRoaXMuJGJ1dHRvbi5hdHRyKCdkYXRhLWlkJywgaWQpO1xcclxcbiAgICAgICAgJCgnbGFiZWxbZm9yPVxcXCInICsgaWQgKyAnXFxcIl0nKS5jbGljayhmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgIHRoYXQuJGJ1dHRvbi5mb2N1cygpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHRoaXMuY2hlY2tEaXNhYmxlZCgpO1xcclxcbiAgICAgIHRoaXMuY2xpY2tMaXN0ZW5lcigpO1xcclxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGl2ZVNlYXJjaCkgdGhpcy5saXZlU2VhcmNoTGlzdGVuZXIoKTtcXHJcXG4gICAgICB0aGlzLnJlbmRlcigpO1xcclxcbiAgICAgIHRoaXMuc2V0U3R5bGUoKTtcXHJcXG4gICAgICB0aGlzLnNldFdpZHRoKCk7XFxyXFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb250YWluZXIpIHRoaXMuc2VsZWN0UG9zaXRpb24oKTtcXHJcXG4gICAgICB0aGlzLiRtZW51LmRhdGEoJ3RoaXMnLCB0aGlzKTtcXHJcXG4gICAgICB0aGlzLiRuZXdFbGVtZW50LmRhdGEoJ3RoaXMnLCB0aGlzKTtcXHJcXG4gICAgICBpZiAodGhpcy5vcHRpb25zLm1vYmlsZSkgdGhpcy5tb2JpbGUoKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRuZXdFbGVtZW50Lm9uKHtcXHJcXG4gICAgICAgICdoaWRlLmJzLmRyb3Bkb3duJzogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgdGhhdC4kbWVudUlubmVyLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XFxyXFxuICAgICAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignaGlkZS5icy5zZWxlY3QnLCBlKTtcXHJcXG4gICAgICAgIH0sXFxyXFxuICAgICAgICAnaGlkZGVuLmJzLmRyb3Bkb3duJzogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdoaWRkZW4uYnMuc2VsZWN0JywgZSk7XFxyXFxuICAgICAgICB9LFxcclxcbiAgICAgICAgJ3Nob3cuYnMuZHJvcGRvd24nOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICB0aGF0LiRtZW51SW5uZXIuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpO1xcclxcbiAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ3Nob3cuYnMuc2VsZWN0JywgZSk7XFxyXFxuICAgICAgICB9LFxcclxcbiAgICAgICAgJ3Nob3duLmJzLmRyb3Bkb3duJzogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdzaG93bi5icy5zZWxlY3QnLCBlKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGhhdC4kZWxlbWVudFswXS5oYXNBdHRyaWJ1dGUoJ3JlcXVpcmVkJykpIHtcXHJcXG4gICAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2ludmFsaWQnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgIHRoYXQuJGJ1dHRvblxcclxcbiAgICAgICAgICAgIC5hZGRDbGFzcygnYnMtaW52YWxpZCcpXFxyXFxuICAgICAgICAgICAgLmZvY3VzKCk7XFxyXFxuXFxyXFxuICAgICAgICAgIHRoYXQuJGVsZW1lbnQub24oe1xcclxcbiAgICAgICAgICAgICdmb2N1cy5icy5zZWxlY3QnOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICB0aGF0LiRidXR0b24uZm9jdXMoKTtcXHJcXG4gICAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQub2ZmKCdmb2N1cy5icy5zZWxlY3QnKTtcXHJcXG4gICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICdzaG93bi5icy5zZWxlY3QnOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICB0aGF0LiRlbGVtZW50XFxyXFxuICAgICAgICAgICAgICAgIC52YWwodGhhdC4kZWxlbWVudC52YWwoKSkgLy8gc2V0IHRoZSB2YWx1ZSB0byBoaWRlIHRoZSB2YWxpZGF0aW9uIG1lc3NhZ2UgaW4gQ2hyb21lIHdoZW4gbWVudSBpcyBvcGVuZWRcXHJcXG4gICAgICAgICAgICAgICAgLm9mZignc2hvd24uYnMuc2VsZWN0Jyk7XFxyXFxuICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAncmVuZGVyZWQuYnMuc2VsZWN0JzogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgLy8gaWYgc2VsZWN0IGlzIG5vIGxvbmdlciBpbnZhbGlkLCByZW1vdmUgdGhlIGJzLWludmFsaWQgY2xhc3NcXHJcXG4gICAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkaXR5LnZhbGlkKSB0aGF0LiRidXR0b24ucmVtb3ZlQ2xhc3MoJ2JzLWludmFsaWQnKTtcXHJcXG4gICAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQub2ZmKCdyZW5kZXJlZC5icy5zZWxlY3QnKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdsb2FkZWQuYnMuc2VsZWN0Jyk7XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIGNyZWF0ZURyb3Bkb3duOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgLy8gT3B0aW9uc1xcclxcbiAgICAgIC8vIElmIHdlIGFyZSBtdWx0aXBsZSBvciBzaG93VGljayBvcHRpb24gaXMgc2V0LCB0aGVuIGFkZCB0aGUgc2hvdy10aWNrIGNsYXNzXFxyXFxuICAgICAgdmFyIHNob3dUaWNrID0gKHRoaXMubXVsdGlwbGUgfHwgdGhpcy5vcHRpb25zLnNob3dUaWNrKSA/ICcgc2hvdy10aWNrJyA6ICcnLFxcclxcbiAgICAgICAgICBpbnB1dEdyb3VwID0gdGhpcy4kZWxlbWVudC5wYXJlbnQoKS5oYXNDbGFzcygnaW5wdXQtZ3JvdXAnKSA/ICcgaW5wdXQtZ3JvdXAtYnRuJyA6ICcnLFxcclxcbiAgICAgICAgICBhdXRvZm9jdXMgPSB0aGlzLmF1dG9mb2N1cyA/ICcgYXV0b2ZvY3VzJyA6ICcnO1xcclxcbiAgICAgIC8vIEVsZW1lbnRzXFxyXFxuICAgICAgdmFyIGhlYWRlciA9IHRoaXMub3B0aW9ucy5oZWFkZXIgPyAnPGRpdiBjbGFzcz1cXFwicG9wb3Zlci10aXRsZVxcXCI+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJjbG9zZVxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPiZ0aW1lczs8L2J1dHRvbj4nICsgdGhpcy5vcHRpb25zLmhlYWRlciArICc8L2Rpdj4nIDogJyc7XFxyXFxuICAgICAgdmFyIHNlYXJjaGJveCA9IHRoaXMub3B0aW9ucy5saXZlU2VhcmNoID9cXHJcXG4gICAgICAnPGRpdiBjbGFzcz1cXFwiYnMtc2VhcmNoYm94XFxcIj4nICtcXHJcXG4gICAgICAnPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIicgK1xcclxcbiAgICAgIChudWxsID09PSB0aGlzLm9wdGlvbnMubGl2ZVNlYXJjaFBsYWNlaG9sZGVyID8gJycgOiAnIHBsYWNlaG9sZGVyPVxcXCInICsgaHRtbEVzY2FwZSh0aGlzLm9wdGlvbnMubGl2ZVNlYXJjaFBsYWNlaG9sZGVyKSArICdcXFwiJykgKyAnIHJvbGU9XFxcInRleHRib3hcXFwiIGFyaWEtbGFiZWw9XFxcIlNlYXJjaFxcXCI+JyArXFxyXFxuICAgICAgJzwvZGl2PidcXHJcXG4gICAgICAgICAgOiAnJztcXHJcXG4gICAgICB2YXIgYWN0aW9uc2JveCA9IHRoaXMubXVsdGlwbGUgJiYgdGhpcy5vcHRpb25zLmFjdGlvbnNCb3ggP1xcclxcbiAgICAgICc8ZGl2IGNsYXNzPVxcXCJicy1hY3Rpb25zYm94XFxcIj4nICtcXHJcXG4gICAgICAnPGRpdiBjbGFzcz1cXFwiYnRuLWdyb3VwIGJ0bi1ncm91cC1zbSBidG4tYmxvY2tcXFwiPicgK1xcclxcbiAgICAgICc8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImFjdGlvbnMtYnRuIGJzLXNlbGVjdC1hbGwgYnRuIGJ0bi1kZWZhdWx0XFxcIj4nICtcXHJcXG4gICAgICB0aGlzLm9wdGlvbnMuc2VsZWN0QWxsVGV4dCArXFxyXFxuICAgICAgJzwvYnV0dG9uPicgK1xcclxcbiAgICAgICc8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImFjdGlvbnMtYnRuIGJzLWRlc2VsZWN0LWFsbCBidG4gYnRuLWRlZmF1bHRcXFwiPicgK1xcclxcbiAgICAgIHRoaXMub3B0aW9ucy5kZXNlbGVjdEFsbFRleHQgK1xcclxcbiAgICAgICc8L2J1dHRvbj4nICtcXHJcXG4gICAgICAnPC9kaXY+JyArXFxyXFxuICAgICAgJzwvZGl2PidcXHJcXG4gICAgICAgICAgOiAnJztcXHJcXG4gICAgICB2YXIgZG9uZWJ1dHRvbiA9IHRoaXMubXVsdGlwbGUgJiYgdGhpcy5vcHRpb25zLmRvbmVCdXR0b24gP1xcclxcbiAgICAgICc8ZGl2IGNsYXNzPVxcXCJicy1kb25lYnV0dG9uXFxcIj4nICtcXHJcXG4gICAgICAnPGRpdiBjbGFzcz1cXFwiYnRuLWdyb3VwIGJ0bi1ibG9ja1xcXCI+JyArXFxyXFxuICAgICAgJzxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFxcXCI+JyArXFxyXFxuICAgICAgdGhpcy5vcHRpb25zLmRvbmVCdXR0b25UZXh0ICtcXHJcXG4gICAgICAnPC9idXR0b24+JyArXFxyXFxuICAgICAgJzwvZGl2PicgK1xcclxcbiAgICAgICc8L2Rpdj4nXFxyXFxuICAgICAgICAgIDogJyc7XFxyXFxuICAgICAgdmFyIGRyb3AgPVxcclxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cXFwiYnRuLWdyb3VwIGJvb3RzdHJhcC1zZWxlY3QnICsgc2hvd1RpY2sgKyBpbnB1dEdyb3VwICsgJ1xcXCI+JyArXFxyXFxuICAgICAgICAgICc8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIicgKyB0aGlzLm9wdGlvbnMuc3R5bGVCYXNlICsgJyBkcm9wZG93bi10b2dnbGVcXFwiIGRhdGEtdG9nZ2xlPVxcXCJkcm9wZG93blxcXCInICsgYXV0b2ZvY3VzICsgJyByb2xlPVxcXCJidXR0b25cXFwiPicgK1xcclxcbiAgICAgICAgICAnPHNwYW4gY2xhc3M9XFxcImZpbHRlci1vcHRpb24gcHVsbC1sZWZ0XFxcIj48L3NwYW4+Jm5ic3A7JyArXFxyXFxuICAgICAgICAgICc8c3BhbiBjbGFzcz1cXFwiYnMtY2FyZXRcXFwiPicgK1xcclxcbiAgICAgICAgICB0aGlzLm9wdGlvbnMudGVtcGxhdGUuY2FyZXQgK1xcclxcbiAgICAgICAgICAnPC9zcGFuPicgK1xcclxcbiAgICAgICAgICAnPC9idXR0b24+JyArXFxyXFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVxcXCJkcm9wZG93bi1tZW51IG9wZW5cXFwiIHJvbGU9XFxcImNvbWJvYm94XFxcIj4nICtcXHJcXG4gICAgICAgICAgaGVhZGVyICtcXHJcXG4gICAgICAgICAgc2VhcmNoYm94ICtcXHJcXG4gICAgICAgICAgYWN0aW9uc2JveCArXFxyXFxuICAgICAgICAgICc8dWwgY2xhc3M9XFxcImRyb3Bkb3duLW1lbnUgaW5uZXJcXFwiIHJvbGU9XFxcImxpc3Rib3hcXFwiIGFyaWEtZXhwYW5kZWQ9XFxcImZhbHNlXFxcIj4nICtcXHJcXG4gICAgICAgICAgJzwvdWw+JyArXFxyXFxuICAgICAgICAgIGRvbmVidXR0b24gK1xcclxcbiAgICAgICAgICAnPC9kaXY+JyArXFxyXFxuICAgICAgICAgICc8L2Rpdj4nO1xcclxcblxcclxcbiAgICAgIHJldHVybiAkKGRyb3ApO1xcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBjcmVhdGVWaWV3OiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRkcm9wID0gdGhpcy5jcmVhdGVEcm9wZG93bigpLFxcclxcbiAgICAgICAgICBsaSA9IHRoaXMuY3JlYXRlTGkoKTtcXHJcXG5cXHJcXG4gICAgICAkZHJvcC5maW5kKCd1bCcpWzBdLmlubmVySFRNTCA9IGxpO1xcclxcbiAgICAgIHJldHVybiAkZHJvcDtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgcmVsb2FkTGk6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyByZWJ1aWxkXFxyXFxuICAgICAgdmFyIGxpID0gdGhpcy5jcmVhdGVMaSgpO1xcclxcbiAgICAgIHRoaXMuJG1lbnVJbm5lclswXS5pbm5lckhUTUwgPSBsaTtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgY3JlYXRlTGk6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgdGhhdCA9IHRoaXMsXFxyXFxuICAgICAgICAgIF9saSA9IFtdLFxcclxcbiAgICAgICAgICBvcHRJRCA9IDAsXFxyXFxuICAgICAgICAgIHRpdGxlT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyksXFxyXFxuICAgICAgICAgIGxpSW5kZXggPSAtMTsgLy8gaW5jcmVtZW50IGxpSW5kZXggd2hlbmV2ZXIgYSBuZXcgPGxpPiBlbGVtZW50IGlzIGNyZWF0ZWQgdG8gZW5zdXJlIGxpT2JqIGlzIGNvcnJlY3RcXHJcXG5cXHJcXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb25zXFxyXFxuICAgICAgLyoqXFxyXFxuICAgICAgICogQHBhcmFtIGNvbnRlbnRcXHJcXG4gICAgICAgKiBAcGFyYW0gW2luZGV4XVxcclxcbiAgICAgICAqIEBwYXJhbSBbY2xhc3Nlc11cXHJcXG4gICAgICAgKiBAcGFyYW0gW29wdGdyb3VwXVxcclxcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XFxyXFxuICAgICAgICovXFxyXFxuICAgICAgdmFyIGdlbmVyYXRlTEkgPSBmdW5jdGlvbiAoY29udGVudCwgaW5kZXgsIGNsYXNzZXMsIG9wdGdyb3VwKSB7XFxyXFxuICAgICAgICByZXR1cm4gJzxsaScgK1xcclxcbiAgICAgICAgICAgICgodHlwZW9mIGNsYXNzZXMgIT09ICd1bmRlZmluZWQnICYgJycgIT09IGNsYXNzZXMpID8gJyBjbGFzcz1cXFwiJyArIGNsYXNzZXMgKyAnXFxcIicgOiAnJykgK1xcclxcbiAgICAgICAgICAgICgodHlwZW9mIGluZGV4ICE9PSAndW5kZWZpbmVkJyAmIG51bGwgIT09IGluZGV4KSA/ICcgZGF0YS1vcmlnaW5hbC1pbmRleD1cXFwiJyArIGluZGV4ICsgJ1xcXCInIDogJycpICtcXHJcXG4gICAgICAgICAgICAoKHR5cGVvZiBvcHRncm91cCAhPT0gJ3VuZGVmaW5lZCcgJiBudWxsICE9PSBvcHRncm91cCkgPyAnZGF0YS1vcHRncm91cD1cXFwiJyArIG9wdGdyb3VwICsgJ1xcXCInIDogJycpICtcXHJcXG4gICAgICAgICAgICAnPicgKyBjb250ZW50ICsgJzwvbGk+JztcXHJcXG4gICAgICB9O1xcclxcblxcclxcbiAgICAgIC8qKlxcclxcbiAgICAgICAqIEBwYXJhbSB0ZXh0XFxyXFxuICAgICAgICogQHBhcmFtIFtjbGFzc2VzXVxcclxcbiAgICAgICAqIEBwYXJhbSBbaW5saW5lXVxcclxcbiAgICAgICAqIEBwYXJhbSBbdG9rZW5zXVxcclxcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XFxyXFxuICAgICAgICovXFxyXFxuICAgICAgdmFyIGdlbmVyYXRlQSA9IGZ1bmN0aW9uICh0ZXh0LCBjbGFzc2VzLCBpbmxpbmUsIHRva2Vucykge1xcclxcbiAgICAgICAgcmV0dXJuICc8YSB0YWJpbmRleD1cXFwiMFxcXCInICtcXHJcXG4gICAgICAgICAgICAodHlwZW9mIGNsYXNzZXMgIT09ICd1bmRlZmluZWQnID8gJyBjbGFzcz1cXFwiJyArIGNsYXNzZXMgKyAnXFxcIicgOiAnJykgK1xcclxcbiAgICAgICAgICAgIChpbmxpbmUgPyAnIHN0eWxlPVxcXCInICsgaW5saW5lICsgJ1xcXCInIDogJycpICtcXHJcXG4gICAgICAgICAgICAodGhhdC5vcHRpb25zLmxpdmVTZWFyY2hOb3JtYWxpemUgPyAnIGRhdGEtbm9ybWFsaXplZC10ZXh0PVxcXCInICsgbm9ybWFsaXplVG9CYXNlKGh0bWxFc2NhcGUoJCh0ZXh0KS5odG1sKCkpKSArICdcXFwiJyA6ICcnKSArXFxyXFxuICAgICAgICAgICAgKHR5cGVvZiB0b2tlbnMgIT09ICd1bmRlZmluZWQnIHx8IHRva2VucyAhPT0gbnVsbCA/ICcgZGF0YS10b2tlbnM9XFxcIicgKyB0b2tlbnMgKyAnXFxcIicgOiAnJykgK1xcclxcbiAgICAgICAgICAgICcgcm9sZT1cXFwib3B0aW9uXFxcIj4nICsgdGV4dCArXFxyXFxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCInICsgdGhhdC5vcHRpb25zLmljb25CYXNlICsgJyAnICsgdGhhdC5vcHRpb25zLnRpY2tJY29uICsgJyBjaGVjay1tYXJrXFxcIj48L3NwYW4+JyArXFxyXFxuICAgICAgICAgICAgJzwvYT4nO1xcclxcbiAgICAgIH07XFxyXFxuXFxyXFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy50aXRsZSAmJiAhdGhpcy5tdWx0aXBsZSkge1xcclxcbiAgICAgICAgLy8gdGhpcyBvcHRpb24gZG9lc24ndCBjcmVhdGUgYSBuZXcgPGxpPiBlbGVtZW50LCBidXQgZG9lcyBhZGQgYSBuZXcgb3B0aW9uLCBzbyBsaUluZGV4IGlzIGRlY3JlYXNlZFxcclxcbiAgICAgICAgLy8gc2luY2UgbGlPYmogaXMgcmVjYWxjdWxhdGVkIG9uIGV2ZXJ5IHJlZnJlc2gsIGxpSW5kZXggbmVlZHMgdG8gYmUgZGVjcmVhc2VkIGV2ZW4gaWYgdGhlIHRpdGxlT3B0aW9uIGlzIGFscmVhZHkgYXBwZW5kZWRcXHJcXG4gICAgICAgIGxpSW5kZXgtLTtcXHJcXG5cXHJcXG4gICAgICAgIGlmICghdGhpcy4kZWxlbWVudC5maW5kKCcuYnMtdGl0bGUtb3B0aW9uJykubGVuZ3RoKSB7XFxyXFxuICAgICAgICAgIC8vIFVzZSBuYXRpdmUgSlMgdG8gcHJlcGVuZCBvcHRpb24gKGZhc3RlcilcXHJcXG4gICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLiRlbGVtZW50WzBdO1xcclxcbiAgICAgICAgICB0aXRsZU9wdGlvbi5jbGFzc05hbWUgPSAnYnMtdGl0bGUtb3B0aW9uJztcXHJcXG4gICAgICAgICAgdGl0bGVPcHRpb24uaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLnRpdGxlO1xcclxcbiAgICAgICAgICB0aXRsZU9wdGlvbi52YWx1ZSA9ICcnO1xcclxcbiAgICAgICAgICBlbGVtZW50Lmluc2VydEJlZm9yZSh0aXRsZU9wdGlvbiwgZWxlbWVudC5maXJzdENoaWxkKTtcXHJcXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgc2VsZWN0ZWQgb3IgZGF0YS1zZWxlY3RlZCBhdHRyaWJ1dGUgaXMgYWxyZWFkeSBzZXQgb24gYW4gb3B0aW9uLiBJZiBub3QsIHNlbGVjdCB0aGUgdGl0bGVPcHRpb24gb3B0aW9uLlxcclxcbiAgICAgICAgICAvLyB0aGUgc2VsZWN0ZWQgaXRlbSBtYXkgaGF2ZSBiZWVuIGNoYW5nZWQgYnkgdXNlciBvciBwcm9ncmFtbWF0aWNhbGx5IGJlZm9yZSB0aGUgYm9vdHN0cmFwIHNlbGVjdCBwbHVnaW4gcnVucyxcXHJcXG4gICAgICAgICAgLy8gaWYgc28sIHRoZSBzZWxlY3Qgd2lsbCBoYXZlIHRoZSBkYXRhLXNlbGVjdGVkIGF0dHJpYnV0ZVxcclxcbiAgICAgICAgICB2YXIgJG9wdCA9ICQoZWxlbWVudC5vcHRpb25zW2VsZW1lbnQuc2VsZWN0ZWRJbmRleF0pO1xcclxcbiAgICAgICAgICBpZiAoJG9wdC5hdHRyKCdzZWxlY3RlZCcpID09PSB1bmRlZmluZWQgJiYgdGhpcy4kZWxlbWVudC5kYXRhKCdzZWxlY3RlZCcpID09PSB1bmRlZmluZWQpIHtcXHJcXG4gICAgICAgICAgICB0aXRsZU9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XFxyXFxuICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCkge1xcclxcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgICAgIGxpSW5kZXgrKztcXHJcXG5cXHJcXG4gICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnYnMtdGl0bGUtb3B0aW9uJykpIHJldHVybjtcXHJcXG5cXHJcXG4gICAgICAgIC8vIEdldCB0aGUgY2xhc3MgYW5kIHRleHQgZm9yIHRoZSBvcHRpb25cXHJcXG4gICAgICAgIHZhciBvcHRpb25DbGFzcyA9IHRoaXMuY2xhc3NOYW1lIHx8ICcnLFxcclxcbiAgICAgICAgICAgIGlubGluZSA9IHRoaXMuc3R5bGUuY3NzVGV4dCxcXHJcXG4gICAgICAgICAgICB0ZXh0ID0gJHRoaXMuZGF0YSgnY29udGVudCcpID8gJHRoaXMuZGF0YSgnY29udGVudCcpIDogJHRoaXMuaHRtbCgpLFxcclxcbiAgICAgICAgICAgIHRva2VucyA9ICR0aGlzLmRhdGEoJ3Rva2VucycpID8gJHRoaXMuZGF0YSgndG9rZW5zJykgOiBudWxsLFxcclxcbiAgICAgICAgICAgIHN1YnRleHQgPSB0eXBlb2YgJHRoaXMuZGF0YSgnc3VidGV4dCcpICE9PSAndW5kZWZpbmVkJyA/ICc8c21hbGwgY2xhc3M9XFxcInRleHQtbXV0ZWRcXFwiPicgKyAkdGhpcy5kYXRhKCdzdWJ0ZXh0JykgKyAnPC9zbWFsbD4nIDogJycsXFxyXFxuICAgICAgICAgICAgaWNvbiA9IHR5cGVvZiAkdGhpcy5kYXRhKCdpY29uJykgIT09ICd1bmRlZmluZWQnID8gJzxzcGFuIGNsYXNzPVxcXCInICsgdGhhdC5vcHRpb25zLmljb25CYXNlICsgJyAnICsgJHRoaXMuZGF0YSgnaWNvbicpICsgJ1xcXCI+PC9zcGFuPiAnIDogJycsXFxyXFxuICAgICAgICAgICAgJHBhcmVudCA9ICR0aGlzLnBhcmVudCgpLFxcclxcbiAgICAgICAgICAgIGlzT3B0Z3JvdXAgPSAkcGFyZW50WzBdLnRhZ05hbWUgPT09ICdPUFRHUk9VUCcsXFxyXFxuICAgICAgICAgICAgaXNPcHRncm91cERpc2FibGVkID0gaXNPcHRncm91cCAmJiAkcGFyZW50WzBdLmRpc2FibGVkLFxcclxcbiAgICAgICAgICAgIGlzRGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkIHx8IGlzT3B0Z3JvdXBEaXNhYmxlZDtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChpY29uICE9PSAnJyAmJiBpc0Rpc2FibGVkKSB7XFxyXFxuICAgICAgICAgIGljb24gPSAnPHNwYW4+JyArIGljb24gKyAnPC9zcGFuPic7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBpZiAodGhhdC5vcHRpb25zLmhpZGVEaXNhYmxlZCAmJiAoaXNEaXNhYmxlZCAmJiAhaXNPcHRncm91cCB8fCBpc09wdGdyb3VwRGlzYWJsZWQpKSB7XFxyXFxuICAgICAgICAgIGxpSW5kZXgtLTtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgaWYgKCEkdGhpcy5kYXRhKCdjb250ZW50JykpIHtcXHJcXG4gICAgICAgICAgLy8gUHJlcGVuZCBhbnkgaWNvbiBhbmQgYXBwZW5kIGFueSBzdWJ0ZXh0IHRvIHRoZSBtYWluIHRleHQuXFxyXFxuICAgICAgICAgIHRleHQgPSBpY29uICsgJzxzcGFuIGNsYXNzPVxcXCJ0ZXh0XFxcIj4nICsgdGV4dCArIHN1YnRleHQgKyAnPC9zcGFuPic7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBpZiAoaXNPcHRncm91cCAmJiAkdGhpcy5kYXRhKCdkaXZpZGVyJykgIT09IHRydWUpIHtcXHJcXG4gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5oaWRlRGlzYWJsZWQgJiYgaXNEaXNhYmxlZCkge1xcclxcbiAgICAgICAgICAgIGlmICgkcGFyZW50LmRhdGEoJ2FsbE9wdGlvbnNEaXNhYmxlZCcpID09PSB1bmRlZmluZWQpIHtcXHJcXG4gICAgICAgICAgICAgIHZhciAkb3B0aW9ucyA9ICRwYXJlbnQuY2hpbGRyZW4oKTtcXHJcXG4gICAgICAgICAgICAgICRwYXJlbnQuZGF0YSgnYWxsT3B0aW9uc0Rpc2FibGVkJywgJG9wdGlvbnMuZmlsdGVyKCc6ZGlzYWJsZWQnKS5sZW5ndGggPT09ICRvcHRpb25zLmxlbmd0aCk7XFxyXFxuICAgICAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgICAgIGlmICgkcGFyZW50LmRhdGEoJ2FsbE9wdGlvbnNEaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgICAgICAgICBsaUluZGV4LS07XFxyXFxuICAgICAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIHZhciBvcHRHcm91cENsYXNzID0gJyAnICsgJHBhcmVudFswXS5jbGFzc05hbWUgfHwgJyc7XFxyXFxuXFxyXFxuICAgICAgICAgIGlmICgkdGhpcy5pbmRleCgpID09PSAwKSB7IC8vIElzIGl0IHRoZSBmaXJzdCBvcHRpb24gb2YgdGhlIG9wdGdyb3VwP1xcclxcbiAgICAgICAgICAgIG9wdElEICs9IDE7XFxyXFxuXFxyXFxuICAgICAgICAgICAgLy8gR2V0IHRoZSBvcHQgZ3JvdXAgbGFiZWxcXHJcXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSAkcGFyZW50WzBdLmxhYmVsLFxcclxcbiAgICAgICAgICAgICAgICBsYWJlbFN1YnRleHQgPSB0eXBlb2YgJHBhcmVudC5kYXRhKCdzdWJ0ZXh0JykgIT09ICd1bmRlZmluZWQnID8gJzxzbWFsbCBjbGFzcz1cXFwidGV4dC1tdXRlZFxcXCI+JyArICRwYXJlbnQuZGF0YSgnc3VidGV4dCcpICsgJzwvc21hbGw+JyA6ICcnLFxcclxcbiAgICAgICAgICAgICAgICBsYWJlbEljb24gPSAkcGFyZW50LmRhdGEoJ2ljb24nKSA/ICc8c3BhbiBjbGFzcz1cXFwiJyArIHRoYXQub3B0aW9ucy5pY29uQmFzZSArICcgJyArICRwYXJlbnQuZGF0YSgnaWNvbicpICsgJ1xcXCI+PC9zcGFuPiAnIDogJyc7XFxyXFxuXFxyXFxuICAgICAgICAgICAgbGFiZWwgPSBsYWJlbEljb24gKyAnPHNwYW4gY2xhc3M9XFxcInRleHRcXFwiPicgKyBodG1sRXNjYXBlKGxhYmVsKSArIGxhYmVsU3VidGV4dCArICc8L3NwYW4+JztcXHJcXG5cXHJcXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IDAgJiYgX2xpLmxlbmd0aCA+IDApIHsgLy8gSXMgaXQgTk9UIHRoZSBmaXJzdCBvcHRpb24gb2YgdGhlIHNlbGVjdCAmJiBhcmUgdGhlcmUgZWxlbWVudHMgaW4gdGhlIGRyb3Bkb3duP1xcclxcbiAgICAgICAgICAgICAgbGlJbmRleCsrO1xcclxcbiAgICAgICAgICAgICAgX2xpLnB1c2goZ2VuZXJhdGVMSSgnJywgbnVsbCwgJ2RpdmlkZXInLCBvcHRJRCArICdkaXYnKSk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIGxpSW5kZXgrKztcXHJcXG4gICAgICAgICAgICBfbGkucHVzaChnZW5lcmF0ZUxJKGxhYmVsLCBudWxsLCAnZHJvcGRvd24taGVhZGVyJyArIG9wdEdyb3VwQ2xhc3MsIG9wdElEKSk7XFxyXFxuICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5oaWRlRGlzYWJsZWQgJiYgaXNEaXNhYmxlZCkge1xcclxcbiAgICAgICAgICAgIGxpSW5kZXgtLTtcXHJcXG4gICAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgX2xpLnB1c2goZ2VuZXJhdGVMSShnZW5lcmF0ZUEodGV4dCwgJ29wdCAnICsgb3B0aW9uQ2xhc3MgKyBvcHRHcm91cENsYXNzLCBpbmxpbmUsIHRva2VucyksIGluZGV4LCAnJywgb3B0SUQpKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoJHRoaXMuZGF0YSgnZGl2aWRlcicpID09PSB0cnVlKSB7XFxyXFxuICAgICAgICAgIF9saS5wdXNoKGdlbmVyYXRlTEkoJycsIGluZGV4LCAnZGl2aWRlcicpKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoJHRoaXMuZGF0YSgnaGlkZGVuJykgPT09IHRydWUpIHtcXHJcXG4gICAgICAgICAgX2xpLnB1c2goZ2VuZXJhdGVMSShnZW5lcmF0ZUEodGV4dCwgb3B0aW9uQ2xhc3MsIGlubGluZSwgdG9rZW5zKSwgaW5kZXgsICdoaWRkZW4gaXMtaGlkZGVuJykpO1xcclxcbiAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgdmFyIHNob3dEaXZpZGVyID0gdGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy50YWdOYW1lID09PSAnT1BUR1JPVVAnO1xcclxcblxcclxcbiAgICAgICAgICAvLyBpZiBwcmV2aW91cyBlbGVtZW50IGlzIG5vdCBhbiBvcHRncm91cCBhbmQgaGlkZURpc2FibGVkIGlzIHRydWVcXHJcXG4gICAgICAgICAgaWYgKCFzaG93RGl2aWRlciAmJiB0aGF0Lm9wdGlvbnMuaGlkZURpc2FibGVkKSB7XFxyXFxuICAgICAgICAgICAgLy8gZ2V0IHByZXZpb3VzIGVsZW1lbnRzXFxyXFxuICAgICAgICAgICAgdmFyICRwcmV2ID0gJCh0aGlzKS5wcmV2QWxsKCk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkcHJldi5sZW5ndGg7IGkrKykge1xcclxcbiAgICAgICAgICAgICAgLy8gZmluZCB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgcHJldmlvdXMgZWxlbWVudHMgdGhhdCBpcyBhbiBvcHRncm91cFxcclxcbiAgICAgICAgICAgICAgaWYgKCRwcmV2W2ldLnRhZ05hbWUgPT09ICdPUFRHUk9VUCcpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIG9wdEdyb3VwRGlzdGFuY2UgPSAwO1xcclxcblxcclxcbiAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIG9wdGlvbnMgaW4gYmV0d2VlbiB0aGUgY3VycmVudCBvcHRpb24gYW5kIHRoZSBvcHRncm91cFxcclxcbiAgICAgICAgICAgICAgICAvLyBhbmQgY2hlY2sgaWYgdGhleSBhcmUgaGlkZGVuIG9yIGRpc2FibGVkXFxyXFxuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgaTsgZCsrKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgdmFyIHByZXZPcHRpb24gPSAkcHJldltkXTtcXHJcXG4gICAgICAgICAgICAgICAgICBpZiAocHJldk9wdGlvbi5kaXNhYmxlZCB8fCAkKHByZXZPcHRpb24pLmRhdGEoJ2hpZGRlbicpID09PSB0cnVlKSBvcHRHcm91cERpc3RhbmNlKys7XFxyXFxuICAgICAgICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgICAgICAgLy8gaWYgYWxsIG9mIHRoZSBvcHRpb25zIGJldHdlZW4gdGhlIGN1cnJlbnQgb3B0aW9uIGFuZCB0aGUgb3B0Z3JvdXAgYXJlIGhpZGRlbiBvciBkaXNhYmxlZCwgc2hvdyB0aGUgZGl2aWRlclxcclxcbiAgICAgICAgICAgICAgICBpZiAob3B0R3JvdXBEaXN0YW5jZSA9PT0gaSkgc2hvd0RpdmlkZXIgPSB0cnVlO1xcclxcblxcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKHNob3dEaXZpZGVyKSB7XFxyXFxuICAgICAgICAgICAgbGlJbmRleCsrO1xcclxcbiAgICAgICAgICAgIF9saS5wdXNoKGdlbmVyYXRlTEkoJycsIG51bGwsICdkaXZpZGVyJywgb3B0SUQgKyAnZGl2JykpO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICAgIF9saS5wdXNoKGdlbmVyYXRlTEkoZ2VuZXJhdGVBKHRleHQsIG9wdGlvbkNsYXNzLCBpbmxpbmUsIHRva2VucyksIGluZGV4KSk7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICB0aGF0LmxpT2JqW2luZGV4XSA9IGxpSW5kZXg7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgLy9JZiB3ZSBhcmUgbm90IG11bHRpcGxlLCB3ZSBkb24ndCBoYXZlIGEgc2VsZWN0ZWQgaXRlbSwgYW5kIHdlIGRvbid0IGhhdmUgYSB0aXRsZSwgc2VsZWN0IHRoZSBmaXJzdCBlbGVtZW50IHNvIHNvbWV0aGluZyBpcyBzZXQgaW4gdGhlIGJ1dHRvblxcclxcbiAgICAgIGlmICghdGhpcy5tdWx0aXBsZSAmJiB0aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmxlbmd0aCA9PT0gMCAmJiAhdGhpcy5vcHRpb25zLnRpdGxlKSB7XFxyXFxuICAgICAgICB0aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpLmVxKDApLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSkuYXR0cignc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuIF9saS5qb2luKCcnKTtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgZmluZExpczogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIGlmICh0aGlzLiRsaXMgPT0gbnVsbCkgdGhpcy4kbGlzID0gdGhpcy4kbWVudS5maW5kKCdsaScpO1xcclxcbiAgICAgIHJldHVybiB0aGlzLiRsaXM7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIC8qKlxcclxcbiAgICAgKiBAcGFyYW0gW3VwZGF0ZUxpXSBkZWZhdWx0cyB0byB0cnVlXFxyXFxuICAgICAqL1xcclxcbiAgICByZW5kZXI6IGZ1bmN0aW9uICh1cGRhdGVMaSkge1xcclxcbiAgICAgIHZhciB0aGF0ID0gdGhpcyxcXHJcXG4gICAgICAgICAgbm90RGlzYWJsZWQ7XFxyXFxuXFxyXFxuICAgICAgLy9VcGRhdGUgdGhlIExJIHRvIG1hdGNoIHRoZSBTRUxFQ1RcXHJcXG4gICAgICBpZiAodXBkYXRlTGkgIT09IGZhbHNlKSB7XFxyXFxuICAgICAgICB0aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XFxyXFxuICAgICAgICAgIHZhciAkbGlzID0gdGhhdC5maW5kTGlzKCkuZXEodGhhdC5saU9ialtpbmRleF0pO1xcclxcblxcclxcbiAgICAgICAgICB0aGF0LnNldERpc2FibGVkKGluZGV4LCB0aGlzLmRpc2FibGVkIHx8IHRoaXMucGFyZW50Tm9kZS50YWdOYW1lID09PSAnT1BUR1JPVVAnICYmIHRoaXMucGFyZW50Tm9kZS5kaXNhYmxlZCwgJGxpcyk7XFxyXFxuICAgICAgICAgIHRoYXQuc2V0U2VsZWN0ZWQoaW5kZXgsIHRoaXMuc2VsZWN0ZWQsICRsaXMpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHRoaXMudG9nZ2xlUGxhY2Vob2xkZXIoKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLnRhYkluZGV4KCk7XFxyXFxuXFxyXFxuICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSB0aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpLm1hcChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCkge1xcclxcbiAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLmhpZGVEaXNhYmxlZCAmJiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ09QVEdST1VQJyAmJiB0aGlzLnBhcmVudE5vZGUuZGlzYWJsZWQpKSByZXR1cm47XFxyXFxuXFxyXFxuICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXFxyXFxuICAgICAgICAgICAgICBpY29uID0gJHRoaXMuZGF0YSgnaWNvbicpICYmIHRoYXQub3B0aW9ucy5zaG93SWNvbiA/ICc8aSBjbGFzcz1cXFwiJyArIHRoYXQub3B0aW9ucy5pY29uQmFzZSArICcgJyArICR0aGlzLmRhdGEoJ2ljb24nKSArICdcXFwiPjwvaT4gJyA6ICcnLFxcclxcbiAgICAgICAgICAgICAgc3VidGV4dDtcXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5zaG93U3VidGV4dCAmJiAkdGhpcy5kYXRhKCdzdWJ0ZXh0JykgJiYgIXRoYXQubXVsdGlwbGUpIHtcXHJcXG4gICAgICAgICAgICBzdWJ0ZXh0ID0gJyA8c21hbGwgY2xhc3M9XFxcInRleHQtbXV0ZWRcXFwiPicgKyAkdGhpcy5kYXRhKCdzdWJ0ZXh0JykgKyAnPC9zbWFsbD4nO1xcclxcbiAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgIHN1YnRleHQgPSAnJztcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgICBpZiAodHlwZW9mICR0aGlzLmF0dHIoJ3RpdGxlJykgIT09ICd1bmRlZmluZWQnKSB7XFxyXFxuICAgICAgICAgICAgcmV0dXJuICR0aGlzLmF0dHIoJ3RpdGxlJyk7XFxyXFxuICAgICAgICAgIH0gZWxzZSBpZiAoJHRoaXMuZGF0YSgnY29udGVudCcpICYmIHRoYXQub3B0aW9ucy5zaG93Q29udGVudCkge1xcclxcbiAgICAgICAgICAgIHJldHVybiAkdGhpcy5kYXRhKCdjb250ZW50JykudG9TdHJpbmcoKTtcXHJcXG4gICAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgICByZXR1cm4gaWNvbiArICR0aGlzLmh0bWwoKSArIHN1YnRleHQ7XFxyXFxuICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9KS50b0FycmF5KCk7XFxyXFxuXFxyXFxuICAgICAgLy9GaXhlcyBpc3N1ZSBpbiBJRTEwIG9jY3VycmluZyB3aGVuIG5vIGRlZmF1bHQgb3B0aW9uIGlzIHNlbGVjdGVkIGFuZCBhdCBsZWFzdCBvbmUgb3B0aW9uIGlzIGRpc2FibGVkXFxyXFxuICAgICAgLy9Db252ZXJ0IGFsbCB0aGUgdmFsdWVzIGludG8gYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nXFxyXFxuICAgICAgdmFyIHRpdGxlID0gIXRoaXMubXVsdGlwbGUgPyBzZWxlY3RlZEl0ZW1zWzBdIDogc2VsZWN0ZWRJdGVtcy5qb2luKHRoaXMub3B0aW9ucy5tdWx0aXBsZVNlcGFyYXRvcik7XFxyXFxuXFxyXFxuICAgICAgLy9JZiB0aGlzIGlzIG11bHRpIHNlbGVjdCwgYW5kIHRoZSBzZWxlY3RUZXh0IHR5cGUgaXMgY291bnQsIHRoZSBzaG93IDEgb2YgMiBzZWxlY3RlZCBldGMuLlxcclxcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHRoaXMub3B0aW9ucy5zZWxlY3RlZFRleHRGb3JtYXQuaW5kZXhPZignY291bnQnKSA+IC0xKSB7XFxyXFxuICAgICAgICB2YXIgbWF4ID0gdGhpcy5vcHRpb25zLnNlbGVjdGVkVGV4dEZvcm1hdC5zcGxpdCgnPicpO1xcclxcbiAgICAgICAgaWYgKChtYXgubGVuZ3RoID4gMSAmJiBzZWxlY3RlZEl0ZW1zLmxlbmd0aCA+IG1heFsxXSkgfHwgKG1heC5sZW5ndGggPT0gMSAmJiBzZWxlY3RlZEl0ZW1zLmxlbmd0aCA+PSAyKSkge1xcclxcbiAgICAgICAgICBub3REaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5oaWRlRGlzYWJsZWQgPyAnLCBbZGlzYWJsZWRdJyA6ICcnO1xcclxcbiAgICAgICAgICB2YXIgdG90YWxDb3VudCA9IHRoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uJykubm90KCdbZGF0YS1kaXZpZGVyPVxcXCJ0cnVlXFxcIl0sIFtkYXRhLWhpZGRlbj1cXFwidHJ1ZVxcXCJdJyArIG5vdERpc2FibGVkKS5sZW5ndGgsXFxyXFxuICAgICAgICAgICAgICB0cjhuVGV4dCA9ICh0eXBlb2YgdGhpcy5vcHRpb25zLmNvdW50U2VsZWN0ZWRUZXh0ID09PSAnZnVuY3Rpb24nKSA/IHRoaXMub3B0aW9ucy5jb3VudFNlbGVjdGVkVGV4dChzZWxlY3RlZEl0ZW1zLmxlbmd0aCwgdG90YWxDb3VudCkgOiB0aGlzLm9wdGlvbnMuY291bnRTZWxlY3RlZFRleHQ7XFxyXFxuICAgICAgICAgIHRpdGxlID0gdHI4blRleHQucmVwbGFjZSgnezB9Jywgc2VsZWN0ZWRJdGVtcy5sZW5ndGgudG9TdHJpbmcoKSkucmVwbGFjZSgnezF9JywgdG90YWxDb3VudC50b1N0cmluZygpKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy50aXRsZSA9PSB1bmRlZmluZWQpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy50aXRsZSA9IHRoaXMuJGVsZW1lbnQuYXR0cigndGl0bGUnKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zZWxlY3RlZFRleHRGb3JtYXQgPT0gJ3N0YXRpYycpIHtcXHJcXG4gICAgICAgIHRpdGxlID0gdGhpcy5vcHRpb25zLnRpdGxlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvL0lmIHdlIGRvbnQgaGF2ZSBhIHRpdGxlLCB0aGVuIHVzZSB0aGUgZGVmYXVsdCwgb3IgaWYgbm90aGluZyBpcyBzZXQgYXQgYWxsLCB1c2UgdGhlIG5vdCBzZWxlY3RlZCB0ZXh0XFxyXFxuICAgICAgaWYgKCF0aXRsZSkge1xcclxcbiAgICAgICAgdGl0bGUgPSB0eXBlb2YgdGhpcy5vcHRpb25zLnRpdGxlICE9PSAndW5kZWZpbmVkJyA/IHRoaXMub3B0aW9ucy50aXRsZSA6IHRoaXMub3B0aW9ucy5ub25lU2VsZWN0ZWRUZXh0O1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvL3N0cmlwIGFsbCBIVE1MIHRhZ3MgYW5kIHRyaW0gdGhlIHJlc3VsdCwgdGhlbiB1bmVzY2FwZSBhbnkgZXNjYXBlZCB0YWdzXFxyXFxuICAgICAgdGhpcy4kYnV0dG9uLmF0dHIoJ3RpdGxlJywgaHRtbFVuZXNjYXBlKCQudHJpbSh0aXRsZS5yZXBsYWNlKC88W14+XSo+Py9nLCAnJykpKSk7XFxyXFxuICAgICAgdGhpcy4kYnV0dG9uLmNoaWxkcmVuKCcuZmlsdGVyLW9wdGlvbicpLmh0bWwodGl0bGUpO1xcclxcblxcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcigncmVuZGVyZWQuYnMuc2VsZWN0Jyk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIC8qKlxcclxcbiAgICAgKiBAcGFyYW0gW3N0eWxlXVxcclxcbiAgICAgKiBAcGFyYW0gW3N0YXR1c11cXHJcXG4gICAgICovXFxyXFxuICAgIHNldFN0eWxlOiBmdW5jdGlvbiAoc3R5bGUsIHN0YXR1cykge1xcclxcbiAgICAgIGlmICh0aGlzLiRlbGVtZW50LmF0dHIoJ2NsYXNzJykpIHtcXHJcXG4gICAgICAgIHRoaXMuJG5ld0VsZW1lbnQuYWRkQ2xhc3ModGhpcy4kZWxlbWVudC5hdHRyKCdjbGFzcycpLnJlcGxhY2UoL3NlbGVjdHBpY2tlcnxtb2JpbGUtZGV2aWNlfGJzLXNlbGVjdC1oaWRkZW58dmFsaWRhdGVcXFxcWy4qXFxcXF0vZ2ksICcnKSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBidXR0b25DbGFzcyA9IHN0eWxlID8gc3R5bGUgOiB0aGlzLm9wdGlvbnMuc3R5bGU7XFxyXFxuXFxyXFxuICAgICAgaWYgKHN0YXR1cyA9PSAnYWRkJykge1xcclxcbiAgICAgICAgdGhpcy4kYnV0dG9uLmFkZENsYXNzKGJ1dHRvbkNsYXNzKTtcXHJcXG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PSAncmVtb3ZlJykge1xcclxcbiAgICAgICAgdGhpcy4kYnV0dG9uLnJlbW92ZUNsYXNzKGJ1dHRvbkNsYXNzKTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgdGhpcy4kYnV0dG9uLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5zdHlsZSk7XFxyXFxuICAgICAgICB0aGlzLiRidXR0b24uYWRkQ2xhc3MoYnV0dG9uQ2xhc3MpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgbGlIZWlnaHQ6IGZ1bmN0aW9uIChyZWZyZXNoKSB7XFxyXFxuICAgICAgaWYgKCFyZWZyZXNoICYmICh0aGlzLm9wdGlvbnMuc2l6ZSA9PT0gZmFsc2UgfHwgdGhpcy5zaXplSW5mbykpIHJldHVybjtcXHJcXG5cXHJcXG4gICAgICB2YXIgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxcclxcbiAgICAgICAgICBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXFxyXFxuICAgICAgICAgIG1lbnVJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyksXFxyXFxuICAgICAgICAgIGRpdmlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpLFxcclxcbiAgICAgICAgICBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyksXFxyXFxuICAgICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyksXFxyXFxuICAgICAgICAgIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyksXFxyXFxuICAgICAgICAgIGhlYWRlciA9IHRoaXMub3B0aW9ucy5oZWFkZXIgJiYgdGhpcy4kbWVudS5maW5kKCcucG9wb3Zlci10aXRsZScpLmxlbmd0aCA+IDAgPyB0aGlzLiRtZW51LmZpbmQoJy5wb3BvdmVyLXRpdGxlJylbMF0uY2xvbmVOb2RlKHRydWUpIDogbnVsbCxcXHJcXG4gICAgICAgICAgc2VhcmNoID0gdGhpcy5vcHRpb25zLmxpdmVTZWFyY2ggPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSA6IG51bGwsXFxyXFxuICAgICAgICAgIGFjdGlvbnMgPSB0aGlzLm9wdGlvbnMuYWN0aW9uc0JveCAmJiB0aGlzLm11bHRpcGxlICYmIHRoaXMuJG1lbnUuZmluZCgnLmJzLWFjdGlvbnNib3gnKS5sZW5ndGggPiAwID8gdGhpcy4kbWVudS5maW5kKCcuYnMtYWN0aW9uc2JveCcpWzBdLmNsb25lTm9kZSh0cnVlKSA6IG51bGwsXFxyXFxuICAgICAgICAgIGRvbmVCdXR0b24gPSB0aGlzLm9wdGlvbnMuZG9uZUJ1dHRvbiAmJiB0aGlzLm11bHRpcGxlICYmIHRoaXMuJG1lbnUuZmluZCgnLmJzLWRvbmVidXR0b24nKS5sZW5ndGggPiAwID8gdGhpcy4kbWVudS5maW5kKCcuYnMtZG9uZWJ1dHRvbicpWzBdLmNsb25lTm9kZSh0cnVlKSA6IG51bGw7XFxyXFxuXFxyXFxuICAgICAgdGV4dC5jbGFzc05hbWUgPSAndGV4dCc7XFxyXFxuICAgICAgbmV3RWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLiRtZW51WzBdLnBhcmVudE5vZGUuY2xhc3NOYW1lICsgJyBvcGVuJztcXHJcXG4gICAgICBtZW51LmNsYXNzTmFtZSA9ICdkcm9wZG93bi1tZW51IG9wZW4nO1xcclxcbiAgICAgIG1lbnVJbm5lci5jbGFzc05hbWUgPSAnZHJvcGRvd24tbWVudSBpbm5lcic7XFxyXFxuICAgICAgZGl2aWRlci5jbGFzc05hbWUgPSAnZGl2aWRlcic7XFxyXFxuXFxyXFxuICAgICAgdGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnSW5uZXIgdGV4dCcpKTtcXHJcXG4gICAgICBhLmFwcGVuZENoaWxkKHRleHQpO1xcclxcbiAgICAgIGxpLmFwcGVuZENoaWxkKGEpO1xcclxcbiAgICAgIG1lbnVJbm5lci5hcHBlbmRDaGlsZChsaSk7XFxyXFxuICAgICAgbWVudUlubmVyLmFwcGVuZENoaWxkKGRpdmlkZXIpO1xcclxcbiAgICAgIGlmIChoZWFkZXIpIG1lbnUuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcXHJcXG4gICAgICBpZiAoc2VhcmNoKSB7XFxyXFxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xcclxcbiAgICAgICAgc2VhcmNoLmNsYXNzTmFtZSA9ICdicy1zZWFyY2hib3gnO1xcclxcbiAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gJ2Zvcm0tY29udHJvbCc7XFxyXFxuICAgICAgICBzZWFyY2guYXBwZW5kQ2hpbGQoaW5wdXQpO1xcclxcbiAgICAgICAgbWVudS5hcHBlbmRDaGlsZChzZWFyY2gpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgICBpZiAoYWN0aW9ucykgbWVudS5hcHBlbmRDaGlsZChhY3Rpb25zKTtcXHJcXG4gICAgICBtZW51LmFwcGVuZENoaWxkKG1lbnVJbm5lcik7XFxyXFxuICAgICAgaWYgKGRvbmVCdXR0b24pIG1lbnUuYXBwZW5kQ2hpbGQoZG9uZUJ1dHRvbik7XFxyXFxuICAgICAgbmV3RWxlbWVudC5hcHBlbmRDaGlsZChtZW51KTtcXHJcXG5cXHJcXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5ld0VsZW1lbnQpO1xcclxcblxcclxcbiAgICAgIHZhciBsaUhlaWdodCA9IGEub2Zmc2V0SGVpZ2h0LFxcclxcbiAgICAgICAgICBoZWFkZXJIZWlnaHQgPSBoZWFkZXIgPyBoZWFkZXIub2Zmc2V0SGVpZ2h0IDogMCxcXHJcXG4gICAgICAgICAgc2VhcmNoSGVpZ2h0ID0gc2VhcmNoID8gc2VhcmNoLm9mZnNldEhlaWdodCA6IDAsXFxyXFxuICAgICAgICAgIGFjdGlvbnNIZWlnaHQgPSBhY3Rpb25zID8gYWN0aW9ucy5vZmZzZXRIZWlnaHQgOiAwLFxcclxcbiAgICAgICAgICBkb25lQnV0dG9uSGVpZ2h0ID0gZG9uZUJ1dHRvbiA/IGRvbmVCdXR0b24ub2Zmc2V0SGVpZ2h0IDogMCxcXHJcXG4gICAgICAgICAgZGl2aWRlckhlaWdodCA9ICQoZGl2aWRlcikub3V0ZXJIZWlnaHQodHJ1ZSksXFxyXFxuICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBqUXVlcnkgaWYgZ2V0Q29tcHV0ZWRTdHlsZSBpcyBub3Qgc3VwcG9ydGVkXFxyXFxuICAgICAgICAgIG1lbnVTdHlsZSA9IHR5cGVvZiBnZXRDb21wdXRlZFN0eWxlID09PSAnZnVuY3Rpb24nID8gZ2V0Q29tcHV0ZWRTdHlsZShtZW51KSA6IGZhbHNlLFxcclxcbiAgICAgICAgICAkbWVudSA9IG1lbnVTdHlsZSA/IG51bGwgOiAkKG1lbnUpLFxcclxcbiAgICAgICAgICBtZW51UGFkZGluZyA9IHtcXHJcXG4gICAgICAgICAgICB2ZXJ0OiBwYXJzZUludChtZW51U3R5bGUgPyBtZW51U3R5bGUucGFkZGluZ1RvcCA6ICRtZW51LmNzcygncGFkZGluZ1RvcCcpKSArXFxyXFxuICAgICAgICAgICAgICAgICAgcGFyc2VJbnQobWVudVN0eWxlID8gbWVudVN0eWxlLnBhZGRpbmdCb3R0b20gOiAkbWVudS5jc3MoJ3BhZGRpbmdCb3R0b20nKSkgK1xcclxcbiAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1lbnVTdHlsZSA/IG1lbnVTdHlsZS5ib3JkZXJUb3BXaWR0aCA6ICRtZW51LmNzcygnYm9yZGVyVG9wV2lkdGgnKSkgK1xcclxcbiAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1lbnVTdHlsZSA/IG1lbnVTdHlsZS5ib3JkZXJCb3R0b21XaWR0aCA6ICRtZW51LmNzcygnYm9yZGVyQm90dG9tV2lkdGgnKSksXFxyXFxuICAgICAgICAgICAgaG9yaXo6IHBhcnNlSW50KG1lbnVTdHlsZSA/IG1lbnVTdHlsZS5wYWRkaW5nTGVmdCA6ICRtZW51LmNzcygncGFkZGluZ0xlZnQnKSkgK1xcclxcbiAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1lbnVTdHlsZSA/IG1lbnVTdHlsZS5wYWRkaW5nUmlnaHQgOiAkbWVudS5jc3MoJ3BhZGRpbmdSaWdodCcpKSArXFxyXFxuICAgICAgICAgICAgICAgICAgcGFyc2VJbnQobWVudVN0eWxlID8gbWVudVN0eWxlLmJvcmRlckxlZnRXaWR0aCA6ICRtZW51LmNzcygnYm9yZGVyTGVmdFdpZHRoJykpICtcXHJcXG4gICAgICAgICAgICAgICAgICBwYXJzZUludChtZW51U3R5bGUgPyBtZW51U3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA6ICRtZW51LmNzcygnYm9yZGVyUmlnaHRXaWR0aCcpKVxcclxcbiAgICAgICAgICB9LFxcclxcbiAgICAgICAgICBtZW51RXh0cmFzID0gIHtcXHJcXG4gICAgICAgICAgICB2ZXJ0OiBtZW51UGFkZGluZy52ZXJ0ICtcXHJcXG4gICAgICAgICAgICAgICAgICBwYXJzZUludChtZW51U3R5bGUgPyBtZW51U3R5bGUubWFyZ2luVG9wIDogJG1lbnUuY3NzKCdtYXJnaW5Ub3AnKSkgK1xcclxcbiAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1lbnVTdHlsZSA/IG1lbnVTdHlsZS5tYXJnaW5Cb3R0b20gOiAkbWVudS5jc3MoJ21hcmdpbkJvdHRvbScpKSArIDIsXFxyXFxuICAgICAgICAgICAgaG9yaXo6IG1lbnVQYWRkaW5nLmhvcml6ICtcXHJcXG4gICAgICAgICAgICAgICAgICBwYXJzZUludChtZW51U3R5bGUgPyBtZW51U3R5bGUubWFyZ2luTGVmdCA6ICRtZW51LmNzcygnbWFyZ2luTGVmdCcpKSArXFxyXFxuICAgICAgICAgICAgICAgICAgcGFyc2VJbnQobWVudVN0eWxlID8gbWVudVN0eWxlLm1hcmdpblJpZ2h0IDogJG1lbnUuY3NzKCdtYXJnaW5SaWdodCcpKSArIDJcXHJcXG4gICAgICAgICAgfVxcclxcblxcclxcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobmV3RWxlbWVudCk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy5zaXplSW5mbyA9IHtcXHJcXG4gICAgICAgIGxpSGVpZ2h0OiBsaUhlaWdodCxcXHJcXG4gICAgICAgIGhlYWRlckhlaWdodDogaGVhZGVySGVpZ2h0LFxcclxcbiAgICAgICAgc2VhcmNoSGVpZ2h0OiBzZWFyY2hIZWlnaHQsXFxyXFxuICAgICAgICBhY3Rpb25zSGVpZ2h0OiBhY3Rpb25zSGVpZ2h0LFxcclxcbiAgICAgICAgZG9uZUJ1dHRvbkhlaWdodDogZG9uZUJ1dHRvbkhlaWdodCxcXHJcXG4gICAgICAgIGRpdmlkZXJIZWlnaHQ6IGRpdmlkZXJIZWlnaHQsXFxyXFxuICAgICAgICBtZW51UGFkZGluZzogbWVudVBhZGRpbmcsXFxyXFxuICAgICAgICBtZW51RXh0cmFzOiBtZW51RXh0cmFzXFxyXFxuICAgICAgfTtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgc2V0U2l6ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHRoaXMuZmluZExpcygpO1xcclxcbiAgICAgIHRoaXMubGlIZWlnaHQoKTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhlYWRlcikgdGhpcy4kbWVudS5jc3MoJ3BhZGRpbmctdG9wJywgMCk7XFxyXFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaXplID09PSBmYWxzZSkgcmV0dXJuO1xcclxcblxcclxcbiAgICAgIHZhciB0aGF0ID0gdGhpcyxcXHJcXG4gICAgICAgICAgJG1lbnUgPSB0aGlzLiRtZW51LFxcclxcbiAgICAgICAgICAkbWVudUlubmVyID0gdGhpcy4kbWVudUlubmVyLFxcclxcbiAgICAgICAgICAkd2luZG93ID0gJCh3aW5kb3cpLFxcclxcbiAgICAgICAgICBzZWxlY3RIZWlnaHQgPSB0aGlzLiRuZXdFbGVtZW50WzBdLm9mZnNldEhlaWdodCxcXHJcXG4gICAgICAgICAgc2VsZWN0V2lkdGggPSB0aGlzLiRuZXdFbGVtZW50WzBdLm9mZnNldFdpZHRoLFxcclxcbiAgICAgICAgICBsaUhlaWdodCA9IHRoaXMuc2l6ZUluZm9bJ2xpSGVpZ2h0J10sXFxyXFxuICAgICAgICAgIGhlYWRlckhlaWdodCA9IHRoaXMuc2l6ZUluZm9bJ2hlYWRlckhlaWdodCddLFxcclxcbiAgICAgICAgICBzZWFyY2hIZWlnaHQgPSB0aGlzLnNpemVJbmZvWydzZWFyY2hIZWlnaHQnXSxcXHJcXG4gICAgICAgICAgYWN0aW9uc0hlaWdodCA9IHRoaXMuc2l6ZUluZm9bJ2FjdGlvbnNIZWlnaHQnXSxcXHJcXG4gICAgICAgICAgZG9uZUJ1dHRvbkhlaWdodCA9IHRoaXMuc2l6ZUluZm9bJ2RvbmVCdXR0b25IZWlnaHQnXSxcXHJcXG4gICAgICAgICAgZGl2SGVpZ2h0ID0gdGhpcy5zaXplSW5mb1snZGl2aWRlckhlaWdodCddLFxcclxcbiAgICAgICAgICBtZW51UGFkZGluZyA9IHRoaXMuc2l6ZUluZm9bJ21lbnVQYWRkaW5nJ10sXFxyXFxuICAgICAgICAgIG1lbnVFeHRyYXMgPSB0aGlzLnNpemVJbmZvWydtZW51RXh0cmFzJ10sXFxyXFxuICAgICAgICAgIG5vdERpc2FibGVkID0gdGhpcy5vcHRpb25zLmhpZGVEaXNhYmxlZCA/ICcuZGlzYWJsZWQnIDogJycsXFxyXFxuICAgICAgICAgIG1lbnVIZWlnaHQsXFxyXFxuICAgICAgICAgIG1lbnVXaWR0aCxcXHJcXG4gICAgICAgICAgZ2V0SGVpZ2h0LFxcclxcbiAgICAgICAgICBnZXRXaWR0aCxcXHJcXG4gICAgICAgICAgc2VsZWN0T2Zmc2V0VG9wLFxcclxcbiAgICAgICAgICBzZWxlY3RPZmZzZXRCb3QsXFxyXFxuICAgICAgICAgIHNlbGVjdE9mZnNldExlZnQsXFxyXFxuICAgICAgICAgIHNlbGVjdE9mZnNldFJpZ2h0LFxcclxcbiAgICAgICAgICBnZXRQb3MgPSBmdW5jdGlvbigpIHtcXHJcXG4gICAgICAgICAgICB2YXIgcG9zID0gdGhhdC4kbmV3RWxlbWVudC5vZmZzZXQoKSxcXHJcXG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lciA9ICQodGhhdC5vcHRpb25zLmNvbnRhaW5lciksXFxyXFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lclBvcztcXHJcXG5cXHJcXG4gICAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLmNvbnRhaW5lciAmJiAhJGNvbnRhaW5lci5pcygnYm9keScpKSB7XFxyXFxuICAgICAgICAgICAgICBjb250YWluZXJQb3MgPSAkY29udGFpbmVyLm9mZnNldCgpO1xcclxcbiAgICAgICAgICAgICAgY29udGFpbmVyUG9zLnRvcCArPSBwYXJzZUludCgkY29udGFpbmVyLmNzcygnYm9yZGVyVG9wV2lkdGgnKSk7XFxyXFxuICAgICAgICAgICAgICBjb250YWluZXJQb3MubGVmdCArPSBwYXJzZUludCgkY29udGFpbmVyLmNzcygnYm9yZGVyTGVmdFdpZHRoJykpO1xcclxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICBjb250YWluZXJQb3MgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xcclxcbiAgICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgICB2YXIgd2luUGFkID0gdGhhdC5vcHRpb25zLndpbmRvd1BhZGRpbmc7XFxyXFxuICAgICAgICAgICAgc2VsZWN0T2Zmc2V0VG9wID0gcG9zLnRvcCAtIGNvbnRhaW5lclBvcy50b3AgLSAkd2luZG93LnNjcm9sbFRvcCgpO1xcclxcbiAgICAgICAgICAgIHNlbGVjdE9mZnNldEJvdCA9ICR3aW5kb3cuaGVpZ2h0KCkgLSBzZWxlY3RPZmZzZXRUb3AgLSBzZWxlY3RIZWlnaHQgLSBjb250YWluZXJQb3MudG9wIC0gd2luUGFkWzJdO1xcclxcbiAgICAgICAgICAgIHNlbGVjdE9mZnNldExlZnQgPSBwb3MubGVmdCAtIGNvbnRhaW5lclBvcy5sZWZ0IC0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XFxyXFxuICAgICAgICAgICAgc2VsZWN0T2Zmc2V0UmlnaHQgPSAkd2luZG93LndpZHRoKCkgLSBzZWxlY3RPZmZzZXRMZWZ0IC0gc2VsZWN0V2lkdGggLSBjb250YWluZXJQb3MubGVmdCAtIHdpblBhZFsxXTtcXHJcXG4gICAgICAgICAgICBzZWxlY3RPZmZzZXRUb3AgLT0gd2luUGFkWzBdO1xcclxcbiAgICAgICAgICAgIHNlbGVjdE9mZnNldExlZnQgLT0gd2luUGFkWzNdO1xcclxcbiAgICAgICAgICB9O1xcclxcblxcclxcbiAgICAgIGdldFBvcygpO1xcclxcblxcclxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2l6ZSA9PT0gJ2F1dG8nKSB7XFxyXFxuICAgICAgICB2YXIgZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgdmFyIG1pbkhlaWdodCxcXHJcXG4gICAgICAgICAgICAgIGhhc0NsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgaW5jbHVkZSkge1xcclxcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlbGVtZW50LmNsYXNzTGlzdCA/IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgOiAkKGVsZW1lbnQpLmhhc0NsYXNzKGNsYXNzTmFtZSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShlbGVtZW50LmNsYXNzTGlzdCA/IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgOiAkKGVsZW1lbnQpLmhhc0NsYXNzKGNsYXNzTmFtZSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICB9O1xcclxcbiAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgIGxpcyA9IHRoYXQuJG1lbnVJbm5lclswXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGknKSxcXHJcXG4gICAgICAgICAgICAgIGxpc1Zpc2libGUgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyID8gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGxpcywgaGFzQ2xhc3MoJ2hpZGRlbicsIGZhbHNlKSkgOiB0aGF0LiRsaXMubm90KCcuaGlkZGVuJyksXFxyXFxuICAgICAgICAgICAgICBvcHRHcm91cCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIgPyBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwobGlzVmlzaWJsZSwgaGFzQ2xhc3MoJ2Ryb3Bkb3duLWhlYWRlcicsIHRydWUpKSA6IGxpc1Zpc2libGUuZmlsdGVyKCcuZHJvcGRvd24taGVhZGVyJyk7XFxyXFxuXFxyXFxuICAgICAgICAgIGdldFBvcygpO1xcclxcbiAgICAgICAgICBtZW51SGVpZ2h0ID0gc2VsZWN0T2Zmc2V0Qm90IC0gbWVudUV4dHJhcy52ZXJ0O1xcclxcbiAgICAgICAgICBtZW51V2lkdGggPSBzZWxlY3RPZmZzZXRSaWdodCAtIG1lbnVFeHRyYXMuaG9yaXo7XFxyXFxuXFxyXFxuICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuY29udGFpbmVyKSB7XFxyXFxuICAgICAgICAgICAgaWYgKCEkbWVudS5kYXRhKCdoZWlnaHQnKSkgJG1lbnUuZGF0YSgnaGVpZ2h0JywgJG1lbnUuaGVpZ2h0KCkpO1xcclxcbiAgICAgICAgICAgIGdldEhlaWdodCA9ICRtZW51LmRhdGEoJ2hlaWdodCcpO1xcclxcblxcclxcbiAgICAgICAgICAgIGlmICghJG1lbnUuZGF0YSgnd2lkdGgnKSkgJG1lbnUuZGF0YSgnd2lkdGgnLCAkbWVudS53aWR0aCgpKTtcXHJcXG4gICAgICAgICAgICBnZXRXaWR0aCA9ICRtZW51LmRhdGEoJ3dpZHRoJyk7XFxyXFxuICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgZ2V0SGVpZ2h0ID0gJG1lbnUuaGVpZ2h0KCk7XFxyXFxuICAgICAgICAgICAgZ2V0V2lkdGggPSAkbWVudS53aWR0aCgpO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuZHJvcHVwQXV0bykge1xcclxcbiAgICAgICAgICAgIHRoYXQuJG5ld0VsZW1lbnQudG9nZ2xlQ2xhc3MoJ2Ryb3B1cCcsIHNlbGVjdE9mZnNldFRvcCA+IHNlbGVjdE9mZnNldEJvdCAmJiAobWVudUhlaWdodCAtIG1lbnVFeHRyYXMudmVydCkgPCBnZXRIZWlnaHQpO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIGlmICh0aGF0LiRuZXdFbGVtZW50Lmhhc0NsYXNzKCdkcm9wdXAnKSkge1xcclxcbiAgICAgICAgICAgIG1lbnVIZWlnaHQgPSBzZWxlY3RPZmZzZXRUb3AgLSBtZW51RXh0cmFzLnZlcnQ7XFxyXFxuICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5kcm9wZG93bkFsaWduUmlnaHQgPT09ICdhdXRvJykge1xcclxcbiAgICAgICAgICAgICRtZW51LnRvZ2dsZUNsYXNzKCdkcm9wZG93bi1tZW51LXJpZ2h0Jywgc2VsZWN0T2Zmc2V0TGVmdCA+IHNlbGVjdE9mZnNldFJpZ2h0ICYmIChtZW51V2lkdGggLSBtZW51RXh0cmFzLmhvcml6KSA8IChnZXRXaWR0aCAtIHNlbGVjdFdpZHRoKSk7XFxyXFxuICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKChsaXNWaXNpYmxlLmxlbmd0aCArIG9wdEdyb3VwLmxlbmd0aCkgPiAzKSB7XFxyXFxuICAgICAgICAgICAgbWluSGVpZ2h0ID0gbGlIZWlnaHQgKiAzICsgbWVudUV4dHJhcy52ZXJ0IC0gMjtcXHJcXG4gICAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgICBtaW5IZWlnaHQgPSAwO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgICRtZW51LmNzcyh7XFxyXFxuICAgICAgICAgICAgJ21heC1oZWlnaHQnOiBtZW51SGVpZ2h0ICsgJ3B4JyxcXHJcXG4gICAgICAgICAgICAnb3ZlcmZsb3cnOiAnaGlkZGVuJyxcXHJcXG4gICAgICAgICAgICAnbWluLWhlaWdodCc6IG1pbkhlaWdodCArIGhlYWRlckhlaWdodCArIHNlYXJjaEhlaWdodCArIGFjdGlvbnNIZWlnaHQgKyBkb25lQnV0dG9uSGVpZ2h0ICsgJ3B4J1xcclxcbiAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgJG1lbnVJbm5lci5jc3Moe1xcclxcbiAgICAgICAgICAgICdtYXgtaGVpZ2h0JzogbWVudUhlaWdodCAtIGhlYWRlckhlaWdodCAtIHNlYXJjaEhlaWdodCAtIGFjdGlvbnNIZWlnaHQgLSBkb25lQnV0dG9uSGVpZ2h0IC0gbWVudVBhZGRpbmcudmVydCArICdweCcsXFxyXFxuICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnYXV0bycsXFxyXFxuICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBNYXRoLm1heChtaW5IZWlnaHQgLSBtZW51UGFkZGluZy52ZXJ0LCAwKSArICdweCdcXHJcXG4gICAgICAgICAgfSk7XFxyXFxuICAgICAgICB9O1xcclxcbiAgICAgICAgZ2V0U2l6ZSgpO1xcclxcbiAgICAgICAgdGhpcy4kc2VhcmNoYm94Lm9mZignaW5wdXQuZ2V0U2l6ZSBwcm9wZXJ0eWNoYW5nZS5nZXRTaXplJykub24oJ2lucHV0LmdldFNpemUgcHJvcGVydHljaGFuZ2UuZ2V0U2l6ZScsIGdldFNpemUpO1xcclxcbiAgICAgICAgJHdpbmRvdy5vZmYoJ3Jlc2l6ZS5nZXRTaXplIHNjcm9sbC5nZXRTaXplJykub24oJ3Jlc2l6ZS5nZXRTaXplIHNjcm9sbC5nZXRTaXplJywgZ2V0U2l6ZSk7XFxyXFxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2l6ZSAmJiB0aGlzLm9wdGlvbnMuc2l6ZSAhPSAnYXV0bycgJiYgdGhpcy4kbGlzLm5vdChub3REaXNhYmxlZCkubGVuZ3RoID4gdGhpcy5vcHRpb25zLnNpemUpIHtcXHJcXG4gICAgICAgIHZhciBvcHRJbmRleCA9IHRoaXMuJGxpcy5ub3QoJy5kaXZpZGVyJykubm90KG5vdERpc2FibGVkKS5jaGlsZHJlbigpLnNsaWNlKDAsIHRoaXMub3B0aW9ucy5zaXplKS5sYXN0KCkucGFyZW50KCkuaW5kZXgoKSxcXHJcXG4gICAgICAgICAgICBkaXZMZW5ndGggPSB0aGlzLiRsaXMuc2xpY2UoMCwgb3B0SW5kZXggKyAxKS5maWx0ZXIoJy5kaXZpZGVyJykubGVuZ3RoO1xcclxcbiAgICAgICAgbWVudUhlaWdodCA9IGxpSGVpZ2h0ICogdGhpcy5vcHRpb25zLnNpemUgKyBkaXZMZW5ndGggKiBkaXZIZWlnaHQgKyBtZW51UGFkZGluZy52ZXJ0O1xcclxcblxcclxcbiAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5jb250YWluZXIpIHtcXHJcXG4gICAgICAgICAgaWYgKCEkbWVudS5kYXRhKCdoZWlnaHQnKSkgJG1lbnUuZGF0YSgnaGVpZ2h0JywgJG1lbnUuaGVpZ2h0KCkpO1xcclxcbiAgICAgICAgICBnZXRIZWlnaHQgPSAkbWVudS5kYXRhKCdoZWlnaHQnKTtcXHJcXG4gICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgIGdldEhlaWdodCA9ICRtZW51LmhlaWdodCgpO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5kcm9wdXBBdXRvKSB7XFxyXFxuICAgICAgICAgIC8vbm9pbnNwZWN0aW9uIEpTVW51c2VkQXNzaWdubWVudFxcclxcbiAgICAgICAgICB0aGlzLiRuZXdFbGVtZW50LnRvZ2dsZUNsYXNzKCdkcm9wdXAnLCBzZWxlY3RPZmZzZXRUb3AgPiBzZWxlY3RPZmZzZXRCb3QgJiYgKG1lbnVIZWlnaHQgLSBtZW51RXh0cmFzLnZlcnQpIDwgZ2V0SGVpZ2h0KTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgICRtZW51LmNzcyh7XFxyXFxuICAgICAgICAgICdtYXgtaGVpZ2h0JzogbWVudUhlaWdodCArIGhlYWRlckhlaWdodCArIHNlYXJjaEhlaWdodCArIGFjdGlvbnNIZWlnaHQgKyBkb25lQnV0dG9uSGVpZ2h0ICsgJ3B4JyxcXHJcXG4gICAgICAgICAgJ292ZXJmbG93JzogJ2hpZGRlbicsXFxyXFxuICAgICAgICAgICdtaW4taGVpZ2h0JzogJydcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgICAgJG1lbnVJbm5lci5jc3Moe1xcclxcbiAgICAgICAgICAnbWF4LWhlaWdodCc6IG1lbnVIZWlnaHQgLSBtZW51UGFkZGluZy52ZXJ0ICsgJ3B4JyxcXHJcXG4gICAgICAgICAgJ292ZXJmbG93LXknOiAnYXV0bycsXFxyXFxuICAgICAgICAgICdtaW4taGVpZ2h0JzogJydcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgc2V0V2lkdGg6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBpZiAodGhpcy5vcHRpb25zLndpZHRoID09PSAnYXV0bycpIHtcXHJcXG4gICAgICAgIHRoaXMuJG1lbnUuY3NzKCdtaW4td2lkdGgnLCAnMCcpO1xcclxcblxcclxcbiAgICAgICAgLy8gR2V0IGNvcnJlY3Qgd2lkdGggaWYgZWxlbWVudCBpcyBoaWRkZW5cXHJcXG4gICAgICAgIHZhciAkc2VsZWN0Q2xvbmUgPSB0aGlzLiRtZW51LnBhcmVudCgpLmNsb25lKCkuYXBwZW5kVG8oJ2JvZHknKSxcXHJcXG4gICAgICAgICAgICAkc2VsZWN0Q2xvbmUyID0gdGhpcy5vcHRpb25zLmNvbnRhaW5lciA/IHRoaXMuJG5ld0VsZW1lbnQuY2xvbmUoKS5hcHBlbmRUbygnYm9keScpIDogJHNlbGVjdENsb25lLFxcclxcbiAgICAgICAgICAgIHVsV2lkdGggPSAkc2VsZWN0Q2xvbmUuY2hpbGRyZW4oJy5kcm9wZG93bi1tZW51Jykub3V0ZXJXaWR0aCgpLFxcclxcbiAgICAgICAgICAgIGJ0bldpZHRoID0gJHNlbGVjdENsb25lMi5jc3MoJ3dpZHRoJywgJ2F1dG8nKS5jaGlsZHJlbignYnV0dG9uJykub3V0ZXJXaWR0aCgpO1xcclxcblxcclxcbiAgICAgICAgJHNlbGVjdENsb25lLnJlbW92ZSgpO1xcclxcbiAgICAgICAgJHNlbGVjdENsb25lMi5yZW1vdmUoKTtcXHJcXG5cXHJcXG4gICAgICAgIC8vIFNldCB3aWR0aCB0byB3aGF0ZXZlcidzIGxhcmdlciwgYnV0dG9uIHRpdGxlIG9yIGxvbmdlc3Qgb3B0aW9uXFxyXFxuICAgICAgICB0aGlzLiRuZXdFbGVtZW50LmNzcygnd2lkdGgnLCBNYXRoLm1heCh1bFdpZHRoLCBidG5XaWR0aCkgKyAncHgnKTtcXHJcXG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy53aWR0aCA9PT0gJ2ZpdCcpIHtcXHJcXG4gICAgICAgIC8vIFJlbW92ZSBpbmxpbmUgbWluLXdpZHRoIHNvIHdpZHRoIGNhbiBiZSBjaGFuZ2VkIGZyb20gJ2F1dG8nXFxyXFxuICAgICAgICB0aGlzLiRtZW51LmNzcygnbWluLXdpZHRoJywgJycpO1xcclxcbiAgICAgICAgdGhpcy4kbmV3RWxlbWVudC5jc3MoJ3dpZHRoJywgJycpLmFkZENsYXNzKCdmaXQtd2lkdGgnKTtcXHJcXG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy53aWR0aCkge1xcclxcbiAgICAgICAgLy8gUmVtb3ZlIGlubGluZSBtaW4td2lkdGggc28gd2lkdGggY2FuIGJlIGNoYW5nZWQgZnJvbSAnYXV0bydcXHJcXG4gICAgICAgIHRoaXMuJG1lbnUuY3NzKCdtaW4td2lkdGgnLCAnJyk7XFxyXFxuICAgICAgICB0aGlzLiRuZXdFbGVtZW50LmNzcygnd2lkdGgnLCB0aGlzLm9wdGlvbnMud2lkdGgpO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAvLyBSZW1vdmUgaW5saW5lIG1pbi13aWR0aC93aWR0aCBzbyB3aWR0aCBjYW4gYmUgY2hhbmdlZFxcclxcbiAgICAgICAgdGhpcy4kbWVudS5jc3MoJ21pbi13aWR0aCcsICcnKTtcXHJcXG4gICAgICAgIHRoaXMuJG5ld0VsZW1lbnQuY3NzKCd3aWR0aCcsICcnKTtcXHJcXG4gICAgICB9XFxyXFxuICAgICAgLy8gUmVtb3ZlIGZpdC13aWR0aCBjbGFzcyBpZiB3aWR0aCBpcyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHlcXHJcXG4gICAgICBpZiAodGhpcy4kbmV3RWxlbWVudC5oYXNDbGFzcygnZml0LXdpZHRoJykgJiYgdGhpcy5vcHRpb25zLndpZHRoICE9PSAnZml0Jykge1xcclxcbiAgICAgICAgdGhpcy4kbmV3RWxlbWVudC5yZW1vdmVDbGFzcygnZml0LXdpZHRoJyk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBzZWxlY3RQb3NpdGlvbjogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHRoaXMuJGJzQ29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cXFwiYnMtY29udGFpbmVyXFxcIiAvPicpO1xcclxcblxcclxcbiAgICAgIHZhciB0aGF0ID0gdGhpcyxcXHJcXG4gICAgICAgICAgJGNvbnRhaW5lciA9ICQodGhpcy5vcHRpb25zLmNvbnRhaW5lciksXFxyXFxuICAgICAgICAgIHBvcyxcXHJcXG4gICAgICAgICAgY29udGFpbmVyUG9zLFxcclxcbiAgICAgICAgICBhY3R1YWxIZWlnaHQsXFxyXFxuICAgICAgICAgIGdldFBsYWNlbWVudCA9IGZ1bmN0aW9uICgkZWxlbWVudCkge1xcclxcbiAgICAgICAgICAgIHRoYXQuJGJzQ29udGFpbmVyLmFkZENsYXNzKCRlbGVtZW50LmF0dHIoJ2NsYXNzJykucmVwbGFjZSgvZm9ybS1jb250cm9sfGZpdC13aWR0aC9naSwgJycpKS50b2dnbGVDbGFzcygnZHJvcHVwJywgJGVsZW1lbnQuaGFzQ2xhc3MoJ2Ryb3B1cCcpKTtcXHJcXG4gICAgICAgICAgICBwb3MgPSAkZWxlbWVudC5vZmZzZXQoKTtcXHJcXG5cXHJcXG4gICAgICAgICAgICBpZiAoISRjb250YWluZXIuaXMoJ2JvZHknKSkge1xcclxcbiAgICAgICAgICAgICAgY29udGFpbmVyUG9zID0gJGNvbnRhaW5lci5vZmZzZXQoKTtcXHJcXG4gICAgICAgICAgICAgIGNvbnRhaW5lclBvcy50b3AgKz0gcGFyc2VJbnQoJGNvbnRhaW5lci5jc3MoJ2JvcmRlclRvcFdpZHRoJykpIC0gJGNvbnRhaW5lci5zY3JvbGxUb3AoKTtcXHJcXG4gICAgICAgICAgICAgIGNvbnRhaW5lclBvcy5sZWZ0ICs9IHBhcnNlSW50KCRjb250YWluZXIuY3NzKCdib3JkZXJMZWZ0V2lkdGgnKSkgLSAkY29udGFpbmVyLnNjcm9sbExlZnQoKTtcXHJcXG4gICAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgY29udGFpbmVyUG9zID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgICAgYWN0dWFsSGVpZ2h0ID0gJGVsZW1lbnQuaGFzQ2xhc3MoJ2Ryb3B1cCcpID8gMCA6ICRlbGVtZW50WzBdLm9mZnNldEhlaWdodDtcXHJcXG5cXHJcXG4gICAgICAgICAgICB0aGF0LiRic0NvbnRhaW5lci5jc3Moe1xcclxcbiAgICAgICAgICAgICAgJ3RvcCc6IHBvcy50b3AgLSBjb250YWluZXJQb3MudG9wICsgYWN0dWFsSGVpZ2h0LFxcclxcbiAgICAgICAgICAgICAgJ2xlZnQnOiBwb3MubGVmdCAtIGNvbnRhaW5lclBvcy5sZWZ0LFxcclxcbiAgICAgICAgICAgICAgJ3dpZHRoJzogJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGhcXHJcXG4gICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgfTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRidXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmICh0aGF0LmlzRGlzYWJsZWQoKSkge1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBnZXRQbGFjZW1lbnQodGhhdC4kbmV3RWxlbWVudCk7XFxyXFxuXFxyXFxuICAgICAgICB0aGF0LiRic0NvbnRhaW5lclxcclxcbiAgICAgICAgICAuYXBwZW5kVG8odGhhdC5vcHRpb25zLmNvbnRhaW5lcilcXHJcXG4gICAgICAgICAgLnRvZ2dsZUNsYXNzKCdvcGVuJywgISR0aGlzLmhhc0NsYXNzKCdvcGVuJykpXFxyXFxuICAgICAgICAgIC5hcHBlbmQodGhhdC4kbWVudSk7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUgc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgZ2V0UGxhY2VtZW50KHRoYXQuJG5ld0VsZW1lbnQpO1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2hpZGUuYnMuc2VsZWN0JywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhhdC4kbWVudS5kYXRhKCdoZWlnaHQnLCB0aGF0LiRtZW51LmhlaWdodCgpKTtcXHJcXG4gICAgICAgIHRoYXQuJGJzQ29udGFpbmVyLmRldGFjaCgpO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9LFxcclxcblxcclxcbiAgICAvKipcXHJcXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gdGhlIGluZGV4IG9mIHRoZSBvcHRpb24gdGhhdCBpcyBiZWluZyBjaGFuZ2VkXFxyXFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2VsZWN0ZWQgLSB0cnVlIGlmIHRoZSBvcHRpb24gaXMgYmVpbmcgc2VsZWN0ZWQsIGZhbHNlIGlmIGJlaW5nIGRlc2VsZWN0ZWRcXHJcXG4gICAgICogQHBhcmFtIHtKUXVlcnl9ICRsaXMgLSB0aGUgJ2xpJyBlbGVtZW50IHRoYXQgaXMgYmVpbmcgbW9kaWZpZWRcXHJcXG4gICAgICovXFxyXFxuICAgIHNldFNlbGVjdGVkOiBmdW5jdGlvbiAoaW5kZXgsIHNlbGVjdGVkLCAkbGlzKSB7XFxyXFxuICAgICAgaWYgKCEkbGlzKSB7XFxyXFxuICAgICAgICB0aGlzLnRvZ2dsZVBsYWNlaG9sZGVyKCk7IC8vIGNoZWNrIGlmIHNldFNlbGVjdGVkIGlzIGJlaW5nIGNhbGxlZCBieSBjaGFuZ2luZyB0aGUgdmFsdWUgb2YgdGhlIHNlbGVjdFxcclxcbiAgICAgICAgJGxpcyA9IHRoaXMuZmluZExpcygpLmVxKHRoaXMubGlPYmpbaW5kZXhdKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgJGxpcy50b2dnbGVDbGFzcygnc2VsZWN0ZWQnLCBzZWxlY3RlZCkuZmluZCgnYScpLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnLCBzZWxlY3RlZCk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIC8qKlxcclxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSB0aGUgaW5kZXggb2YgdGhlIG9wdGlvbiB0aGF0IGlzIGJlaW5nIGRpc2FibGVkXFxyXFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzYWJsZWQgLSB0cnVlIGlmIHRoZSBvcHRpb24gaXMgYmVpbmcgZGlzYWJsZWQsIGZhbHNlIGlmIGJlaW5nIGVuYWJsZWRcXHJcXG4gICAgICogQHBhcmFtIHtKUXVlcnl9ICRsaXMgLSB0aGUgJ2xpJyBlbGVtZW50IHRoYXQgaXMgYmVpbmcgbW9kaWZpZWRcXHJcXG4gICAgICovXFxyXFxuICAgIHNldERpc2FibGVkOiBmdW5jdGlvbiAoaW5kZXgsIGRpc2FibGVkLCAkbGlzKSB7XFxyXFxuICAgICAgaWYgKCEkbGlzKSB7XFxyXFxuICAgICAgICAkbGlzID0gdGhpcy5maW5kTGlzKCkuZXEodGhpcy5saU9ialtpbmRleF0pO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAoZGlzYWJsZWQpIHtcXHJcXG4gICAgICAgICRsaXMuYWRkQ2xhc3MoJ2Rpc2FibGVkJykuY2hpbGRyZW4oJ2EnKS5hdHRyKCdocmVmJywgJyMnKS5hdHRyKCd0YWJpbmRleCcsIC0xKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgdHJ1ZSk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICRsaXMucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJykuY2hpbGRyZW4oJ2EnKS5yZW1vdmVBdHRyKCdocmVmJykuYXR0cigndGFiaW5kZXgnLCAwKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgZmFsc2UpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgaXNEaXNhYmxlZDogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHJldHVybiB0aGlzLiRlbGVtZW50WzBdLmRpc2FibGVkO1xcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBjaGVja0Rpc2FibGVkOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xcclxcblxcclxcbiAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQoKSkge1xcclxcbiAgICAgICAgdGhpcy4kbmV3RWxlbWVudC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcXHJcXG4gICAgICAgIHRoaXMuJGJ1dHRvbi5hZGRDbGFzcygnZGlzYWJsZWQnKS5hdHRyKCd0YWJpbmRleCcsIC0xKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgdHJ1ZSk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIGlmICh0aGlzLiRidXR0b24uaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcXHJcXG4gICAgICAgICAgdGhpcy4kbmV3RWxlbWVudC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcXHJcXG4gICAgICAgICAgdGhpcy4kYnV0dG9uLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCBmYWxzZSk7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBpZiAodGhpcy4kYnV0dG9uLmF0dHIoJ3RhYmluZGV4JykgPT0gLTEgJiYgIXRoaXMuJGVsZW1lbnQuZGF0YSgndGFiaW5kZXgnKSkge1xcclxcbiAgICAgICAgICB0aGlzLiRidXR0b24ucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kYnV0dG9uLmNsaWNrKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIHJldHVybiAhdGhhdC5pc0Rpc2FibGVkKCk7XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIHRvZ2dsZVBsYWNlaG9sZGVyOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyIHZhbHVlID0gdGhpcy4kZWxlbWVudC52YWwoKTtcXHJcXG4gICAgICB0aGlzLiRidXR0b24udG9nZ2xlQ2xhc3MoJ2JzLXBsYWNlaG9sZGVyJywgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnIHx8ICh2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgJiYgdmFsdWUubGVuZ3RoID09PSAwKSk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIHRhYkluZGV4OiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuJGVsZW1lbnQuZGF0YSgndGFiaW5kZXgnKSAhPT0gdGhpcy4kZWxlbWVudC5hdHRyKCd0YWJpbmRleCcpICYmIFxcclxcbiAgICAgICAgKHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSAhPT0gLTk4ICYmIHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSAhPT0gJy05OCcpKSB7XFxyXFxuICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoJ3RhYmluZGV4JywgdGhpcy4kZWxlbWVudC5hdHRyKCd0YWJpbmRleCcpKTtcXHJcXG4gICAgICAgIHRoaXMuJGJ1dHRvbi5hdHRyKCd0YWJpbmRleCcsIHRoaXMuJGVsZW1lbnQuZGF0YSgndGFiaW5kZXgnKSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnLCAtOTgpO1xcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBjbGlja0xpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyIHRoYXQgPSB0aGlzLFxcclxcbiAgICAgICAgICAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcXHJcXG5cXHJcXG4gICAgICAkZG9jdW1lbnQuZGF0YSgnc3BhY2VTZWxlY3QnLCBmYWxzZSk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kYnV0dG9uLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICBpZiAoLygzMikvLnRlc3QoZS5rZXlDb2RlLnRvU3RyaW5nKDEwKSkgJiYgJGRvY3VtZW50LmRhdGEoJ3NwYWNlU2VsZWN0JykpIHtcXHJcXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgICAgJGRvY3VtZW50LmRhdGEoJ3NwYWNlU2VsZWN0JywgZmFsc2UpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHRoaXMuJGJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB0aGF0LnNldFNpemUoKTtcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRlbGVtZW50Lm9uKCdzaG93bi5icy5zZWxlY3QnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICBpZiAoIXRoYXQub3B0aW9ucy5saXZlU2VhcmNoICYmICF0aGF0Lm11bHRpcGxlKSB7XFxyXFxuICAgICAgICAgIHRoYXQuJG1lbnVJbm5lci5maW5kKCcuc2VsZWN0ZWQgYScpLmZvY3VzKCk7XFxyXFxuICAgICAgICB9IGVsc2UgaWYgKCF0aGF0Lm11bHRpcGxlKSB7XFxyXFxuICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gdGhhdC5saU9ialt0aGF0LiRlbGVtZW50WzBdLnNlbGVjdGVkSW5kZXhdO1xcclxcblxcclxcbiAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGVkSW5kZXggIT09ICdudW1iZXInIHx8IHRoYXQub3B0aW9ucy5zaXplID09PSBmYWxzZSkgcmV0dXJuO1xcclxcblxcclxcbiAgICAgICAgICAvLyBzY3JvbGwgdG8gc2VsZWN0ZWQgb3B0aW9uXFxyXFxuICAgICAgICAgIHZhciBvZmZzZXQgPSB0aGF0LiRsaXMuZXEoc2VsZWN0ZWRJbmRleClbMF0ub2Zmc2V0VG9wIC0gdGhhdC4kbWVudUlubmVyWzBdLm9mZnNldFRvcDtcXHJcXG4gICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0IC0gdGhhdC4kbWVudUlubmVyWzBdLm9mZnNldEhlaWdodC8yICsgdGhhdC5zaXplSW5mby5saUhlaWdodC8yO1xcclxcbiAgICAgICAgICB0aGF0LiRtZW51SW5uZXJbMF0uc2Nyb2xsVG9wID0gb2Zmc2V0O1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHRoaXMuJG1lbnVJbm5lci5vbignY2xpY2snLCAnbGkgYScsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxcclxcbiAgICAgICAgICAgIGNsaWNrZWRJbmRleCA9ICR0aGlzLnBhcmVudCgpLmRhdGEoJ29yaWdpbmFsSW5kZXgnKSxcXHJcXG4gICAgICAgICAgICBwcmV2VmFsdWUgPSB0aGF0LiRlbGVtZW50LnZhbCgpLFxcclxcbiAgICAgICAgICAgIHByZXZJbmRleCA9IHRoYXQuJGVsZW1lbnQucHJvcCgnc2VsZWN0ZWRJbmRleCcpLFxcclxcbiAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2UgPSB0cnVlO1xcclxcblxcclxcbiAgICAgICAgLy8gRG9uJ3QgY2xvc2Ugb24gbXVsdGkgY2hvaWNlIG1lbnVcXHJcXG4gICAgICAgIGlmICh0aGF0Lm11bHRpcGxlICYmIHRoYXQub3B0aW9ucy5tYXhPcHRpb25zICE9PSAxKSB7XFxyXFxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuXFxyXFxuICAgICAgICAvL0Rvbid0IHJ1biBpZiB3ZSBoYXZlIGJlZW4gZGlzYWJsZWRcXHJcXG4gICAgICAgIGlmICghdGhhdC5pc0Rpc2FibGVkKCkgJiYgISR0aGlzLnBhcmVudCgpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgICAgIHZhciAkb3B0aW9ucyA9IHRoYXQuJGVsZW1lbnQuZmluZCgnb3B0aW9uJyksXFxyXFxuICAgICAgICAgICAgICAkb3B0aW9uID0gJG9wdGlvbnMuZXEoY2xpY2tlZEluZGV4KSxcXHJcXG4gICAgICAgICAgICAgIHN0YXRlID0gJG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcpLFxcclxcbiAgICAgICAgICAgICAgJG9wdGdyb3VwID0gJG9wdGlvbi5wYXJlbnQoJ29wdGdyb3VwJyksXFxyXFxuICAgICAgICAgICAgICBtYXhPcHRpb25zID0gdGhhdC5vcHRpb25zLm1heE9wdGlvbnMsXFxyXFxuICAgICAgICAgICAgICBtYXhPcHRpb25zR3JwID0gJG9wdGdyb3VwLmRhdGEoJ21heE9wdGlvbnMnKSB8fCBmYWxzZTtcXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKCF0aGF0Lm11bHRpcGxlKSB7IC8vIERlc2VsZWN0IGFsbCBvdGhlcnMgaWYgbm90IG11bHRpIHNlbGVjdCBib3hcXHJcXG4gICAgICAgICAgICAkb3B0aW9ucy5wcm9wKCdzZWxlY3RlZCcsIGZhbHNlKTtcXHJcXG4gICAgICAgICAgICAkb3B0aW9uLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XFxyXFxuICAgICAgICAgICAgdGhhdC4kbWVudUlubmVyLmZpbmQoJy5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpLmZpbmQoJ2EnKS5hdHRyKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpO1xcclxcbiAgICAgICAgICAgIHRoYXQuc2V0U2VsZWN0ZWQoY2xpY2tlZEluZGV4LCB0cnVlKTtcXHJcXG4gICAgICAgICAgfSBlbHNlIHsgLy8gVG9nZ2xlIHRoZSBvbmUgd2UgaGF2ZSBjaG9zZW4gaWYgd2UgYXJlIG11bHRpIHNlbGVjdC5cXHJcXG4gICAgICAgICAgICAkb3B0aW9uLnByb3AoJ3NlbGVjdGVkJywgIXN0YXRlKTtcXHJcXG4gICAgICAgICAgICB0aGF0LnNldFNlbGVjdGVkKGNsaWNrZWRJbmRleCwgIXN0YXRlKTtcXHJcXG4gICAgICAgICAgICAkdGhpcy5ibHVyKCk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgaWYgKG1heE9wdGlvbnMgIT09IGZhbHNlIHx8IG1heE9wdGlvbnNHcnAgIT09IGZhbHNlKSB7XFxyXFxuICAgICAgICAgICAgICB2YXIgbWF4UmVhY2hlZCA9IG1heE9wdGlvbnMgPCAkb3B0aW9ucy5maWx0ZXIoJzpzZWxlY3RlZCcpLmxlbmd0aCxcXHJcXG4gICAgICAgICAgICAgICAgICBtYXhSZWFjaGVkR3JwID0gbWF4T3B0aW9uc0dycCA8ICRvcHRncm91cC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5sZW5ndGg7XFxyXFxuXFxyXFxuICAgICAgICAgICAgICBpZiAoKG1heE9wdGlvbnMgJiYgbWF4UmVhY2hlZCkgfHwgKG1heE9wdGlvbnNHcnAgJiYgbWF4UmVhY2hlZEdycCkpIHtcXHJcXG4gICAgICAgICAgICAgICAgaWYgKG1heE9wdGlvbnMgJiYgbWF4T3B0aW9ucyA9PSAxKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgJG9wdGlvbnMucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgJG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xcclxcbiAgICAgICAgICAgICAgICAgIHRoYXQuJG1lbnVJbm5lci5maW5kKCcuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcXHJcXG4gICAgICAgICAgICAgICAgICB0aGF0LnNldFNlbGVjdGVkKGNsaWNrZWRJbmRleCwgdHJ1ZSk7XFxyXFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF4T3B0aW9uc0dycCAmJiBtYXhPcHRpb25zR3JwID09IDEpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAkb3B0Z3JvdXAuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgJG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xcclxcbiAgICAgICAgICAgICAgICAgIHZhciBvcHRncm91cElEID0gJHRoaXMucGFyZW50KCkuZGF0YSgnb3B0Z3JvdXAnKTtcXHJcXG4gICAgICAgICAgICAgICAgICB0aGF0LiRtZW51SW5uZXIuZmluZCgnW2RhdGEtb3B0Z3JvdXA9XFxcIicgKyBvcHRncm91cElEICsgJ1xcXCJdJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XFxyXFxuICAgICAgICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3RlZChjbGlja2VkSW5kZXgsIHRydWUpO1xcclxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgIHZhciBtYXhPcHRpb25zVGV4dCA9IHR5cGVvZiB0aGF0Lm9wdGlvbnMubWF4T3B0aW9uc1RleHQgPT09ICdzdHJpbmcnID8gW3RoYXQub3B0aW9ucy5tYXhPcHRpb25zVGV4dCwgdGhhdC5vcHRpb25zLm1heE9wdGlvbnNUZXh0XSA6IHRoYXQub3B0aW9ucy5tYXhPcHRpb25zVGV4dCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgbWF4T3B0aW9uc0FyciA9IHR5cGVvZiBtYXhPcHRpb25zVGV4dCA9PT0gJ2Z1bmN0aW9uJyA/IG1heE9wdGlvbnNUZXh0KG1heE9wdGlvbnMsIG1heE9wdGlvbnNHcnApIDogbWF4T3B0aW9uc1RleHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgIG1heFR4dCA9IG1heE9wdGlvbnNBcnJbMF0ucmVwbGFjZSgne259JywgbWF4T3B0aW9ucyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgIG1heFR4dEdycCA9IG1heE9wdGlvbnNBcnJbMV0ucmVwbGFjZSgne259JywgbWF4T3B0aW9uc0dycCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICRub3RpZnkgPSAkKCc8ZGl2IGNsYXNzPVxcXCJub3RpZnlcXFwiPjwvZGl2PicpO1xcclxcbiAgICAgICAgICAgICAgICAgIC8vIElmIHt2YXJ9IGlzIHNldCBpbiBhcnJheSwgcmVwbGFjZSBpdFxcclxcbiAgICAgICAgICAgICAgICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xcclxcbiAgICAgICAgICAgICAgICAgIGlmIChtYXhPcHRpb25zQXJyWzJdKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBtYXhUeHQgPSBtYXhUeHQucmVwbGFjZSgne3Zhcn0nLCBtYXhPcHRpb25zQXJyWzJdW21heE9wdGlvbnMgPiAxID8gMCA6IDFdKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIG1heFR4dEdycCA9IG1heFR4dEdycC5yZXBsYWNlKCd7dmFyfScsIG1heE9wdGlvbnNBcnJbMl1bbWF4T3B0aW9uc0dycCA+IDEgPyAwIDogMV0pO1xcclxcbiAgICAgICAgICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgICAgICAgICAkb3B0aW9uLnByb3AoJ3NlbGVjdGVkJywgZmFsc2UpO1xcclxcblxcclxcbiAgICAgICAgICAgICAgICAgIHRoYXQuJG1lbnUuYXBwZW5kKCRub3RpZnkpO1xcclxcblxcclxcbiAgICAgICAgICAgICAgICAgIGlmIChtYXhPcHRpb25zICYmIG1heFJlYWNoZWQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICRub3RpZnkuYXBwZW5kKCQoJzxkaXY+JyArIG1heFR4dCArICc8L2Rpdj4nKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gZmFsc2U7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ21heFJlYWNoZWQuYnMuc2VsZWN0Jyk7XFxyXFxuICAgICAgICAgICAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgICAgICAgICAgIGlmIChtYXhPcHRpb25zR3JwICYmIG1heFJlYWNoZWRHcnApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICRub3RpZnkuYXBwZW5kKCQoJzxkaXY+JyArIG1heFR4dEdycCArICc8L2Rpdj4nKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gZmFsc2U7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ21heFJlYWNoZWRHcnAuYnMuc2VsZWN0Jyk7XFxyXFxuICAgICAgICAgICAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXRTZWxlY3RlZChjbGlja2VkSW5kZXgsIGZhbHNlKTtcXHJcXG4gICAgICAgICAgICAgICAgICB9LCAxMCk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgICAgICAgJG5vdGlmeS5kZWxheSg3NTApLmZhZGVPdXQoMzAwLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIGlmICghdGhhdC5tdWx0aXBsZSB8fCAodGhhdC5tdWx0aXBsZSAmJiB0aGF0Lm9wdGlvbnMubWF4T3B0aW9ucyA9PT0gMSkpIHtcXHJcXG4gICAgICAgICAgICB0aGF0LiRidXR0b24uZm9jdXMoKTtcXHJcXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGF0Lm9wdGlvbnMubGl2ZVNlYXJjaCkge1xcclxcbiAgICAgICAgICAgIHRoYXQuJHNlYXJjaGJveC5mb2N1cygpO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIC8vIFRyaWdnZXIgc2VsZWN0ICdjaGFuZ2UnXFxyXFxuICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlKSB7XFxyXFxuICAgICAgICAgICAgaWYgKChwcmV2VmFsdWUgIT0gdGhhdC4kZWxlbWVudC52YWwoKSAmJiB0aGF0Lm11bHRpcGxlKSB8fCAocHJldkluZGV4ICE9IHRoYXQuJGVsZW1lbnQucHJvcCgnc2VsZWN0ZWRJbmRleCcpICYmICF0aGF0Lm11bHRpcGxlKSkge1xcclxcbiAgICAgICAgICAgICAgLy8gJG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcpIGlzIGN1cnJlbnQgb3B0aW9uIHN0YXRlIChzZWxlY3RlZC91bnNlbGVjdGVkKS4gc3RhdGUgaXMgcHJldmlvdXMgb3B0aW9uIHN0YXRlLlxcclxcbiAgICAgICAgICAgICAgY2hhbmdlZF9hcmd1bWVudHMgPSBbY2xpY2tlZEluZGV4LCAkb3B0aW9uLnByb3AoJ3NlbGVjdGVkJyksIHN0YXRlXTtcXHJcXG4gICAgICAgICAgICAgIHRoYXQuJGVsZW1lbnRcXHJcXG4gICAgICAgICAgICAgICAgLnRyaWdnZXJOYXRpdmUoJ2NoYW5nZScpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHRoaXMuJG1lbnUub24oJ2NsaWNrJywgJ2xpLmRpc2FibGVkIGEsIC5wb3BvdmVyLXRpdGxlLCAucG9wb3Zlci10aXRsZSA6bm90KC5jbG9zZSknLCBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgaWYgKGUuY3VycmVudFRhcmdldCA9PSB0aGlzKSB7XFxyXFxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcXHJcXG4gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5saXZlU2VhcmNoICYmICEkKGUudGFyZ2V0KS5oYXNDbGFzcygnY2xvc2UnKSkge1xcclxcbiAgICAgICAgICAgIHRoYXQuJHNlYXJjaGJveC5mb2N1cygpO1xcclxcbiAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgIHRoYXQuJGJ1dHRvbi5mb2N1cygpO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kbWVudUlubmVyLm9uKCdjbGljaycsICcuZGl2aWRlciwgLmRyb3Bkb3duLWhlYWRlcicsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xcclxcbiAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5saXZlU2VhcmNoKSB7XFxyXFxuICAgICAgICAgIHRoYXQuJHNlYXJjaGJveC5mb2N1cygpO1xcclxcbiAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgdGhhdC4kYnV0dG9uLmZvY3VzKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kbWVudS5vbignY2xpY2snLCAnLnBvcG92ZXItdGl0bGUgLmNsb3NlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhhdC4kYnV0dG9uLmNsaWNrKCk7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kc2VhcmNoYm94Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHRoaXMuJG1lbnUub24oJ2NsaWNrJywgJy5hY3Rpb25zLWJ0bicsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICBpZiAodGhhdC5vcHRpb25zLmxpdmVTZWFyY2gpIHtcXHJcXG4gICAgICAgICAgdGhhdC4kc2VhcmNoYm94LmZvY3VzKCk7XFxyXFxuICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICB0aGF0LiRidXR0b24uZm9jdXMoKTtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYnMtc2VsZWN0LWFsbCcpKSB7XFxyXFxuICAgICAgICAgIHRoYXQuc2VsZWN0QWxsKCk7XFxyXFxuICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICB0aGF0LmRlc2VsZWN0QWxsKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhhdC5yZW5kZXIoZmFsc2UpO1xcclxcbiAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2VkLmJzLnNlbGVjdCcsIGNoYW5nZWRfYXJndW1lbnRzKTtcXHJcXG4gICAgICAgIGNoYW5nZWRfYXJndW1lbnRzID0gbnVsbDtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgbGl2ZVNlYXJjaExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyIHRoYXQgPSB0aGlzLFxcclxcbiAgICAgICAgICAkbm9fcmVzdWx0cyA9ICQoJzxsaSBjbGFzcz1cXFwibm8tcmVzdWx0c1xcXCI+PC9saT4nKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRidXR0b24ub24oJ2NsaWNrLmRyb3Bkb3duLmRhdGEtYXBpJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdGhhdC4kbWVudUlubmVyLmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XFxyXFxuICAgICAgICBpZiAoISF0aGF0LiRzZWFyY2hib3gudmFsKCkpIHtcXHJcXG4gICAgICAgICAgdGhhdC4kc2VhcmNoYm94LnZhbCgnJyk7XFxyXFxuICAgICAgICAgIHRoYXQuJGxpcy5ub3QoJy5pcy1oaWRkZW4nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XFxyXFxuICAgICAgICAgIGlmICghISRub19yZXN1bHRzLnBhcmVudCgpLmxlbmd0aCkgJG5vX3Jlc3VsdHMucmVtb3ZlKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBpZiAoIXRoYXQubXVsdGlwbGUpIHRoYXQuJG1lbnVJbm5lci5maW5kKCcuc2VsZWN0ZWQnKS5hZGRDbGFzcygnYWN0aXZlJyk7XFxyXFxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgdGhhdC4kc2VhcmNoYm94LmZvY3VzKCk7XFxyXFxuICAgICAgICB9LCAxMCk7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kc2VhcmNoYm94Lm9uKCdjbGljay5kcm9wZG93bi5kYXRhLWFwaSBmb2N1cy5kcm9wZG93bi5kYXRhLWFwaSB0b3VjaGVuZC5kcm9wZG93bi5kYXRhLWFwaScsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHRoaXMuJHNlYXJjaGJveC5vbignaW5wdXQgcHJvcGVydHljaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB0aGF0LiRsaXMubm90KCcuaXMtaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xcclxcbiAgICAgICAgdGhhdC4kbGlzLmZpbHRlcignLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcXHJcXG4gICAgICAgICRub19yZXN1bHRzLnJlbW92ZSgpO1xcclxcblxcclxcbiAgICAgICAgaWYgKHRoYXQuJHNlYXJjaGJveC52YWwoKSkge1xcclxcbiAgICAgICAgICB2YXIgJHNlYXJjaEJhc2UgPSB0aGF0LiRsaXMubm90KCcuaXMtaGlkZGVuLCAuZGl2aWRlciwgLmRyb3Bkb3duLWhlYWRlcicpLFxcclxcbiAgICAgICAgICAgICAgJGhpZGVJdGVtcztcXHJcXG4gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5saXZlU2VhcmNoTm9ybWFsaXplKSB7XFxyXFxuICAgICAgICAgICAgJGhpZGVJdGVtcyA9ICRzZWFyY2hCYXNlLmZpbmQoJ2EnKS5ub3QoJzphJyArIHRoYXQuX3NlYXJjaFN0eWxlKCkgKyAnKFxcXCInICsgbm9ybWFsaXplVG9CYXNlKHRoYXQuJHNlYXJjaGJveC52YWwoKSkgKyAnXFxcIiknKTtcXHJcXG4gICAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgICAkaGlkZUl0ZW1zID0gJHNlYXJjaEJhc2UuZmluZCgnYScpLm5vdCgnOicgKyB0aGF0Ll9zZWFyY2hTdHlsZSgpICsgJyhcXFwiJyArIHRoYXQuJHNlYXJjaGJveC52YWwoKSArICdcXFwiKScpO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIGlmICgkaGlkZUl0ZW1zLmxlbmd0aCA9PT0gJHNlYXJjaEJhc2UubGVuZ3RoKSB7XFxyXFxuICAgICAgICAgICAgJG5vX3Jlc3VsdHMuaHRtbCh0aGF0Lm9wdGlvbnMubm9uZVJlc3VsdHNUZXh0LnJlcGxhY2UoJ3swfScsICdcXFwiJyArIGh0bWxFc2NhcGUodGhhdC4kc2VhcmNoYm94LnZhbCgpKSArICdcXFwiJykpO1xcclxcbiAgICAgICAgICAgIHRoYXQuJG1lbnVJbm5lci5hcHBlbmQoJG5vX3Jlc3VsdHMpO1xcclxcbiAgICAgICAgICAgIHRoYXQuJGxpcy5hZGRDbGFzcygnaGlkZGVuJyk7XFxyXFxuICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgJGhpZGVJdGVtcy5wYXJlbnQoKS5hZGRDbGFzcygnaGlkZGVuJyk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgdmFyICRsaXNWaXNpYmxlID0gdGhhdC4kbGlzLm5vdCgnLmhpZGRlbicpLFxcclxcbiAgICAgICAgICAgICAgICAkZm91bmREaXY7XFxyXFxuXFxyXFxuICAgICAgICAgICAgLy8gaGlkZSBkaXZpZGVyIGlmIGZpcnN0IG9yIGxhc3QgdmlzaWJsZSwgb3IgaWYgZm9sbG93ZWQgYnkgYW5vdGhlciBkaXZpZGVyXFxyXFxuICAgICAgICAgICAgJGxpc1Zpc2libGUuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcXHJcXG4gICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2RpdmlkZXInKSkge1xcclxcbiAgICAgICAgICAgICAgICBpZiAoJGZvdW5kRGl2ID09PSB1bmRlZmluZWQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnaGlkZGVuJyk7XFxyXFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgaWYgKCRmb3VuZERpdikgJGZvdW5kRGl2LmFkZENsYXNzKCdoaWRkZW4nKTtcXHJcXG4gICAgICAgICAgICAgICAgICAkZm91bmREaXYgPSAkdGhpcztcXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdGhpcy5oYXNDbGFzcygnZHJvcGRvd24taGVhZGVyJykgJiYgJGxpc1Zpc2libGUuZXEoaW5kZXggKyAxKS5kYXRhKCdvcHRncm91cCcpICE9PSAkdGhpcy5kYXRhKCdvcHRncm91cCcpKSB7XFxyXFxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdoaWRkZW4nKTtcXHJcXG4gICAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICRmb3VuZERpdiA9IG51bGw7XFxyXFxuICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgaWYgKCRmb3VuZERpdikgJGZvdW5kRGl2LmFkZENsYXNzKCdoaWRkZW4nKTtcXHJcXG5cXHJcXG4gICAgICAgICAgICAkc2VhcmNoQmFzZS5ub3QoJy5oaWRkZW4nKS5maXJzdCgpLmFkZENsYXNzKCdhY3RpdmUnKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBfc2VhcmNoU3R5bGU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgc3R5bGVzID0ge1xcclxcbiAgICAgICAgYmVnaW5zOiAnaWJlZ2lucycsXFxyXFxuICAgICAgICBzdGFydHNXaXRoOiAnaWJlZ2lucydcXHJcXG4gICAgICB9O1xcclxcblxcclxcbiAgICAgIHJldHVybiBzdHlsZXNbdGhpcy5vcHRpb25zLmxpdmVTZWFyY2hTdHlsZV0gfHwgJ2ljb250YWlucyc7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIHZhbDogZnVuY3Rpb24gKHZhbHVlKSB7XFxyXFxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcXHJcXG4gICAgICAgIHRoaXMuJGVsZW1lbnQudmFsKHZhbHVlKTtcXHJcXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm4gdGhpcy4kZWxlbWVudDtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQudmFsKCk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBjaGFuZ2VBbGw6IGZ1bmN0aW9uIChzdGF0dXMpIHtcXHJcXG4gICAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHJldHVybjtcXHJcXG4gICAgICBpZiAodHlwZW9mIHN0YXR1cyA9PT0gJ3VuZGVmaW5lZCcpIHN0YXR1cyA9IHRydWU7XFxyXFxuXFxyXFxuICAgICAgdGhpcy5maW5kTGlzKCk7XFxyXFxuXFxyXFxuICAgICAgdmFyICRvcHRpb25zID0gdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb24nKSxcXHJcXG4gICAgICAgICAgJGxpc1Zpc2libGUgPSB0aGlzLiRsaXMubm90KCcuZGl2aWRlciwgLmRyb3Bkb3duLWhlYWRlciwgLmRpc2FibGVkLCAuaGlkZGVuJyksXFxyXFxuICAgICAgICAgIGxpc1Zpc0xlbiA9ICRsaXNWaXNpYmxlLmxlbmd0aCxcXHJcXG4gICAgICAgICAgc2VsZWN0ZWRPcHRpb25zID0gW107XFxyXFxuICAgICAgICAgIFxcclxcbiAgICAgIGlmIChzdGF0dXMpIHtcXHJcXG4gICAgICAgIGlmICgkbGlzVmlzaWJsZS5maWx0ZXIoJy5zZWxlY3RlZCcpLmxlbmd0aCA9PT0gJGxpc1Zpc2libGUubGVuZ3RoKSByZXR1cm47XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIGlmICgkbGlzVmlzaWJsZS5maWx0ZXIoJy5zZWxlY3RlZCcpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG4gICAgICAgICAgXFxyXFxuICAgICAgJGxpc1Zpc2libGUudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJywgc3RhdHVzKTtcXHJcXG5cXHJcXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc1Zpc0xlbjsgaSsrKSB7XFxyXFxuICAgICAgICB2YXIgb3JpZ0luZGV4ID0gJGxpc1Zpc2libGVbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLWluZGV4Jyk7XFxyXFxuICAgICAgICBzZWxlY3RlZE9wdGlvbnNbc2VsZWN0ZWRPcHRpb25zLmxlbmd0aF0gPSAkb3B0aW9ucy5lcShvcmlnSW5kZXgpWzBdO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAkKHNlbGVjdGVkT3B0aW9ucykucHJvcCgnc2VsZWN0ZWQnLCBzdGF0dXMpO1xcclxcblxcclxcbiAgICAgIHRoaXMucmVuZGVyKGZhbHNlKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLnRvZ2dsZVBsYWNlaG9sZGVyKCk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudFxcclxcbiAgICAgICAgLnRyaWdnZXJOYXRpdmUoJ2NoYW5nZScpO1xcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBzZWxlY3RBbGw6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICByZXR1cm4gdGhpcy5jaGFuZ2VBbGwodHJ1ZSk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIGRlc2VsZWN0QWxsOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlQWxsKGZhbHNlKTtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcXHJcXG5cXHJcXG4gICAgICBpZiAoZSkgZS5zdG9wUHJvcGFnYXRpb24oKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRidXR0b24udHJpZ2dlcignY2xpY2snKTtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAga2V5ZG93bjogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxcclxcbiAgICAgICAgICAkcGFyZW50ID0gJHRoaXMuaXMoJ2lucHV0JykgPyAkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKSA6ICR0aGlzLnBhcmVudCgpLFxcclxcbiAgICAgICAgICAkaXRlbXMsXFxyXFxuICAgICAgICAgIHRoYXQgPSAkcGFyZW50LmRhdGEoJ3RoaXMnKSxcXHJcXG4gICAgICAgICAgaW5kZXgsXFxyXFxuICAgICAgICAgIG5leHQsXFxyXFxuICAgICAgICAgIGZpcnN0LFxcclxcbiAgICAgICAgICBsYXN0LFxcclxcbiAgICAgICAgICBwcmV2LFxcclxcbiAgICAgICAgICBuZXh0UHJldixcXHJcXG4gICAgICAgICAgcHJldkluZGV4LFxcclxcbiAgICAgICAgICBpc0FjdGl2ZSxcXHJcXG4gICAgICAgICAgc2VsZWN0b3IgPSAnOm5vdCguZGlzYWJsZWQsIC5oaWRkZW4sIC5kcm9wZG93bi1oZWFkZXIsIC5kaXZpZGVyKScsXFxyXFxuICAgICAgICAgIGtleUNvZGVNYXAgPSB7XFxyXFxuICAgICAgICAgICAgMzI6ICcgJyxcXHJcXG4gICAgICAgICAgICA0ODogJzAnLFxcclxcbiAgICAgICAgICAgIDQ5OiAnMScsXFxyXFxuICAgICAgICAgICAgNTA6ICcyJyxcXHJcXG4gICAgICAgICAgICA1MTogJzMnLFxcclxcbiAgICAgICAgICAgIDUyOiAnNCcsXFxyXFxuICAgICAgICAgICAgNTM6ICc1JyxcXHJcXG4gICAgICAgICAgICA1NDogJzYnLFxcclxcbiAgICAgICAgICAgIDU1OiAnNycsXFxyXFxuICAgICAgICAgICAgNTY6ICc4JyxcXHJcXG4gICAgICAgICAgICA1NzogJzknLFxcclxcbiAgICAgICAgICAgIDU5OiAnOycsXFxyXFxuICAgICAgICAgICAgNjU6ICdhJyxcXHJcXG4gICAgICAgICAgICA2NjogJ2InLFxcclxcbiAgICAgICAgICAgIDY3OiAnYycsXFxyXFxuICAgICAgICAgICAgNjg6ICdkJyxcXHJcXG4gICAgICAgICAgICA2OTogJ2UnLFxcclxcbiAgICAgICAgICAgIDcwOiAnZicsXFxyXFxuICAgICAgICAgICAgNzE6ICdnJyxcXHJcXG4gICAgICAgICAgICA3MjogJ2gnLFxcclxcbiAgICAgICAgICAgIDczOiAnaScsXFxyXFxuICAgICAgICAgICAgNzQ6ICdqJyxcXHJcXG4gICAgICAgICAgICA3NTogJ2snLFxcclxcbiAgICAgICAgICAgIDc2OiAnbCcsXFxyXFxuICAgICAgICAgICAgNzc6ICdtJyxcXHJcXG4gICAgICAgICAgICA3ODogJ24nLFxcclxcbiAgICAgICAgICAgIDc5OiAnbycsXFxyXFxuICAgICAgICAgICAgODA6ICdwJyxcXHJcXG4gICAgICAgICAgICA4MTogJ3EnLFxcclxcbiAgICAgICAgICAgIDgyOiAncicsXFxyXFxuICAgICAgICAgICAgODM6ICdzJyxcXHJcXG4gICAgICAgICAgICA4NDogJ3QnLFxcclxcbiAgICAgICAgICAgIDg1OiAndScsXFxyXFxuICAgICAgICAgICAgODY6ICd2JyxcXHJcXG4gICAgICAgICAgICA4NzogJ3cnLFxcclxcbiAgICAgICAgICAgIDg4OiAneCcsXFxyXFxuICAgICAgICAgICAgODk6ICd5JyxcXHJcXG4gICAgICAgICAgICA5MDogJ3onLFxcclxcbiAgICAgICAgICAgIDk2OiAnMCcsXFxyXFxuICAgICAgICAgICAgOTc6ICcxJyxcXHJcXG4gICAgICAgICAgICA5ODogJzInLFxcclxcbiAgICAgICAgICAgIDk5OiAnMycsXFxyXFxuICAgICAgICAgICAgMTAwOiAnNCcsXFxyXFxuICAgICAgICAgICAgMTAxOiAnNScsXFxyXFxuICAgICAgICAgICAgMTAyOiAnNicsXFxyXFxuICAgICAgICAgICAgMTAzOiAnNycsXFxyXFxuICAgICAgICAgICAgMTA0OiAnOCcsXFxyXFxuICAgICAgICAgICAgMTA1OiAnOSdcXHJcXG4gICAgICAgICAgfTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGhhdC5vcHRpb25zLmxpdmVTZWFyY2gpICRwYXJlbnQgPSAkdGhpcy5wYXJlbnQoKS5wYXJlbnQoKTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGhhdC5vcHRpb25zLmNvbnRhaW5lcikgJHBhcmVudCA9IHRoYXQuJG1lbnU7XFxyXFxuXFxyXFxuICAgICAgJGl0ZW1zID0gJCgnW3JvbGU9XFxcImxpc3Rib3hcXFwiXSBsaScsICRwYXJlbnQpO1xcclxcblxcclxcbiAgICAgIGlzQWN0aXZlID0gdGhhdC4kbmV3RWxlbWVudC5oYXNDbGFzcygnb3BlbicpO1xcclxcblxcclxcbiAgICAgIGlmICghaXNBY3RpdmUgJiYgKGUua2V5Q29kZSA+PSA0OCAmJiBlLmtleUNvZGUgPD0gNTcgfHwgZS5rZXlDb2RlID49IDk2ICYmIGUua2V5Q29kZSA8PSAxMDUgfHwgZS5rZXlDb2RlID49IDY1ICYmIGUua2V5Q29kZSA8PSA5MCkpIHtcXHJcXG4gICAgICAgIGlmICghdGhhdC5vcHRpb25zLmNvbnRhaW5lcikge1xcclxcbiAgICAgICAgICB0aGF0LnNldFNpemUoKTtcXHJcXG4gICAgICAgICAgdGhhdC4kbWVudS5wYXJlbnQoKS5hZGRDbGFzcygnb3BlbicpO1xcclxcbiAgICAgICAgICBpc0FjdGl2ZSA9IHRydWU7XFxyXFxuICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICB0aGF0LiRidXR0b24udHJpZ2dlcignY2xpY2snKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHRoYXQuJHNlYXJjaGJveC5mb2N1cygpO1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAodGhhdC5vcHRpb25zLmxpdmVTZWFyY2gpIHtcXHJcXG4gICAgICAgIGlmICgvKF45JHwyNykvLnRlc3QoZS5rZXlDb2RlLnRvU3RyaW5nKDEwKSkgJiYgaXNBY3RpdmUpIHtcXHJcXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xcclxcbiAgICAgICAgICB0aGF0LiRtZW51SW5uZXIuY2xpY2soKTtcXHJcXG4gICAgICAgICAgdGhhdC4kYnV0dG9uLmZvY3VzKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICAvLyAkaXRlbXMgY29udGFpbnMgbGkgZWxlbWVudHMgd2hlbiBsaXZlU2VhcmNoIGlzIGVuYWJsZWRcXHJcXG4gICAgICAgICRpdGVtcyA9ICQoJ1tyb2xlPVxcXCJsaXN0Ym94XFxcIl0gbGknICsgc2VsZWN0b3IsICRwYXJlbnQpO1xcclxcbiAgICAgICAgaWYgKCEkdGhpcy52YWwoKSAmJiAhLygzOHw0MCkvLnRlc3QoZS5rZXlDb2RlLnRvU3RyaW5nKDEwKSkpIHtcXHJcXG4gICAgICAgICAgaWYgKCRpdGVtcy5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICAgICAgICAkaXRlbXMgPSB0aGF0LiRtZW51SW5uZXIuZmluZCgnbGknKTtcXHJcXG4gICAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLmxpdmVTZWFyY2hOb3JtYWxpemUpIHtcXHJcXG4gICAgICAgICAgICAgICRpdGVtcyA9ICRpdGVtcy5maWx0ZXIoJzphJyArIHRoYXQuX3NlYXJjaFN0eWxlKCkgKyAnKCcgKyBub3JtYWxpemVUb0Jhc2Uoa2V5Q29kZU1hcFtlLmtleUNvZGVdKSArICcpJyk7XFxyXFxuICAgICAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICRpdGVtcyA9ICRpdGVtcy5maWx0ZXIoJzonICsgdGhhdC5fc2VhcmNoU3R5bGUoKSArICcoJyArIGtleUNvZGVNYXBbZS5rZXlDb2RlXSArICcpJyk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmICghJGl0ZW1zLmxlbmd0aCkgcmV0dXJuO1xcclxcblxcclxcbiAgICAgIGlmICgvKDM4fDQwKS8udGVzdChlLmtleUNvZGUudG9TdHJpbmcoMTApKSkge1xcclxcbiAgICAgICAgaW5kZXggPSAkaXRlbXMuaW5kZXgoJGl0ZW1zLmZpbmQoJ2EnKS5maWx0ZXIoJzpmb2N1cycpLnBhcmVudCgpKTtcXHJcXG4gICAgICAgIGZpcnN0ID0gJGl0ZW1zLmZpbHRlcihzZWxlY3RvcikuZmlyc3QoKS5pbmRleCgpO1xcclxcbiAgICAgICAgbGFzdCA9ICRpdGVtcy5maWx0ZXIoc2VsZWN0b3IpLmxhc3QoKS5pbmRleCgpO1xcclxcbiAgICAgICAgbmV4dCA9ICRpdGVtcy5lcShpbmRleCkubmV4dEFsbChzZWxlY3RvcikuZXEoMCkuaW5kZXgoKTtcXHJcXG4gICAgICAgIHByZXYgPSAkaXRlbXMuZXEoaW5kZXgpLnByZXZBbGwoc2VsZWN0b3IpLmVxKDApLmluZGV4KCk7XFxyXFxuICAgICAgICBuZXh0UHJldiA9ICRpdGVtcy5lcShuZXh0KS5wcmV2QWxsKHNlbGVjdG9yKS5lcSgwKS5pbmRleCgpO1xcclxcblxcclxcbiAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5saXZlU2VhcmNoKSB7XFxyXFxuICAgICAgICAgICRpdGVtcy5lYWNoKGZ1bmN0aW9uIChpKSB7XFxyXFxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoJ2luZGV4JywgaSk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgaW5kZXggPSAkaXRlbXMuaW5kZXgoJGl0ZW1zLmZpbHRlcignLmFjdGl2ZScpKTtcXHJcXG4gICAgICAgICAgZmlyc3QgPSAkaXRlbXMuZmlyc3QoKS5kYXRhKCdpbmRleCcpO1xcclxcbiAgICAgICAgICBsYXN0ID0gJGl0ZW1zLmxhc3QoKS5kYXRhKCdpbmRleCcpO1xcclxcbiAgICAgICAgICBuZXh0ID0gJGl0ZW1zLmVxKGluZGV4KS5uZXh0QWxsKCkuZXEoMCkuZGF0YSgnaW5kZXgnKTtcXHJcXG4gICAgICAgICAgcHJldiA9ICRpdGVtcy5lcShpbmRleCkucHJldkFsbCgpLmVxKDApLmRhdGEoJ2luZGV4Jyk7XFxyXFxuICAgICAgICAgIG5leHRQcmV2ID0gJGl0ZW1zLmVxKG5leHQpLnByZXZBbGwoKS5lcSgwKS5kYXRhKCdpbmRleCcpO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgcHJldkluZGV4ID0gJHRoaXMuZGF0YSgncHJldkluZGV4Jyk7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDM4KSB7XFxyXFxuICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMubGl2ZVNlYXJjaCkgaW5kZXgtLTtcXHJcXG4gICAgICAgICAgaWYgKGluZGV4ICE9IG5leHRQcmV2ICYmIGluZGV4ID4gcHJldikgaW5kZXggPSBwcmV2O1xcclxcbiAgICAgICAgICBpZiAoaW5kZXggPCBmaXJzdCkgaW5kZXggPSBmaXJzdDtcXHJcXG4gICAgICAgICAgaWYgKGluZGV4ID09IHByZXZJbmRleCkgaW5kZXggPSBsYXN0O1xcclxcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT0gNDApIHtcXHJcXG4gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5saXZlU2VhcmNoKSBpbmRleCsrO1xcclxcbiAgICAgICAgICBpZiAoaW5kZXggPT0gLTEpIGluZGV4ID0gMDtcXHJcXG4gICAgICAgICAgaWYgKGluZGV4ICE9IG5leHRQcmV2ICYmIGluZGV4IDwgbmV4dCkgaW5kZXggPSBuZXh0O1xcclxcbiAgICAgICAgICBpZiAoaW5kZXggPiBsYXN0KSBpbmRleCA9IGxhc3Q7XFxyXFxuICAgICAgICAgIGlmIChpbmRleCA9PSBwcmV2SW5kZXgpIGluZGV4ID0gZmlyc3Q7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAkdGhpcy5kYXRhKCdwcmV2SW5kZXgnLCBpbmRleCk7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoIXRoYXQub3B0aW9ucy5saXZlU2VhcmNoKSB7XFxyXFxuICAgICAgICAgICRpdGVtcy5lcShpbmRleCkuY2hpbGRyZW4oJ2EnKS5mb2N1cygpO1xcclxcbiAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgICBpZiAoISR0aGlzLmhhc0NsYXNzKCdkcm9wZG93bi10b2dnbGUnKSkge1xcclxcbiAgICAgICAgICAgICRpdGVtcy5yZW1vdmVDbGFzcygnYWN0aXZlJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5jaGlsZHJlbignYScpLmZvY3VzKCk7XFxyXFxuICAgICAgICAgICAgJHRoaXMuZm9jdXMoKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgIH0gZWxzZSBpZiAoISR0aGlzLmlzKCdpbnB1dCcpKSB7XFxyXFxuICAgICAgICB2YXIga2V5SW5kZXggPSBbXSxcXHJcXG4gICAgICAgICAgICBjb3VudCxcXHJcXG4gICAgICAgICAgICBwcmV2S2V5O1xcclxcblxcclxcbiAgICAgICAgJGl0ZW1zLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcXHJcXG4gICAgICAgICAgICBpZiAoJC50cmltKCQodGhpcykuY2hpbGRyZW4oJ2EnKS50ZXh0KCkudG9Mb3dlckNhc2UoKSkuc3Vic3RyaW5nKDAsIDEpID09IGtleUNvZGVNYXBbZS5rZXlDb2RlXSkge1xcclxcbiAgICAgICAgICAgICAga2V5SW5kZXgucHVzaCgkKHRoaXMpLmluZGV4KCkpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgICBjb3VudCA9ICQoZG9jdW1lbnQpLmRhdGEoJ2tleWNvdW50Jyk7XFxyXFxuICAgICAgICBjb3VudCsrO1xcclxcbiAgICAgICAgJChkb2N1bWVudCkuZGF0YSgna2V5Y291bnQnLCBjb3VudCk7XFxyXFxuXFxyXFxuICAgICAgICBwcmV2S2V5ID0gJC50cmltKCQoJzpmb2N1cycpLnRleHQoKS50b0xvd2VyQ2FzZSgpKS5zdWJzdHJpbmcoMCwgMSk7XFxyXFxuXFxyXFxuICAgICAgICBpZiAocHJldktleSAhPSBrZXlDb2RlTWFwW2Uua2V5Q29kZV0pIHtcXHJcXG4gICAgICAgICAgY291bnQgPSAxO1xcclxcbiAgICAgICAgICAkKGRvY3VtZW50KS5kYXRhKCdrZXljb3VudCcsIGNvdW50KTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0ga2V5SW5kZXgubGVuZ3RoKSB7XFxyXFxuICAgICAgICAgICQoZG9jdW1lbnQpLmRhdGEoJ2tleWNvdW50JywgMCk7XFxyXFxuICAgICAgICAgIGlmIChjb3VudCA+IGtleUluZGV4Lmxlbmd0aCkgY291bnQgPSAxO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgJGl0ZW1zLmVxKGtleUluZGV4W2NvdW50IC0gMV0pLmNoaWxkcmVuKCdhJykuZm9jdXMoKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgLy8gU2VsZWN0IGZvY3VzZWQgb3B0aW9uIGlmIFxcXCJFbnRlclxcXCIsIFxcXCJTcGFjZWJhclxcXCIgb3IgXFxcIlRhYlxcXCIgKHdoZW4gc2VsZWN0T25UYWIgaXMgdHJ1ZSkgYXJlIHByZXNzZWQgaW5zaWRlIHRoZSBtZW51LlxcclxcbiAgICAgIGlmICgoLygxM3wzMikvLnRlc3QoZS5rZXlDb2RlLnRvU3RyaW5nKDEwKSkgfHwgKC8oXjkkKS8udGVzdChlLmtleUNvZGUudG9TdHJpbmcoMTApKSAmJiB0aGF0Lm9wdGlvbnMuc2VsZWN0T25UYWIpKSAmJiBpc0FjdGl2ZSkge1xcclxcbiAgICAgICAgaWYgKCEvKDMyKS8udGVzdChlLmtleUNvZGUudG9TdHJpbmcoMTApKSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgaWYgKCF0aGF0Lm9wdGlvbnMubGl2ZVNlYXJjaCkge1xcclxcbiAgICAgICAgICB2YXIgZWxlbSA9ICQoJzpmb2N1cycpO1xcclxcbiAgICAgICAgICBlbGVtLmNsaWNrKCk7XFxyXFxuICAgICAgICAgIC8vIEJyaW5nIGJhY2sgZm9jdXMgZm9yIG11bHRpc2VsZWN0c1xcclxcbiAgICAgICAgICBlbGVtLmZvY3VzKCk7XFxyXFxuICAgICAgICAgIC8vIFByZXZlbnQgc2NyZWVuIGZyb20gc2Nyb2xsaW5nIGlmIHRoZSB1c2VyIGhpdCB0aGUgc3BhY2ViYXJcXHJcXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgICAvLyBGaXhlcyBzcGFjZWJhciBzZWxlY3Rpb24gb2YgZHJvcGRvd24gaXRlbXMgaW4gRkYgJiBJRVxcclxcbiAgICAgICAgICAkKGRvY3VtZW50KS5kYXRhKCdzcGFjZVNlbGVjdCcsIHRydWUpO1xcclxcbiAgICAgICAgfSBlbHNlIGlmICghLygzMikvLnRlc3QoZS5rZXlDb2RlLnRvU3RyaW5nKDEwKSkpIHtcXHJcXG4gICAgICAgICAgdGhhdC4kbWVudUlubmVyLmZpbmQoJy5hY3RpdmUgYScpLmNsaWNrKCk7XFxyXFxuICAgICAgICAgICR0aGlzLmZvY3VzKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICAkKGRvY3VtZW50KS5kYXRhKCdrZXljb3VudCcsIDApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAoKC8oXjkkfDI3KS8udGVzdChlLmtleUNvZGUudG9TdHJpbmcoMTApKSAmJiBpc0FjdGl2ZSAmJiAodGhhdC5tdWx0aXBsZSB8fCB0aGF0Lm9wdGlvbnMubGl2ZVNlYXJjaCkpIHx8ICgvKDI3KS8udGVzdChlLmtleUNvZGUudG9TdHJpbmcoMTApKSAmJiAhaXNBY3RpdmUpKSB7XFxyXFxuICAgICAgICB0aGF0LiRtZW51LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XFxyXFxuICAgICAgICBpZiAodGhhdC5vcHRpb25zLmNvbnRhaW5lcikgdGhhdC4kbmV3RWxlbWVudC5yZW1vdmVDbGFzcygnb3BlbicpO1xcclxcbiAgICAgICAgdGhhdC4kYnV0dG9uLmZvY3VzKCk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9LFxcclxcblxcclxcbiAgICBtb2JpbGU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKCdtb2JpbGUtZGV2aWNlJyk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB0aGlzLiRsaXMgPSBudWxsO1xcclxcbiAgICAgIHRoaXMubGlPYmogPSB7fTtcXHJcXG4gICAgICB0aGlzLnJlbG9hZExpKCk7XFxyXFxuICAgICAgdGhpcy5yZW5kZXIoKTtcXHJcXG4gICAgICB0aGlzLmNoZWNrRGlzYWJsZWQoKTtcXHJcXG4gICAgICB0aGlzLmxpSGVpZ2h0KHRydWUpO1xcclxcbiAgICAgIHRoaXMuc2V0U3R5bGUoKTtcXHJcXG4gICAgICB0aGlzLnNldFdpZHRoKCk7XFxyXFxuICAgICAgaWYgKHRoaXMuJGxpcykgdGhpcy4kc2VhcmNoYm94LnRyaWdnZXIoJ3Byb3BlcnR5Y2hhbmdlJyk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCdyZWZyZXNoZWQuYnMuc2VsZWN0Jyk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIGhpZGU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB0aGlzLiRuZXdFbGVtZW50LmhpZGUoKTtcXHJcXG4gICAgfSxcXHJcXG5cXHJcXG4gICAgc2hvdzogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHRoaXMuJG5ld0VsZW1lbnQuc2hvdygpO1xcclxcbiAgICB9LFxcclxcblxcclxcbiAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB0aGlzLiRuZXdFbGVtZW50LnJlbW92ZSgpO1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlKCk7XFxyXFxuICAgIH0sXFxyXFxuXFxyXFxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB0aGlzLiRuZXdFbGVtZW50LmJlZm9yZSh0aGlzLiRlbGVtZW50KS5yZW1vdmUoKTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGhpcy4kYnNDb250YWluZXIpIHtcXHJcXG4gICAgICAgIHRoaXMuJGJzQ29udGFpbmVyLnJlbW92ZSgpO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICB0aGlzLiRtZW51LnJlbW92ZSgpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB0aGlzLiRlbGVtZW50XFxyXFxuICAgICAgICAub2ZmKCcuYnMuc2VsZWN0JylcXHJcXG4gICAgICAgIC5yZW1vdmVEYXRhKCdzZWxlY3RwaWNrZXInKVxcclxcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdicy1zZWxlY3QtaGlkZGVuIHNlbGVjdHBpY2tlcicpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgLy8gU0VMRUNUUElDS0VSIFBMVUdJTiBERUZJTklUSU9OXFxyXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXHJcXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcXHJcXG4gICAgLy8gZ2V0IHRoZSBhcmdzIG9mIHRoZSBvdXRlciBmdW5jdGlvbi4uXFxyXFxuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xcclxcbiAgICAvLyBUaGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBhcmUgZXhwbGljaXRseSByZS1kZWZpbmVkIGZyb20gdGhlIGFyZ3VtZW50IGxpc3QsIGJlY2F1c2UgdGhlIHNoaWZ0IGNhdXNlcyB0aGVtXFxyXFxuICAgIC8vIHRvIGdldCBsb3N0L2NvcnJ1cHRlZCBpbiBhbmRyb2lkIDIuMyBhbmQgSUU5ICM3MTUgIzc3NVxcclxcbiAgICB2YXIgX29wdGlvbiA9IG9wdGlvbjtcXHJcXG5cXHJcXG4gICAgW10uc2hpZnQuYXBwbHkoYXJncyk7XFxyXFxuXFxyXFxuICAgIHZhciB2YWx1ZTtcXHJcXG4gICAgdmFyIGNoYWluID0gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xcclxcbiAgICAgIGlmICgkdGhpcy5pcygnc2VsZWN0JykpIHtcXHJcXG4gICAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YSgnc2VsZWN0cGlja2VyJyksXFxyXFxuICAgICAgICAgICAgb3B0aW9ucyA9IHR5cGVvZiBfb3B0aW9uID09ICdvYmplY3QnICYmIF9vcHRpb247XFxyXFxuXFxyXFxuICAgICAgICBpZiAoIWRhdGEpIHtcXHJcXG4gICAgICAgICAgdmFyIGNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBTZWxlY3RwaWNrZXIuREVGQVVMVFMsICQuZm4uc2VsZWN0cGlja2VyLmRlZmF1bHRzIHx8IHt9LCAkdGhpcy5kYXRhKCksIG9wdGlvbnMpO1xcclxcbiAgICAgICAgICBjb25maWcudGVtcGxhdGUgPSAkLmV4dGVuZCh7fSwgU2VsZWN0cGlja2VyLkRFRkFVTFRTLnRlbXBsYXRlLCAoJC5mbi5zZWxlY3RwaWNrZXIuZGVmYXVsdHMgPyAkLmZuLnNlbGVjdHBpY2tlci5kZWZhdWx0cy50ZW1wbGF0ZSA6IHt9KSwgJHRoaXMuZGF0YSgpLnRlbXBsYXRlLCBvcHRpb25zLnRlbXBsYXRlKTtcXHJcXG4gICAgICAgICAgJHRoaXMuZGF0YSgnc2VsZWN0cGlja2VyJywgKGRhdGEgPSBuZXcgU2VsZWN0cGlja2VyKHRoaXMsIGNvbmZpZykpKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucykge1xcclxcbiAgICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHtcXHJcXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShpKSkge1xcclxcbiAgICAgICAgICAgICAgZGF0YS5vcHRpb25zW2ldID0gb3B0aW9uc1tpXTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIGlmICh0eXBlb2YgX29wdGlvbiA9PSAnc3RyaW5nJykge1xcclxcbiAgICAgICAgICBpZiAoZGF0YVtfb3B0aW9uXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XFxyXFxuICAgICAgICAgICAgdmFsdWUgPSBkYXRhW19vcHRpb25dLmFwcGx5KGRhdGEsIGFyZ3MpO1xcclxcbiAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgIHZhbHVlID0gZGF0YS5vcHRpb25zW19vcHRpb25dO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcXHJcXG4gICAgICAvL25vaW5zcGVjdGlvbiBKU1VudXNlZEFzc2lnbm1lbnRcXHJcXG4gICAgICByZXR1cm4gdmFsdWU7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgcmV0dXJuIGNoYWluO1xcclxcbiAgICB9XFxyXFxuICB9XFxyXFxuXFxyXFxuICB2YXIgb2xkID0gJC5mbi5zZWxlY3RwaWNrZXI7XFxyXFxuICAkLmZuLnNlbGVjdHBpY2tlciA9IFBsdWdpbjtcXHJcXG4gICQuZm4uc2VsZWN0cGlja2VyLkNvbnN0cnVjdG9yID0gU2VsZWN0cGlja2VyO1xcclxcblxcclxcbiAgLy8gU0VMRUNUUElDS0VSIE5PIENPTkZMSUNUXFxyXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cXHJcXG4gICQuZm4uc2VsZWN0cGlja2VyLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICQuZm4uc2VsZWN0cGlja2VyID0gb2xkO1xcclxcbiAgICByZXR1cm4gdGhpcztcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAkKGRvY3VtZW50KVxcclxcbiAgICAgIC5kYXRhKCdrZXljb3VudCcsIDApXFxyXFxuICAgICAgLm9uKCdrZXlkb3duLmJzLnNlbGVjdCcsICcuYm9vdHN0cmFwLXNlbGVjdCBbZGF0YS10b2dnbGU9ZHJvcGRvd25dLCAuYm9vdHN0cmFwLXNlbGVjdCBbcm9sZT1cXFwibGlzdGJveFxcXCJdLCAuYnMtc2VhcmNoYm94IGlucHV0JywgU2VsZWN0cGlja2VyLnByb3RvdHlwZS5rZXlkb3duKVxcclxcbiAgICAgIC5vbignZm9jdXNpbi5tb2RhbCcsICcuYm9vdHN0cmFwLXNlbGVjdCBbZGF0YS10b2dnbGU9ZHJvcGRvd25dLCAuYm9vdHN0cmFwLXNlbGVjdCBbcm9sZT1cXFwibGlzdGJveFxcXCJdLCAuYnMtc2VhcmNoYm94IGlucHV0JywgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAvLyBTRUxFQ1RQSUNLRVIgREFUQS1BUElcXHJcXG4gIC8vID09PT09PT09PT09PT09PT09PT09PVxcclxcbiAgJCh3aW5kb3cpLm9uKCdsb2FkLmJzLnNlbGVjdC5kYXRhLWFwaScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgJCgnLnNlbGVjdHBpY2tlcicpLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkc2VsZWN0cGlja2VyID0gJCh0aGlzKTtcXHJcXG4gICAgICBQbHVnaW4uY2FsbCgkc2VsZWN0cGlja2VyLCAkc2VsZWN0cGlja2VyLmRhdGEoKSk7XFxyXFxuICAgIH0pXFxyXFxuICB9KTtcXHJcXG59KShqUXVlcnkpO1xcclxcblxcblxcbn0pKTtcXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYXctbG9hZGVyIS4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL34vYm9vdHN0cmFwLXNlbGVjdC9kaXN0L2pzL2Jvb3RzdHJhcC1zZWxlY3QuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBcIi8qIVxcbiAqIEJvb3RzdHJhcCB2My4zLjcgKGh0dHA6Ly9nZXRib290c3RyYXAuY29tKVxcbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxcbiAqL1xcblxcbmlmICh0eXBlb2YgalF1ZXJ5ID09PSAndW5kZWZpbmVkJykge1xcbiAgdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXBcXFxcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnknKVxcbn1cXG5cXG4rZnVuY3Rpb24gKCQpIHtcXG4gICd1c2Ugc3RyaWN0JztcXG4gIHZhciB2ZXJzaW9uID0gJC5mbi5qcXVlcnkuc3BsaXQoJyAnKVswXS5zcGxpdCgnLicpXFxuICBpZiAoKHZlcnNpb25bMF0gPCAyICYmIHZlcnNpb25bMV0gPCA5KSB8fCAodmVyc2lvblswXSA9PSAxICYmIHZlcnNpb25bMV0gPT0gOSAmJiB2ZXJzaW9uWzJdIDwgMSkgfHwgKHZlcnNpb25bMF0gPiAzKSkge1xcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFxcXFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeSB2ZXJzaW9uIDEuOS4xIG9yIGhpZ2hlciwgYnV0IGxvd2VyIHRoYW4gdmVyc2lvbiA0JylcXG4gIH1cXG59KGpRdWVyeSk7XFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQm9vdHN0cmFwOiB0cmFuc2l0aW9uLmpzIHYzLjMuN1xcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RyYW5zaXRpb25zXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXFxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG5cXG4rZnVuY3Rpb24gKCQpIHtcXG4gICd1c2Ugc3RyaWN0JztcXG5cXG4gIC8vIENTUyBUUkFOU0lUSU9OIFNVUFBPUlQgKFNob3V0b3V0OiBodHRwOi8vd3d3Lm1vZGVybml6ci5jb20vKVxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkge1xcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib290c3RyYXAnKVxcblxcbiAgICB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0ge1xcbiAgICAgIFdlYmtpdFRyYW5zaXRpb24gOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXFxuICAgICAgTW96VHJhbnNpdGlvbiAgICA6ICd0cmFuc2l0aW9uZW5kJyxcXG4gICAgICBPVHJhbnNpdGlvbiAgICAgIDogJ29UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kJyxcXG4gICAgICB0cmFuc2l0aW9uICAgICAgIDogJ3RyYW5zaXRpb25lbmQnXFxuICAgIH1cXG5cXG4gICAgZm9yICh2YXIgbmFtZSBpbiB0cmFuc0VuZEV2ZW50TmFtZXMpIHtcXG4gICAgICBpZiAoZWwuc3R5bGVbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xcbiAgICAgICAgcmV0dXJuIHsgZW5kOiB0cmFuc0VuZEV2ZW50TmFtZXNbbmFtZV0gfVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICByZXR1cm4gZmFsc2UgLy8gZXhwbGljaXQgZm9yIGllOCAoICAuXy4pXFxuICB9XFxuXFxuICAvLyBodHRwOi8vYmxvZy5hbGV4bWFjY2F3LmNvbS9jc3MtdHJhbnNpdGlvbnNcXG4gICQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcXG4gICAgdmFyIGNhbGxlZCA9IGZhbHNlXFxuICAgIHZhciAkZWwgPSB0aGlzXFxuICAgICQodGhpcykub25lKCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7IGNhbGxlZCA9IHRydWUgfSlcXG4gICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKCkgeyBpZiAoIWNhbGxlZCkgJCgkZWwpLnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKSB9XFxuICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIGR1cmF0aW9uKVxcbiAgICByZXR1cm4gdGhpc1xcbiAgfVxcblxcbiAgJChmdW5jdGlvbiAoKSB7XFxuICAgICQuc3VwcG9ydC50cmFuc2l0aW9uID0gdHJhbnNpdGlvbkVuZCgpXFxuXFxuICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVyblxcblxcbiAgICAkLmV2ZW50LnNwZWNpYWwuYnNUcmFuc2l0aW9uRW5kID0ge1xcbiAgICAgIGJpbmRUeXBlOiAkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsXFxuICAgICAgZGVsZWdhdGVUeXBlOiAkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsXFxuICAgICAgaGFuZGxlOiBmdW5jdGlvbiAoZSkge1xcbiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKHRoaXMpKSByZXR1cm4gZS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpXFxuICAgICAgfVxcbiAgICB9XFxuICB9KVxcblxcbn0oalF1ZXJ5KTtcXG5cXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4gKiBCb290c3RyYXA6IGFsZXJ0LmpzIHYzLjMuN1xcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2FsZXJ0c1xcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXFxuXFxuXFxuK2Z1bmN0aW9uICgkKSB7XFxuICAndXNlIHN0cmljdCc7XFxuXFxuICAvLyBBTEVSVCBDTEFTUyBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICB2YXIgZGlzbWlzcyA9ICdbZGF0YS1kaXNtaXNzPVxcXCJhbGVydFxcXCJdJ1xcbiAgdmFyIEFsZXJ0ICAgPSBmdW5jdGlvbiAoZWwpIHtcXG4gICAgJChlbCkub24oJ2NsaWNrJywgZGlzbWlzcywgdGhpcy5jbG9zZSlcXG4gIH1cXG5cXG4gIEFsZXJ0LlZFUlNJT04gPSAnMy4zLjcnXFxuXFxuICBBbGVydC5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwXFxuXFxuICBBbGVydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZSkge1xcbiAgICB2YXIgJHRoaXMgICAgPSAkKHRoaXMpXFxuICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JylcXG5cXG4gICAgaWYgKCFzZWxlY3Rvcikge1xcbiAgICAgIHNlbGVjdG9yID0gJHRoaXMuYXR0cignaHJlZicpXFxuICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciAmJiBzZWxlY3Rvci5yZXBsYWNlKC8uKig/PSNbXlxcXFxzXSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3XFxuICAgIH1cXG5cXG4gICAgdmFyICRwYXJlbnQgPSAkKHNlbGVjdG9yID09PSAnIycgPyBbXSA6IHNlbGVjdG9yKVxcblxcbiAgICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpXFxuXFxuICAgIGlmICghJHBhcmVudC5sZW5ndGgpIHtcXG4gICAgICAkcGFyZW50ID0gJHRoaXMuY2xvc2VzdCgnLmFsZXJ0JylcXG4gICAgfVxcblxcbiAgICAkcGFyZW50LnRyaWdnZXIoZSA9ICQuRXZlbnQoJ2Nsb3NlLmJzLmFsZXJ0JykpXFxuXFxuICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cXG5cXG4gICAgJHBhcmVudC5yZW1vdmVDbGFzcygnaW4nKVxcblxcbiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KCkge1xcbiAgICAgIC8vIGRldGFjaCBmcm9tIHBhcmVudCwgZmlyZSBldmVudCB0aGVuIGNsZWFuIHVwIGRhdGFcXG4gICAgICAkcGFyZW50LmRldGFjaCgpLnRyaWdnZXIoJ2Nsb3NlZC5icy5hbGVydCcpLnJlbW92ZSgpXFxuICAgIH1cXG5cXG4gICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgJHBhcmVudC5oYXNDbGFzcygnZmFkZScpID9cXG4gICAgICAkcGFyZW50XFxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCByZW1vdmVFbGVtZW50KVxcbiAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKEFsZXJ0LlRSQU5TSVRJT05fRFVSQVRJT04pIDpcXG4gICAgICByZW1vdmVFbGVtZW50KClcXG4gIH1cXG5cXG5cXG4gIC8vIEFMRVJUIFBMVUdJTiBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PVxcblxcbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXFxuICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMuYWxlcnQnKVxcblxcbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuYWxlcnQnLCAoZGF0YSA9IG5ldyBBbGVydCh0aGlzKSkpXFxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXS5jYWxsKCR0aGlzKVxcbiAgICB9KVxcbiAgfVxcblxcbiAgdmFyIG9sZCA9ICQuZm4uYWxlcnRcXG5cXG4gICQuZm4uYWxlcnQgICAgICAgICAgICAgPSBQbHVnaW5cXG4gICQuZm4uYWxlcnQuQ29uc3RydWN0b3IgPSBBbGVydFxcblxcblxcbiAgLy8gQUxFUlQgTk8gQ09ORkxJQ1RcXG4gIC8vID09PT09PT09PT09PT09PT09XFxuXFxuICAkLmZuLmFsZXJ0Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XFxuICAgICQuZm4uYWxlcnQgPSBvbGRcXG4gICAgcmV0dXJuIHRoaXNcXG4gIH1cXG5cXG5cXG4gIC8vIEFMRVJUIERBVEEtQVBJXFxuICAvLyA9PT09PT09PT09PT09PVxcblxcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLmFsZXJ0LmRhdGEtYXBpJywgZGlzbWlzcywgQWxlcnQucHJvdG90eXBlLmNsb3NlKVxcblxcbn0oalF1ZXJ5KTtcXG5cXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4gKiBCb290c3RyYXA6IGJ1dHRvbi5qcyB2My4zLjdcXG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNidXR0b25zXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXFxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG5cXG4rZnVuY3Rpb24gKCQpIHtcXG4gICd1c2Ugc3RyaWN0JztcXG5cXG4gIC8vIEJVVFRPTiBQVUJMSUMgQ0xBU1MgREVGSU5JVElPTlxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICB2YXIgQnV0dG9uID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcXG4gICAgdGhpcy4kZWxlbWVudCAgPSAkKGVsZW1lbnQpXFxuICAgIHRoaXMub3B0aW9ucyAgID0gJC5leHRlbmQoe30sIEJ1dHRvbi5ERUZBVUxUUywgb3B0aW9ucylcXG4gICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZVxcbiAgfVxcblxcbiAgQnV0dG9uLlZFUlNJT04gID0gJzMuMy43J1xcblxcbiAgQnV0dG9uLkRFRkFVTFRTID0ge1xcbiAgICBsb2FkaW5nVGV4dDogJ2xvYWRpbmcuLi4nXFxuICB9XFxuXFxuICBCdXR0b24ucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XFxuICAgIHZhciBkICAgID0gJ2Rpc2FibGVkJ1xcbiAgICB2YXIgJGVsICA9IHRoaXMuJGVsZW1lbnRcXG4gICAgdmFyIHZhbCAgPSAkZWwuaXMoJ2lucHV0JykgPyAndmFsJyA6ICdodG1sJ1xcbiAgICB2YXIgZGF0YSA9ICRlbC5kYXRhKClcXG5cXG4gICAgc3RhdGUgKz0gJ1RleHQnXFxuXFxuICAgIGlmIChkYXRhLnJlc2V0VGV4dCA9PSBudWxsKSAkZWwuZGF0YSgncmVzZXRUZXh0JywgJGVsW3ZhbF0oKSlcXG5cXG4gICAgLy8gcHVzaCB0byBldmVudCBsb29wIHRvIGFsbG93IGZvcm1zIHRvIHN1Ym1pdFxcbiAgICBzZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24gKCkge1xcbiAgICAgICRlbFt2YWxdKGRhdGFbc3RhdGVdID09IG51bGwgPyB0aGlzLm9wdGlvbnNbc3RhdGVdIDogZGF0YVtzdGF0ZV0pXFxuXFxuICAgICAgaWYgKHN0YXRlID09ICdsb2FkaW5nVGV4dCcpIHtcXG4gICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZVxcbiAgICAgICAgJGVsLmFkZENsYXNzKGQpLmF0dHIoZCwgZCkucHJvcChkLCB0cnVlKVxcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0xvYWRpbmcpIHtcXG4gICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2VcXG4gICAgICAgICRlbC5yZW1vdmVDbGFzcyhkKS5yZW1vdmVBdHRyKGQpLnByb3AoZCwgZmFsc2UpXFxuICAgICAgfVxcbiAgICB9LCB0aGlzKSwgMClcXG4gIH1cXG5cXG4gIEJ1dHRvbi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgY2hhbmdlZCA9IHRydWVcXG4gICAgdmFyICRwYXJlbnQgPSB0aGlzLiRlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLXRvZ2dsZT1cXFwiYnV0dG9uc1xcXCJdJylcXG5cXG4gICAgaWYgKCRwYXJlbnQubGVuZ3RoKSB7XFxuICAgICAgdmFyICRpbnB1dCA9IHRoaXMuJGVsZW1lbnQuZmluZCgnaW5wdXQnKVxcbiAgICAgIGlmICgkaW5wdXQucHJvcCgndHlwZScpID09ICdyYWRpbycpIHtcXG4gICAgICAgIGlmICgkaW5wdXQucHJvcCgnY2hlY2tlZCcpKSBjaGFuZ2VkID0gZmFsc2VcXG4gICAgICAgICRwYXJlbnQuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxcbiAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygnYWN0aXZlJylcXG4gICAgICB9IGVsc2UgaWYgKCRpbnB1dC5wcm9wKCd0eXBlJykgPT0gJ2NoZWNrYm94Jykge1xcbiAgICAgICAgaWYgKCgkaW5wdXQucHJvcCgnY2hlY2tlZCcpKSAhPT0gdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpIGNoYW5nZWQgPSBmYWxzZVxcbiAgICAgICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJylcXG4gICAgICB9XFxuICAgICAgJGlucHV0LnByb3AoJ2NoZWNrZWQnLCB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdhY3RpdmUnKSlcXG4gICAgICBpZiAoY2hhbmdlZCkgJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpXFxuICAgIH0gZWxzZSB7XFxuICAgICAgdGhpcy4kZWxlbWVudC5hdHRyKCdhcmlhLXByZXNzZWQnLCAhdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpXFxuICAgICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJylcXG4gICAgfVxcbiAgfVxcblxcblxcbiAgLy8gQlVUVE9OIFBMVUdJTiBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XFxuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXFxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5idXR0b24nKVxcbiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cXG5cXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmJ1dHRvbicsIChkYXRhID0gbmV3IEJ1dHRvbih0aGlzLCBvcHRpb25zKSkpXFxuXFxuICAgICAgaWYgKG9wdGlvbiA9PSAndG9nZ2xlJykgZGF0YS50b2dnbGUoKVxcbiAgICAgIGVsc2UgaWYgKG9wdGlvbikgZGF0YS5zZXRTdGF0ZShvcHRpb24pXFxuICAgIH0pXFxuICB9XFxuXFxuICB2YXIgb2xkID0gJC5mbi5idXR0b25cXG5cXG4gICQuZm4uYnV0dG9uICAgICAgICAgICAgID0gUGx1Z2luXFxuICAkLmZuLmJ1dHRvbi5Db25zdHJ1Y3RvciA9IEJ1dHRvblxcblxcblxcbiAgLy8gQlVUVE9OIE5PIENPTkZMSUNUXFxuICAvLyA9PT09PT09PT09PT09PT09PT1cXG5cXG4gICQuZm4uYnV0dG9uLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XFxuICAgICQuZm4uYnV0dG9uID0gb2xkXFxuICAgIHJldHVybiB0aGlzXFxuICB9XFxuXFxuXFxuICAvLyBCVVRUT04gREFUQS1BUElcXG4gIC8vID09PT09PT09PT09PT09PVxcblxcbiAgJChkb2N1bWVudClcXG4gICAgLm9uKCdjbGljay5icy5idXR0b24uZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlXj1cXFwiYnV0dG9uXFxcIl0nLCBmdW5jdGlvbiAoZSkge1xcbiAgICAgIHZhciAkYnRuID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmJ0bicpXFxuICAgICAgUGx1Z2luLmNhbGwoJGJ0biwgJ3RvZ2dsZScpXFxuICAgICAgaWYgKCEoJChlLnRhcmdldCkuaXMoJ2lucHV0W3R5cGU9XFxcInJhZGlvXFxcIl0sIGlucHV0W3R5cGU9XFxcImNoZWNrYm94XFxcIl0nKSkpIHtcXG4gICAgICAgIC8vIFByZXZlbnQgZG91YmxlIGNsaWNrIG9uIHJhZGlvcywgYW5kIHRoZSBkb3VibGUgc2VsZWN0aW9ucyAoc28gY2FuY2VsbGF0aW9uKSBvbiBjaGVja2JveGVzXFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcXG4gICAgICAgIC8vIFRoZSB0YXJnZXQgY29tcG9uZW50IHN0aWxsIHJlY2VpdmUgdGhlIGZvY3VzXFxuICAgICAgICBpZiAoJGJ0bi5pcygnaW5wdXQsYnV0dG9uJykpICRidG4udHJpZ2dlcignZm9jdXMnKVxcbiAgICAgICAgZWxzZSAkYnRuLmZpbmQoJ2lucHV0OnZpc2libGUsYnV0dG9uOnZpc2libGUnKS5maXJzdCgpLnRyaWdnZXIoJ2ZvY3VzJylcXG4gICAgICB9XFxuICAgIH0pXFxuICAgIC5vbignZm9jdXMuYnMuYnV0dG9uLmRhdGEtYXBpIGJsdXIuYnMuYnV0dG9uLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZV49XFxcImJ1dHRvblxcXCJdJywgZnVuY3Rpb24gKGUpIHtcXG4gICAgICAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuYnRuJykudG9nZ2xlQ2xhc3MoJ2ZvY3VzJywgL15mb2N1cyhpbik/JC8udGVzdChlLnR5cGUpKVxcbiAgICB9KVxcblxcbn0oalF1ZXJ5KTtcXG5cXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4gKiBCb290c3RyYXA6IGNhcm91c2VsLmpzIHYzLjMuN1xcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2Nhcm91c2VsXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXFxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG5cXG4rZnVuY3Rpb24gKCQpIHtcXG4gICd1c2Ugc3RyaWN0JztcXG5cXG4gIC8vIENBUk9VU0VMIENMQVNTIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XFxuICAgIHRoaXMuJGVsZW1lbnQgICAgPSAkKGVsZW1lbnQpXFxuICAgIHRoaXMuJGluZGljYXRvcnMgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzJylcXG4gICAgdGhpcy5vcHRpb25zICAgICA9IG9wdGlvbnNcXG4gICAgdGhpcy5wYXVzZWQgICAgICA9IG51bGxcXG4gICAgdGhpcy5zbGlkaW5nICAgICA9IG51bGxcXG4gICAgdGhpcy5pbnRlcnZhbCAgICA9IG51bGxcXG4gICAgdGhpcy4kYWN0aXZlICAgICA9IG51bGxcXG4gICAgdGhpcy4kaXRlbXMgICAgICA9IG51bGxcXG5cXG4gICAgdGhpcy5vcHRpb25zLmtleWJvYXJkICYmIHRoaXMuJGVsZW1lbnQub24oJ2tleWRvd24uYnMuY2Fyb3VzZWwnLCAkLnByb3h5KHRoaXMua2V5ZG93biwgdGhpcykpXFxuXFxuICAgIHRoaXMub3B0aW9ucy5wYXVzZSA9PSAnaG92ZXInICYmICEoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSAmJiB0aGlzLiRlbGVtZW50XFxuICAgICAgLm9uKCdtb3VzZWVudGVyLmJzLmNhcm91c2VsJywgJC5wcm94eSh0aGlzLnBhdXNlLCB0aGlzKSlcXG4gICAgICAub24oJ21vdXNlbGVhdmUuYnMuY2Fyb3VzZWwnLCAkLnByb3h5KHRoaXMuY3ljbGUsIHRoaXMpKVxcbiAgfVxcblxcbiAgQ2Fyb3VzZWwuVkVSU0lPTiAgPSAnMy4zLjcnXFxuXFxuICBDYXJvdXNlbC5UUkFOU0lUSU9OX0RVUkFUSU9OID0gNjAwXFxuXFxuICBDYXJvdXNlbC5ERUZBVUxUUyA9IHtcXG4gICAgaW50ZXJ2YWw6IDUwMDAsXFxuICAgIHBhdXNlOiAnaG92ZXInLFxcbiAgICB3cmFwOiB0cnVlLFxcbiAgICBrZXlib2FyZDogdHJ1ZVxcbiAgfVxcblxcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xcbiAgICBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSkgcmV0dXJuXFxuICAgIHN3aXRjaCAoZS53aGljaCkge1xcbiAgICAgIGNhc2UgMzc6IHRoaXMucHJldigpOyBicmVha1xcbiAgICAgIGNhc2UgMzk6IHRoaXMubmV4dCgpOyBicmVha1xcbiAgICAgIGRlZmF1bHQ6IHJldHVyblxcbiAgICB9XFxuXFxuICAgIGUucHJldmVudERlZmF1bHQoKVxcbiAgfVxcblxcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmN5Y2xlID0gZnVuY3Rpb24gKGUpIHtcXG4gICAgZSB8fCAodGhpcy5wYXVzZWQgPSBmYWxzZSlcXG5cXG4gICAgdGhpcy5pbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXFxuXFxuICAgIHRoaXMub3B0aW9ucy5pbnRlcnZhbFxcbiAgICAgICYmICF0aGlzLnBhdXNlZFxcbiAgICAgICYmICh0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoJC5wcm94eSh0aGlzLm5leHQsIHRoaXMpLCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpKVxcblxcbiAgICByZXR1cm4gdGhpc1xcbiAgfVxcblxcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIChpdGVtKSB7XFxuICAgIHRoaXMuJGl0ZW1zID0gaXRlbS5wYXJlbnQoKS5jaGlsZHJlbignLml0ZW0nKVxcbiAgICByZXR1cm4gdGhpcy4kaXRlbXMuaW5kZXgoaXRlbSB8fCB0aGlzLiRhY3RpdmUpXFxuICB9XFxuXFxuICBDYXJvdXNlbC5wcm90b3R5cGUuZ2V0SXRlbUZvckRpcmVjdGlvbiA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGFjdGl2ZSkge1xcbiAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleChhY3RpdmUpXFxuICAgIHZhciB3aWxsV3JhcCA9IChkaXJlY3Rpb24gPT0gJ3ByZXYnICYmIGFjdGl2ZUluZGV4ID09PSAwKVxcbiAgICAgICAgICAgICAgICB8fCAoZGlyZWN0aW9uID09ICduZXh0JyAmJiBhY3RpdmVJbmRleCA9PSAodGhpcy4kaXRlbXMubGVuZ3RoIC0gMSkpXFxuICAgIGlmICh3aWxsV3JhcCAmJiAhdGhpcy5vcHRpb25zLndyYXApIHJldHVybiBhY3RpdmVcXG4gICAgdmFyIGRlbHRhID0gZGlyZWN0aW9uID09ICdwcmV2JyA/IC0xIDogMVxcbiAgICB2YXIgaXRlbUluZGV4ID0gKGFjdGl2ZUluZGV4ICsgZGVsdGEpICUgdGhpcy4kaXRlbXMubGVuZ3RoXFxuICAgIHJldHVybiB0aGlzLiRpdGVtcy5lcShpdGVtSW5kZXgpXFxuICB9XFxuXFxuICBDYXJvdXNlbC5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAocG9zKSB7XFxuICAgIHZhciB0aGF0ICAgICAgICA9IHRoaXNcXG4gICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlID0gdGhpcy4kZWxlbWVudC5maW5kKCcuaXRlbS5hY3RpdmUnKSlcXG5cXG4gICAgaWYgKHBvcyA+ICh0aGlzLiRpdGVtcy5sZW5ndGggLSAxKSB8fCBwb3MgPCAwKSByZXR1cm5cXG5cXG4gICAgaWYgKHRoaXMuc2xpZGluZykgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQub25lKCdzbGlkLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKCkgeyB0aGF0LnRvKHBvcykgfSkgLy8geWVzLCBcXFwic2xpZFxcXCJcXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09IHBvcykgcmV0dXJuIHRoaXMucGF1c2UoKS5jeWNsZSgpXFxuXFxuICAgIHJldHVybiB0aGlzLnNsaWRlKHBvcyA+IGFjdGl2ZUluZGV4ID8gJ25leHQnIDogJ3ByZXYnLCB0aGlzLiRpdGVtcy5lcShwb3MpKVxcbiAgfVxcblxcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKGUpIHtcXG4gICAgZSB8fCAodGhpcy5wYXVzZWQgPSB0cnVlKVxcblxcbiAgICBpZiAodGhpcy4kZWxlbWVudC5maW5kKCcubmV4dCwgLnByZXYnKS5sZW5ndGggJiYgJC5zdXBwb3J0LnRyYW5zaXRpb24pIHtcXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKVxcbiAgICAgIHRoaXMuY3ljbGUodHJ1ZSlcXG4gICAgfVxcblxcbiAgICB0aGlzLmludGVydmFsID0gY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKVxcblxcbiAgICByZXR1cm4gdGhpc1xcbiAgfVxcblxcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XFxuICAgIGlmICh0aGlzLnNsaWRpbmcpIHJldHVyblxcbiAgICByZXR1cm4gdGhpcy5zbGlkZSgnbmV4dCcpXFxuICB9XFxuXFxuICBDYXJvdXNlbC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uICgpIHtcXG4gICAgaWYgKHRoaXMuc2xpZGluZykgcmV0dXJuXFxuICAgIHJldHVybiB0aGlzLnNsaWRlKCdwcmV2JylcXG4gIH1cXG5cXG4gIENhcm91c2VsLnByb3RvdHlwZS5zbGlkZSA9IGZ1bmN0aW9uICh0eXBlLCBuZXh0KSB7XFxuICAgIHZhciAkYWN0aXZlICAgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pdGVtLmFjdGl2ZScpXFxuICAgIHZhciAkbmV4dCAgICAgPSBuZXh0IHx8IHRoaXMuZ2V0SXRlbUZvckRpcmVjdGlvbih0eXBlLCAkYWN0aXZlKVxcbiAgICB2YXIgaXNDeWNsaW5nID0gdGhpcy5pbnRlcnZhbFxcbiAgICB2YXIgZGlyZWN0aW9uID0gdHlwZSA9PSAnbmV4dCcgPyAnbGVmdCcgOiAncmlnaHQnXFxuICAgIHZhciB0aGF0ICAgICAgPSB0aGlzXFxuXFxuICAgIGlmICgkbmV4dC5oYXNDbGFzcygnYWN0aXZlJykpIHJldHVybiAodGhpcy5zbGlkaW5nID0gZmFsc2UpXFxuXFxuICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gJG5leHRbMF1cXG4gICAgdmFyIHNsaWRlRXZlbnQgPSAkLkV2ZW50KCdzbGlkZS5icy5jYXJvdXNlbCcsIHtcXG4gICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LFxcbiAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXFxuICAgIH0pXFxuICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkZUV2ZW50KVxcbiAgICBpZiAoc2xpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXFxuXFxuICAgIHRoaXMuc2xpZGluZyA9IHRydWVcXG5cXG4gICAgaXNDeWNsaW5nICYmIHRoaXMucGF1c2UoKVxcblxcbiAgICBpZiAodGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpIHtcXG4gICAgICB0aGlzLiRpbmRpY2F0b3JzLmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcXG4gICAgICB2YXIgJG5leHRJbmRpY2F0b3IgPSAkKHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGlzLmdldEl0ZW1JbmRleCgkbmV4dCldKVxcbiAgICAgICRuZXh0SW5kaWNhdG9yICYmICRuZXh0SW5kaWNhdG9yLmFkZENsYXNzKCdhY3RpdmUnKVxcbiAgICB9XFxuXFxuICAgIHZhciBzbGlkRXZlbnQgPSAkLkV2ZW50KCdzbGlkLmJzLmNhcm91c2VsJywgeyByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LCBkaXJlY3Rpb246IGRpcmVjdGlvbiB9KSAvLyB5ZXMsIFxcXCJzbGlkXFxcIlxcbiAgICBpZiAoJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnc2xpZGUnKSkge1xcbiAgICAgICRuZXh0LmFkZENsYXNzKHR5cGUpXFxuICAgICAgJG5leHRbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93XFxuICAgICAgJGFjdGl2ZS5hZGRDbGFzcyhkaXJlY3Rpb24pXFxuICAgICAgJG5leHQuYWRkQ2xhc3MoZGlyZWN0aW9uKVxcbiAgICAgICRhY3RpdmVcXG4gICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcXG4gICAgICAgICAgJG5leHQucmVtb3ZlQ2xhc3MoW3R5cGUsIGRpcmVjdGlvbl0uam9pbignICcpKS5hZGRDbGFzcygnYWN0aXZlJylcXG4gICAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcyhbJ2FjdGl2ZScsIGRpcmVjdGlvbl0uam9pbignICcpKVxcbiAgICAgICAgICB0aGF0LnNsaWRpbmcgPSBmYWxzZVxcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXG4gICAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoc2xpZEV2ZW50KVxcbiAgICAgICAgICB9LCAwKVxcbiAgICAgICAgfSlcXG4gICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChDYXJvdXNlbC5UUkFOU0lUSU9OX0RVUkFUSU9OKVxcbiAgICB9IGVsc2Uge1xcbiAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXFxuICAgICAgJG5leHQuYWRkQ2xhc3MoJ2FjdGl2ZScpXFxuICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2VcXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc2xpZEV2ZW50KVxcbiAgICB9XFxuXFxuICAgIGlzQ3ljbGluZyAmJiB0aGlzLmN5Y2xlKClcXG5cXG4gICAgcmV0dXJuIHRoaXNcXG4gIH1cXG5cXG5cXG4gIC8vIENBUk9VU0VMIFBMVUdJTiBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PVxcblxcbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcXG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLmNhcm91c2VsJylcXG4gICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDYXJvdXNlbC5ERUZBVUxUUywgJHRoaXMuZGF0YSgpLCB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbilcXG4gICAgICB2YXIgYWN0aW9uICA9IHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycgPyBvcHRpb24gOiBvcHRpb25zLnNsaWRlXFxuXFxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5jYXJvdXNlbCcsIChkYXRhID0gbmV3IENhcm91c2VsKHRoaXMsIG9wdGlvbnMpKSlcXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnbnVtYmVyJykgZGF0YS50byhvcHRpb24pXFxuICAgICAgZWxzZSBpZiAoYWN0aW9uKSBkYXRhW2FjdGlvbl0oKVxcbiAgICAgIGVsc2UgaWYgKG9wdGlvbnMuaW50ZXJ2YWwpIGRhdGEucGF1c2UoKS5jeWNsZSgpXFxuICAgIH0pXFxuICB9XFxuXFxuICB2YXIgb2xkID0gJC5mbi5jYXJvdXNlbFxcblxcbiAgJC5mbi5jYXJvdXNlbCAgICAgICAgICAgICA9IFBsdWdpblxcbiAgJC5mbi5jYXJvdXNlbC5Db25zdHJ1Y3RvciA9IENhcm91c2VsXFxuXFxuXFxuICAvLyBDQVJPVVNFTCBOTyBDT05GTElDVFxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cXG5cXG4gICQuZm4uY2Fyb3VzZWwubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgJC5mbi5jYXJvdXNlbCA9IG9sZFxcbiAgICByZXR1cm4gdGhpc1xcbiAgfVxcblxcblxcbiAgLy8gQ0FST1VTRUwgREFUQS1BUElcXG4gIC8vID09PT09PT09PT09PT09PT09XFxuXFxuICB2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcXG4gICAgdmFyIGhyZWZcXG4gICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXFxuICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmID0gJHRoaXMuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXFxcXHNdKyQpLywgJycpKSAvLyBzdHJpcCBmb3IgaWU3XFxuICAgIGlmICghJHRhcmdldC5oYXNDbGFzcygnY2Fyb3VzZWwnKSkgcmV0dXJuXFxuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sICR0YXJnZXQuZGF0YSgpLCAkdGhpcy5kYXRhKCkpXFxuICAgIHZhciBzbGlkZUluZGV4ID0gJHRoaXMuYXR0cignZGF0YS1zbGlkZS10bycpXFxuICAgIGlmIChzbGlkZUluZGV4KSBvcHRpb25zLmludGVydmFsID0gZmFsc2VcXG5cXG4gICAgUGx1Z2luLmNhbGwoJHRhcmdldCwgb3B0aW9ucylcXG5cXG4gICAgaWYgKHNsaWRlSW5kZXgpIHtcXG4gICAgICAkdGFyZ2V0LmRhdGEoJ2JzLmNhcm91c2VsJykudG8oc2xpZGVJbmRleClcXG4gICAgfVxcblxcbiAgICBlLnByZXZlbnREZWZhdWx0KClcXG4gIH1cXG5cXG4gICQoZG9jdW1lbnQpXFxuICAgIC5vbignY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGknLCAnW2RhdGEtc2xpZGVdJywgY2xpY2tIYW5kbGVyKVxcbiAgICAub24oJ2NsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpJywgJ1tkYXRhLXNsaWRlLXRvXScsIGNsaWNrSGFuZGxlcilcXG5cXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcXG4gICAgJCgnW2RhdGEtcmlkZT1cXFwiY2Fyb3VzZWxcXFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xcbiAgICAgIHZhciAkY2Fyb3VzZWwgPSAkKHRoaXMpXFxuICAgICAgUGx1Z2luLmNhbGwoJGNhcm91c2VsLCAkY2Fyb3VzZWwuZGF0YSgpKVxcbiAgICB9KVxcbiAgfSlcXG5cXG59KGpRdWVyeSk7XFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQm9vdHN0cmFwOiBjb2xsYXBzZS5qcyB2My4zLjdcXG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNjb2xsYXBzZVxcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXFxuXFxuLyoganNoaW50IGxhdGVkZWY6IGZhbHNlICovXFxuXFxuK2Z1bmN0aW9uICgkKSB7XFxuICAndXNlIHN0cmljdCc7XFxuXFxuICAvLyBDT0xMQVBTRSBQVUJMSUMgQ0xBU1MgREVGSU5JVElPTlxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIHZhciBDb2xsYXBzZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XFxuICAgIHRoaXMuJGVsZW1lbnQgICAgICA9ICQoZWxlbWVudClcXG4gICAgdGhpcy5vcHRpb25zICAgICAgID0gJC5leHRlbmQoe30sIENvbGxhcHNlLkRFRkFVTFRTLCBvcHRpb25zKVxcbiAgICB0aGlzLiR0cmlnZ2VyICAgICAgPSAkKCdbZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIl1baHJlZj1cXFwiIycgKyBlbGVtZW50LmlkICsgJ1xcXCJdLCcgK1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdbZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIl1bZGF0YS10YXJnZXQ9XFxcIiMnICsgZWxlbWVudC5pZCArICdcXFwiXScpXFxuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IG51bGxcXG5cXG4gICAgaWYgKHRoaXMub3B0aW9ucy5wYXJlbnQpIHtcXG4gICAgICB0aGlzLiRwYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpXFxuICAgIH0gZWxzZSB7XFxuICAgICAgdGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy4kZWxlbWVudCwgdGhpcy4kdHJpZ2dlcilcXG4gICAgfVxcblxcbiAgICBpZiAodGhpcy5vcHRpb25zLnRvZ2dsZSkgdGhpcy50b2dnbGUoKVxcbiAgfVxcblxcbiAgQ29sbGFwc2UuVkVSU0lPTiAgPSAnMy4zLjcnXFxuXFxuICBDb2xsYXBzZS5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMzUwXFxuXFxuICBDb2xsYXBzZS5ERUZBVUxUUyA9IHtcXG4gICAgdG9nZ2xlOiB0cnVlXFxuICB9XFxuXFxuICBDb2xsYXBzZS5wcm90b3R5cGUuZGltZW5zaW9uID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgaGFzV2lkdGggPSB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCd3aWR0aCcpXFxuICAgIHJldHVybiBoYXNXaWR0aCA/ICd3aWR0aCcgOiAnaGVpZ2h0J1xcbiAgfVxcblxcbiAgQ29sbGFwc2UucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XFxuICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnaW4nKSkgcmV0dXJuXFxuXFxuICAgIHZhciBhY3RpdmVzRGF0YVxcbiAgICB2YXIgYWN0aXZlcyA9IHRoaXMuJHBhcmVudCAmJiB0aGlzLiRwYXJlbnQuY2hpbGRyZW4oJy5wYW5lbCcpLmNoaWxkcmVuKCcuaW4sIC5jb2xsYXBzaW5nJylcXG5cXG4gICAgaWYgKGFjdGl2ZXMgJiYgYWN0aXZlcy5sZW5ndGgpIHtcXG4gICAgICBhY3RpdmVzRGF0YSA9IGFjdGl2ZXMuZGF0YSgnYnMuY29sbGFwc2UnKVxcbiAgICAgIGlmIChhY3RpdmVzRGF0YSAmJiBhY3RpdmVzRGF0YS50cmFuc2l0aW9uaW5nKSByZXR1cm5cXG4gICAgfVxcblxcbiAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoJ3Nob3cuYnMuY29sbGFwc2UnKVxcbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc3RhcnRFdmVudClcXG4gICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxcblxcbiAgICBpZiAoYWN0aXZlcyAmJiBhY3RpdmVzLmxlbmd0aCkge1xcbiAgICAgIFBsdWdpbi5jYWxsKGFjdGl2ZXMsICdoaWRlJylcXG4gICAgICBhY3RpdmVzRGF0YSB8fCBhY3RpdmVzLmRhdGEoJ2JzLmNvbGxhcHNlJywgbnVsbClcXG4gICAgfVxcblxcbiAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5kaW1lbnNpb24oKVxcblxcbiAgICB0aGlzLiRlbGVtZW50XFxuICAgICAgLnJlbW92ZUNsYXNzKCdjb2xsYXBzZScpXFxuICAgICAgLmFkZENsYXNzKCdjb2xsYXBzaW5nJylbZGltZW5zaW9uXSgwKVxcbiAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcXG5cXG4gICAgdGhpcy4kdHJpZ2dlclxcbiAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJylcXG4gICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpXFxuXFxuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IDFcXG5cXG4gICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xcbiAgICAgIHRoaXMuJGVsZW1lbnRcXG4gICAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2luZycpXFxuICAgICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNlIGluJylbZGltZW5zaW9uXSgnJylcXG4gICAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAwXFxuICAgICAgdGhpcy4kZWxlbWVudFxcbiAgICAgICAgLnRyaWdnZXIoJ3Nob3duLmJzLmNvbGxhcHNlJylcXG4gICAgfVxcblxcbiAgICBpZiAoISQuc3VwcG9ydC50cmFuc2l0aW9uKSByZXR1cm4gY29tcGxldGUuY2FsbCh0aGlzKVxcblxcbiAgICB2YXIgc2Nyb2xsU2l6ZSA9ICQuY2FtZWxDYXNlKFsnc2Nyb2xsJywgZGltZW5zaW9uXS5qb2luKCctJykpXFxuXFxuICAgIHRoaXMuJGVsZW1lbnRcXG4gICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCAkLnByb3h5KGNvbXBsZXRlLCB0aGlzKSlcXG4gICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQ29sbGFwc2UuVFJBTlNJVElPTl9EVVJBVElPTilbZGltZW5zaW9uXSh0aGlzLiRlbGVtZW50WzBdW3Njcm9sbFNpemVdKVxcbiAgfVxcblxcbiAgQ29sbGFwc2UucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XFxuICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykpIHJldHVyblxcblxcbiAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoJ2hpZGUuYnMuY29sbGFwc2UnKVxcbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc3RhcnRFdmVudClcXG4gICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxcblxcbiAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5kaW1lbnNpb24oKVxcblxcbiAgICB0aGlzLiRlbGVtZW50W2RpbWVuc2lvbl0odGhpcy4kZWxlbWVudFtkaW1lbnNpb25dKCkpWzBdLm9mZnNldEhlaWdodFxcblxcbiAgICB0aGlzLiRlbGVtZW50XFxuICAgICAgLmFkZENsYXNzKCdjb2xsYXBzaW5nJylcXG4gICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlIGluJylcXG4gICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKVxcblxcbiAgICB0aGlzLiR0cmlnZ2VyXFxuICAgICAgLmFkZENsYXNzKCdjb2xsYXBzZWQnKVxcbiAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpXFxuXFxuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IDFcXG5cXG4gICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xcbiAgICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IDBcXG4gICAgICB0aGlzLiRlbGVtZW50XFxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNpbmcnKVxcbiAgICAgICAgLmFkZENsYXNzKCdjb2xsYXBzZScpXFxuICAgICAgICAudHJpZ2dlcignaGlkZGVuLmJzLmNvbGxhcHNlJylcXG4gICAgfVxcblxcbiAgICBpZiAoISQuc3VwcG9ydC50cmFuc2l0aW9uKSByZXR1cm4gY29tcGxldGUuY2FsbCh0aGlzKVxcblxcbiAgICB0aGlzLiRlbGVtZW50XFxuICAgICAgW2RpbWVuc2lvbl0oMClcXG4gICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCAkLnByb3h5KGNvbXBsZXRlLCB0aGlzKSlcXG4gICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQ29sbGFwc2UuVFJBTlNJVElPTl9EVVJBVElPTilcXG4gIH1cXG5cXG4gIENvbGxhcHNlLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHRoaXNbdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnaW4nKSA/ICdoaWRlJyA6ICdzaG93J10oKVxcbiAgfVxcblxcbiAgQ29sbGFwc2UucHJvdG90eXBlLmdldFBhcmVudCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgcmV0dXJuICQodGhpcy5vcHRpb25zLnBhcmVudClcXG4gICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVxcXCJjb2xsYXBzZVxcXCJdW2RhdGEtcGFyZW50PVxcXCInICsgdGhpcy5vcHRpb25zLnBhcmVudCArICdcXFwiXScpXFxuICAgICAgLmVhY2goJC5wcm94eShmdW5jdGlvbiAoaSwgZWxlbWVudCkge1xcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KVxcbiAgICAgICAgdGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoZ2V0VGFyZ2V0RnJvbVRyaWdnZXIoJGVsZW1lbnQpLCAkZWxlbWVudClcXG4gICAgICB9LCB0aGlzKSlcXG4gICAgICAuZW5kKClcXG4gIH1cXG5cXG4gIENvbGxhcHNlLnByb3RvdHlwZS5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MgPSBmdW5jdGlvbiAoJGVsZW1lbnQsICR0cmlnZ2VyKSB7XFxuICAgIHZhciBpc09wZW4gPSAkZWxlbWVudC5oYXNDbGFzcygnaW4nKVxcblxcbiAgICAkZWxlbWVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKVxcbiAgICAkdHJpZ2dlclxcbiAgICAgIC50b2dnbGVDbGFzcygnY29sbGFwc2VkJywgIWlzT3BlbilcXG4gICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGlzT3BlbilcXG4gIH1cXG5cXG4gIGZ1bmN0aW9uIGdldFRhcmdldEZyb21UcmlnZ2VyKCR0cmlnZ2VyKSB7XFxuICAgIHZhciBocmVmXFxuICAgIHZhciB0YXJnZXQgPSAkdHJpZ2dlci5hdHRyKCdkYXRhLXRhcmdldCcpXFxuICAgICAgfHwgKGhyZWYgPSAkdHJpZ2dlci5hdHRyKCdocmVmJykpICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cXFxcc10rJCkvLCAnJykgLy8gc3RyaXAgZm9yIGllN1xcblxcbiAgICByZXR1cm4gJCh0YXJnZXQpXFxuICB9XFxuXFxuXFxuICAvLyBDT0xMQVBTRSBQTFVHSU4gREVGSU5JVElPTlxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XFxuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXFxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5jb2xsYXBzZScpXFxuICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ29sbGFwc2UuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pXFxuXFxuICAgICAgaWYgKCFkYXRhICYmIG9wdGlvbnMudG9nZ2xlICYmIC9zaG93fGhpZGUvLnRlc3Qob3B0aW9uKSkgb3B0aW9ucy50b2dnbGUgPSBmYWxzZVxcbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY29sbGFwc2UnLCAoZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBvcHRpb25zKSkpXFxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXFxuICAgIH0pXFxuICB9XFxuXFxuICB2YXIgb2xkID0gJC5mbi5jb2xsYXBzZVxcblxcbiAgJC5mbi5jb2xsYXBzZSAgICAgICAgICAgICA9IFBsdWdpblxcbiAgJC5mbi5jb2xsYXBzZS5Db25zdHJ1Y3RvciA9IENvbGxhcHNlXFxuXFxuXFxuICAvLyBDT0xMQVBTRSBOTyBDT05GTElDVFxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cXG5cXG4gICQuZm4uY29sbGFwc2Uubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgJC5mbi5jb2xsYXBzZSA9IG9sZFxcbiAgICByZXR1cm4gdGhpc1xcbiAgfVxcblxcblxcbiAgLy8gQ09MTEFQU0UgREFUQS1BUElcXG4gIC8vID09PT09PT09PT09PT09PT09XFxuXFxuICAkKGRvY3VtZW50KS5vbignY2xpY2suYnMuY29sbGFwc2UuZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlPVxcXCJjb2xsYXBzZVxcXCJdJywgZnVuY3Rpb24gKGUpIHtcXG4gICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXFxuXFxuICAgIGlmICghJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKSkgZS5wcmV2ZW50RGVmYXVsdCgpXFxuXFxuICAgIHZhciAkdGFyZ2V0ID0gZ2V0VGFyZ2V0RnJvbVRyaWdnZXIoJHRoaXMpXFxuICAgIHZhciBkYXRhICAgID0gJHRhcmdldC5kYXRhKCdicy5jb2xsYXBzZScpXFxuICAgIHZhciBvcHRpb24gID0gZGF0YSA/ICd0b2dnbGUnIDogJHRoaXMuZGF0YSgpXFxuXFxuICAgIFBsdWdpbi5jYWxsKCR0YXJnZXQsIG9wdGlvbilcXG4gIH0pXFxuXFxufShqUXVlcnkpO1xcblxcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIEJvb3RzdHJhcDogZHJvcGRvd24uanMgdjMuMy43XFxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jZHJvcGRvd25zXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXFxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG5cXG4rZnVuY3Rpb24gKCQpIHtcXG4gICd1c2Ugc3RyaWN0JztcXG5cXG4gIC8vIERST1BET1dOIENMQVNTIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIHZhciBiYWNrZHJvcCA9ICcuZHJvcGRvd24tYmFja2Ryb3AnXFxuICB2YXIgdG9nZ2xlICAgPSAnW2RhdGEtdG9nZ2xlPVxcXCJkcm9wZG93blxcXCJdJ1xcbiAgdmFyIERyb3Bkb3duID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcXG4gICAgJChlbGVtZW50KS5vbignY2xpY2suYnMuZHJvcGRvd24nLCB0aGlzLnRvZ2dsZSlcXG4gIH1cXG5cXG4gIERyb3Bkb3duLlZFUlNJT04gPSAnMy4zLjcnXFxuXFxuICBmdW5jdGlvbiBnZXRQYXJlbnQoJHRoaXMpIHtcXG4gICAgdmFyIHNlbGVjdG9yID0gJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKVxcblxcbiAgICBpZiAoIXNlbGVjdG9yKSB7XFxuICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJylcXG4gICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIC8jW0EtWmEtel0vLnRlc3Qoc2VsZWN0b3IpICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXFxcXHNdKiQpLywgJycpIC8vIHN0cmlwIGZvciBpZTdcXG4gICAgfVxcblxcbiAgICB2YXIgJHBhcmVudCA9IHNlbGVjdG9yICYmICQoc2VsZWN0b3IpXFxuXFxuICAgIHJldHVybiAkcGFyZW50ICYmICRwYXJlbnQubGVuZ3RoID8gJHBhcmVudCA6ICR0aGlzLnBhcmVudCgpXFxuICB9XFxuXFxuICBmdW5jdGlvbiBjbGVhck1lbnVzKGUpIHtcXG4gICAgaWYgKGUgJiYgZS53aGljaCA9PT0gMykgcmV0dXJuXFxuICAgICQoYmFja2Ryb3ApLnJlbW92ZSgpXFxuICAgICQodG9nZ2xlKS5lYWNoKGZ1bmN0aW9uICgpIHtcXG4gICAgICB2YXIgJHRoaXMgICAgICAgICA9ICQodGhpcylcXG4gICAgICB2YXIgJHBhcmVudCAgICAgICA9IGdldFBhcmVudCgkdGhpcylcXG4gICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdGhpcyB9XFxuXFxuICAgICAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJykpIHJldHVyblxcblxcbiAgICAgIGlmIChlICYmIGUudHlwZSA9PSAnY2xpY2snICYmIC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkgJiYgJC5jb250YWlucygkcGFyZW50WzBdLCBlLnRhcmdldCkpIHJldHVyblxcblxcbiAgICAgICRwYXJlbnQudHJpZ2dlcihlID0gJC5FdmVudCgnaGlkZS5icy5kcm9wZG93bicsIHJlbGF0ZWRUYXJnZXQpKVxcblxcbiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cXG5cXG4gICAgICAkdGhpcy5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcXG4gICAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuJykudHJpZ2dlcigkLkV2ZW50KCdoaWRkZW4uYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSlcXG4gICAgfSlcXG4gIH1cXG5cXG4gIERyb3Bkb3duLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoZSkge1xcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXFxuXFxuICAgIGlmICgkdGhpcy5pcygnLmRpc2FibGVkLCA6ZGlzYWJsZWQnKSkgcmV0dXJuXFxuXFxuICAgIHZhciAkcGFyZW50ICA9IGdldFBhcmVudCgkdGhpcylcXG4gICAgdmFyIGlzQWN0aXZlID0gJHBhcmVudC5oYXNDbGFzcygnb3BlbicpXFxuXFxuICAgIGNsZWFyTWVudXMoKVxcblxcbiAgICBpZiAoIWlzQWN0aXZlKSB7XFxuICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAhJHBhcmVudC5jbG9zZXN0KCcubmF2YmFyLW5hdicpLmxlbmd0aCkge1xcbiAgICAgICAgLy8gaWYgbW9iaWxlIHdlIHVzZSBhIGJhY2tkcm9wIGJlY2F1c2UgY2xpY2sgZXZlbnRzIGRvbid0IGRlbGVnYXRlXFxuICAgICAgICAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKVxcbiAgICAgICAgICAuYWRkQ2xhc3MoJ2Ryb3Bkb3duLWJhY2tkcm9wJylcXG4gICAgICAgICAgLmluc2VydEFmdGVyKCQodGhpcykpXFxuICAgICAgICAgIC5vbignY2xpY2snLCBjbGVhck1lbnVzKVxcbiAgICAgIH1cXG5cXG4gICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdGhpcyB9XFxuICAgICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdzaG93LmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCkpXFxuXFxuICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxcblxcbiAgICAgICR0aGlzXFxuICAgICAgICAudHJpZ2dlcignZm9jdXMnKVxcbiAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpXFxuXFxuICAgICAgJHBhcmVudFxcbiAgICAgICAgLnRvZ2dsZUNsYXNzKCdvcGVuJylcXG4gICAgICAgIC50cmlnZ2VyKCQuRXZlbnQoJ3Nob3duLmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCkpXFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIGZhbHNlXFxuICB9XFxuXFxuICBEcm9wZG93bi5wcm90b3R5cGUua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XFxuICAgIGlmICghLygzOHw0MHwyN3wzMikvLnRlc3QoZS53aGljaCkgfHwgL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSkgcmV0dXJuXFxuXFxuICAgIHZhciAkdGhpcyA9ICQodGhpcylcXG5cXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXFxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcXG5cXG4gICAgaWYgKCR0aGlzLmlzKCcuZGlzYWJsZWQsIDpkaXNhYmxlZCcpKSByZXR1cm5cXG5cXG4gICAgdmFyICRwYXJlbnQgID0gZ2V0UGFyZW50KCR0aGlzKVxcbiAgICB2YXIgaXNBY3RpdmUgPSAkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJylcXG5cXG4gICAgaWYgKCFpc0FjdGl2ZSAmJiBlLndoaWNoICE9IDI3IHx8IGlzQWN0aXZlICYmIGUud2hpY2ggPT0gMjcpIHtcXG4gICAgICBpZiAoZS53aGljaCA9PSAyNykgJHBhcmVudC5maW5kKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKVxcbiAgICAgIHJldHVybiAkdGhpcy50cmlnZ2VyKCdjbGljaycpXFxuICAgIH1cXG5cXG4gICAgdmFyIGRlc2MgPSAnIGxpOm5vdCguZGlzYWJsZWQpOnZpc2libGUgYSdcXG4gICAgdmFyICRpdGVtcyA9ICRwYXJlbnQuZmluZCgnLmRyb3Bkb3duLW1lbnUnICsgZGVzYylcXG5cXG4gICAgaWYgKCEkaXRlbXMubGVuZ3RoKSByZXR1cm5cXG5cXG4gICAgdmFyIGluZGV4ID0gJGl0ZW1zLmluZGV4KGUudGFyZ2V0KVxcblxcbiAgICBpZiAoZS53aGljaCA9PSAzOCAmJiBpbmRleCA+IDApICAgICAgICAgICAgICAgICBpbmRleC0tICAgICAgICAgLy8gdXBcXG4gICAgaWYgKGUud2hpY2ggPT0gNDAgJiYgaW5kZXggPCAkaXRlbXMubGVuZ3RoIC0gMSkgaW5kZXgrKyAgICAgICAgIC8vIGRvd25cXG4gICAgaWYgKCF+aW5kZXgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwXFxuXFxuICAgICRpdGVtcy5lcShpbmRleCkudHJpZ2dlcignZm9jdXMnKVxcbiAgfVxcblxcblxcbiAgLy8gRFJPUERPV04gUExVR0lOIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XFxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcylcXG4gICAgICB2YXIgZGF0YSAgPSAkdGhpcy5kYXRhKCdicy5kcm9wZG93bicpXFxuXFxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5kcm9wZG93bicsIChkYXRhID0gbmV3IERyb3Bkb3duKHRoaXMpKSlcXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dLmNhbGwoJHRoaXMpXFxuICAgIH0pXFxuICB9XFxuXFxuICB2YXIgb2xkID0gJC5mbi5kcm9wZG93blxcblxcbiAgJC5mbi5kcm9wZG93biAgICAgICAgICAgICA9IFBsdWdpblxcbiAgJC5mbi5kcm9wZG93bi5Db25zdHJ1Y3RvciA9IERyb3Bkb3duXFxuXFxuXFxuICAvLyBEUk9QRE9XTiBOTyBDT05GTElDVFxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cXG5cXG4gICQuZm4uZHJvcGRvd24ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgJC5mbi5kcm9wZG93biA9IG9sZFxcbiAgICByZXR1cm4gdGhpc1xcbiAgfVxcblxcblxcbiAgLy8gQVBQTFkgVE8gU1RBTkRBUkQgRFJPUERPV04gRUxFTUVOVFNcXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICAkKGRvY3VtZW50KVxcbiAgICAub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgY2xlYXJNZW51cylcXG4gICAgLm9uKCdjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaScsICcuZHJvcGRvd24gZm9ybScsIGZ1bmN0aW9uIChlKSB7IGUuc3RvcFByb3BhZ2F0aW9uKCkgfSlcXG4gICAgLm9uKCdjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaScsIHRvZ2dsZSwgRHJvcGRvd24ucHJvdG90eXBlLnRvZ2dsZSlcXG4gICAgLm9uKCdrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgdG9nZ2xlLCBEcm9wZG93bi5wcm90b3R5cGUua2V5ZG93bilcXG4gICAgLm9uKCdrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgJy5kcm9wZG93bi1tZW51JywgRHJvcGRvd24ucHJvdG90eXBlLmtleWRvd24pXFxuXFxufShqUXVlcnkpO1xcblxcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIEJvb3RzdHJhcDogbW9kYWwuanMgdjMuMy43XFxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jbW9kYWxzXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXFxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG5cXG4rZnVuY3Rpb24gKCQpIHtcXG4gICd1c2Ugc3RyaWN0JztcXG5cXG4gIC8vIE1PREFMIENMQVNTIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIHZhciBNb2RhbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XFxuICAgIHRoaXMub3B0aW9ucyAgICAgICAgICAgICA9IG9wdGlvbnNcXG4gICAgdGhpcy4kYm9keSAgICAgICAgICAgICAgID0gJChkb2N1bWVudC5ib2R5KVxcbiAgICB0aGlzLiRlbGVtZW50ICAgICAgICAgICAgPSAkKGVsZW1lbnQpXFxuICAgIHRoaXMuJGRpYWxvZyAgICAgICAgICAgICA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLm1vZGFsLWRpYWxvZycpXFxuICAgIHRoaXMuJGJhY2tkcm9wICAgICAgICAgICA9IG51bGxcXG4gICAgdGhpcy5pc1Nob3duICAgICAgICAgICAgID0gbnVsbFxcbiAgICB0aGlzLm9yaWdpbmFsQm9keVBhZCAgICAgPSBudWxsXFxuICAgIHRoaXMuc2Nyb2xsYmFyV2lkdGggICAgICA9IDBcXG4gICAgdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2VcXG5cXG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZW1vdGUpIHtcXG4gICAgICB0aGlzLiRlbGVtZW50XFxuICAgICAgICAuZmluZCgnLm1vZGFsLWNvbnRlbnQnKVxcbiAgICAgICAgLmxvYWQodGhpcy5vcHRpb25zLnJlbW90ZSwgJC5wcm94eShmdW5jdGlvbiAoKSB7XFxuICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignbG9hZGVkLmJzLm1vZGFsJylcXG4gICAgICAgIH0sIHRoaXMpKVxcbiAgICB9XFxuICB9XFxuXFxuICBNb2RhbC5WRVJTSU9OICA9ICczLjMuNydcXG5cXG4gIE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04gPSAzMDBcXG4gIE1vZGFsLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04gPSAxNTBcXG5cXG4gIE1vZGFsLkRFRkFVTFRTID0ge1xcbiAgICBiYWNrZHJvcDogdHJ1ZSxcXG4gICAga2V5Ym9hcmQ6IHRydWUsXFxuICAgIHNob3c6IHRydWVcXG4gIH1cXG5cXG4gIE1vZGFsLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoX3JlbGF0ZWRUYXJnZXQpIHtcXG4gICAgcmV0dXJuIHRoaXMuaXNTaG93biA/IHRoaXMuaGlkZSgpIDogdGhpcy5zaG93KF9yZWxhdGVkVGFyZ2V0KVxcbiAgfVxcblxcbiAgTW9kYWwucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoX3JlbGF0ZWRUYXJnZXQpIHtcXG4gICAgdmFyIHRoYXQgPSB0aGlzXFxuICAgIHZhciBlICAgID0gJC5FdmVudCgnc2hvdy5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQgfSlcXG5cXG4gICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXFxuXFxuICAgIGlmICh0aGlzLmlzU2hvd24gfHwgZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXFxuXFxuICAgIHRoaXMuaXNTaG93biA9IHRydWVcXG5cXG4gICAgdGhpcy5jaGVja1Njcm9sbGJhcigpXFxuICAgIHRoaXMuc2V0U2Nyb2xsYmFyKClcXG4gICAgdGhpcy4kYm9keS5hZGRDbGFzcygnbW9kYWwtb3BlbicpXFxuXFxuICAgIHRoaXMuZXNjYXBlKClcXG4gICAgdGhpcy5yZXNpemUoKVxcblxcbiAgICB0aGlzLiRlbGVtZW50Lm9uKCdjbGljay5kaXNtaXNzLmJzLm1vZGFsJywgJ1tkYXRhLWRpc21pc3M9XFxcIm1vZGFsXFxcIl0nLCAkLnByb3h5KHRoaXMuaGlkZSwgdGhpcykpXFxuXFxuICAgIHRoaXMuJGRpYWxvZy5vbignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XFxuICAgICAgdGhhdC4kZWxlbWVudC5vbmUoJ21vdXNldXAuZGlzbWlzcy5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XFxuICAgICAgICBpZiAoJChlLnRhcmdldCkuaXModGhhdC4kZWxlbWVudCkpIHRoYXQuaWdub3JlQmFja2Ryb3BDbGljayA9IHRydWVcXG4gICAgICB9KVxcbiAgICB9KVxcblxcbiAgICB0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uICgpIHtcXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9ICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoYXQuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUnKVxcblxcbiAgICAgIGlmICghdGhhdC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGgpIHtcXG4gICAgICAgIHRoYXQuJGVsZW1lbnQuYXBwZW5kVG8odGhhdC4kYm9keSkgLy8gZG9uJ3QgbW92ZSBtb2RhbHMgZG9tIHBvc2l0aW9uXFxuICAgICAgfVxcblxcbiAgICAgIHRoYXQuJGVsZW1lbnRcXG4gICAgICAgIC5zaG93KClcXG4gICAgICAgIC5zY3JvbGxUb3AoMClcXG5cXG4gICAgICB0aGF0LmFkanVzdERpYWxvZygpXFxuXFxuICAgICAgaWYgKHRyYW5zaXRpb24pIHtcXG4gICAgICAgIHRoYXQuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93XFxuICAgICAgfVxcblxcbiAgICAgIHRoYXQuJGVsZW1lbnQuYWRkQ2xhc3MoJ2luJylcXG5cXG4gICAgICB0aGF0LmVuZm9yY2VGb2N1cygpXFxuXFxuICAgICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93bi5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRUYXJnZXQgfSlcXG5cXG4gICAgICB0cmFuc2l0aW9uID9cXG4gICAgICAgIHRoYXQuJGRpYWxvZyAvLyB3YWl0IGZvciBtb2RhbCB0byBzbGlkZSBpblxcbiAgICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XFxuICAgICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpLnRyaWdnZXIoZSlcXG4gICAgICAgICAgfSlcXG4gICAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcXG4gICAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignZm9jdXMnKS50cmlnZ2VyKGUpXFxuICAgIH0pXFxuICB9XFxuXFxuICBNb2RhbC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChlKSB7XFxuICAgIGlmIChlKSBlLnByZXZlbnREZWZhdWx0KClcXG5cXG4gICAgZSA9ICQuRXZlbnQoJ2hpZGUuYnMubW9kYWwnKVxcblxcbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSlcXG5cXG4gICAgaWYgKCF0aGlzLmlzU2hvd24gfHwgZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXFxuXFxuICAgIHRoaXMuaXNTaG93biA9IGZhbHNlXFxuXFxuICAgIHRoaXMuZXNjYXBlKClcXG4gICAgdGhpcy5yZXNpemUoKVxcblxcbiAgICAkKGRvY3VtZW50KS5vZmYoJ2ZvY3VzaW4uYnMubW9kYWwnKVxcblxcbiAgICB0aGlzLiRlbGVtZW50XFxuICAgICAgLnJlbW92ZUNsYXNzKCdpbicpXFxuICAgICAgLm9mZignY2xpY2suZGlzbWlzcy5icy5tb2RhbCcpXFxuICAgICAgLm9mZignbW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsJylcXG5cXG4gICAgdGhpcy4kZGlhbG9nLm9mZignbW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWwnKVxcblxcbiAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgP1xcbiAgICAgIHRoaXMuJGVsZW1lbnRcXG4gICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsICQucHJveHkodGhpcy5oaWRlTW9kYWwsIHRoaXMpKVxcbiAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcXG4gICAgICB0aGlzLmhpZGVNb2RhbCgpXFxuICB9XFxuXFxuICBNb2RhbC5wcm90b3R5cGUuZW5mb3JjZUZvY3VzID0gZnVuY3Rpb24gKCkge1xcbiAgICAkKGRvY3VtZW50KVxcbiAgICAgIC5vZmYoJ2ZvY3VzaW4uYnMubW9kYWwnKSAvLyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGZvY3VzIGxvb3BcXG4gICAgICAub24oJ2ZvY3VzaW4uYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XFxuICAgICAgICBpZiAoZG9jdW1lbnQgIT09IGUudGFyZ2V0ICYmXFxuICAgICAgICAgICAgdGhpcy4kZWxlbWVudFswXSAhPT0gZS50YXJnZXQgJiZcXG4gICAgICAgICAgICAhdGhpcy4kZWxlbWVudC5oYXMoZS50YXJnZXQpLmxlbmd0aCkge1xcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2ZvY3VzJylcXG4gICAgICAgIH1cXG4gICAgICB9LCB0aGlzKSlcXG4gIH1cXG5cXG4gIE1vZGFsLnByb3RvdHlwZS5lc2NhcGUgPSBmdW5jdGlvbiAoKSB7XFxuICAgIGlmICh0aGlzLmlzU2hvd24gJiYgdGhpcy5vcHRpb25zLmtleWJvYXJkKSB7XFxuICAgICAgdGhpcy4kZWxlbWVudC5vbigna2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsJywgJC5wcm94eShmdW5jdGlvbiAoZSkge1xcbiAgICAgICAgZS53aGljaCA9PSAyNyAmJiB0aGlzLmhpZGUoKVxcbiAgICAgIH0sIHRoaXMpKVxcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2hvd24pIHtcXG4gICAgICB0aGlzLiRlbGVtZW50Lm9mZigna2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsJylcXG4gICAgfVxcbiAgfVxcblxcbiAgTW9kYWwucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcXG4gICAgaWYgKHRoaXMuaXNTaG93bikge1xcbiAgICAgICQod2luZG93KS5vbigncmVzaXplLmJzLm1vZGFsJywgJC5wcm94eSh0aGlzLmhhbmRsZVVwZGF0ZSwgdGhpcykpXFxuICAgIH0gZWxzZSB7XFxuICAgICAgJCh3aW5kb3cpLm9mZigncmVzaXplLmJzLm1vZGFsJylcXG4gICAgfVxcbiAgfVxcblxcbiAgTW9kYWwucHJvdG90eXBlLmhpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdmFyIHRoYXQgPSB0aGlzXFxuICAgIHRoaXMuJGVsZW1lbnQuaGlkZSgpXFxuICAgIHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24gKCkge1xcbiAgICAgIHRoYXQuJGJvZHkucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKVxcbiAgICAgIHRoYXQucmVzZXRBZGp1c3RtZW50cygpXFxuICAgICAgdGhhdC5yZXNldFNjcm9sbGJhcigpXFxuICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdoaWRkZW4uYnMubW9kYWwnKVxcbiAgICB9KVxcbiAgfVxcblxcbiAgTW9kYWwucHJvdG90eXBlLnJlbW92ZUJhY2tkcm9wID0gZnVuY3Rpb24gKCkge1xcbiAgICB0aGlzLiRiYWNrZHJvcCAmJiB0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKVxcbiAgICB0aGlzLiRiYWNrZHJvcCA9IG51bGxcXG4gIH1cXG5cXG4gIE1vZGFsLnByb3RvdHlwZS5iYWNrZHJvcCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xcbiAgICB2YXIgdGhhdCA9IHRoaXNcXG4gICAgdmFyIGFuaW1hdGUgPSB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgPyAnZmFkZScgOiAnJ1xcblxcbiAgICBpZiAodGhpcy5pc1Nob3duICYmIHRoaXMub3B0aW9ucy5iYWNrZHJvcCkge1xcbiAgICAgIHZhciBkb0FuaW1hdGUgPSAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiBhbmltYXRlXFxuXFxuICAgICAgdGhpcy4kYmFja2Ryb3AgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKVxcbiAgICAgICAgLmFkZENsYXNzKCdtb2RhbC1iYWNrZHJvcCAnICsgYW5pbWF0ZSlcXG4gICAgICAgIC5hcHBlbmRUbyh0aGlzLiRib2R5KVxcblxcbiAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2NsaWNrLmRpc21pc3MuYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7XFxuICAgICAgICBpZiAodGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrKSB7XFxuICAgICAgICAgIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlXFxuICAgICAgICAgIHJldHVyblxcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSBlLmN1cnJlbnRUYXJnZXQpIHJldHVyblxcbiAgICAgICAgdGhpcy5vcHRpb25zLmJhY2tkcm9wID09ICdzdGF0aWMnXFxuICAgICAgICAgID8gdGhpcy4kZWxlbWVudFswXS5mb2N1cygpXFxuICAgICAgICAgIDogdGhpcy5oaWRlKClcXG4gICAgICB9LCB0aGlzKSlcXG5cXG4gICAgICBpZiAoZG9BbmltYXRlKSB0aGlzLiRiYWNrZHJvcFswXS5vZmZzZXRXaWR0aCAvLyBmb3JjZSByZWZsb3dcXG5cXG4gICAgICB0aGlzLiRiYWNrZHJvcC5hZGRDbGFzcygnaW4nKVxcblxcbiAgICAgIGlmICghY2FsbGJhY2spIHJldHVyblxcblxcbiAgICAgIGRvQW5pbWF0ZSA/XFxuICAgICAgICB0aGlzLiRiYWNrZHJvcFxcbiAgICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBjYWxsYmFjaylcXG4gICAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKE1vZGFsLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pIDpcXG4gICAgICAgIGNhbGxiYWNrKClcXG5cXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1Nob3duICYmIHRoaXMuJGJhY2tkcm9wKSB7XFxuICAgICAgdGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoJ2luJylcXG5cXG4gICAgICB2YXIgY2FsbGJhY2tSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XFxuICAgICAgICB0aGF0LnJlbW92ZUJhY2tkcm9wKClcXG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcXG4gICAgICB9XFxuICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID9cXG4gICAgICAgIHRoaXMuJGJhY2tkcm9wXFxuICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNhbGxiYWNrUmVtb3ZlKVxcbiAgICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTikgOlxcbiAgICAgICAgY2FsbGJhY2tSZW1vdmUoKVxcblxcbiAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XFxuICAgICAgY2FsbGJhY2soKVxcbiAgICB9XFxuICB9XFxuXFxuICAvLyB0aGVzZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCB0byBoYW5kbGUgb3ZlcmZsb3dpbmcgbW9kYWxzXFxuXFxuICBNb2RhbC5wcm90b3R5cGUuaGFuZGxlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xcbiAgICB0aGlzLmFkanVzdERpYWxvZygpXFxuICB9XFxuXFxuICBNb2RhbC5wcm90b3R5cGUuYWRqdXN0RGlhbG9nID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgbW9kYWxJc092ZXJmbG93aW5nID0gdGhpcy4kZWxlbWVudFswXS5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XFxuXFxuICAgIHRoaXMuJGVsZW1lbnQuY3NzKHtcXG4gICAgICBwYWRkaW5nTGVmdDogICF0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmIG1vZGFsSXNPdmVyZmxvd2luZyA/IHRoaXMuc2Nyb2xsYmFyV2lkdGggOiAnJyxcXG4gICAgICBwYWRkaW5nUmlnaHQ6IHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcgJiYgIW1vZGFsSXNPdmVyZmxvd2luZyA/IHRoaXMuc2Nyb2xsYmFyV2lkdGggOiAnJ1xcbiAgICB9KVxcbiAgfVxcblxcbiAgTW9kYWwucHJvdG90eXBlLnJlc2V0QWRqdXN0bWVudHMgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHRoaXMuJGVsZW1lbnQuY3NzKHtcXG4gICAgICBwYWRkaW5nTGVmdDogJycsXFxuICAgICAgcGFkZGluZ1JpZ2h0OiAnJ1xcbiAgICB9KVxcbiAgfVxcblxcbiAgTW9kYWwucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgZnVsbFdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGhcXG4gICAgaWYgKCFmdWxsV2luZG93V2lkdGgpIHsgLy8gd29ya2Fyb3VuZCBmb3IgbWlzc2luZyB3aW5kb3cuaW5uZXJXaWR0aCBpbiBJRThcXG4gICAgICB2YXIgZG9jdW1lbnRFbGVtZW50UmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxcbiAgICAgIGZ1bGxXaW5kb3dXaWR0aCA9IGRvY3VtZW50RWxlbWVudFJlY3QucmlnaHQgLSBNYXRoLmFicyhkb2N1bWVudEVsZW1lbnRSZWN0LmxlZnQpXFxuICAgIH1cXG4gICAgdGhpcy5ib2R5SXNPdmVyZmxvd2luZyA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCBmdWxsV2luZG93V2lkdGhcXG4gICAgdGhpcy5zY3JvbGxiYXJXaWR0aCA9IHRoaXMubWVhc3VyZVNjcm9sbGJhcigpXFxuICB9XFxuXFxuICBNb2RhbC5wcm90b3R5cGUuc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgYm9keVBhZCA9IHBhcnNlSW50KCh0aGlzLiRib2R5LmNzcygncGFkZGluZy1yaWdodCcpIHx8IDApLCAxMClcXG4gICAgdGhpcy5vcmlnaW5hbEJvZHlQYWQgPSBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCB8fCAnJ1xcbiAgICBpZiAodGhpcy5ib2R5SXNPdmVyZmxvd2luZykgdGhpcy4kYm9keS5jc3MoJ3BhZGRpbmctcmlnaHQnLCBib2R5UGFkICsgdGhpcy5zY3JvbGxiYXJXaWR0aClcXG4gIH1cXG5cXG4gIE1vZGFsLnByb3RvdHlwZS5yZXNldFNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdGhpcy4kYm9keS5jc3MoJ3BhZGRpbmctcmlnaHQnLCB0aGlzLm9yaWdpbmFsQm9keVBhZClcXG4gIH1cXG5cXG4gIE1vZGFsLnByb3RvdHlwZS5tZWFzdXJlU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkgeyAvLyB0aHggd2Fsc2hcXG4gICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXFxuICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAnbW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmUnXFxuICAgIHRoaXMuJGJvZHkuYXBwZW5kKHNjcm9sbERpdilcXG4gICAgdmFyIHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoXFxuICAgIHRoaXMuJGJvZHlbMF0ucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KVxcbiAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGhcXG4gIH1cXG5cXG5cXG4gIC8vIE1PREFMIFBMVUdJTiBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PVxcblxcbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbiwgX3JlbGF0ZWRUYXJnZXQpIHtcXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XFxuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXFxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5tb2RhbCcpXFxuICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgTW9kYWwuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pXFxuXFxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5tb2RhbCcsIChkYXRhID0gbmV3IE1vZGFsKHRoaXMsIG9wdGlvbnMpKSlcXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKF9yZWxhdGVkVGFyZ2V0KVxcbiAgICAgIGVsc2UgaWYgKG9wdGlvbnMuc2hvdykgZGF0YS5zaG93KF9yZWxhdGVkVGFyZ2V0KVxcbiAgICB9KVxcbiAgfVxcblxcbiAgdmFyIG9sZCA9ICQuZm4ubW9kYWxcXG5cXG4gICQuZm4ubW9kYWwgICAgICAgICAgICAgPSBQbHVnaW5cXG4gICQuZm4ubW9kYWwuQ29uc3RydWN0b3IgPSBNb2RhbFxcblxcblxcbiAgLy8gTU9EQUwgTk8gQ09ORkxJQ1RcXG4gIC8vID09PT09PT09PT09PT09PT09XFxuXFxuICAkLmZuLm1vZGFsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XFxuICAgICQuZm4ubW9kYWwgPSBvbGRcXG4gICAgcmV0dXJuIHRoaXNcXG4gIH1cXG5cXG5cXG4gIC8vIE1PREFMIERBVEEtQVBJXFxuICAvLyA9PT09PT09PT09PT09PVxcblxcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLm1vZGFsLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cXFwibW9kYWxcXFwiXScsIGZ1bmN0aW9uIChlKSB7XFxuICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxcbiAgICB2YXIgaHJlZiAgICA9ICR0aGlzLmF0dHIoJ2hyZWYnKVxcbiAgICB2YXIgJHRhcmdldCA9ICQoJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKSB8fCAoaHJlZiAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXFxcXHNdKyQpLywgJycpKSkgLy8gc3RyaXAgZm9yIGllN1xcbiAgICB2YXIgb3B0aW9uICA9ICR0YXJnZXQuZGF0YSgnYnMubW9kYWwnKSA/ICd0b2dnbGUnIDogJC5leHRlbmQoeyByZW1vdGU6ICEvIy8udGVzdChocmVmKSAmJiBocmVmIH0sICR0YXJnZXQuZGF0YSgpLCAkdGhpcy5kYXRhKCkpXFxuXFxuICAgIGlmICgkdGhpcy5pcygnYScpKSBlLnByZXZlbnREZWZhdWx0KClcXG5cXG4gICAgJHRhcmdldC5vbmUoJ3Nob3cuYnMubW9kYWwnLCBmdW5jdGlvbiAoc2hvd0V2ZW50KSB7XFxuICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuIC8vIG9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd25cXG4gICAgICAkdGFyZ2V0Lm9uZSgnaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xcbiAgICAgICAgJHRoaXMuaXMoJzp2aXNpYmxlJykgJiYgJHRoaXMudHJpZ2dlcignZm9jdXMnKVxcbiAgICAgIH0pXFxuICAgIH0pXFxuICAgIFBsdWdpbi5jYWxsKCR0YXJnZXQsIG9wdGlvbiwgdGhpcylcXG4gIH0pXFxuXFxufShqUXVlcnkpO1xcblxcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIEJvb3RzdHJhcDogdG9vbHRpcC5qcyB2My4zLjdcXG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyN0b29sdGlwXFxuICogSW5zcGlyZWQgYnkgdGhlIG9yaWdpbmFsIGpRdWVyeS50aXBzeSBieSBKYXNvbiBGcmFtZVxcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXFxuXFxuXFxuK2Z1bmN0aW9uICgkKSB7XFxuICAndXNlIHN0cmljdCc7XFxuXFxuICAvLyBUT09MVElQIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICB2YXIgVG9vbHRpcCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XFxuICAgIHRoaXMudHlwZSAgICAgICA9IG51bGxcXG4gICAgdGhpcy5vcHRpb25zICAgID0gbnVsbFxcbiAgICB0aGlzLmVuYWJsZWQgICAgPSBudWxsXFxuICAgIHRoaXMudGltZW91dCAgICA9IG51bGxcXG4gICAgdGhpcy5ob3ZlclN0YXRlID0gbnVsbFxcbiAgICB0aGlzLiRlbGVtZW50ICAgPSBudWxsXFxuICAgIHRoaXMuaW5TdGF0ZSAgICA9IG51bGxcXG5cXG4gICAgdGhpcy5pbml0KCd0b29sdGlwJywgZWxlbWVudCwgb3B0aW9ucylcXG4gIH1cXG5cXG4gIFRvb2x0aXAuVkVSU0lPTiAgPSAnMy4zLjcnXFxuXFxuICBUb29sdGlwLlRSQU5TSVRJT05fRFVSQVRJT04gPSAxNTBcXG5cXG4gIFRvb2x0aXAuREVGQVVMVFMgPSB7XFxuICAgIGFuaW1hdGlvbjogdHJ1ZSxcXG4gICAgcGxhY2VtZW50OiAndG9wJyxcXG4gICAgc2VsZWN0b3I6IGZhbHNlLFxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XFxcInRvb2x0aXBcXFwiIHJvbGU9XFxcInRvb2x0aXBcXFwiPjxkaXYgY2xhc3M9XFxcInRvb2x0aXAtYXJyb3dcXFwiPjwvZGl2PjxkaXYgY2xhc3M9XFxcInRvb2x0aXAtaW5uZXJcXFwiPjwvZGl2PjwvZGl2PicsXFxuICAgIHRyaWdnZXI6ICdob3ZlciBmb2N1cycsXFxuICAgIHRpdGxlOiAnJyxcXG4gICAgZGVsYXk6IDAsXFxuICAgIGh0bWw6IGZhbHNlLFxcbiAgICBjb250YWluZXI6IGZhbHNlLFxcbiAgICB2aWV3cG9ydDoge1xcbiAgICAgIHNlbGVjdG9yOiAnYm9keScsXFxuICAgICAgcGFkZGluZzogMFxcbiAgICB9XFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHR5cGUsIGVsZW1lbnQsIG9wdGlvbnMpIHtcXG4gICAgdGhpcy5lbmFibGVkICAgPSB0cnVlXFxuICAgIHRoaXMudHlwZSAgICAgID0gdHlwZVxcbiAgICB0aGlzLiRlbGVtZW50ICA9ICQoZWxlbWVudClcXG4gICAgdGhpcy5vcHRpb25zICAgPSB0aGlzLmdldE9wdGlvbnMob3B0aW9ucylcXG4gICAgdGhpcy4kdmlld3BvcnQgPSB0aGlzLm9wdGlvbnMudmlld3BvcnQgJiYgJCgkLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLnZpZXdwb3J0KSA/IHRoaXMub3B0aW9ucy52aWV3cG9ydC5jYWxsKHRoaXMsIHRoaXMuJGVsZW1lbnQpIDogKHRoaXMub3B0aW9ucy52aWV3cG9ydC5zZWxlY3RvciB8fCB0aGlzLm9wdGlvbnMudmlld3BvcnQpKVxcbiAgICB0aGlzLmluU3RhdGUgICA9IHsgY2xpY2s6IGZhbHNlLCBob3ZlcjogZmFsc2UsIGZvY3VzOiBmYWxzZSB9XFxuXFxuICAgIGlmICh0aGlzLiRlbGVtZW50WzBdIGluc3RhbmNlb2YgZG9jdW1lbnQuY29uc3RydWN0b3IgJiYgIXRoaXMub3B0aW9ucy5zZWxlY3Rvcikge1xcbiAgICAgIHRocm93IG5ldyBFcnJvcignYHNlbGVjdG9yYCBvcHRpb24gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBpbml0aWFsaXppbmcgJyArIHRoaXMudHlwZSArICcgb24gdGhlIHdpbmRvdy5kb2N1bWVudCBvYmplY3QhJylcXG4gICAgfVxcblxcbiAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdCgnICcpXFxuXFxuICAgIGZvciAodmFyIGkgPSB0cmlnZ2Vycy5sZW5ndGg7IGktLTspIHtcXG4gICAgICB2YXIgdHJpZ2dlciA9IHRyaWdnZXJzW2ldXFxuXFxuICAgICAgaWYgKHRyaWdnZXIgPT0gJ2NsaWNrJykge1xcbiAgICAgICAgdGhpcy4kZWxlbWVudC5vbignY2xpY2suJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMudG9nZ2xlLCB0aGlzKSlcXG4gICAgICB9IGVsc2UgaWYgKHRyaWdnZXIgIT0gJ21hbnVhbCcpIHtcXG4gICAgICAgIHZhciBldmVudEluICA9IHRyaWdnZXIgPT0gJ2hvdmVyJyA/ICdtb3VzZWVudGVyJyA6ICdmb2N1c2luJ1xcbiAgICAgICAgdmFyIGV2ZW50T3V0ID0gdHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlbGVhdmUnIDogJ2ZvY3Vzb3V0J1xcblxcbiAgICAgICAgdGhpcy4kZWxlbWVudC5vbihldmVudEluICArICcuJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMuZW50ZXIsIHRoaXMpKVxcbiAgICAgICAgdGhpcy4kZWxlbWVudC5vbihldmVudE91dCArICcuJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMubGVhdmUsIHRoaXMpKVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICB0aGlzLm9wdGlvbnMuc2VsZWN0b3IgP1xcbiAgICAgICh0aGlzLl9vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgeyB0cmlnZ2VyOiAnbWFudWFsJywgc2VsZWN0b3I6ICcnIH0pKSA6XFxuICAgICAgdGhpcy5maXhUaXRsZSgpXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5nZXREZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcXG4gICAgcmV0dXJuIFRvb2x0aXAuREVGQVVMVFNcXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xcbiAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMuZ2V0RGVmYXVsdHMoKSwgdGhpcy4kZWxlbWVudC5kYXRhKCksIG9wdGlvbnMpXFxuXFxuICAgIGlmIChvcHRpb25zLmRlbGF5ICYmIHR5cGVvZiBvcHRpb25zLmRlbGF5ID09ICdudW1iZXInKSB7XFxuICAgICAgb3B0aW9ucy5kZWxheSA9IHtcXG4gICAgICAgIHNob3c6IG9wdGlvbnMuZGVsYXksXFxuICAgICAgICBoaWRlOiBvcHRpb25zLmRlbGF5XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIHJldHVybiBvcHRpb25zXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5nZXREZWxlZ2F0ZU9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHZhciBvcHRpb25zICA9IHt9XFxuICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZ2V0RGVmYXVsdHMoKVxcblxcbiAgICB0aGlzLl9vcHRpb25zICYmICQuZWFjaCh0aGlzLl9vcHRpb25zLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xcbiAgICAgIGlmIChkZWZhdWx0c1trZXldICE9IHZhbHVlKSBvcHRpb25zW2tleV0gPSB2YWx1ZVxcbiAgICB9KVxcblxcbiAgICByZXR1cm4gb3B0aW9uc1xcbiAgfVxcblxcbiAgVG9vbHRpcC5wcm90b3R5cGUuZW50ZXIgPSBmdW5jdGlvbiAob2JqKSB7XFxuICAgIHZhciBzZWxmID0gb2JqIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvciA/XFxuICAgICAgb2JqIDogJChvYmouY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSlcXG5cXG4gICAgaWYgKCFzZWxmKSB7XFxuICAgICAgc2VsZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG9iai5jdXJyZW50VGFyZ2V0LCB0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKVxcbiAgICAgICQob2JqLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUsIHNlbGYpXFxuICAgIH1cXG5cXG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mICQuRXZlbnQpIHtcXG4gICAgICBzZWxmLmluU3RhdGVbb2JqLnR5cGUgPT0gJ2ZvY3VzaW4nID8gJ2ZvY3VzJyA6ICdob3ZlciddID0gdHJ1ZVxcbiAgICB9XFxuXFxuICAgIGlmIChzZWxmLnRpcCgpLmhhc0NsYXNzKCdpbicpIHx8IHNlbGYuaG92ZXJTdGF0ZSA9PSAnaW4nKSB7XFxuICAgICAgc2VsZi5ob3ZlclN0YXRlID0gJ2luJ1xcbiAgICAgIHJldHVyblxcbiAgICB9XFxuXFxuICAgIGNsZWFyVGltZW91dChzZWxmLnRpbWVvdXQpXFxuXFxuICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdpbidcXG5cXG4gICAgaWYgKCFzZWxmLm9wdGlvbnMuZGVsYXkgfHwgIXNlbGYub3B0aW9ucy5kZWxheS5zaG93KSByZXR1cm4gc2VsZi5zaG93KClcXG5cXG4gICAgc2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxuICAgICAgaWYgKHNlbGYuaG92ZXJTdGF0ZSA9PSAnaW4nKSBzZWxmLnNob3coKVxcbiAgICB9LCBzZWxmLm9wdGlvbnMuZGVsYXkuc2hvdylcXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLmlzSW5TdGF0ZVRydWUgPSBmdW5jdGlvbiAoKSB7XFxuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmluU3RhdGUpIHtcXG4gICAgICBpZiAodGhpcy5pblN0YXRlW2tleV0pIHJldHVybiB0cnVlXFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIGZhbHNlXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5sZWF2ZSA9IGZ1bmN0aW9uIChvYmopIHtcXG4gICAgdmFyIHNlbGYgPSBvYmogaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yID9cXG4gICAgICBvYmogOiAkKG9iai5jdXJyZW50VGFyZ2V0KS5kYXRhKCdicy4nICsgdGhpcy50eXBlKVxcblxcbiAgICBpZiAoIXNlbGYpIHtcXG4gICAgICBzZWxmID0gbmV3IHRoaXMuY29uc3RydWN0b3Iob2JqLmN1cnJlbnRUYXJnZXQsIHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpXFxuICAgICAgJChvYmouY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSwgc2VsZilcXG4gICAgfVxcblxcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgJC5FdmVudCkge1xcbiAgICAgIHNlbGYuaW5TdGF0ZVtvYmoudHlwZSA9PSAnZm9jdXNvdXQnID8gJ2ZvY3VzJyA6ICdob3ZlciddID0gZmFsc2VcXG4gICAgfVxcblxcbiAgICBpZiAoc2VsZi5pc0luU3RhdGVUcnVlKCkpIHJldHVyblxcblxcbiAgICBjbGVhclRpbWVvdXQoc2VsZi50aW1lb3V0KVxcblxcbiAgICBzZWxmLmhvdmVyU3RhdGUgPSAnb3V0J1xcblxcbiAgICBpZiAoIXNlbGYub3B0aW9ucy5kZWxheSB8fCAhc2VsZi5vcHRpb25zLmRlbGF5LmhpZGUpIHJldHVybiBzZWxmLmhpZGUoKVxcblxcbiAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXG4gICAgICBpZiAoc2VsZi5ob3ZlclN0YXRlID09ICdvdXQnKSBzZWxmLmhpZGUoKVxcbiAgICB9LCBzZWxmLm9wdGlvbnMuZGVsYXkuaGlkZSlcXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHZhciBlID0gJC5FdmVudCgnc2hvdy5icy4nICsgdGhpcy50eXBlKVxcblxcbiAgICBpZiAodGhpcy5oYXNDb250ZW50KCkgJiYgdGhpcy5lbmFibGVkKSB7XFxuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXFxuXFxuICAgICAgdmFyIGluRG9tID0gJC5jb250YWlucyh0aGlzLiRlbGVtZW50WzBdLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLiRlbGVtZW50WzBdKVxcbiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8ICFpbkRvbSkgcmV0dXJuXFxuICAgICAgdmFyIHRoYXQgPSB0aGlzXFxuXFxuICAgICAgdmFyICR0aXAgPSB0aGlzLnRpcCgpXFxuXFxuICAgICAgdmFyIHRpcElkID0gdGhpcy5nZXRVSUQodGhpcy50eXBlKVxcblxcbiAgICAgIHRoaXMuc2V0Q29udGVudCgpXFxuICAgICAgJHRpcC5hdHRyKCdpZCcsIHRpcElkKVxcbiAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cignYXJpYS1kZXNjcmliZWRieScsIHRpcElkKVxcblxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKSAkdGlwLmFkZENsYXNzKCdmYWRlJylcXG5cXG4gICAgICB2YXIgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQgPT0gJ2Z1bmN0aW9uJyA/XFxuICAgICAgICB0aGlzLm9wdGlvbnMucGxhY2VtZW50LmNhbGwodGhpcywgJHRpcFswXSwgdGhpcy4kZWxlbWVudFswXSkgOlxcbiAgICAgICAgdGhpcy5vcHRpb25zLnBsYWNlbWVudFxcblxcbiAgICAgIHZhciBhdXRvVG9rZW4gPSAvXFxcXHM/YXV0bz9cXFxccz8vaVxcbiAgICAgIHZhciBhdXRvUGxhY2UgPSBhdXRvVG9rZW4udGVzdChwbGFjZW1lbnQpXFxuICAgICAgaWYgKGF1dG9QbGFjZSkgcGxhY2VtZW50ID0gcGxhY2VtZW50LnJlcGxhY2UoYXV0b1Rva2VuLCAnJykgfHwgJ3RvcCdcXG5cXG4gICAgICAkdGlwXFxuICAgICAgICAuZGV0YWNoKClcXG4gICAgICAgIC5jc3MoeyB0b3A6IDAsIGxlZnQ6IDAsIGRpc3BsYXk6ICdibG9jaycgfSlcXG4gICAgICAgIC5hZGRDbGFzcyhwbGFjZW1lbnQpXFxuICAgICAgICAuZGF0YSgnYnMuJyArIHRoaXMudHlwZSwgdGhpcylcXG5cXG4gICAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyID8gJHRpcC5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKSA6ICR0aXAuaW5zZXJ0QWZ0ZXIodGhpcy4kZWxlbWVudClcXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2luc2VydGVkLmJzLicgKyB0aGlzLnR5cGUpXFxuXFxuICAgICAgdmFyIHBvcyAgICAgICAgICA9IHRoaXMuZ2V0UG9zaXRpb24oKVxcbiAgICAgIHZhciBhY3R1YWxXaWR0aCAgPSAkdGlwWzBdLm9mZnNldFdpZHRoXFxuICAgICAgdmFyIGFjdHVhbEhlaWdodCA9ICR0aXBbMF0ub2Zmc2V0SGVpZ2h0XFxuXFxuICAgICAgaWYgKGF1dG9QbGFjZSkge1xcbiAgICAgICAgdmFyIG9yZ1BsYWNlbWVudCA9IHBsYWNlbWVudFxcbiAgICAgICAgdmFyIHZpZXdwb3J0RGltID0gdGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydClcXG5cXG4gICAgICAgIHBsYWNlbWVudCA9IHBsYWNlbWVudCA9PSAnYm90dG9tJyAmJiBwb3MuYm90dG9tICsgYWN0dWFsSGVpZ2h0ID4gdmlld3BvcnREaW0uYm90dG9tID8gJ3RvcCcgICAgOlxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50ID09ICd0b3AnICAgICYmIHBvcy50b3AgICAgLSBhY3R1YWxIZWlnaHQgPCB2aWV3cG9ydERpbS50b3AgICAgPyAnYm90dG9tJyA6XFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQgPT0gJ3JpZ2h0JyAgJiYgcG9zLnJpZ2h0ICArIGFjdHVhbFdpZHRoICA+IHZpZXdwb3J0RGltLndpZHRoICA/ICdsZWZ0JyAgIDpcXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9PSAnbGVmdCcgICAmJiBwb3MubGVmdCAgIC0gYWN0dWFsV2lkdGggIDwgdmlld3BvcnREaW0ubGVmdCAgID8gJ3JpZ2h0JyAgOlxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50XFxuXFxuICAgICAgICAkdGlwXFxuICAgICAgICAgIC5yZW1vdmVDbGFzcyhvcmdQbGFjZW1lbnQpXFxuICAgICAgICAgIC5hZGRDbGFzcyhwbGFjZW1lbnQpXFxuICAgICAgfVxcblxcbiAgICAgIHZhciBjYWxjdWxhdGVkT2Zmc2V0ID0gdGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KHBsYWNlbWVudCwgcG9zLCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KVxcblxcbiAgICAgIHRoaXMuYXBwbHlQbGFjZW1lbnQoY2FsY3VsYXRlZE9mZnNldCwgcGxhY2VtZW50KVxcblxcbiAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcXG4gICAgICAgIHZhciBwcmV2SG92ZXJTdGF0ZSA9IHRoYXQuaG92ZXJTdGF0ZVxcbiAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdzaG93bi5icy4nICsgdGhhdC50eXBlKVxcbiAgICAgICAgdGhhdC5ob3ZlclN0YXRlID0gbnVsbFxcblxcbiAgICAgICAgaWYgKHByZXZIb3ZlclN0YXRlID09ICdvdXQnKSB0aGF0LmxlYXZlKHRoYXQpXFxuICAgICAgfVxcblxcbiAgICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJHRpcC5oYXNDbGFzcygnZmFkZScpID9cXG4gICAgICAgICR0aXBcXG4gICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgY29tcGxldGUpXFxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChUb29sdGlwLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcXG4gICAgICAgIGNvbXBsZXRlKClcXG4gICAgfVxcbiAgfVxcblxcbiAgVG9vbHRpcC5wcm90b3R5cGUuYXBwbHlQbGFjZW1lbnQgPSBmdW5jdGlvbiAob2Zmc2V0LCBwbGFjZW1lbnQpIHtcXG4gICAgdmFyICR0aXAgICA9IHRoaXMudGlwKClcXG4gICAgdmFyIHdpZHRoICA9ICR0aXBbMF0ub2Zmc2V0V2lkdGhcXG4gICAgdmFyIGhlaWdodCA9ICR0aXBbMF0ub2Zmc2V0SGVpZ2h0XFxuXFxuICAgIC8vIG1hbnVhbGx5IHJlYWQgbWFyZ2lucyBiZWNhdXNlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpbmNsdWRlcyBkaWZmZXJlbmNlXFxuICAgIHZhciBtYXJnaW5Ub3AgPSBwYXJzZUludCgkdGlwLmNzcygnbWFyZ2luLXRvcCcpLCAxMClcXG4gICAgdmFyIG1hcmdpbkxlZnQgPSBwYXJzZUludCgkdGlwLmNzcygnbWFyZ2luLWxlZnQnKSwgMTApXFxuXFxuICAgIC8vIHdlIG11c3QgY2hlY2sgZm9yIE5hTiBmb3IgaWUgOC85XFxuICAgIGlmIChpc05hTihtYXJnaW5Ub3ApKSAgbWFyZ2luVG9wICA9IDBcXG4gICAgaWYgKGlzTmFOKG1hcmdpbkxlZnQpKSBtYXJnaW5MZWZ0ID0gMFxcblxcbiAgICBvZmZzZXQudG9wICArPSBtYXJnaW5Ub3BcXG4gICAgb2Zmc2V0LmxlZnQgKz0gbWFyZ2luTGVmdFxcblxcbiAgICAvLyAkLmZuLm9mZnNldCBkb2Vzbid0IHJvdW5kIHBpeGVsIHZhbHVlc1xcbiAgICAvLyBzbyB3ZSB1c2Ugc2V0T2Zmc2V0IGRpcmVjdGx5IHdpdGggb3VyIG93biBmdW5jdGlvbiBCLTBcXG4gICAgJC5vZmZzZXQuc2V0T2Zmc2V0KCR0aXBbMF0sICQuZXh0ZW5kKHtcXG4gICAgICB1c2luZzogZnVuY3Rpb24gKHByb3BzKSB7XFxuICAgICAgICAkdGlwLmNzcyh7XFxuICAgICAgICAgIHRvcDogTWF0aC5yb3VuZChwcm9wcy50b3ApLFxcbiAgICAgICAgICBsZWZ0OiBNYXRoLnJvdW5kKHByb3BzLmxlZnQpXFxuICAgICAgICB9KVxcbiAgICAgIH1cXG4gICAgfSwgb2Zmc2V0KSwgMClcXG5cXG4gICAgJHRpcC5hZGRDbGFzcygnaW4nKVxcblxcbiAgICAvLyBjaGVjayB0byBzZWUgaWYgcGxhY2luZyB0aXAgaW4gbmV3IG9mZnNldCBjYXVzZWQgdGhlIHRpcCB0byByZXNpemUgaXRzZWxmXFxuICAgIHZhciBhY3R1YWxXaWR0aCAgPSAkdGlwWzBdLm9mZnNldFdpZHRoXFxuICAgIHZhciBhY3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodFxcblxcbiAgICBpZiAocGxhY2VtZW50ID09ICd0b3AnICYmIGFjdHVhbEhlaWdodCAhPSBoZWlnaHQpIHtcXG4gICAgICBvZmZzZXQudG9wID0gb2Zmc2V0LnRvcCArIGhlaWdodCAtIGFjdHVhbEhlaWdodFxcbiAgICB9XFxuXFxuICAgIHZhciBkZWx0YSA9IHRoaXMuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhKHBsYWNlbWVudCwgb2Zmc2V0LCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KVxcblxcbiAgICBpZiAoZGVsdGEubGVmdCkgb2Zmc2V0LmxlZnQgKz0gZGVsdGEubGVmdFxcbiAgICBlbHNlIG9mZnNldC50b3AgKz0gZGVsdGEudG9wXFxuXFxuICAgIHZhciBpc1ZlcnRpY2FsICAgICAgICAgID0gL3RvcHxib3R0b20vLnRlc3QocGxhY2VtZW50KVxcbiAgICB2YXIgYXJyb3dEZWx0YSAgICAgICAgICA9IGlzVmVydGljYWwgPyBkZWx0YS5sZWZ0ICogMiAtIHdpZHRoICsgYWN0dWFsV2lkdGggOiBkZWx0YS50b3AgKiAyIC0gaGVpZ2h0ICsgYWN0dWFsSGVpZ2h0XFxuICAgIHZhciBhcnJvd09mZnNldFBvc2l0aW9uID0gaXNWZXJ0aWNhbCA/ICdvZmZzZXRXaWR0aCcgOiAnb2Zmc2V0SGVpZ2h0J1xcblxcbiAgICAkdGlwLm9mZnNldChvZmZzZXQpXFxuICAgIHRoaXMucmVwbGFjZUFycm93KGFycm93RGVsdGEsICR0aXBbMF1bYXJyb3dPZmZzZXRQb3NpdGlvbl0sIGlzVmVydGljYWwpXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5yZXBsYWNlQXJyb3cgPSBmdW5jdGlvbiAoZGVsdGEsIGRpbWVuc2lvbiwgaXNWZXJ0aWNhbCkge1xcbiAgICB0aGlzLmFycm93KClcXG4gICAgICAuY3NzKGlzVmVydGljYWwgPyAnbGVmdCcgOiAndG9wJywgNTAgKiAoMSAtIGRlbHRhIC8gZGltZW5zaW9uKSArICclJylcXG4gICAgICAuY3NzKGlzVmVydGljYWwgPyAndG9wJyA6ICdsZWZ0JywgJycpXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgJHRpcCAgPSB0aGlzLnRpcCgpXFxuICAgIHZhciB0aXRsZSA9IHRoaXMuZ2V0VGl0bGUoKVxcblxcbiAgICAkdGlwLmZpbmQoJy50b29sdGlwLWlubmVyJylbdGhpcy5vcHRpb25zLmh0bWwgPyAnaHRtbCcgOiAndGV4dCddKHRpdGxlKVxcbiAgICAkdGlwLnJlbW92ZUNsYXNzKCdmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodCcpXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XFxuICAgIHZhciB0aGF0ID0gdGhpc1xcbiAgICB2YXIgJHRpcCA9ICQodGhpcy4kdGlwKVxcbiAgICB2YXIgZSAgICA9ICQuRXZlbnQoJ2hpZGUuYnMuJyArIHRoaXMudHlwZSlcXG5cXG4gICAgZnVuY3Rpb24gY29tcGxldGUoKSB7XFxuICAgICAgaWYgKHRoYXQuaG92ZXJTdGF0ZSAhPSAnaW4nKSAkdGlwLmRldGFjaCgpXFxuICAgICAgaWYgKHRoYXQuJGVsZW1lbnQpIHsgLy8gVE9ETzogQ2hlY2sgd2hldGhlciBndWFyZGluZyB0aGlzIGNvZGUgd2l0aCB0aGlzIGBpZmAgaXMgcmVhbGx5IG5lY2Vzc2FyeS5cXG4gICAgICAgIHRoYXQuJGVsZW1lbnRcXG4gICAgICAgICAgLnJlbW92ZUF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknKVxcbiAgICAgICAgICAudHJpZ2dlcignaGlkZGVuLmJzLicgKyB0aGF0LnR5cGUpXFxuICAgICAgfVxcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcXG4gICAgfVxcblxcbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSlcXG5cXG4gICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxcblxcbiAgICAkdGlwLnJlbW92ZUNsYXNzKCdpbicpXFxuXFxuICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmICR0aXAuaGFzQ2xhc3MoJ2ZhZGUnKSA/XFxuICAgICAgJHRpcFxcbiAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgY29tcGxldGUpXFxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoVG9vbHRpcC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XFxuICAgICAgY29tcGxldGUoKVxcblxcbiAgICB0aGlzLmhvdmVyU3RhdGUgPSBudWxsXFxuXFxuICAgIHJldHVybiB0aGlzXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5maXhUaXRsZSA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdmFyICRlID0gdGhpcy4kZWxlbWVudFxcbiAgICBpZiAoJGUuYXR0cigndGl0bGUnKSB8fCB0eXBlb2YgJGUuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScpICE9ICdzdHJpbmcnKSB7XFxuICAgICAgJGUuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScsICRlLmF0dHIoJ3RpdGxlJykgfHwgJycpLmF0dHIoJ3RpdGxlJywgJycpXFxuICAgIH1cXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLmhhc0NvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHJldHVybiB0aGlzLmdldFRpdGxlKClcXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCRlbGVtZW50KSB7XFxuICAgICRlbGVtZW50ICAgPSAkZWxlbWVudCB8fCB0aGlzLiRlbGVtZW50XFxuXFxuICAgIHZhciBlbCAgICAgPSAkZWxlbWVudFswXVxcbiAgICB2YXIgaXNCb2R5ID0gZWwudGFnTmFtZSA9PSAnQk9EWSdcXG5cXG4gICAgdmFyIGVsUmVjdCAgICA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXFxuICAgIGlmIChlbFJlY3Qud2lkdGggPT0gbnVsbCkge1xcbiAgICAgIC8vIHdpZHRoIGFuZCBoZWlnaHQgYXJlIG1pc3NpbmcgaW4gSUU4LCBzbyBjb21wdXRlIHRoZW0gbWFudWFsbHk7IHNlZSBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvaXNzdWVzLzE0MDkzXFxuICAgICAgZWxSZWN0ID0gJC5leHRlbmQoe30sIGVsUmVjdCwgeyB3aWR0aDogZWxSZWN0LnJpZ2h0IC0gZWxSZWN0LmxlZnQsIGhlaWdodDogZWxSZWN0LmJvdHRvbSAtIGVsUmVjdC50b3AgfSlcXG4gICAgfVxcbiAgICB2YXIgaXNTdmcgPSB3aW5kb3cuU1ZHRWxlbWVudCAmJiBlbCBpbnN0YW5jZW9mIHdpbmRvdy5TVkdFbGVtZW50XFxuICAgIC8vIEF2b2lkIHVzaW5nICQub2Zmc2V0KCkgb24gU1ZHcyBzaW5jZSBpdCBnaXZlcyBpbmNvcnJlY3QgcmVzdWx0cyBpbiBqUXVlcnkgMy5cXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9pc3N1ZXMvMjAyODBcXG4gICAgdmFyIGVsT2Zmc2V0ICA9IGlzQm9keSA/IHsgdG9wOiAwLCBsZWZ0OiAwIH0gOiAoaXNTdmcgPyBudWxsIDogJGVsZW1lbnQub2Zmc2V0KCkpXFxuICAgIHZhciBzY3JvbGwgICAgPSB7IHNjcm9sbDogaXNCb2R5ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA6ICRlbGVtZW50LnNjcm9sbFRvcCgpIH1cXG4gICAgdmFyIG91dGVyRGltcyA9IGlzQm9keSA/IHsgd2lkdGg6ICQod2luZG93KS53aWR0aCgpLCBoZWlnaHQ6ICQod2luZG93KS5oZWlnaHQoKSB9IDogbnVsbFxcblxcbiAgICByZXR1cm4gJC5leHRlbmQoe30sIGVsUmVjdCwgc2Nyb2xsLCBvdXRlckRpbXMsIGVsT2Zmc2V0KVxcbiAgfVxcblxcbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldCA9IGZ1bmN0aW9uIChwbGFjZW1lbnQsIHBvcywgYWN0dWFsV2lkdGgsIGFjdHVhbEhlaWdodCkge1xcbiAgICByZXR1cm4gcGxhY2VtZW50ID09ICdib3R0b20nID8geyB0b3A6IHBvcy50b3AgKyBwb3MuaGVpZ2h0LCAgIGxlZnQ6IHBvcy5sZWZ0ICsgcG9zLndpZHRoIC8gMiAtIGFjdHVhbFdpZHRoIC8gMiB9IDpcXG4gICAgICAgICAgIHBsYWNlbWVudCA9PSAndG9wJyAgICA/IHsgdG9wOiBwb3MudG9wIC0gYWN0dWFsSGVpZ2h0LCBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCAvIDIgLSBhY3R1YWxXaWR0aCAvIDIgfSA6XFxuICAgICAgICAgICBwbGFjZW1lbnQgPT0gJ2xlZnQnICAgPyB7IHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwgbGVmdDogcG9zLmxlZnQgLSBhY3R1YWxXaWR0aCB9IDpcXG4gICAgICAgIC8qIHBsYWNlbWVudCA9PSAncmlnaHQnICovIHsgdG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCAvIDIgLSBhY3R1YWxIZWlnaHQgLyAyLCBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCB9XFxuXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEgPSBmdW5jdGlvbiAocGxhY2VtZW50LCBwb3MsIGFjdHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpIHtcXG4gICAgdmFyIGRlbHRhID0geyB0b3A6IDAsIGxlZnQ6IDAgfVxcbiAgICBpZiAoIXRoaXMuJHZpZXdwb3J0KSByZXR1cm4gZGVsdGFcXG5cXG4gICAgdmFyIHZpZXdwb3J0UGFkZGluZyA9IHRoaXMub3B0aW9ucy52aWV3cG9ydCAmJiB0aGlzLm9wdGlvbnMudmlld3BvcnQucGFkZGluZyB8fCAwXFxuICAgIHZhciB2aWV3cG9ydERpbWVuc2lvbnMgPSB0aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KVxcblxcbiAgICBpZiAoL3JpZ2h0fGxlZnQvLnRlc3QocGxhY2VtZW50KSkge1xcbiAgICAgIHZhciB0b3BFZGdlT2Zmc2V0ICAgID0gcG9zLnRvcCAtIHZpZXdwb3J0UGFkZGluZyAtIHZpZXdwb3J0RGltZW5zaW9ucy5zY3JvbGxcXG4gICAgICB2YXIgYm90dG9tRWRnZU9mZnNldCA9IHBvcy50b3AgKyB2aWV3cG9ydFBhZGRpbmcgLSB2aWV3cG9ydERpbWVuc2lvbnMuc2Nyb2xsICsgYWN0dWFsSGVpZ2h0XFxuICAgICAgaWYgKHRvcEVkZ2VPZmZzZXQgPCB2aWV3cG9ydERpbWVuc2lvbnMudG9wKSB7IC8vIHRvcCBvdmVyZmxvd1xcbiAgICAgICAgZGVsdGEudG9wID0gdmlld3BvcnREaW1lbnNpb25zLnRvcCAtIHRvcEVkZ2VPZmZzZXRcXG4gICAgICB9IGVsc2UgaWYgKGJvdHRvbUVkZ2VPZmZzZXQgPiB2aWV3cG9ydERpbWVuc2lvbnMudG9wICsgdmlld3BvcnREaW1lbnNpb25zLmhlaWdodCkgeyAvLyBib3R0b20gb3ZlcmZsb3dcXG4gICAgICAgIGRlbHRhLnRvcCA9IHZpZXdwb3J0RGltZW5zaW9ucy50b3AgKyB2aWV3cG9ydERpbWVuc2lvbnMuaGVpZ2h0IC0gYm90dG9tRWRnZU9mZnNldFxcbiAgICAgIH1cXG4gICAgfSBlbHNlIHtcXG4gICAgICB2YXIgbGVmdEVkZ2VPZmZzZXQgID0gcG9zLmxlZnQgLSB2aWV3cG9ydFBhZGRpbmdcXG4gICAgICB2YXIgcmlnaHRFZGdlT2Zmc2V0ID0gcG9zLmxlZnQgKyB2aWV3cG9ydFBhZGRpbmcgKyBhY3R1YWxXaWR0aFxcbiAgICAgIGlmIChsZWZ0RWRnZU9mZnNldCA8IHZpZXdwb3J0RGltZW5zaW9ucy5sZWZ0KSB7IC8vIGxlZnQgb3ZlcmZsb3dcXG4gICAgICAgIGRlbHRhLmxlZnQgPSB2aWV3cG9ydERpbWVuc2lvbnMubGVmdCAtIGxlZnRFZGdlT2Zmc2V0XFxuICAgICAgfSBlbHNlIGlmIChyaWdodEVkZ2VPZmZzZXQgPiB2aWV3cG9ydERpbWVuc2lvbnMucmlnaHQpIHsgLy8gcmlnaHQgb3ZlcmZsb3dcXG4gICAgICAgIGRlbHRhLmxlZnQgPSB2aWV3cG9ydERpbWVuc2lvbnMubGVmdCArIHZpZXdwb3J0RGltZW5zaW9ucy53aWR0aCAtIHJpZ2h0RWRnZU9mZnNldFxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICByZXR1cm4gZGVsdGFcXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgdGl0bGVcXG4gICAgdmFyICRlID0gdGhpcy4kZWxlbWVudFxcbiAgICB2YXIgbyAgPSB0aGlzLm9wdGlvbnNcXG5cXG4gICAgdGl0bGUgPSAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJylcXG4gICAgICB8fCAodHlwZW9mIG8udGl0bGUgPT0gJ2Z1bmN0aW9uJyA/IG8udGl0bGUuY2FsbCgkZVswXSkgOiAgby50aXRsZSlcXG5cXG4gICAgcmV0dXJuIHRpdGxlXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5nZXRVSUQgPSBmdW5jdGlvbiAocHJlZml4KSB7XFxuICAgIGRvIHByZWZpeCArPSB+fihNYXRoLnJhbmRvbSgpICogMTAwMDAwMClcXG4gICAgd2hpbGUgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCkpXFxuICAgIHJldHVybiBwcmVmaXhcXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLnRpcCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgaWYgKCF0aGlzLiR0aXApIHtcXG4gICAgICB0aGlzLiR0aXAgPSAkKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSlcXG4gICAgICBpZiAodGhpcy4kdGlwLmxlbmd0aCAhPSAxKSB7XFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy50eXBlICsgJyBgdGVtcGxhdGVgIG9wdGlvbiBtdXN0IGNvbnNpc3Qgb2YgZXhhY3RseSAxIHRvcC1sZXZlbCBlbGVtZW50IScpXFxuICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiB0aGlzLiR0aXBcXG4gIH1cXG5cXG4gIFRvb2x0aXAucHJvdG90eXBlLmFycm93ID0gZnVuY3Rpb24gKCkge1xcbiAgICByZXR1cm4gKHRoaXMuJGFycm93ID0gdGhpcy4kYXJyb3cgfHwgdGhpcy50aXAoKS5maW5kKCcudG9vbHRpcC1hcnJvdycpKVxcbiAgfVxcblxcbiAgVG9vbHRpcC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlXFxuICB9XFxuXFxuICBUb29sdGlwLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZVxcbiAgfVxcblxcbiAgVG9vbHRpcC5wcm90b3R5cGUudG9nZ2xlRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdGhpcy5lbmFibGVkID0gIXRoaXMuZW5hYmxlZFxcbiAgfVxcblxcbiAgVG9vbHRpcC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKGUpIHtcXG4gICAgdmFyIHNlbGYgPSB0aGlzXFxuICAgIGlmIChlKSB7XFxuICAgICAgc2VsZiA9ICQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKCdicy4nICsgdGhpcy50eXBlKVxcbiAgICAgIGlmICghc2VsZikge1xcbiAgICAgICAgc2VsZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCwgdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSlcXG4gICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKCdicy4nICsgdGhpcy50eXBlLCBzZWxmKVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBpZiAoZSkge1xcbiAgICAgIHNlbGYuaW5TdGF0ZS5jbGljayA9ICFzZWxmLmluU3RhdGUuY2xpY2tcXG4gICAgICBpZiAoc2VsZi5pc0luU3RhdGVUcnVlKCkpIHNlbGYuZW50ZXIoc2VsZilcXG4gICAgICBlbHNlIHNlbGYubGVhdmUoc2VsZilcXG4gICAgfSBlbHNlIHtcXG4gICAgICBzZWxmLnRpcCgpLmhhc0NsYXNzKCdpbicpID8gc2VsZi5sZWF2ZShzZWxmKSA6IHNlbGYuZW50ZXIoc2VsZilcXG4gICAgfVxcbiAgfVxcblxcbiAgVG9vbHRpcC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdmFyIHRoYXQgPSB0aGlzXFxuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpXFxuICAgIHRoaXMuaGlkZShmdW5jdGlvbiAoKSB7XFxuICAgICAgdGhhdC4kZWxlbWVudC5vZmYoJy4nICsgdGhhdC50eXBlKS5yZW1vdmVEYXRhKCdicy4nICsgdGhhdC50eXBlKVxcbiAgICAgIGlmICh0aGF0LiR0aXApIHtcXG4gICAgICAgIHRoYXQuJHRpcC5kZXRhY2goKVxcbiAgICAgIH1cXG4gICAgICB0aGF0LiR0aXAgPSBudWxsXFxuICAgICAgdGhhdC4kYXJyb3cgPSBudWxsXFxuICAgICAgdGhhdC4kdmlld3BvcnQgPSBudWxsXFxuICAgICAgdGhhdC4kZWxlbWVudCA9IG51bGxcXG4gICAgfSlcXG4gIH1cXG5cXG5cXG4gIC8vIFRPT0xUSVAgUExVR0lOIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XFxuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXFxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy50b29sdGlwJylcXG4gICAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uXFxuXFxuICAgICAgaWYgKCFkYXRhICYmIC9kZXN0cm95fGhpZGUvLnRlc3Qob3B0aW9uKSkgcmV0dXJuXFxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy50b29sdGlwJywgKGRhdGEgPSBuZXcgVG9vbHRpcCh0aGlzLCBvcHRpb25zKSkpXFxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXFxuICAgIH0pXFxuICB9XFxuXFxuICB2YXIgb2xkID0gJC5mbi50b29sdGlwXFxuXFxuICAkLmZuLnRvb2x0aXAgICAgICAgICAgICAgPSBQbHVnaW5cXG4gICQuZm4udG9vbHRpcC5Db25zdHJ1Y3RvciA9IFRvb2x0aXBcXG5cXG5cXG4gIC8vIFRPT0xUSVAgTk8gQ09ORkxJQ1RcXG4gIC8vID09PT09PT09PT09PT09PT09PT1cXG5cXG4gICQuZm4udG9vbHRpcC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xcbiAgICAkLmZuLnRvb2x0aXAgPSBvbGRcXG4gICAgcmV0dXJuIHRoaXNcXG4gIH1cXG5cXG59KGpRdWVyeSk7XFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQm9vdHN0cmFwOiBwb3BvdmVyLmpzIHYzLjMuN1xcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3BvcG92ZXJzXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXFxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cXG5cXG5cXG4rZnVuY3Rpb24gKCQpIHtcXG4gICd1c2Ugc3RyaWN0JztcXG5cXG4gIC8vIFBPUE9WRVIgUFVCTElDIENMQVNTIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIHZhciBQb3BvdmVyID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcXG4gICAgdGhpcy5pbml0KCdwb3BvdmVyJywgZWxlbWVudCwgb3B0aW9ucylcXG4gIH1cXG5cXG4gIGlmICghJC5mbi50b29sdGlwKSB0aHJvdyBuZXcgRXJyb3IoJ1BvcG92ZXIgcmVxdWlyZXMgdG9vbHRpcC5qcycpXFxuXFxuICBQb3BvdmVyLlZFUlNJT04gID0gJzMuMy43J1xcblxcbiAgUG9wb3Zlci5ERUZBVUxUUyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMsIHtcXG4gICAgcGxhY2VtZW50OiAncmlnaHQnLFxcbiAgICB0cmlnZ2VyOiAnY2xpY2snLFxcbiAgICBjb250ZW50OiAnJyxcXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVxcXCJwb3BvdmVyXFxcIiByb2xlPVxcXCJ0b29sdGlwXFxcIj48ZGl2IGNsYXNzPVxcXCJhcnJvd1xcXCI+PC9kaXY+PGgzIGNsYXNzPVxcXCJwb3BvdmVyLXRpdGxlXFxcIj48L2gzPjxkaXYgY2xhc3M9XFxcInBvcG92ZXItY29udGVudFxcXCI+PC9kaXY+PC9kaXY+J1xcbiAgfSlcXG5cXG5cXG4gIC8vIE5PVEU6IFBPUE9WRVIgRVhURU5EUyB0b29sdGlwLmpzXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcblxcbiAgUG9wb3Zlci5wcm90b3R5cGUgPSAkLmV4dGVuZCh7fSwgJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZSlcXG5cXG4gIFBvcG92ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUG9wb3ZlclxcblxcbiAgUG9wb3Zlci5wcm90b3R5cGUuZ2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHJldHVybiBQb3BvdmVyLkRFRkFVTFRTXFxuICB9XFxuXFxuICBQb3BvdmVyLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgJHRpcCAgICA9IHRoaXMudGlwKClcXG4gICAgdmFyIHRpdGxlICAgPSB0aGlzLmdldFRpdGxlKClcXG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLmdldENvbnRlbnQoKVxcblxcbiAgICAkdGlwLmZpbmQoJy5wb3BvdmVyLXRpdGxlJylbdGhpcy5vcHRpb25zLmh0bWwgPyAnaHRtbCcgOiAndGV4dCddKHRpdGxlKVxcbiAgICAkdGlwLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQnKS5jaGlsZHJlbigpLmRldGFjaCgpLmVuZCgpWyAvLyB3ZSB1c2UgYXBwZW5kIGZvciBodG1sIG9iamVjdHMgdG8gbWFpbnRhaW4ganMgZXZlbnRzXFxuICAgICAgdGhpcy5vcHRpb25zLmh0bWwgPyAodHlwZW9mIGNvbnRlbnQgPT0gJ3N0cmluZycgPyAnaHRtbCcgOiAnYXBwZW5kJykgOiAndGV4dCdcXG4gICAgXShjb250ZW50KVxcblxcbiAgICAkdGlwLnJlbW92ZUNsYXNzKCdmYWRlIHRvcCBib3R0b20gbGVmdCByaWdodCBpbicpXFxuXFxuICAgIC8vIElFOCBkb2Vzbid0IGFjY2VwdCBoaWRpbmcgdmlhIHRoZSBgOmVtcHR5YCBwc2V1ZG8gc2VsZWN0b3IsIHdlIGhhdmUgdG8gZG9cXG4gICAgLy8gdGhpcyBtYW51YWxseSBieSBjaGVja2luZyB0aGUgY29udGVudHMuXFxuICAgIGlmICghJHRpcC5maW5kKCcucG9wb3Zlci10aXRsZScpLmh0bWwoKSkgJHRpcC5maW5kKCcucG9wb3Zlci10aXRsZScpLmhpZGUoKVxcbiAgfVxcblxcbiAgUG9wb3Zlci5wcm90b3R5cGUuaGFzQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGUoKSB8fCB0aGlzLmdldENvbnRlbnQoKVxcbiAgfVxcblxcbiAgUG9wb3Zlci5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdmFyICRlID0gdGhpcy4kZWxlbWVudFxcbiAgICB2YXIgbyAgPSB0aGlzLm9wdGlvbnNcXG5cXG4gICAgcmV0dXJuICRlLmF0dHIoJ2RhdGEtY29udGVudCcpXFxuICAgICAgfHwgKHR5cGVvZiBvLmNvbnRlbnQgPT0gJ2Z1bmN0aW9uJyA/XFxuICAgICAgICAgICAgby5jb250ZW50LmNhbGwoJGVbMF0pIDpcXG4gICAgICAgICAgICBvLmNvbnRlbnQpXFxuICB9XFxuXFxuICBQb3BvdmVyLnByb3RvdHlwZS5hcnJvdyA9IGZ1bmN0aW9uICgpIHtcXG4gICAgcmV0dXJuICh0aGlzLiRhcnJvdyA9IHRoaXMuJGFycm93IHx8IHRoaXMudGlwKCkuZmluZCgnLmFycm93JykpXFxuICB9XFxuXFxuXFxuICAvLyBQT1BPVkVSIFBMVUdJTiBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XFxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xcbiAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMucG9wb3ZlcicpXFxuICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxcblxcbiAgICAgIGlmICghZGF0YSAmJiAvZGVzdHJveXxoaWRlLy50ZXN0KG9wdGlvbikpIHJldHVyblxcbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMucG9wb3ZlcicsIChkYXRhID0gbmV3IFBvcG92ZXIodGhpcywgb3B0aW9ucykpKVxcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxcbiAgICB9KVxcbiAgfVxcblxcbiAgdmFyIG9sZCA9ICQuZm4ucG9wb3ZlclxcblxcbiAgJC5mbi5wb3BvdmVyICAgICAgICAgICAgID0gUGx1Z2luXFxuICAkLmZuLnBvcG92ZXIuQ29uc3RydWN0b3IgPSBQb3BvdmVyXFxuXFxuXFxuICAvLyBQT1BPVkVSIE5PIENPTkZMSUNUXFxuICAvLyA9PT09PT09PT09PT09PT09PT09XFxuXFxuICAkLmZuLnBvcG92ZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgJC5mbi5wb3BvdmVyID0gb2xkXFxuICAgIHJldHVybiB0aGlzXFxuICB9XFxuXFxufShqUXVlcnkpO1xcblxcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIEJvb3RzdHJhcDogc2Nyb2xsc3B5LmpzIHYzLjMuN1xcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3Njcm9sbHNweVxcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXFxuXFxuXFxuK2Z1bmN0aW9uICgkKSB7XFxuICAndXNlIHN0cmljdCc7XFxuXFxuICAvLyBTQ1JPTExTUFkgQ0xBU1MgREVGSU5JVElPTlxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIGZ1bmN0aW9uIFNjcm9sbFNweShlbGVtZW50LCBvcHRpb25zKSB7XFxuICAgIHRoaXMuJGJvZHkgICAgICAgICAgPSAkKGRvY3VtZW50LmJvZHkpXFxuICAgIHRoaXMuJHNjcm9sbEVsZW1lbnQgPSAkKGVsZW1lbnQpLmlzKGRvY3VtZW50LmJvZHkpID8gJCh3aW5kb3cpIDogJChlbGVtZW50KVxcbiAgICB0aGlzLm9wdGlvbnMgICAgICAgID0gJC5leHRlbmQoe30sIFNjcm9sbFNweS5ERUZBVUxUUywgb3B0aW9ucylcXG4gICAgdGhpcy5zZWxlY3RvciAgICAgICA9ICh0aGlzLm9wdGlvbnMudGFyZ2V0IHx8ICcnKSArICcgLm5hdiBsaSA+IGEnXFxuICAgIHRoaXMub2Zmc2V0cyAgICAgICAgPSBbXVxcbiAgICB0aGlzLnRhcmdldHMgICAgICAgID0gW11cXG4gICAgdGhpcy5hY3RpdmVUYXJnZXQgICA9IG51bGxcXG4gICAgdGhpcy5zY3JvbGxIZWlnaHQgICA9IDBcXG5cXG4gICAgdGhpcy4kc2Nyb2xsRWxlbWVudC5vbignc2Nyb2xsLmJzLnNjcm9sbHNweScsICQucHJveHkodGhpcy5wcm9jZXNzLCB0aGlzKSlcXG4gICAgdGhpcy5yZWZyZXNoKClcXG4gICAgdGhpcy5wcm9jZXNzKClcXG4gIH1cXG5cXG4gIFNjcm9sbFNweS5WRVJTSU9OICA9ICczLjMuNydcXG5cXG4gIFNjcm9sbFNweS5ERUZBVUxUUyA9IHtcXG4gICAgb2Zmc2V0OiAxMFxcbiAgfVxcblxcbiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHJldHVybiB0aGlzLiRzY3JvbGxFbGVtZW50WzBdLnNjcm9sbEhlaWdodCB8fCBNYXRoLm1heCh0aGlzLiRib2R5WzBdLnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodClcXG4gIH1cXG5cXG4gIFNjcm9sbFNweS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdmFyIHRoYXQgICAgICAgICAgPSB0aGlzXFxuICAgIHZhciBvZmZzZXRNZXRob2QgID0gJ29mZnNldCdcXG4gICAgdmFyIG9mZnNldEJhc2UgICAgPSAwXFxuXFxuICAgIHRoaXMub2Zmc2V0cyAgICAgID0gW11cXG4gICAgdGhpcy50YXJnZXRzICAgICAgPSBbXVxcbiAgICB0aGlzLnNjcm9sbEhlaWdodCA9IHRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KClcXG5cXG4gICAgaWYgKCEkLmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pKSB7XFxuICAgICAgb2Zmc2V0TWV0aG9kID0gJ3Bvc2l0aW9uJ1xcbiAgICAgIG9mZnNldEJhc2UgICA9IHRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKClcXG4gICAgfVxcblxcbiAgICB0aGlzLiRib2R5XFxuICAgICAgLmZpbmQodGhpcy5zZWxlY3RvcilcXG4gICAgICAubWFwKGZ1bmN0aW9uICgpIHtcXG4gICAgICAgIHZhciAkZWwgICA9ICQodGhpcylcXG4gICAgICAgIHZhciBocmVmICA9ICRlbC5kYXRhKCd0YXJnZXQnKSB8fCAkZWwuYXR0cignaHJlZicpXFxuICAgICAgICB2YXIgJGhyZWYgPSAvXiMuLy50ZXN0KGhyZWYpICYmICQoaHJlZilcXG5cXG4gICAgICAgIHJldHVybiAoJGhyZWZcXG4gICAgICAgICAgJiYgJGhyZWYubGVuZ3RoXFxuICAgICAgICAgICYmICRocmVmLmlzKCc6dmlzaWJsZScpXFxuICAgICAgICAgICYmIFtbJGhyZWZbb2Zmc2V0TWV0aG9kXSgpLnRvcCArIG9mZnNldEJhc2UsIGhyZWZdXSkgfHwgbnVsbFxcbiAgICAgIH0pXFxuICAgICAgLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGFbMF0gLSBiWzBdIH0pXFxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xcbiAgICAgICAgdGhhdC5vZmZzZXRzLnB1c2godGhpc1swXSlcXG4gICAgICAgIHRoYXQudGFyZ2V0cy5wdXNoKHRoaXNbMV0pXFxuICAgICAgfSlcXG4gIH1cXG5cXG4gIFNjcm9sbFNweS5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uICgpIHtcXG4gICAgdmFyIHNjcm9sbFRvcCAgICA9IHRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkgKyB0aGlzLm9wdGlvbnMub2Zmc2V0XFxuICAgIHZhciBzY3JvbGxIZWlnaHQgPSB0aGlzLmdldFNjcm9sbEhlaWdodCgpXFxuICAgIHZhciBtYXhTY3JvbGwgICAgPSB0aGlzLm9wdGlvbnMub2Zmc2V0ICsgc2Nyb2xsSGVpZ2h0IC0gdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKVxcbiAgICB2YXIgb2Zmc2V0cyAgICAgID0gdGhpcy5vZmZzZXRzXFxuICAgIHZhciB0YXJnZXRzICAgICAgPSB0aGlzLnRhcmdldHNcXG4gICAgdmFyIGFjdGl2ZVRhcmdldCA9IHRoaXMuYWN0aXZlVGFyZ2V0XFxuICAgIHZhciBpXFxuXFxuICAgIGlmICh0aGlzLnNjcm9sbEhlaWdodCAhPSBzY3JvbGxIZWlnaHQpIHtcXG4gICAgICB0aGlzLnJlZnJlc2goKVxcbiAgICB9XFxuXFxuICAgIGlmIChzY3JvbGxUb3AgPj0gbWF4U2Nyb2xsKSB7XFxuICAgICAgcmV0dXJuIGFjdGl2ZVRhcmdldCAhPSAoaSA9IHRhcmdldHNbdGFyZ2V0cy5sZW5ndGggLSAxXSkgJiYgdGhpcy5hY3RpdmF0ZShpKVxcbiAgICB9XFxuXFxuICAgIGlmIChhY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgb2Zmc2V0c1swXSkge1xcbiAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0ID0gbnVsbFxcbiAgICAgIHJldHVybiB0aGlzLmNsZWFyKClcXG4gICAgfVxcblxcbiAgICBmb3IgKGkgPSBvZmZzZXRzLmxlbmd0aDsgaS0tOykge1xcbiAgICAgIGFjdGl2ZVRhcmdldCAhPSB0YXJnZXRzW2ldXFxuICAgICAgICAmJiBzY3JvbGxUb3AgPj0gb2Zmc2V0c1tpXVxcbiAgICAgICAgJiYgKG9mZnNldHNbaSArIDFdID09PSB1bmRlZmluZWQgfHwgc2Nyb2xsVG9wIDwgb2Zmc2V0c1tpICsgMV0pXFxuICAgICAgICAmJiB0aGlzLmFjdGl2YXRlKHRhcmdldHNbaV0pXFxuICAgIH1cXG4gIH1cXG5cXG4gIFNjcm9sbFNweS5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XFxuICAgIHRoaXMuYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0XFxuXFxuICAgIHRoaXMuY2xlYXIoKVxcblxcbiAgICB2YXIgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yICtcXG4gICAgICAnW2RhdGEtdGFyZ2V0PVxcXCInICsgdGFyZ2V0ICsgJ1xcXCJdLCcgK1xcbiAgICAgIHRoaXMuc2VsZWN0b3IgKyAnW2hyZWY9XFxcIicgKyB0YXJnZXQgKyAnXFxcIl0nXFxuXFxuICAgIHZhciBhY3RpdmUgPSAkKHNlbGVjdG9yKVxcbiAgICAgIC5wYXJlbnRzKCdsaScpXFxuICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKVxcblxcbiAgICBpZiAoYWN0aXZlLnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKS5sZW5ndGgpIHtcXG4gICAgICBhY3RpdmUgPSBhY3RpdmVcXG4gICAgICAgIC5jbG9zZXN0KCdsaS5kcm9wZG93bicpXFxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXFxuICAgIH1cXG5cXG4gICAgYWN0aXZlLnRyaWdnZXIoJ2FjdGl2YXRlLmJzLnNjcm9sbHNweScpXFxuICB9XFxuXFxuICBTY3JvbGxTcHkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xcbiAgICAkKHRoaXMuc2VsZWN0b3IpXFxuICAgICAgLnBhcmVudHNVbnRpbCh0aGlzLm9wdGlvbnMudGFyZ2V0LCAnLmFjdGl2ZScpXFxuICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxcbiAgfVxcblxcblxcbiAgLy8gU0NST0xMU1BZIFBMVUdJTiBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XFxuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXFxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5zY3JvbGxzcHknKVxcbiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cXG5cXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLnNjcm9sbHNweScsIChkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlzLCBvcHRpb25zKSkpXFxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXFxuICAgIH0pXFxuICB9XFxuXFxuICB2YXIgb2xkID0gJC5mbi5zY3JvbGxzcHlcXG5cXG4gICQuZm4uc2Nyb2xsc3B5ICAgICAgICAgICAgID0gUGx1Z2luXFxuICAkLmZuLnNjcm9sbHNweS5Db25zdHJ1Y3RvciA9IFNjcm9sbFNweVxcblxcblxcbiAgLy8gU0NST0xMU1BZIE5PIENPTkZMSUNUXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT1cXG5cXG4gICQuZm4uc2Nyb2xsc3B5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XFxuICAgICQuZm4uc2Nyb2xsc3B5ID0gb2xkXFxuICAgIHJldHVybiB0aGlzXFxuICB9XFxuXFxuXFxuICAvLyBTQ1JPTExTUFkgREFUQS1BUElcXG4gIC8vID09PT09PT09PT09PT09PT09PVxcblxcbiAgJCh3aW5kb3cpLm9uKCdsb2FkLmJzLnNjcm9sbHNweS5kYXRhLWFwaScsIGZ1bmN0aW9uICgpIHtcXG4gICAgJCgnW2RhdGEtc3B5PVxcXCJzY3JvbGxcXFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xcbiAgICAgIHZhciAkc3B5ID0gJCh0aGlzKVxcbiAgICAgIFBsdWdpbi5jYWxsKCRzcHksICRzcHkuZGF0YSgpKVxcbiAgICB9KVxcbiAgfSlcXG5cXG59KGpRdWVyeSk7XFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQm9vdHN0cmFwOiB0YWIuanMgdjMuMy43XFxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jdGFic1xcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXFxuXFxuXFxuK2Z1bmN0aW9uICgkKSB7XFxuICAndXNlIHN0cmljdCc7XFxuXFxuICAvLyBUQUIgQ0xBU1MgREVGSU5JVElPTlxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cXG5cXG4gIHZhciBUYWIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xcbiAgICAvLyBqc2NzOmRpc2FibGUgcmVxdWlyZURvbGxhckJlZm9yZWpRdWVyeUFzc2lnbm1lbnRcXG4gICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KVxcbiAgICAvLyBqc2NzOmVuYWJsZSByZXF1aXJlRG9sbGFyQmVmb3JlalF1ZXJ5QXNzaWdubWVudFxcbiAgfVxcblxcbiAgVGFiLlZFUlNJT04gPSAnMy4zLjcnXFxuXFxuICBUYWIuVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxcblxcbiAgVGFiLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xcbiAgICB2YXIgJHRoaXMgICAgPSB0aGlzLmVsZW1lbnRcXG4gICAgdmFyICR1bCAgICAgID0gJHRoaXMuY2xvc2VzdCgndWw6bm90KC5kcm9wZG93bi1tZW51KScpXFxuICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmRhdGEoJ3RhcmdldCcpXFxuXFxuICAgIGlmICghc2VsZWN0b3IpIHtcXG4gICAgICBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2hyZWYnKVxcbiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgJiYgc2VsZWN0b3IucmVwbGFjZSgvLiooPz0jW15cXFxcc10qJCkvLCAnJykgLy8gc3RyaXAgZm9yIGllN1xcbiAgICB9XFxuXFxuICAgIGlmICgkdGhpcy5wYXJlbnQoJ2xpJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSByZXR1cm5cXG5cXG4gICAgdmFyICRwcmV2aW91cyA9ICR1bC5maW5kKCcuYWN0aXZlOmxhc3QgYScpXFxuICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KCdoaWRlLmJzLnRhYicsIHtcXG4gICAgICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXVxcbiAgICB9KVxcbiAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudCgnc2hvdy5icy50YWInLCB7XFxuICAgICAgcmVsYXRlZFRhcmdldDogJHByZXZpb3VzWzBdXFxuICAgIH0pXFxuXFxuICAgICRwcmV2aW91cy50cmlnZ2VyKGhpZGVFdmVudClcXG4gICAgJHRoaXMudHJpZ2dlcihzaG93RXZlbnQpXFxuXFxuICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cXG5cXG4gICAgdmFyICR0YXJnZXQgPSAkKHNlbGVjdG9yKVxcblxcbiAgICB0aGlzLmFjdGl2YXRlKCR0aGlzLmNsb3Nlc3QoJ2xpJyksICR1bClcXG4gICAgdGhpcy5hY3RpdmF0ZSgkdGFyZ2V0LCAkdGFyZ2V0LnBhcmVudCgpLCBmdW5jdGlvbiAoKSB7XFxuICAgICAgJHByZXZpb3VzLnRyaWdnZXIoe1xcbiAgICAgICAgdHlwZTogJ2hpZGRlbi5icy50YWInLFxcbiAgICAgICAgcmVsYXRlZFRhcmdldDogJHRoaXNbMF1cXG4gICAgICB9KVxcbiAgICAgICR0aGlzLnRyaWdnZXIoe1xcbiAgICAgICAgdHlwZTogJ3Nob3duLmJzLnRhYicsXFxuICAgICAgICByZWxhdGVkVGFyZ2V0OiAkcHJldmlvdXNbMF1cXG4gICAgICB9KVxcbiAgICB9KVxcbiAgfVxcblxcbiAgVGFiLnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XFxuICAgIHZhciAkYWN0aXZlICAgID0gY29udGFpbmVyLmZpbmQoJz4gLmFjdGl2ZScpXFxuICAgIHZhciB0cmFuc2l0aW9uID0gY2FsbGJhY2tcXG4gICAgICAmJiAkLnN1cHBvcnQudHJhbnNpdGlvblxcbiAgICAgICYmICgkYWN0aXZlLmxlbmd0aCAmJiAkYWN0aXZlLmhhc0NsYXNzKCdmYWRlJykgfHwgISFjb250YWluZXIuZmluZCgnPiAuZmFkZScpLmxlbmd0aClcXG5cXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcXG4gICAgICAkYWN0aXZlXFxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXFxuICAgICAgICAuZmluZCgnPiAuZHJvcGRvd24tbWVudSA+IC5hY3RpdmUnKVxcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXFxuICAgICAgICAuZW5kKClcXG4gICAgICAgIC5maW5kKCdbZGF0YS10b2dnbGU9XFxcInRhYlxcXCJdJylcXG4gICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSlcXG5cXG4gICAgICBlbGVtZW50XFxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXFxuICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVxcXCJ0YWJcXFwiXScpXFxuICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcXG5cXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xcbiAgICAgICAgZWxlbWVudFswXS5vZmZzZXRXaWR0aCAvLyByZWZsb3cgZm9yIHRyYW5zaXRpb25cXG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2luJylcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZmFkZScpXFxuICAgICAgfVxcblxcbiAgICAgIGlmIChlbGVtZW50LnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKS5sZW5ndGgpIHtcXG4gICAgICAgIGVsZW1lbnRcXG4gICAgICAgICAgLmNsb3Nlc3QoJ2xpLmRyb3Bkb3duJylcXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXFxuICAgICAgICAgIC5lbmQoKVxcbiAgICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVxcXCJ0YWJcXFwiXScpXFxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxcbiAgICAgIH1cXG5cXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXFxuICAgIH1cXG5cXG4gICAgJGFjdGl2ZS5sZW5ndGggJiYgdHJhbnNpdGlvbiA/XFxuICAgICAgJGFjdGl2ZVxcbiAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgbmV4dClcXG4gICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChUYWIuVFJBTlNJVElPTl9EVVJBVElPTikgOlxcbiAgICAgIG5leHQoKVxcblxcbiAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdpbicpXFxuICB9XFxuXFxuXFxuICAvLyBUQUIgUExVR0lOIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PVxcblxcbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXFxuICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMudGFiJylcXG5cXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLnRhYicsIChkYXRhID0gbmV3IFRhYih0aGlzKSkpXFxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXFxuICAgIH0pXFxuICB9XFxuXFxuICB2YXIgb2xkID0gJC5mbi50YWJcXG5cXG4gICQuZm4udGFiICAgICAgICAgICAgID0gUGx1Z2luXFxuICAkLmZuLnRhYi5Db25zdHJ1Y3RvciA9IFRhYlxcblxcblxcbiAgLy8gVEFCIE5PIENPTkZMSUNUXFxuICAvLyA9PT09PT09PT09PT09PT1cXG5cXG4gICQuZm4udGFiLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XFxuICAgICQuZm4udGFiID0gb2xkXFxuICAgIHJldHVybiB0aGlzXFxuICB9XFxuXFxuXFxuICAvLyBUQUIgREFUQS1BUElcXG4gIC8vID09PT09PT09PT09PVxcblxcbiAgdmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XFxuICAgIGUucHJldmVudERlZmF1bHQoKVxcbiAgICBQbHVnaW4uY2FsbCgkKHRoaXMpLCAnc2hvdycpXFxuICB9XFxuXFxuICAkKGRvY3VtZW50KVxcbiAgICAub24oJ2NsaWNrLmJzLnRhYi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9XFxcInRhYlxcXCJdJywgY2xpY2tIYW5kbGVyKVxcbiAgICAub24oJ2NsaWNrLmJzLnRhYi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9XFxcInBpbGxcXFwiXScsIGNsaWNrSGFuZGxlcilcXG5cXG59KGpRdWVyeSk7XFxuXFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuICogQm9vdHN0cmFwOiBhZmZpeC5qcyB2My4zLjdcXG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNhZmZpeFxcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLlxcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXFxuXFxuXFxuK2Z1bmN0aW9uICgkKSB7XFxuICAndXNlIHN0cmljdCc7XFxuXFxuICAvLyBBRkZJWCBDTEFTUyBERUZJTklUSU9OXFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICB2YXIgQWZmaXggPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xcbiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQWZmaXguREVGQVVMVFMsIG9wdGlvbnMpXFxuXFxuICAgIHRoaXMuJHRhcmdldCA9ICQodGhpcy5vcHRpb25zLnRhcmdldClcXG4gICAgICAub24oJ3Njcm9sbC5icy5hZmZpeC5kYXRhLWFwaScsICQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLCB0aGlzKSlcXG4gICAgICAub24oJ2NsaWNrLmJzLmFmZml4LmRhdGEtYXBpJywgICQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCwgdGhpcykpXFxuXFxuICAgIHRoaXMuJGVsZW1lbnQgICAgID0gJChlbGVtZW50KVxcbiAgICB0aGlzLmFmZml4ZWQgICAgICA9IG51bGxcXG4gICAgdGhpcy51bnBpbiAgICAgICAgPSBudWxsXFxuICAgIHRoaXMucGlubmVkT2Zmc2V0ID0gbnVsbFxcblxcbiAgICB0aGlzLmNoZWNrUG9zaXRpb24oKVxcbiAgfVxcblxcbiAgQWZmaXguVkVSU0lPTiAgPSAnMy4zLjcnXFxuXFxuICBBZmZpeC5SRVNFVCAgICA9ICdhZmZpeCBhZmZpeC10b3AgYWZmaXgtYm90dG9tJ1xcblxcbiAgQWZmaXguREVGQVVMVFMgPSB7XFxuICAgIG9mZnNldDogMCxcXG4gICAgdGFyZ2V0OiB3aW5kb3dcXG4gIH1cXG5cXG4gIEFmZml4LnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIChzY3JvbGxIZWlnaHQsIGhlaWdodCwgb2Zmc2V0VG9wLCBvZmZzZXRCb3R0b20pIHtcXG4gICAgdmFyIHNjcm9sbFRvcCAgICA9IHRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKVxcbiAgICB2YXIgcG9zaXRpb24gICAgID0gdGhpcy4kZWxlbWVudC5vZmZzZXQoKVxcbiAgICB2YXIgdGFyZ2V0SGVpZ2h0ID0gdGhpcy4kdGFyZ2V0LmhlaWdodCgpXFxuXFxuICAgIGlmIChvZmZzZXRUb3AgIT0gbnVsbCAmJiB0aGlzLmFmZml4ZWQgPT0gJ3RvcCcpIHJldHVybiBzY3JvbGxUb3AgPCBvZmZzZXRUb3AgPyAndG9wJyA6IGZhbHNlXFxuXFxuICAgIGlmICh0aGlzLmFmZml4ZWQgPT0gJ2JvdHRvbScpIHtcXG4gICAgICBpZiAob2Zmc2V0VG9wICE9IG51bGwpIHJldHVybiAoc2Nyb2xsVG9wICsgdGhpcy51bnBpbiA8PSBwb3NpdGlvbi50b3ApID8gZmFsc2UgOiAnYm90dG9tJ1xcbiAgICAgIHJldHVybiAoc2Nyb2xsVG9wICsgdGFyZ2V0SGVpZ2h0IDw9IHNjcm9sbEhlaWdodCAtIG9mZnNldEJvdHRvbSkgPyBmYWxzZSA6ICdib3R0b20nXFxuICAgIH1cXG5cXG4gICAgdmFyIGluaXRpYWxpemluZyAgID0gdGhpcy5hZmZpeGVkID09IG51bGxcXG4gICAgdmFyIGNvbGxpZGVyVG9wICAgID0gaW5pdGlhbGl6aW5nID8gc2Nyb2xsVG9wIDogcG9zaXRpb24udG9wXFxuICAgIHZhciBjb2xsaWRlckhlaWdodCA9IGluaXRpYWxpemluZyA/IHRhcmdldEhlaWdodCA6IGhlaWdodFxcblxcbiAgICBpZiAob2Zmc2V0VG9wICE9IG51bGwgJiYgc2Nyb2xsVG9wIDw9IG9mZnNldFRvcCkgcmV0dXJuICd0b3AnXFxuICAgIGlmIChvZmZzZXRCb3R0b20gIT0gbnVsbCAmJiAoY29sbGlkZXJUb3AgKyBjb2xsaWRlckhlaWdodCA+PSBzY3JvbGxIZWlnaHQgLSBvZmZzZXRCb3R0b20pKSByZXR1cm4gJ2JvdHRvbSdcXG5cXG4gICAgcmV0dXJuIGZhbHNlXFxuICB9XFxuXFxuICBBZmZpeC5wcm90b3R5cGUuZ2V0UGlubmVkT2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xcbiAgICBpZiAodGhpcy5waW5uZWRPZmZzZXQpIHJldHVybiB0aGlzLnBpbm5lZE9mZnNldFxcbiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKEFmZml4LlJFU0VUKS5hZGRDbGFzcygnYWZmaXgnKVxcbiAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpXFxuICAgIHZhciBwb3NpdGlvbiAgPSB0aGlzLiRlbGVtZW50Lm9mZnNldCgpXFxuICAgIHJldHVybiAodGhpcy5waW5uZWRPZmZzZXQgPSBwb3NpdGlvbi50b3AgLSBzY3JvbGxUb3ApXFxuICB9XFxuXFxuICBBZmZpeC5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3AgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHNldFRpbWVvdXQoJC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sIHRoaXMpLCAxKVxcbiAgfVxcblxcbiAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XFxuICAgIGlmICghdGhpcy4kZWxlbWVudC5pcygnOnZpc2libGUnKSkgcmV0dXJuXFxuXFxuICAgIHZhciBoZWlnaHQgICAgICAgPSB0aGlzLiRlbGVtZW50LmhlaWdodCgpXFxuICAgIHZhciBvZmZzZXQgICAgICAgPSB0aGlzLm9wdGlvbnMub2Zmc2V0XFxuICAgIHZhciBvZmZzZXRUb3AgICAgPSBvZmZzZXQudG9wXFxuICAgIHZhciBvZmZzZXRCb3R0b20gPSBvZmZzZXQuYm90dG9tXFxuICAgIHZhciBzY3JvbGxIZWlnaHQgPSBNYXRoLm1heCgkKGRvY3VtZW50KS5oZWlnaHQoKSwgJChkb2N1bWVudC5ib2R5KS5oZWlnaHQoKSlcXG5cXG4gICAgaWYgKHR5cGVvZiBvZmZzZXQgIT0gJ29iamVjdCcpICAgICAgICAgb2Zmc2V0Qm90dG9tID0gb2Zmc2V0VG9wID0gb2Zmc2V0XFxuICAgIGlmICh0eXBlb2Ygb2Zmc2V0VG9wID09ICdmdW5jdGlvbicpICAgIG9mZnNldFRvcCAgICA9IG9mZnNldC50b3AodGhpcy4kZWxlbWVudClcXG4gICAgaWYgKHR5cGVvZiBvZmZzZXRCb3R0b20gPT0gJ2Z1bmN0aW9uJykgb2Zmc2V0Qm90dG9tID0gb2Zmc2V0LmJvdHRvbSh0aGlzLiRlbGVtZW50KVxcblxcbiAgICB2YXIgYWZmaXggPSB0aGlzLmdldFN0YXRlKHNjcm9sbEhlaWdodCwgaGVpZ2h0LCBvZmZzZXRUb3AsIG9mZnNldEJvdHRvbSlcXG5cXG4gICAgaWYgKHRoaXMuYWZmaXhlZCAhPSBhZmZpeCkge1xcbiAgICAgIGlmICh0aGlzLnVucGluICE9IG51bGwpIHRoaXMuJGVsZW1lbnQuY3NzKCd0b3AnLCAnJylcXG5cXG4gICAgICB2YXIgYWZmaXhUeXBlID0gJ2FmZml4JyArIChhZmZpeCA/ICctJyArIGFmZml4IDogJycpXFxuICAgICAgdmFyIGUgICAgICAgICA9ICQuRXZlbnQoYWZmaXhUeXBlICsgJy5icy5hZmZpeCcpXFxuXFxuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXFxuXFxuICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxcblxcbiAgICAgIHRoaXMuYWZmaXhlZCA9IGFmZml4XFxuICAgICAgdGhpcy51bnBpbiA9IGFmZml4ID09ICdib3R0b20nID8gdGhpcy5nZXRQaW5uZWRPZmZzZXQoKSA6IG51bGxcXG5cXG4gICAgICB0aGlzLiRlbGVtZW50XFxuICAgICAgICAucmVtb3ZlQ2xhc3MoQWZmaXguUkVTRVQpXFxuICAgICAgICAuYWRkQ2xhc3MoYWZmaXhUeXBlKVxcbiAgICAgICAgLnRyaWdnZXIoYWZmaXhUeXBlLnJlcGxhY2UoJ2FmZml4JywgJ2FmZml4ZWQnKSArICcuYnMuYWZmaXgnKVxcbiAgICB9XFxuXFxuICAgIGlmIChhZmZpeCA9PSAnYm90dG9tJykge1xcbiAgICAgIHRoaXMuJGVsZW1lbnQub2Zmc2V0KHtcXG4gICAgICAgIHRvcDogc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0IC0gb2Zmc2V0Qm90dG9tXFxuICAgICAgfSlcXG4gICAgfVxcbiAgfVxcblxcblxcbiAgLy8gQUZGSVggUExVR0lOIERFRklOSVRJT05cXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09XFxuXFxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XFxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xcbiAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuYWZmaXgnKVxcbiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cXG5cXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmFmZml4JywgKGRhdGEgPSBuZXcgQWZmaXgodGhpcywgb3B0aW9ucykpKVxcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxcbiAgICB9KVxcbiAgfVxcblxcbiAgdmFyIG9sZCA9ICQuZm4uYWZmaXhcXG5cXG4gICQuZm4uYWZmaXggICAgICAgICAgICAgPSBQbHVnaW5cXG4gICQuZm4uYWZmaXguQ29uc3RydWN0b3IgPSBBZmZpeFxcblxcblxcbiAgLy8gQUZGSVggTk8gQ09ORkxJQ1RcXG4gIC8vID09PT09PT09PT09PT09PT09XFxuXFxuICAkLmZuLmFmZml4Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XFxuICAgICQuZm4uYWZmaXggPSBvbGRcXG4gICAgcmV0dXJuIHRoaXNcXG4gIH1cXG5cXG5cXG4gIC8vIEFGRklYIERBVEEtQVBJXFxuICAvLyA9PT09PT09PT09PT09PVxcblxcbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xcbiAgICAkKCdbZGF0YS1zcHk9XFxcImFmZml4XFxcIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcXG4gICAgICB2YXIgJHNweSA9ICQodGhpcylcXG4gICAgICB2YXIgZGF0YSA9ICRzcHkuZGF0YSgpXFxuXFxuICAgICAgZGF0YS5vZmZzZXQgPSBkYXRhLm9mZnNldCB8fCB7fVxcblxcbiAgICAgIGlmIChkYXRhLm9mZnNldEJvdHRvbSAhPSBudWxsKSBkYXRhLm9mZnNldC5ib3R0b20gPSBkYXRhLm9mZnNldEJvdHRvbVxcbiAgICAgIGlmIChkYXRhLm9mZnNldFRvcCAgICAhPSBudWxsKSBkYXRhLm9mZnNldC50b3AgICAgPSBkYXRhLm9mZnNldFRvcFxcblxcbiAgICAgIFBsdWdpbi5jYWxsKCRzcHksIGRhdGEpXFxuICAgIH0pXFxuICB9KVxcblxcbn0oalF1ZXJ5KTtcXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYXctbG9hZGVyIS4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL34vYm9vdHN0cmFwL2Rpc3QvanMvYm9vdHN0cmFwLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCIvKiFcXHJcXG4gKiBTZWxlY3QyIDQuMC4zXFxyXFxuICogaHR0cHM6Ly9zZWxlY3QyLmdpdGh1Yi5pb1xcclxcbiAqXFxyXFxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXFxyXFxuICogaHR0cHM6Ly9naXRodWIuY29tL3NlbGVjdDIvc2VsZWN0Mi9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXFxyXFxuICovXFxyXFxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XFxyXFxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XFxyXFxuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cXHJcXG4gICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xcclxcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcXHJcXG4gICAgLy8gTm9kZS9Db21tb25KU1xcclxcbiAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcXHJcXG4gIH0gZWxzZSB7XFxyXFxuICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xcclxcbiAgICBmYWN0b3J5KGpRdWVyeSk7XFxyXFxuICB9XFxyXFxufShmdW5jdGlvbiAoalF1ZXJ5KSB7XFxyXFxuICAvLyBUaGlzIGlzIG5lZWRlZCBzbyB3ZSBjYW4gY2F0Y2ggdGhlIEFNRCBsb2FkZXIgY29uZmlndXJhdGlvbiBhbmQgdXNlIGl0XFxyXFxuICAvLyBUaGUgaW5uZXIgZmlsZSBzaG91bGQgYmUgd3JhcHBlZCAoYnkgYGJhbm5lci5zdGFydC5qc2ApIGluIGEgZnVuY3Rpb24gdGhhdFxcclxcbiAgLy8gcmV0dXJucyB0aGUgQU1EIGxvYWRlciByZWZlcmVuY2VzLlxcclxcbiAgdmFyIFMyID1cXHJcXG4oZnVuY3Rpb24gKCkge1xcclxcbiAgLy8gUmVzdG9yZSB0aGUgU2VsZWN0MiBBTUQgbG9hZGVyIHNvIGl0IGNhbiBiZSB1c2VkXFxyXFxuICAvLyBOZWVkZWQgbW9zdGx5IGluIHRoZSBsYW5ndWFnZSBmaWxlcywgd2hlcmUgdGhlIGxvYWRlciBpcyBub3QgaW5zZXJ0ZWRcXHJcXG4gIGlmIChqUXVlcnkgJiYgalF1ZXJ5LmZuICYmIGpRdWVyeS5mbi5zZWxlY3QyICYmIGpRdWVyeS5mbi5zZWxlY3QyLmFtZCkge1xcclxcbiAgICB2YXIgUzIgPSBqUXVlcnkuZm4uc2VsZWN0Mi5hbWQ7XFxyXFxuICB9XFxyXFxudmFyIFMyOyhmdW5jdGlvbiAoKSB7IGlmICghUzIgfHwgIVMyLnJlcXVpcmVqcykge1xcbmlmICghUzIpIHsgUzIgPSB7fTsgfSBlbHNlIHsgcmVxdWlyZSA9IFMyOyB9XFxuLyoqXFxuICogQGxpY2Vuc2UgYWxtb25kIDAuMy4xIENvcHlyaWdodCAoYykgMjAxMS0yMDE0LCBUaGUgRG9qbyBGb3VuZGF0aW9uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXFxuICogQXZhaWxhYmxlIHZpYSB0aGUgTUlUIG9yIG5ldyBCU0QgbGljZW5zZS5cXG4gKiBzZWU6IGh0dHA6Ly9naXRodWIuY29tL2pyYnVya2UvYWxtb25kIGZvciBkZXRhaWxzXFxuICovXFxuLy9Hb2luZyBzbG9wcHkgdG8gYXZvaWQgJ3VzZSBzdHJpY3QnIHN0cmluZyBjb3N0LCBidXQgc3RyaWN0IHByYWN0aWNlcyBzaG91bGRcXG4vL2JlIGZvbGxvd2VkLlxcbi8qanNsaW50IHNsb3BweTogdHJ1ZSAqL1xcbi8qZ2xvYmFsIHNldFRpbWVvdXQ6IGZhbHNlICovXFxuXFxudmFyIHJlcXVpcmVqcywgcmVxdWlyZSwgZGVmaW5lO1xcbihmdW5jdGlvbiAodW5kZWYpIHtcXG4gICAgdmFyIG1haW4sIHJlcSwgbWFrZU1hcCwgaGFuZGxlcnMsXFxuICAgICAgICBkZWZpbmVkID0ge30sXFxuICAgICAgICB3YWl0aW5nID0ge30sXFxuICAgICAgICBjb25maWcgPSB7fSxcXG4gICAgICAgIGRlZmluaW5nID0ge30sXFxuICAgICAgICBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxcbiAgICAgICAgYXBzID0gW10uc2xpY2UsXFxuICAgICAgICBqc1N1ZmZpeFJlZ0V4cCA9IC9cXFxcLmpzJC87XFxuXFxuICAgIGZ1bmN0aW9uIGhhc1Byb3Aob2JqLCBwcm9wKSB7XFxuICAgICAgICByZXR1cm4gaGFzT3duLmNhbGwob2JqLCBwcm9wKTtcXG4gICAgfVxcblxcbiAgICAvKipcXG4gICAgICogR2l2ZW4gYSByZWxhdGl2ZSBtb2R1bGUgbmFtZSwgbGlrZSAuL3NvbWV0aGluZywgbm9ybWFsaXplIGl0IHRvXFxuICAgICAqIGEgcmVhbCBuYW1lIHRoYXQgY2FuIGJlIG1hcHBlZCB0byBhIHBhdGguXFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSByZWxhdGl2ZSBuYW1lXFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlTmFtZSBhIHJlYWwgbmFtZSB0aGF0IHRoZSBuYW1lIGFyZyBpcyByZWxhdGl2ZVxcbiAgICAgKiB0by5cXG4gICAgICogQHJldHVybnMge1N0cmluZ30gbm9ybWFsaXplZCBuYW1lXFxuICAgICAqL1xcbiAgICBmdW5jdGlvbiBub3JtYWxpemUobmFtZSwgYmFzZU5hbWUpIHtcXG4gICAgICAgIHZhciBuYW1lUGFydHMsIG5hbWVTZWdtZW50LCBtYXBWYWx1ZSwgZm91bmRNYXAsIGxhc3RJbmRleCxcXG4gICAgICAgICAgICBmb3VuZEksIGZvdW5kU3Rhck1hcCwgc3RhckksIGksIGosIHBhcnQsXFxuICAgICAgICAgICAgYmFzZVBhcnRzID0gYmFzZU5hbWUgJiYgYmFzZU5hbWUuc3BsaXQoXFxcIi9cXFwiKSxcXG4gICAgICAgICAgICBtYXAgPSBjb25maWcubWFwLFxcbiAgICAgICAgICAgIHN0YXJNYXAgPSAobWFwICYmIG1hcFsnKiddKSB8fCB7fTtcXG5cXG4gICAgICAgIC8vQWRqdXN0IGFueSByZWxhdGl2ZSBwYXRocy5cXG4gICAgICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApID09PSBcXFwiLlxcXCIpIHtcXG4gICAgICAgICAgICAvL0lmIGhhdmUgYSBiYXNlIG5hbWUsIHRyeSB0byBub3JtYWxpemUgYWdhaW5zdCBpdCxcXG4gICAgICAgICAgICAvL290aGVyd2lzZSwgYXNzdW1lIGl0IGlzIGEgdG9wLWxldmVsIHJlcXVpcmUgdGhhdCB3aWxsXFxuICAgICAgICAgICAgLy9iZSByZWxhdGl2ZSB0byBiYXNlVXJsIGluIHRoZSBlbmQuXFxuICAgICAgICAgICAgaWYgKGJhc2VOYW1lKSB7XFxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCcvJyk7XFxuICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IG5hbWUubGVuZ3RoIC0gMTtcXG5cXG4gICAgICAgICAgICAgICAgLy8gTm9kZSAuanMgYWxsb3dhbmNlOlxcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm5vZGVJZENvbXBhdCAmJiBqc1N1ZmZpeFJlZ0V4cC50ZXN0KG5hbWVbbGFzdEluZGV4XSkpIHtcXG4gICAgICAgICAgICAgICAgICAgIG5hbWVbbGFzdEluZGV4XSA9IG5hbWVbbGFzdEluZGV4XS5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XFxuICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgLy9Mb3Agb2ZmIHRoZSBsYXN0IHBhcnQgb2YgYmFzZVBhcnRzLCBzbyB0aGF0IC4gbWF0Y2hlcyB0aGVcXG4gICAgICAgICAgICAgICAgLy9cXFwiZGlyZWN0b3J5XFxcIiBhbmQgbm90IG5hbWUgb2YgdGhlIGJhc2VOYW1lJ3MgbW9kdWxlLiBGb3IgaW5zdGFuY2UsXFxuICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgb2YgXFxcIm9uZS90d28vdGhyZWVcXFwiLCBtYXBzIHRvIFxcXCJvbmUvdHdvL3RocmVlLmpzXFxcIiwgYnV0IHdlXFxuICAgICAgICAgICAgICAgIC8vd2FudCB0aGUgZGlyZWN0b3J5LCBcXFwib25lL3R3b1xcXCIgZm9yIHRoaXMgbm9ybWFsaXphdGlvbi5cXG4gICAgICAgICAgICAgICAgbmFtZSA9IGJhc2VQYXJ0cy5zbGljZSgwLCBiYXNlUGFydHMubGVuZ3RoIC0gMSkuY29uY2F0KG5hbWUpO1xcblxcbiAgICAgICAgICAgICAgICAvL3N0YXJ0IHRyaW1Eb3RzXFxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBuYW1lLmxlbmd0aDsgaSArPSAxKSB7XFxuICAgICAgICAgICAgICAgICAgICBwYXJ0ID0gbmFtZVtpXTtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0ID09PSBcXFwiLlxcXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLnNwbGljZShpLCAxKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBpIC09IDE7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQgPT09IFxcXCIuLlxcXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMSAmJiAobmFtZVsyXSA9PT0gJy4uJyB8fCBuYW1lWzBdID09PSAnLi4nKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0VuZCBvZiB0aGUgbGluZS4gS2VlcCBhdCBsZWFzdCBvbmUgbm9uLWRvdFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3BhdGggc2VnbWVudCBhdCB0aGUgZnJvbnQgc28gaXQgY2FuIGJlIG1hcHBlZFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvcnJlY3RseSB0byBkaXNrLiBPdGhlcndpc2UsIHRoZXJlIGlzIGxpa2VseVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL25vIHBhdGggbWFwcGluZyBmb3IgYSBwYXRoIHN0YXJ0aW5nIHdpdGggJy4uJy5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UaGlzIGNhbiBzdGlsbCBmYWlsLCBidXQgY2F0Y2hlcyB0aGUgbW9zdCByZWFzb25hYmxlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXNlcyBvZiAuLlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPiAwKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuc3BsaWNlKGkgLSAxLCAyKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAtPSAyO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAvL2VuZCB0cmltRG90c1xcblxcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5qb2luKFxcXCIvXFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLmluZGV4T2YoJy4vJykgPT09IDApIHtcXG4gICAgICAgICAgICAgICAgLy8gTm8gYmFzZU5hbWUsIHNvIHRoaXMgaXMgSUQgaXMgcmVzb2x2ZWQgcmVsYXRpdmVcXG4gICAgICAgICAgICAgICAgLy8gdG8gYmFzZVVybCwgcHVsbCBvZmYgdGhlIGxlYWRpbmcgZG90LlxcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMik7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy9BcHBseSBtYXAgY29uZmlnIGlmIGF2YWlsYWJsZS5cXG4gICAgICAgIGlmICgoYmFzZVBhcnRzIHx8IHN0YXJNYXApICYmIG1hcCkge1xcbiAgICAgICAgICAgIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQoJy8nKTtcXG5cXG4gICAgICAgICAgICBmb3IgKGkgPSBuYW1lUGFydHMubGVuZ3RoOyBpID4gMDsgaSAtPSAxKSB7XFxuICAgICAgICAgICAgICAgIG5hbWVTZWdtZW50ID0gbmFtZVBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oXFxcIi9cXFwiKTtcXG5cXG4gICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJ0cykge1xcbiAgICAgICAgICAgICAgICAgICAgLy9GaW5kIHRoZSBsb25nZXN0IGJhc2VOYW1lIHNlZ21lbnQgbWF0Y2ggaW4gdGhlIGNvbmZpZy5cXG4gICAgICAgICAgICAgICAgICAgIC8vU28sIGRvIGpvaW5zIG9uIHRoZSBiaWdnZXN0IHRvIHNtYWxsZXN0IGxlbmd0aHMgb2YgYmFzZVBhcnRzLlxcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gYmFzZVBhcnRzLmxlbmd0aDsgaiA+IDA7IGogLT0gMSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlID0gbWFwW2Jhc2VQYXJ0cy5zbGljZSgwLCBqKS5qb2luKCcvJyldO1xcblxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgc2VnbWVudCBoYXMgIGNvbmZpZywgZmluZCBpZiBpdCBoYXMgb25lIGZvclxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBuYW1lLlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBWYWx1ZSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZSA9IG1hcFZhbHVlW25hbWVTZWdtZW50XTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFZhbHVlKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hdGNoLCB1cGRhdGUgbmFtZSB0byB0aGUgbmV3IHZhbHVlLlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBtYXBWYWx1ZTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kSSA9IGk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRNYXApIHtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgZm9yIGEgc3RhciBtYXAgbWF0Y2gsIGJ1dCBqdXN0IGhvbGQgb24gdG8gaXQsXFxuICAgICAgICAgICAgICAgIC8vaWYgdGhlcmUgaXMgYSBzaG9ydGVyIHNlZ21lbnQgbWF0Y2ggbGF0ZXIgaW4gYSBtYXRjaGluZ1xcbiAgICAgICAgICAgICAgICAvL2NvbmZpZywgdGhlbiBmYXZvciBvdmVyIHRoaXMgc3RhciBtYXAuXFxuICAgICAgICAgICAgICAgIGlmICghZm91bmRTdGFyTWFwICYmIHN0YXJNYXAgJiYgc3Rhck1hcFtuYW1lU2VnbWVudF0pIHtcXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kU3Rhck1hcCA9IHN0YXJNYXBbbmFtZVNlZ21lbnRdO1xcbiAgICAgICAgICAgICAgICAgICAgc3RhckkgPSBpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIGlmICghZm91bmRNYXAgJiYgZm91bmRTdGFyTWFwKSB7XFxuICAgICAgICAgICAgICAgIGZvdW5kTWFwID0gZm91bmRTdGFyTWFwO1xcbiAgICAgICAgICAgICAgICBmb3VuZEkgPSBzdGFySTtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgaWYgKGZvdW5kTWFwKSB7XFxuICAgICAgICAgICAgICAgIG5hbWVQYXJ0cy5zcGxpY2UoMCwgZm91bmRJLCBmb3VuZE1hcCk7XFxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lUGFydHMuam9pbignLycpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHJldHVybiBuYW1lO1xcbiAgICB9XFxuXFxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1aXJlKHJlbE5hbWUsIGZvcmNlU3luYykge1xcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcXG4gICAgICAgICAgICAvL0EgdmVyc2lvbiBvZiBhIHJlcXVpcmUgZnVuY3Rpb24gdGhhdCBwYXNzZXMgYSBtb2R1bGVOYW1lXFxuICAgICAgICAgICAgLy92YWx1ZSBmb3IgaXRlbXMgdGhhdCBtYXkgbmVlZCB0b1xcbiAgICAgICAgICAgIC8vbG9vayB1cCBwYXRocyByZWxhdGl2ZSB0byB0aGUgbW9kdWxlTmFtZVxcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXBzLmNhbGwoYXJndW1lbnRzLCAwKTtcXG5cXG4gICAgICAgICAgICAvL0lmIGZpcnN0IGFyZyBpcyBub3QgcmVxdWlyZSgnc3RyaW5nJyksIGFuZCB0aGVyZSBpcyBvbmx5XFxuICAgICAgICAgICAgLy9vbmUgYXJnLCBpdCBpcyB0aGUgYXJyYXkgZm9ybSB3aXRob3V0IGEgY2FsbGJhY2suIEluc2VydFxcbiAgICAgICAgICAgIC8vYSBudWxsIHNvIHRoYXQgdGhlIGZvbGxvd2luZyBjb25jYXQgaXMgY29ycmVjdC5cXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnICYmIGFyZ3MubGVuZ3RoID09PSAxKSB7XFxuICAgICAgICAgICAgICAgIGFyZ3MucHVzaChudWxsKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcmV0dXJuIHJlcS5hcHBseSh1bmRlZiwgYXJncy5jb25jYXQoW3JlbE5hbWUsIGZvcmNlU3luY10pKTtcXG4gICAgICAgIH07XFxuICAgIH1cXG5cXG4gICAgZnVuY3Rpb24gbWFrZU5vcm1hbGl6ZShyZWxOYW1lKSB7XFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHtcXG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5hbWUsIHJlbE5hbWUpO1xcbiAgICAgICAgfTtcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiBtYWtlTG9hZChkZXBOYW1lKSB7XFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XFxuICAgICAgICAgICAgZGVmaW5lZFtkZXBOYW1lXSA9IHZhbHVlO1xcbiAgICAgICAgfTtcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiBjYWxsRGVwKG5hbWUpIHtcXG4gICAgICAgIGlmIChoYXNQcm9wKHdhaXRpbmcsIG5hbWUpKSB7XFxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB3YWl0aW5nW25hbWVdO1xcbiAgICAgICAgICAgIGRlbGV0ZSB3YWl0aW5nW25hbWVdO1xcbiAgICAgICAgICAgIGRlZmluaW5nW25hbWVdID0gdHJ1ZTtcXG4gICAgICAgICAgICBtYWluLmFwcGx5KHVuZGVmLCBhcmdzKTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBuYW1lKSAmJiAhaGFzUHJvcChkZWZpbmluZywgbmFtZSkpIHtcXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vICcgKyBuYW1lKTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBkZWZpbmVkW25hbWVdO1xcbiAgICB9XFxuXFxuICAgIC8vVHVybnMgYSBwbHVnaW4hcmVzb3VyY2UgdG8gW3BsdWdpbiwgcmVzb3VyY2VdXFxuICAgIC8vd2l0aCB0aGUgcGx1Z2luIGJlaW5nIHVuZGVmaW5lZCBpZiB0aGUgbmFtZVxcbiAgICAvL2RpZCBub3QgaGF2ZSBhIHBsdWdpbiBwcmVmaXguXFxuICAgIGZ1bmN0aW9uIHNwbGl0UHJlZml4KG5hbWUpIHtcXG4gICAgICAgIHZhciBwcmVmaXgsXFxuICAgICAgICAgICAgaW5kZXggPSBuYW1lID8gbmFtZS5pbmRleE9mKCchJykgOiAtMTtcXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XFxuICAgICAgICAgICAgcHJlZml4ID0gbmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZyhpbmRleCArIDEsIG5hbWUubGVuZ3RoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBbcHJlZml4LCBuYW1lXTtcXG4gICAgfVxcblxcbiAgICAvKipcXG4gICAgICogTWFrZXMgYSBuYW1lIG1hcCwgbm9ybWFsaXppbmcgdGhlIG5hbWUsIGFuZCB1c2luZyBhIHBsdWdpblxcbiAgICAgKiBmb3Igbm9ybWFsaXphdGlvbiBpZiBuZWNlc3NhcnkuIEdyYWJzIGEgcmVmIHRvIHBsdWdpblxcbiAgICAgKiB0b28sIGFzIGFuIG9wdGltaXphdGlvbi5cXG4gICAgICovXFxuICAgIG1ha2VNYXAgPSBmdW5jdGlvbiAobmFtZSwgcmVsTmFtZSkge1xcbiAgICAgICAgdmFyIHBsdWdpbixcXG4gICAgICAgICAgICBwYXJ0cyA9IHNwbGl0UHJlZml4KG5hbWUpLFxcbiAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdO1xcblxcbiAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xcblxcbiAgICAgICAgaWYgKHByZWZpeCkge1xcbiAgICAgICAgICAgIHByZWZpeCA9IG5vcm1hbGl6ZShwcmVmaXgsIHJlbE5hbWUpO1xcbiAgICAgICAgICAgIHBsdWdpbiA9IGNhbGxEZXAocHJlZml4KTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC8vTm9ybWFsaXplIGFjY29yZGluZ1xcbiAgICAgICAgaWYgKHByZWZpeCkge1xcbiAgICAgICAgICAgIGlmIChwbHVnaW4gJiYgcGx1Z2luLm5vcm1hbGl6ZSkge1xcbiAgICAgICAgICAgICAgICBuYW1lID0gcGx1Z2luLm5vcm1hbGl6ZShuYW1lLCBtYWtlTm9ybWFsaXplKHJlbE5hbWUpKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBuYW1lID0gbm9ybWFsaXplKG5hbWUsIHJlbE5hbWUpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZShuYW1lLCByZWxOYW1lKTtcXG4gICAgICAgICAgICBwYXJ0cyA9IHNwbGl0UHJlZml4KG5hbWUpO1xcbiAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdO1xcbiAgICAgICAgICAgIG5hbWUgPSBwYXJ0c1sxXTtcXG4gICAgICAgICAgICBpZiAocHJlZml4KSB7XFxuICAgICAgICAgICAgICAgIHBsdWdpbiA9IGNhbGxEZXAocHJlZml4KTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvL1VzaW5nIHJpZGljdWxvdXMgcHJvcGVydHkgbmFtZXMgZm9yIHNwYWNlIHJlYXNvbnNcXG4gICAgICAgIHJldHVybiB7XFxuICAgICAgICAgICAgZjogcHJlZml4ID8gcHJlZml4ICsgJyEnICsgbmFtZSA6IG5hbWUsIC8vZnVsbE5hbWVcXG4gICAgICAgICAgICBuOiBuYW1lLFxcbiAgICAgICAgICAgIHByOiBwcmVmaXgsXFxuICAgICAgICAgICAgcDogcGx1Z2luXFxuICAgICAgICB9O1xcbiAgICB9O1xcblxcbiAgICBmdW5jdGlvbiBtYWtlQ29uZmlnKG5hbWUpIHtcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxuICAgICAgICAgICAgcmV0dXJuIChjb25maWcgJiYgY29uZmlnLmNvbmZpZyAmJiBjb25maWcuY29uZmlnW25hbWVdKSB8fCB7fTtcXG4gICAgICAgIH07XFxuICAgIH1cXG5cXG4gICAgaGFuZGxlcnMgPSB7XFxuICAgICAgICByZXF1aXJlOiBmdW5jdGlvbiAobmFtZSkge1xcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmVxdWlyZShuYW1lKTtcXG4gICAgICAgIH0sXFxuICAgICAgICBleHBvcnRzOiBmdW5jdGlvbiAobmFtZSkge1xcbiAgICAgICAgICAgIHZhciBlID0gZGVmaW5lZFtuYW1lXTtcXG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgIT09ICd1bmRlZmluZWQnKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBlO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiAoZGVmaW5lZFtuYW1lXSA9IHt9KTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9LFxcbiAgICAgICAgbW9kdWxlOiBmdW5jdGlvbiAobmFtZSkge1xcbiAgICAgICAgICAgIHJldHVybiB7XFxuICAgICAgICAgICAgICAgIGlkOiBuYW1lLFxcbiAgICAgICAgICAgICAgICB1cmk6ICcnLFxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBkZWZpbmVkW25hbWVdLFxcbiAgICAgICAgICAgICAgICBjb25maWc6IG1ha2VDb25maWcobmFtZSlcXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgfVxcbiAgICB9O1xcblxcbiAgICBtYWluID0gZnVuY3Rpb24gKG5hbWUsIGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lKSB7XFxuICAgICAgICB2YXIgY2pzTW9kdWxlLCBkZXBOYW1lLCByZXQsIG1hcCwgaSxcXG4gICAgICAgICAgICBhcmdzID0gW10sXFxuICAgICAgICAgICAgY2FsbGJhY2tUeXBlID0gdHlwZW9mIGNhbGxiYWNrLFxcbiAgICAgICAgICAgIHVzaW5nRXhwb3J0cztcXG5cXG4gICAgICAgIC8vVXNlIG5hbWUgaWYgbm8gcmVsTmFtZVxcbiAgICAgICAgcmVsTmFtZSA9IHJlbE5hbWUgfHwgbmFtZTtcXG5cXG4gICAgICAgIC8vQ2FsbCB0aGUgY2FsbGJhY2sgdG8gZGVmaW5lIHRoZSBtb2R1bGUsIGlmIG5lY2Vzc2FyeS5cXG4gICAgICAgIGlmIChjYWxsYmFja1R5cGUgPT09ICd1bmRlZmluZWQnIHx8IGNhbGxiYWNrVHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgICAgICAgICAgIC8vUHVsbCBvdXQgdGhlIGRlZmluZWQgZGVwZW5kZW5jaWVzIGFuZCBwYXNzIHRoZSBvcmRlcmVkXFxuICAgICAgICAgICAgLy92YWx1ZXMgdG8gdGhlIGNhbGxiYWNrLlxcbiAgICAgICAgICAgIC8vRGVmYXVsdCB0byBbcmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlXSBpZiBubyBkZXBzXFxuICAgICAgICAgICAgZGVwcyA9ICFkZXBzLmxlbmd0aCAmJiBjYWxsYmFjay5sZW5ndGggPyBbJ3JlcXVpcmUnLCAnZXhwb3J0cycsICdtb2R1bGUnXSA6IGRlcHM7XFxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpICs9IDEpIHtcXG4gICAgICAgICAgICAgICAgbWFwID0gbWFrZU1hcChkZXBzW2ldLCByZWxOYW1lKTtcXG4gICAgICAgICAgICAgICAgZGVwTmFtZSA9IG1hcC5mO1xcblxcbiAgICAgICAgICAgICAgICAvL0Zhc3QgcGF0aCBDb21tb25KUyBzdGFuZGFyZCBkZXBlbmRlbmNpZXMuXFxuICAgICAgICAgICAgICAgIGlmIChkZXBOYW1lID09PSBcXFwicmVxdWlyZVxcXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBoYW5kbGVycy5yZXF1aXJlKG5hbWUpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlcE5hbWUgPT09IFxcXCJleHBvcnRzXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgLy9Db21tb25KUyBtb2R1bGUgc3BlYyAxLjFcXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBoYW5kbGVycy5leHBvcnRzKG5hbWUpO1xcbiAgICAgICAgICAgICAgICAgICAgdXNpbmdFeHBvcnRzID0gdHJ1ZTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXBOYW1lID09PSBcXFwibW9kdWxlXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgLy9Db21tb25KUyBtb2R1bGUgc3BlYyAxLjFcXG4gICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZSA9IGFyZ3NbaV0gPSBoYW5kbGVycy5tb2R1bGUobmFtZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzUHJvcChkZWZpbmVkLCBkZXBOYW1lKSB8fFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb3Aod2FpdGluZywgZGVwTmFtZSkgfHxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQcm9wKGRlZmluaW5nLCBkZXBOYW1lKSkge1xcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGNhbGxEZXAoZGVwTmFtZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWFwLnApIHtcXG4gICAgICAgICAgICAgICAgICAgIG1hcC5wLmxvYWQobWFwLm4sIG1ha2VSZXF1aXJlKHJlbE5hbWUsIHRydWUpLCBtYWtlTG9hZChkZXBOYW1lKSwge30pO1xcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGRlZmluZWRbZGVwTmFtZV07XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobmFtZSArICcgbWlzc2luZyAnICsgZGVwTmFtZSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgcmV0ID0gY2FsbGJhY2sgPyBjYWxsYmFjay5hcHBseShkZWZpbmVkW25hbWVdLCBhcmdzKSA6IHVuZGVmaW5lZDtcXG5cXG4gICAgICAgICAgICBpZiAobmFtZSkge1xcbiAgICAgICAgICAgICAgICAvL0lmIHNldHRpbmcgZXhwb3J0cyB2aWEgXFxcIm1vZHVsZVxcXCIgaXMgaW4gcGxheSxcXG4gICAgICAgICAgICAgICAgLy9mYXZvciB0aGF0IG92ZXIgcmV0dXJuIHZhbHVlIGFuZCBleHBvcnRzLiBBZnRlciB0aGF0LFxcbiAgICAgICAgICAgICAgICAvL2Zhdm9yIGEgbm9uLXVuZGVmaW5lZCByZXR1cm4gdmFsdWUgb3ZlciBleHBvcnRzIHVzZS5cXG4gICAgICAgICAgICAgICAgaWYgKGNqc01vZHVsZSAmJiBjanNNb2R1bGUuZXhwb3J0cyAhPT0gdW5kZWYgJiZcXG4gICAgICAgICAgICAgICAgICAgICAgICBjanNNb2R1bGUuZXhwb3J0cyAhPT0gZGVmaW5lZFtuYW1lXSkge1xcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFtuYW1lXSA9IGNqc01vZHVsZS5leHBvcnRzO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJldCAhPT0gdW5kZWYgfHwgIXVzaW5nRXhwb3J0cykge1xcbiAgICAgICAgICAgICAgICAgICAgLy9Vc2UgdGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBmdW5jdGlvbi5cXG4gICAgICAgICAgICAgICAgICAgIGRlZmluZWRbbmFtZV0gPSByZXQ7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGVsc2UgaWYgKG5hbWUpIHtcXG4gICAgICAgICAgICAvL01heSBqdXN0IGJlIGFuIG9iamVjdCBkZWZpbml0aW9uIGZvciB0aGUgbW9kdWxlLiBPbmx5XFxuICAgICAgICAgICAgLy93b3JyeSBhYm91dCBkZWZpbmluZyBpZiBoYXZlIGEgbW9kdWxlIG5hbWUuXFxuICAgICAgICAgICAgZGVmaW5lZFtuYW1lXSA9IGNhbGxiYWNrO1xcbiAgICAgICAgfVxcbiAgICB9O1xcblxcbiAgICByZXF1aXJlanMgPSByZXF1aXJlID0gcmVxID0gZnVuY3Rpb24gKGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lLCBmb3JjZVN5bmMsIGFsdCkge1xcbiAgICAgICAgaWYgKHR5cGVvZiBkZXBzID09PSBcXFwic3RyaW5nXFxcIikge1xcbiAgICAgICAgICAgIGlmIChoYW5kbGVyc1tkZXBzXSkge1xcbiAgICAgICAgICAgICAgICAvL2NhbGxiYWNrIGluIHRoaXMgY2FzZSBpcyByZWFsbHkgcmVsTmFtZVxcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlcnNbZGVwc10oY2FsbGJhY2spO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAvL0p1c3QgcmV0dXJuIHRoZSBtb2R1bGUgd2FudGVkLiBJbiB0aGlzIHNjZW5hcmlvLCB0aGVcXG4gICAgICAgICAgICAvL2RlcHMgYXJnIGlzIHRoZSBtb2R1bGUgbmFtZSwgYW5kIHNlY29uZCBhcmcgKGlmIHBhc3NlZClcXG4gICAgICAgICAgICAvL2lzIGp1c3QgdGhlIHJlbE5hbWUuXFxuICAgICAgICAgICAgLy9Ob3JtYWxpemUgbW9kdWxlIG5hbWUsIGlmIGl0IGNvbnRhaW5zIC4gb3IgLi5cXG4gICAgICAgICAgICByZXR1cm4gY2FsbERlcChtYWtlTWFwKGRlcHMsIGNhbGxiYWNrKS5mKTtcXG4gICAgICAgIH0gZWxzZSBpZiAoIWRlcHMuc3BsaWNlKSB7XFxuICAgICAgICAgICAgLy9kZXBzIGlzIGEgY29uZmlnIG9iamVjdCwgbm90IGFuIGFycmF5LlxcbiAgICAgICAgICAgIGNvbmZpZyA9IGRlcHM7XFxuICAgICAgICAgICAgaWYgKGNvbmZpZy5kZXBzKSB7XFxuICAgICAgICAgICAgICAgIHJlcShjb25maWcuZGVwcywgY29uZmlnLmNhbGxiYWNrKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykge1xcbiAgICAgICAgICAgICAgICByZXR1cm47XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5zcGxpY2UpIHtcXG4gICAgICAgICAgICAgICAgLy9jYWxsYmFjayBpcyBhbiBhcnJheSwgd2hpY2ggbWVhbnMgaXQgaXMgYSBkZXBlbmRlbmN5IGxpc3QuXFxuICAgICAgICAgICAgICAgIC8vQWRqdXN0IGFyZ3MgaWYgdGhlcmUgYXJlIGRlcGVuZGVuY2llc1xcbiAgICAgICAgICAgICAgICBkZXBzID0gY2FsbGJhY2s7XFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gcmVsTmFtZTtcXG4gICAgICAgICAgICAgICAgcmVsTmFtZSA9IG51bGw7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgZGVwcyA9IHVuZGVmO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC8vU3VwcG9ydCByZXF1aXJlKFsnYSddKVxcbiAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fTtcXG5cXG4gICAgICAgIC8vSWYgcmVsTmFtZSBpcyBhIGZ1bmN0aW9uLCBpdCBpcyBhbiBlcnJiYWNrIGhhbmRsZXIsXFxuICAgICAgICAvL3NvIHJlbW92ZSBpdC5cXG4gICAgICAgIGlmICh0eXBlb2YgcmVsTmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgICAgICAgICAgIHJlbE5hbWUgPSBmb3JjZVN5bmM7XFxuICAgICAgICAgICAgZm9yY2VTeW5jID0gYWx0O1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy9TaW11bGF0ZSBhc3luYyBjYWxsYmFjaztcXG4gICAgICAgIGlmIChmb3JjZVN5bmMpIHtcXG4gICAgICAgICAgICBtYWluKHVuZGVmLCBkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIC8vVXNpbmcgYSBub24temVybyB2YWx1ZSBiZWNhdXNlIG9mIGNvbmNlcm4gZm9yIHdoYXQgb2xkIGJyb3dzZXJzXFxuICAgICAgICAgICAgLy9kbywgYW5kIGxhdGVzdCBicm93c2VycyBcXFwidXBncmFkZVxcXCIgdG8gNCBpZiBsb3dlciB2YWx1ZSBpcyB1c2VkOlxcbiAgICAgICAgICAgIC8vaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvdGltZXJzLmh0bWwjZG9tLXdpbmRvd3RpbWVycy1zZXR0aW1lb3V0OlxcbiAgICAgICAgICAgIC8vSWYgd2FudCBhIHZhbHVlIGltbWVkaWF0ZWx5LCB1c2UgcmVxdWlyZSgnaWQnKSBpbnN0ZWFkIC0tIHNvbWV0aGluZ1xcbiAgICAgICAgICAgIC8vdGhhdCB3b3JrcyBpbiBhbG1vbmQgb24gdGhlIGdsb2JhbCBsZXZlbCwgYnV0IG5vdCBndWFyYW50ZWVkIGFuZFxcbiAgICAgICAgICAgIC8vdW5saWtlbHkgdG8gd29yayBpbiBvdGhlciBBTUQgaW1wbGVtZW50YXRpb25zLlxcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICAgICAgICBtYWluKHVuZGVmLCBkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSk7XFxuICAgICAgICAgICAgfSwgNCk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICByZXR1cm4gcmVxO1xcbiAgICB9O1xcblxcbiAgICAvKipcXG4gICAgICogSnVzdCBkcm9wcyB0aGUgY29uZmlnIG9uIHRoZSBmbG9vciwgYnV0IHJldHVybnMgcmVxIGluIGNhc2VcXG4gICAgICogdGhlIGNvbmZpZyByZXR1cm4gdmFsdWUgaXMgdXNlZC5cXG4gICAgICovXFxuICAgIHJlcS5jb25maWcgPSBmdW5jdGlvbiAoY2ZnKSB7XFxuICAgICAgICByZXR1cm4gcmVxKGNmZyk7XFxuICAgIH07XFxuXFxuICAgIC8qKlxcbiAgICAgKiBFeHBvc2UgbW9kdWxlIHJlZ2lzdHJ5IGZvciBkZWJ1Z2dpbmcgYW5kIHRvb2xpbmdcXG4gICAgICovXFxuICAgIHJlcXVpcmVqcy5fZGVmaW5lZCA9IGRlZmluZWQ7XFxuXFxuICAgIGRlZmluZSA9IGZ1bmN0aW9uIChuYW1lLCBkZXBzLCBjYWxsYmFjaykge1xcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2VlIGFsbW9uZCBSRUFETUU6IGluY29ycmVjdCBtb2R1bGUgYnVpbGQsIG5vIG1vZHVsZSBuYW1lJyk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvL1RoaXMgbW9kdWxlIG1heSBub3QgaGF2ZSBkZXBlbmRlbmNpZXNcXG4gICAgICAgIGlmICghZGVwcy5zcGxpY2UpIHtcXG4gICAgICAgICAgICAvL2RlcHMgaXMgbm90IGFuIGFycmF5LCBzbyBwcm9iYWJseSBtZWFuc1xcbiAgICAgICAgICAgIC8vYW4gb2JqZWN0IGxpdGVyYWwgb3IgZmFjdG9yeSBmdW5jdGlvbiBmb3JcXG4gICAgICAgICAgICAvL3RoZSB2YWx1ZS4gQWRqdXN0IGFyZ3MuXFxuICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzO1xcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBuYW1lKSAmJiAhaGFzUHJvcCh3YWl0aW5nLCBuYW1lKSkge1xcbiAgICAgICAgICAgIHdhaXRpbmdbbmFtZV0gPSBbbmFtZSwgZGVwcywgY2FsbGJhY2tdO1xcbiAgICAgICAgfVxcbiAgICB9O1xcblxcbiAgICBkZWZpbmUuYW1kID0ge1xcbiAgICAgICAgalF1ZXJ5OiB0cnVlXFxuICAgIH07XFxufSgpKTtcXG5cXG5TMi5yZXF1aXJlanMgPSByZXF1aXJlanM7UzIucmVxdWlyZSA9IHJlcXVpcmU7UzIuZGVmaW5lID0gZGVmaW5lO1xcbn1cXG59KCkpO1xcblMyLmRlZmluZShcXFwiYWxtb25kXFxcIiwgZnVuY3Rpb24oKXt9KTtcXG5cXG4vKiBnbG9iYWwgalF1ZXJ5OmZhbHNlLCAkOmZhbHNlICovXFxyXFxuUzIuZGVmaW5lKCdqcXVlcnknLFtdLGZ1bmN0aW9uICgpIHtcXHJcXG4gIHZhciBfJCA9IGpRdWVyeSB8fCAkO1xcclxcblxcclxcbiAgaWYgKF8kID09IG51bGwgJiYgY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7XFxyXFxuICAgIGNvbnNvbGUuZXJyb3IoXFxyXFxuICAgICAgJ1NlbGVjdDI6IEFuIGluc3RhbmNlIG9mIGpRdWVyeSBvciBhIGpRdWVyeS1jb21wYXRpYmxlIGxpYnJhcnkgd2FzIG5vdCAnICtcXHJcXG4gICAgICAnZm91bmQuIE1ha2Ugc3VyZSB0aGF0IHlvdSBhcmUgaW5jbHVkaW5nIGpRdWVyeSBiZWZvcmUgU2VsZWN0MiBvbiB5b3VyICcgK1xcclxcbiAgICAgICd3ZWIgcGFnZS4nXFxyXFxuICAgICk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICByZXR1cm4gXyQ7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3V0aWxzJyxbXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uICgkKSB7XFxyXFxuICB2YXIgVXRpbHMgPSB7fTtcXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZCA9IGZ1bmN0aW9uIChDaGlsZENsYXNzLCBTdXBlckNsYXNzKSB7XFxyXFxuICAgIHZhciBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gQmFzZUNvbnN0cnVjdG9yICgpIHtcXHJcXG4gICAgICB0aGlzLmNvbnN0cnVjdG9yID0gQ2hpbGRDbGFzcztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBmb3IgKHZhciBrZXkgaW4gU3VwZXJDbGFzcykge1xcclxcbiAgICAgIGlmIChfX2hhc1Byb3AuY2FsbChTdXBlckNsYXNzLCBrZXkpKSB7XFxyXFxuICAgICAgICBDaGlsZENsYXNzW2tleV0gPSBTdXBlckNsYXNzW2tleV07XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIEJhc2VDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBTdXBlckNsYXNzLnByb3RvdHlwZTtcXHJcXG4gICAgQ2hpbGRDbGFzcy5wcm90b3R5cGUgPSBuZXcgQmFzZUNvbnN0cnVjdG9yKCk7XFxyXFxuICAgIENoaWxkQ2xhc3MuX19zdXBlcl9fID0gU3VwZXJDbGFzcy5wcm90b3R5cGU7XFxyXFxuXFxyXFxuICAgIHJldHVybiBDaGlsZENsYXNzO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIGZ1bmN0aW9uIGdldE1ldGhvZHMgKHRoZUNsYXNzKSB7XFxyXFxuICAgIHZhciBwcm90byA9IHRoZUNsYXNzLnByb3RvdHlwZTtcXHJcXG5cXHJcXG4gICAgdmFyIG1ldGhvZHMgPSBbXTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBwcm90bykge1xcclxcbiAgICAgIHZhciBtID0gcHJvdG9bbWV0aG9kTmFtZV07XFxyXFxuXFxyXFxuICAgICAgaWYgKHR5cGVvZiBtICE9PSAnZnVuY3Rpb24nKSB7XFxyXFxuICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG1ldGhvZE5hbWUgPT09ICdjb25zdHJ1Y3RvcicpIHtcXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBtZXRob2RzLnB1c2gobWV0aG9kTmFtZSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIG1ldGhvZHM7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5EZWNvcmF0ZSA9IGZ1bmN0aW9uIChTdXBlckNsYXNzLCBEZWNvcmF0b3JDbGFzcykge1xcclxcbiAgICB2YXIgZGVjb3JhdGVkTWV0aG9kcyA9IGdldE1ldGhvZHMoRGVjb3JhdG9yQ2xhc3MpO1xcclxcbiAgICB2YXIgc3VwZXJNZXRob2RzID0gZ2V0TWV0aG9kcyhTdXBlckNsYXNzKTtcXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gRGVjb3JhdGVkQ2xhc3MgKCkge1xcclxcbiAgICAgIHZhciB1bnNoaWZ0ID0gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQ7XFxyXFxuXFxyXFxuICAgICAgdmFyIGFyZ0NvdW50ID0gRGVjb3JhdG9yQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yLmxlbmd0aDtcXHJcXG5cXHJcXG4gICAgICB2YXIgY2FsbGVkQ29uc3RydWN0b3IgPSBTdXBlckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcXHJcXG5cXHJcXG4gICAgICBpZiAoYXJnQ291bnQgPiAwKSB7XFxyXFxuICAgICAgICB1bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCBTdXBlckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcik7XFxyXFxuXFxyXFxuICAgICAgICBjYWxsZWRDb25zdHJ1Y3RvciA9IERlY29yYXRvckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgY2FsbGVkQ29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBEZWNvcmF0b3JDbGFzcy5kaXNwbGF5TmFtZSA9IFN1cGVyQ2xhc3MuZGlzcGxheU5hbWU7XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIGN0ciAoKSB7XFxyXFxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IERlY29yYXRlZENsYXNzO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIERlY29yYXRlZENsYXNzLnByb3RvdHlwZSA9IG5ldyBjdHIoKTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgbSA9IDA7IG0gPCBzdXBlck1ldGhvZHMubGVuZ3RoOyBtKyspIHtcXHJcXG4gICAgICAgIHZhciBzdXBlck1ldGhvZCA9IHN1cGVyTWV0aG9kc1ttXTtcXHJcXG5cXHJcXG4gICAgICAgIERlY29yYXRlZENsYXNzLnByb3RvdHlwZVtzdXBlck1ldGhvZF0gPVxcclxcbiAgICAgICAgICBTdXBlckNsYXNzLnByb3RvdHlwZVtzdXBlck1ldGhvZF07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGNhbGxlZE1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XFxyXFxuICAgICAgLy8gU3R1YiBvdXQgdGhlIG9yaWdpbmFsIG1ldGhvZCBpZiBpdCdzIG5vdCBkZWNvcmF0aW5nIGFuIGFjdHVhbCBtZXRob2RcXHJcXG4gICAgICB2YXIgb3JpZ2luYWxNZXRob2QgPSBmdW5jdGlvbiAoKSB7fTtcXHJcXG5cXHJcXG4gICAgICBpZiAobWV0aG9kTmFtZSBpbiBEZWNvcmF0ZWRDbGFzcy5wcm90b3R5cGUpIHtcXHJcXG4gICAgICAgIG9yaWdpbmFsTWV0aG9kID0gRGVjb3JhdGVkQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgZGVjb3JhdGVkTWV0aG9kID0gRGVjb3JhdG9yQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdO1xcclxcblxcclxcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgdW5zaGlmdCA9IEFycmF5LnByb3RvdHlwZS51bnNoaWZ0O1xcclxcblxcclxcbiAgICAgICAgdW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgb3JpZ2luYWxNZXRob2QpO1xcclxcblxcclxcbiAgICAgICAgcmV0dXJuIGRlY29yYXRlZE1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcbiAgICAgIH07XFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGVjb3JhdGVkTWV0aG9kcy5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciBkZWNvcmF0ZWRNZXRob2QgPSBkZWNvcmF0ZWRNZXRob2RzW2RdO1xcclxcblxcclxcbiAgICAgIERlY29yYXRlZENsYXNzLnByb3RvdHlwZVtkZWNvcmF0ZWRNZXRob2RdID0gY2FsbGVkTWV0aG9kKGRlY29yYXRlZE1ldGhvZCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIERlY29yYXRlZENsYXNzO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHZhciBPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9ic2VydmFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xcclxcbiAgICB0aGlzLmxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzIHx8IHt9O1xcclxcblxcclxcbiAgICBpZiAoZXZlbnQgaW4gdGhpcy5saXN0ZW5lcnMpIHtcXHJcXG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0ucHVzaChjYWxsYmFjayk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gW2NhbGxiYWNrXTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9ic2VydmFibGUucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcXHJcXG4gICAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xcclxcbiAgICB2YXIgcGFyYW1zID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xcclxcblxcclxcbiAgICB0aGlzLmxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzIHx8IHt9O1xcclxcblxcclxcbiAgICAvLyBQYXJhbXMgc2hvdWxkIGFsd2F5cyBjb21lIGluIGFzIGFuIGFycmF5XFxyXFxuICAgIGlmIChwYXJhbXMgPT0gbnVsbCkge1xcclxcbiAgICAgIHBhcmFtcyA9IFtdO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC8vIElmIHRoZXJlIGFyZSBubyBhcmd1bWVudHMgdG8gdGhlIGV2ZW50LCB1c2UgYSB0ZW1wb3Jhcnkgb2JqZWN0XFxyXFxuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgcGFyYW1zLnB1c2goe30pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC8vIFNldCB0aGUgYF90eXBlYCBvZiB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBldmVudFxcclxcbiAgICBwYXJhbXNbMF0uX3R5cGUgPSBldmVudDtcXHJcXG5cXHJcXG4gICAgaWYgKGV2ZW50IGluIHRoaXMubGlzdGVuZXJzKSB7XFxyXFxuICAgICAgdGhpcy5pbnZva2UodGhpcy5saXN0ZW5lcnNbZXZlbnRdLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICgnKicgaW4gdGhpcy5saXN0ZW5lcnMpIHtcXHJcXG4gICAgICB0aGlzLmludm9rZSh0aGlzLmxpc3RlbmVyc1snKiddLCBhcmd1bWVudHMpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGxpc3RlbmVycywgcGFyYW1zKSB7XFxyXFxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcXHJcXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgcGFyYW1zKTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFV0aWxzLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlO1xcclxcblxcclxcbiAgVXRpbHMuZ2VuZXJhdGVDaGFycyA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcXHJcXG4gICAgdmFyIGNoYXJzID0gJyc7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcXHJcXG4gICAgICB2YXIgcmFuZG9tQ2hhciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2KTtcXHJcXG4gICAgICBjaGFycyArPSByYW5kb21DaGFyLnRvU3RyaW5nKDM2KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gY2hhcnM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuYmluZCA9IGZ1bmN0aW9uIChmdW5jLCBjb250ZXh0KSB7XFxyXFxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xcclxcbiAgICB9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFV0aWxzLl9jb252ZXJ0RGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIGZvciAodmFyIG9yaWdpbmFsS2V5IGluIGRhdGEpIHtcXHJcXG4gICAgICB2YXIga2V5cyA9IG9yaWdpbmFsS2V5LnNwbGl0KCctJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGRhdGFMZXZlbCA9IGRhdGE7XFxyXFxuXFxyXFxuICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAxKSB7XFxyXFxuICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7XFxyXFxuICAgICAgICB2YXIga2V5ID0ga2V5c1trXTtcXHJcXG5cXHJcXG4gICAgICAgIC8vIExvd2VyY2FzZSB0aGUgZmlyc3QgbGV0dGVyXFxyXFxuICAgICAgICAvLyBCeSBkZWZhdWx0LCBkYXNoLXNlcGFyYXRlZCBiZWNvbWVzIGNhbWVsQ2FzZVxcclxcbiAgICAgICAga2V5ID0ga2V5LnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmICghKGtleSBpbiBkYXRhTGV2ZWwpKSB7XFxyXFxuICAgICAgICAgIGRhdGFMZXZlbFtrZXldID0ge307XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBpZiAoayA9PSBrZXlzLmxlbmd0aCAtIDEpIHtcXHJcXG4gICAgICAgICAgZGF0YUxldmVsW2tleV0gPSBkYXRhW29yaWdpbmFsS2V5XTtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIGRhdGFMZXZlbCA9IGRhdGFMZXZlbFtrZXldO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBkZWxldGUgZGF0YVtvcmlnaW5hbEtleV07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIGRhdGE7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuaGFzU2Nyb2xsID0gZnVuY3Rpb24gKGluZGV4LCBlbCkge1xcclxcbiAgICAvLyBBZGFwdGVkIGZyb20gdGhlIGZ1bmN0aW9uIGNyZWF0ZWQgYnkgQFNoYWRvd1NjcmlwdGVyXFxyXFxuICAgIC8vIGFuZCBhZGFwdGVkIGJ5IEBCaWxsQmFycnkgb24gdGhlIFN0YWNrIEV4Y2hhbmdlIENvZGUgUmV2aWV3IHdlYnNpdGUuXFxyXFxuICAgIC8vIFRoZSBvcmlnaW5hbCBjb2RlIGNhbiBiZSBmb3VuZCBhdFxcclxcbiAgICAvLyBodHRwOi8vY29kZXJldmlldy5zdGFja2V4Y2hhbmdlLmNvbS9xLzEzMzM4XFxyXFxuICAgIC8vIGFuZCB3YXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoIHRoZSBTaXp6bGUgc2VsZWN0b3IgZW5naW5lLlxcclxcblxcclxcbiAgICB2YXIgJGVsID0gJChlbCk7XFxyXFxuICAgIHZhciBvdmVyZmxvd1ggPSBlbC5zdHlsZS5vdmVyZmxvd1g7XFxyXFxuICAgIHZhciBvdmVyZmxvd1kgPSBlbC5zdHlsZS5vdmVyZmxvd1k7XFxyXFxuXFxyXFxuICAgIC8vQ2hlY2sgYm90aCB4IGFuZCB5IGRlY2xhcmF0aW9uc1xcclxcbiAgICBpZiAob3ZlcmZsb3dYID09PSBvdmVyZmxvd1kgJiZcXHJcXG4gICAgICAgIChvdmVyZmxvd1kgPT09ICdoaWRkZW4nIHx8IG92ZXJmbG93WSA9PT0gJ3Zpc2libGUnKSkge1xcclxcbiAgICAgIHJldHVybiBmYWxzZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAob3ZlcmZsb3dYID09PSAnc2Nyb2xsJyB8fCBvdmVyZmxvd1kgPT09ICdzY3JvbGwnKSB7XFxyXFxuICAgICAgcmV0dXJuIHRydWU7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuICgkZWwuaW5uZXJIZWlnaHQoKSA8IGVsLnNjcm9sbEhlaWdodCB8fFxcclxcbiAgICAgICRlbC5pbm5lcldpZHRoKCkgPCBlbC5zY3JvbGxXaWR0aCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuZXNjYXBlTWFya3VwID0gZnVuY3Rpb24gKG1hcmt1cCkge1xcclxcbiAgICB2YXIgcmVwbGFjZU1hcCA9IHtcXHJcXG4gICAgICAnXFxcXFxcXFwnOiAnJiM5MjsnLFxcclxcbiAgICAgICcmJzogJyZhbXA7JyxcXHJcXG4gICAgICAnPCc6ICcmbHQ7JyxcXHJcXG4gICAgICAnPic6ICcmZ3Q7JyxcXHJcXG4gICAgICAnXFxcIic6ICcmcXVvdDsnLFxcclxcbiAgICAgICdcXFxcJyc6ICcmIzM5OycsXFxyXFxuICAgICAgJy8nOiAnJiM0NzsnXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIC8vIERvIG5vdCB0cnkgdG8gZXNjYXBlIHRoZSBtYXJrdXAgaWYgaXQncyBub3QgYSBzdHJpbmdcXHJcXG4gICAgaWYgKHR5cGVvZiBtYXJrdXAgIT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgcmV0dXJuIG1hcmt1cDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gU3RyaW5nKG1hcmt1cCkucmVwbGFjZSgvWyY8PlxcXCInXFxcXC9cXFxcXFxcXF0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XFxyXFxuICAgICAgcmV0dXJuIHJlcGxhY2VNYXBbbWF0Y2hdO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBBcHBlbmQgYW4gYXJyYXkgb2YgalF1ZXJ5IG5vZGVzIHRvIGEgZ2l2ZW4gZWxlbWVudC5cXHJcXG4gIFV0aWxzLmFwcGVuZE1hbnkgPSBmdW5jdGlvbiAoJGVsZW1lbnQsICRub2Rlcykge1xcclxcbiAgICAvLyBqUXVlcnkgMS43LnggZG9lcyBub3Qgc3VwcG9ydCAkLmZuLmFwcGVuZCgpIHdpdGggYW4gYXJyYXlcXHJcXG4gICAgLy8gRmFsbCBiYWNrIHRvIGEgalF1ZXJ5IG9iamVjdCBjb2xsZWN0aW9uIHVzaW5nICQuZm4uYWRkKClcXHJcXG4gICAgaWYgKCQuZm4uanF1ZXJ5LnN1YnN0cigwLCAzKSA9PT0gJzEuNycpIHtcXHJcXG4gICAgICB2YXIgJGpxTm9kZXMgPSAkKCk7XFxyXFxuXFxyXFxuICAgICAgJC5tYXAoJG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xcclxcbiAgICAgICAgJGpxTm9kZXMgPSAkanFOb2Rlcy5hZGQobm9kZSk7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgJG5vZGVzID0gJGpxTm9kZXM7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgJGVsZW1lbnQuYXBwZW5kKCRub2Rlcyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFV0aWxzO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9yZXN1bHRzJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBVdGlscykge1xcclxcbiAgZnVuY3Rpb24gUmVzdWx0cyAoJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKSB7XFxyXFxuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcXHJcXG4gICAgdGhpcy5kYXRhID0gZGF0YUFkYXB0ZXI7XFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XFxyXFxuXFxyXFxuICAgIFJlc3VsdHMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoUmVzdWx0cywgVXRpbHMuT2JzZXJ2YWJsZSk7XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkcmVzdWx0cyA9ICQoXFxyXFxuICAgICAgJzx1bCBjbGFzcz1cXFwic2VsZWN0Mi1yZXN1bHRzX19vcHRpb25zXFxcIiByb2xlPVxcXCJ0cmVlXFxcIj48L3VsPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ211bHRpcGxlJykpIHtcXHJcXG4gICAgICAkcmVzdWx0cy5hdHRyKCdhcmlhLW11bHRpc2VsZWN0YWJsZScsICd0cnVlJyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cyA9ICRyZXN1bHRzO1xcclxcblxcclxcbiAgICByZXR1cm4gJHJlc3VsdHM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuZW1wdHkoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgdmFyIGVzY2FwZU1hcmt1cCA9IHRoaXMub3B0aW9ucy5nZXQoJ2VzY2FwZU1hcmt1cCcpO1xcclxcblxcclxcbiAgICB0aGlzLmNsZWFyKCk7XFxyXFxuICAgIHRoaXMuaGlkZUxvYWRpbmcoKTtcXHJcXG5cXHJcXG4gICAgdmFyICRtZXNzYWdlID0gJChcXHJcXG4gICAgICAnPGxpIHJvbGU9XFxcInRyZWVpdGVtXFxcIiBhcmlhLWxpdmU9XFxcImFzc2VydGl2ZVxcXCInICtcXHJcXG4gICAgICAnIGNsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvblxcXCI+PC9saT4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHZhciBtZXNzYWdlID0gdGhpcy5vcHRpb25zLmdldCgndHJhbnNsYXRpb25zJykuZ2V0KHBhcmFtcy5tZXNzYWdlKTtcXHJcXG5cXHJcXG4gICAgJG1lc3NhZ2UuYXBwZW5kKFxcclxcbiAgICAgIGVzY2FwZU1hcmt1cChcXHJcXG4gICAgICAgIG1lc3NhZ2UocGFyYW1zLmFyZ3MpXFxyXFxuICAgICAgKVxcclxcbiAgICApO1xcclxcblxcclxcbiAgICAkbWVzc2FnZVswXS5jbGFzc05hbWUgKz0gJyBzZWxlY3QyLXJlc3VsdHNfX21lc3NhZ2UnO1xcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzLmFwcGVuZCgkbWVzc2FnZSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuaGlkZU1lc3NhZ2VzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLiRyZXN1bHRzLmZpbmQoJy5zZWxlY3QyLXJlc3VsdHNfX21lc3NhZ2UnKS5yZW1vdmUoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB0aGlzLmhpZGVMb2FkaW5nKCk7XFxyXFxuXFxyXFxuICAgIHZhciAkb3B0aW9ucyA9IFtdO1xcclxcblxcclxcbiAgICBpZiAoZGF0YS5yZXN1bHRzID09IG51bGwgfHwgZGF0YS5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIGlmICh0aGlzLiRyZXN1bHRzLmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICB0aGlzLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgICAgbWVzc2FnZTogJ25vUmVzdWx0cydcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGF0YS5yZXN1bHRzID0gdGhpcy5zb3J0KGRhdGEucmVzdWx0cyk7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5yZXN1bHRzLmxlbmd0aDsgZCsrKSB7XFxyXFxuICAgICAgdmFyIGl0ZW0gPSBkYXRhLnJlc3VsdHNbZF07XFxyXFxuXFxyXFxuICAgICAgdmFyICRvcHRpb24gPSB0aGlzLm9wdGlvbihpdGVtKTtcXHJcXG5cXHJcXG4gICAgICAkb3B0aW9ucy5wdXNoKCRvcHRpb24pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuYXBwZW5kKCRvcHRpb25zKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5wb3NpdGlvbiA9IGZ1bmN0aW9uICgkcmVzdWx0cywgJGRyb3Bkb3duKSB7XFxyXFxuICAgIHZhciAkcmVzdWx0c0NvbnRhaW5lciA9ICRkcm9wZG93bi5maW5kKCcuc2VsZWN0Mi1yZXN1bHRzJyk7XFxyXFxuICAgICRyZXN1bHRzQ29udGFpbmVyLmFwcGVuZCgkcmVzdWx0cyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBzb3J0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdzb3J0ZXInKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIHNvcnRlcihkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5oaWdobGlnaHRGaXJzdEl0ZW0gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkb3B0aW9ucyA9IHRoaXMuJHJlc3VsdHNcXHJcXG4gICAgICAuZmluZCgnLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uW2FyaWEtc2VsZWN0ZWRdJyk7XFxyXFxuXFxyXFxuICAgIHZhciAkc2VsZWN0ZWQgPSAkb3B0aW9ucy5maWx0ZXIoJ1thcmlhLXNlbGVjdGVkPXRydWVdJyk7XFxyXFxuXFxyXFxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgc2VsZWN0ZWQgb3B0aW9uc1xcclxcbiAgICBpZiAoJHNlbGVjdGVkLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgc2VsZWN0ZWQgb3B0aW9ucywgaGlnaGxpZ2h0IHRoZSBmaXJzdFxcclxcbiAgICAgICRzZWxlY3RlZC5maXJzdCgpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gc2VsZWN0ZWQgb3B0aW9ucywgaGlnaGxpZ2h0IHRoZSBmaXJzdCBvcHRpb25cXHJcXG4gICAgICAvLyBpbiB0aGUgZHJvcGRvd25cXHJcXG4gICAgICAkb3B0aW9ucy5maXJzdCgpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLmVuc3VyZUhpZ2hsaWdodFZpc2libGUoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5zZXRDbGFzc2VzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuZGF0YS5jdXJyZW50KGZ1bmN0aW9uIChzZWxlY3RlZCkge1xcclxcbiAgICAgIHZhciBzZWxlY3RlZElkcyA9ICQubWFwKHNlbGVjdGVkLCBmdW5jdGlvbiAocykge1xcclxcbiAgICAgICAgcmV0dXJuIHMuaWQudG9TdHJpbmcoKTtcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJG9wdGlvbnMgPSBzZWxmLiRyZXN1bHRzXFxyXFxuICAgICAgICAuZmluZCgnLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uW2FyaWEtc2VsZWN0ZWRdJyk7XFxyXFxuXFxyXFxuICAgICAgJG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgJG9wdGlvbiA9ICQodGhpcyk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgaXRlbSA9ICQuZGF0YSh0aGlzLCAnZGF0YScpO1xcclxcblxcclxcbiAgICAgICAgLy8gaWQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgc3RyaW5nIHdoZW4gY29tcGFyaW5nXFxyXFxuICAgICAgICB2YXIgaWQgPSAnJyArIGl0ZW0uaWQ7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoKGl0ZW0uZWxlbWVudCAhPSBudWxsICYmIGl0ZW0uZWxlbWVudC5zZWxlY3RlZCkgfHxcXHJcXG4gICAgICAgICAgICAoaXRlbS5lbGVtZW50ID09IG51bGwgJiYgJC5pbkFycmF5KGlkLCBzZWxlY3RlZElkcykgPiAtMSkpIHtcXHJcXG4gICAgICAgICAgJG9wdGlvbi5hdHRyKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcXHJcXG4gICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICRvcHRpb24uYXR0cignYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5zaG93TG9hZGluZyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgdGhpcy5oaWRlTG9hZGluZygpO1xcclxcblxcclxcbiAgICB2YXIgbG9hZGluZ01vcmUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0cmFuc2xhdGlvbnMnKS5nZXQoJ3NlYXJjaGluZycpO1xcclxcblxcclxcbiAgICB2YXIgbG9hZGluZyA9IHtcXHJcXG4gICAgICBkaXNhYmxlZDogdHJ1ZSxcXHJcXG4gICAgICBsb2FkaW5nOiB0cnVlLFxcclxcbiAgICAgIHRleHQ6IGxvYWRpbmdNb3JlKHBhcmFtcylcXHJcXG4gICAgfTtcXHJcXG4gICAgdmFyICRsb2FkaW5nID0gdGhpcy5vcHRpb24obG9hZGluZyk7XFxyXFxuICAgICRsb2FkaW5nLmNsYXNzTmFtZSArPSAnIGxvYWRpbmctcmVzdWx0cyc7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHJlc3VsdHMucHJlcGVuZCgkbG9hZGluZyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuaGlkZUxvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuZmluZCgnLmxvYWRpbmctcmVzdWx0cycpLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xcclxcbiAgICBvcHRpb24uY2xhc3NOYW1lID0gJ3NlbGVjdDItcmVzdWx0c19fb3B0aW9uJztcXHJcXG5cXHJcXG4gICAgdmFyIGF0dHJzID0ge1xcclxcbiAgICAgICdyb2xlJzogJ3RyZWVpdGVtJyxcXHJcXG4gICAgICAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZSdcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcXHJcXG4gICAgICBkZWxldGUgYXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXTtcXHJcXG4gICAgICBhdHRyc1snYXJpYS1kaXNhYmxlZCddID0gJ3RydWUnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLmlkID09IG51bGwpIHtcXHJcXG4gICAgICBkZWxldGUgYXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5fcmVzdWx0SWQgIT0gbnVsbCkge1xcclxcbiAgICAgIG9wdGlvbi5pZCA9IGRhdGEuX3Jlc3VsdElkO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLnRpdGxlKSB7XFxyXFxuICAgICAgb3B0aW9uLnRpdGxlID0gZGF0YS50aXRsZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xcclxcbiAgICAgIGF0dHJzLnJvbGUgPSAnZ3JvdXAnO1xcclxcbiAgICAgIGF0dHJzWydhcmlhLWxhYmVsJ10gPSBkYXRhLnRleHQ7XFxyXFxuICAgICAgZGVsZXRlIGF0dHJzWydhcmlhLXNlbGVjdGVkJ107XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgYXR0ciBpbiBhdHRycykge1xcclxcbiAgICAgIHZhciB2YWwgPSBhdHRyc1thdHRyXTtcXHJcXG5cXHJcXG4gICAgICBvcHRpb24uc2V0QXR0cmlidXRlKGF0dHIsIHZhbCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuY2hpbGRyZW4pIHtcXHJcXG4gICAgICB2YXIgJG9wdGlvbiA9ICQob3B0aW9uKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHJvbmcnKTtcXHJcXG4gICAgICBsYWJlbC5jbGFzc05hbWUgPSAnc2VsZWN0Mi1yZXN1bHRzX19ncm91cCc7XFxyXFxuXFxyXFxuICAgICAgdmFyICRsYWJlbCA9ICQobGFiZWwpO1xcclxcbiAgICAgIHRoaXMudGVtcGxhdGUoZGF0YSwgbGFiZWwpO1xcclxcblxcclxcbiAgICAgIHZhciAkY2hpbGRyZW4gPSBbXTtcXHJcXG5cXHJcXG4gICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGRhdGEuY2hpbGRyZW4ubGVuZ3RoOyBjKyspIHtcXHJcXG4gICAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XFxyXFxuXFxyXFxuICAgICAgICB2YXIgJGNoaWxkID0gdGhpcy5vcHRpb24oY2hpbGQpO1xcclxcblxcclxcbiAgICAgICAgJGNoaWxkcmVuLnB1c2goJGNoaWxkKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyICRjaGlsZHJlbkNvbnRhaW5lciA9ICQoJzx1bD48L3VsPicsIHtcXHJcXG4gICAgICAgICdjbGFzcyc6ICdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbnMgc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25zLS1uZXN0ZWQnXFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgJGNoaWxkcmVuQ29udGFpbmVyLmFwcGVuZCgkY2hpbGRyZW4pO1xcclxcblxcclxcbiAgICAgICRvcHRpb24uYXBwZW5kKGxhYmVsKTtcXHJcXG4gICAgICAkb3B0aW9uLmFwcGVuZCgkY2hpbGRyZW5Db250YWluZXIpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHRoaXMudGVtcGxhdGUoZGF0YSwgb3B0aW9uKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAkLmRhdGEob3B0aW9uLCAnZGF0YScsIGRhdGEpO1xcclxcblxcclxcbiAgICByZXR1cm4gb3B0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1yZXN1bHRzJztcXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5hdHRyKCdpZCcsIGlkKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmFsbCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLmNsZWFyKCk7XFxyXFxuICAgICAgc2VsZi5hcHBlbmQocGFyYW1zLmRhdGEpO1xcclxcblxcclxcbiAgICAgIGlmIChjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHNlbGYuc2V0Q2xhc3NlcygpO1xcclxcbiAgICAgICAgc2VsZi5oaWdobGlnaHRGaXJzdEl0ZW0oKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YXBwZW5kJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuYXBwZW5kKHBhcmFtcy5kYXRhKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoY29udGFpbmVyLmlzT3BlbigpKSB7XFxyXFxuICAgICAgICBzZWxmLnNldENsYXNzZXMoKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3F1ZXJ5JywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuaGlkZU1lc3NhZ2VzKCk7XFxyXFxuICAgICAgc2VsZi5zaG93TG9hZGluZyhwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKCFjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XFxyXFxuICAgICAgc2VsZi5oaWdobGlnaHRGaXJzdEl0ZW0oKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigndW5zZWxlY3QnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKCFjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XFxyXFxuICAgICAgc2VsZi5oaWdobGlnaHRGaXJzdEl0ZW0oKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBXaGVuIHRoZSBkcm9wZG93biBpcyBvcGVuLCBhcmlhLWV4cGVuZGVkPVxcXCJ0cnVlXFxcIlxcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XFxyXFxuICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xcclxcblxcclxcbiAgICAgIHNlbGYuc2V0Q2xhc3NlcygpO1xcclxcbiAgICAgIHNlbGYuZW5zdXJlSGlnaGxpZ2h0VmlzaWJsZSgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBXaGVuIHRoZSBkcm9wZG93biBpcyBjbG9zZWQsIGFyaWEtZXhwZW5kZWQ9XFxcImZhbHNlXFxcIlxcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMucmVtb3ZlQXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6dG9nZ2xlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSBzZWxmLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICAgIGlmICgkaGlnaGxpZ2h0ZWQubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgICRoaWdobGlnaHRlZC50cmlnZ2VyKCdtb3VzZXVwJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6c2VsZWN0JywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSBzZWxmLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICAgIGlmICgkaGlnaGxpZ2h0ZWQubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBkYXRhID0gJGhpZ2hsaWdodGVkLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoJGhpZ2hsaWdodGVkLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnKSA9PSAndHJ1ZScpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcignY2xvc2UnLCB7fSk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0Jywge1xcclxcbiAgICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6cHJldmlvdXMnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRoaWdobGlnaHRlZCA9IHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XFxyXFxuXFxyXFxuICAgICAgdmFyICRvcHRpb25zID0gc2VsZi4kcmVzdWx0cy5maW5kKCdbYXJpYS1zZWxlY3RlZF0nKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgY3VycmVudEluZGV4ID0gJG9wdGlvbnMuaW5kZXgoJGhpZ2hsaWdodGVkKTtcXHJcXG5cXHJcXG4gICAgICAvLyBJZiB3ZSBhcmUgYWxyZWFkeSBhdCB0ZSB0b3AsIGRvbid0IG1vdmUgZnVydGhlclxcclxcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IDApIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyIG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCAtIDE7XFxyXFxuXFxyXFxuICAgICAgLy8gSWYgbm9uZSBhcmUgaGlnaGxpZ2h0ZWQsIGhpZ2hsaWdodCB0aGUgZmlyc3RcXHJcXG4gICAgICBpZiAoJGhpZ2hsaWdodGVkLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgICAgbmV4dEluZGV4ID0gMDtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyICRuZXh0ID0gJG9wdGlvbnMuZXEobmV4dEluZGV4KTtcXHJcXG5cXHJcXG4gICAgICAkbmV4dC50cmlnZ2VyKCdtb3VzZWVudGVyJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGN1cnJlbnRPZmZzZXQgPSBzZWxmLiRyZXN1bHRzLm9mZnNldCgpLnRvcDtcXHJcXG4gICAgICB2YXIgbmV4dFRvcCA9ICRuZXh0Lm9mZnNldCgpLnRvcDtcXHJcXG4gICAgICB2YXIgbmV4dE9mZnNldCA9IHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKCkgKyAobmV4dFRvcCAtIGN1cnJlbnRPZmZzZXQpO1xcclxcblxcclxcbiAgICAgIGlmIChuZXh0SW5kZXggPT09IDApIHtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcbiAgICAgIH0gZWxzZSBpZiAobmV4dFRvcCAtIGN1cnJlbnRPZmZzZXQgPCAwKSB7XFxyXFxuICAgICAgICBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcChuZXh0T2Zmc2V0KTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6bmV4dCcsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgJGhpZ2hsaWdodGVkID0gc2VsZi5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJG9wdGlvbnMgPSBzZWxmLiRyZXN1bHRzLmZpbmQoJ1thcmlhLXNlbGVjdGVkXScpO1xcclxcblxcclxcbiAgICAgIHZhciBjdXJyZW50SW5kZXggPSAkb3B0aW9ucy5pbmRleCgkaGlnaGxpZ2h0ZWQpO1xcclxcblxcclxcbiAgICAgIHZhciBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggKyAxO1xcclxcblxcclxcbiAgICAgIC8vIElmIHdlIGFyZSBhdCB0aGUgbGFzdCBvcHRpb24sIHN0YXkgdGhlcmVcXHJcXG4gICAgICBpZiAobmV4dEluZGV4ID49ICRvcHRpb25zLmxlbmd0aCkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgJG5leHQgPSAkb3B0aW9ucy5lcShuZXh0SW5kZXgpO1xcclxcblxcclxcbiAgICAgICRuZXh0LnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgY3VycmVudE9mZnNldCA9IHNlbGYuJHJlc3VsdHMub2Zmc2V0KCkudG9wICtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcbiAgICAgIHZhciBuZXh0Qm90dG9tID0gJG5leHQub2Zmc2V0KCkudG9wICsgJG5leHQub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcbiAgICAgIHZhciBuZXh0T2Zmc2V0ID0gc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoKSArIG5leHRCb3R0b20gLSBjdXJyZW50T2Zmc2V0O1xcclxcblxcclxcbiAgICAgIGlmIChuZXh0SW5kZXggPT09IDApIHtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcbiAgICAgIH0gZWxzZSBpZiAobmV4dEJvdHRvbSA+IGN1cnJlbnRPZmZzZXQpIHtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKG5leHRPZmZzZXQpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpmb2N1cycsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBwYXJhbXMuZWxlbWVudC5hZGRDbGFzcygnc2VsZWN0Mi1yZXN1bHRzX19vcHRpb24tLWhpZ2hsaWdodGVkJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6bWVzc2FnZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLmRpc3BsYXlNZXNzYWdlKHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBpZiAoJC5mbi5tb3VzZXdoZWVsKSB7XFxyXFxuICAgICAgdGhpcy4kcmVzdWx0cy5vbignbW91c2V3aGVlbCcsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICB2YXIgdG9wID0gc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBib3R0b20gPSBzZWxmLiRyZXN1bHRzLmdldCgwKS5zY3JvbGxIZWlnaHQgLSB0b3AgKyBlLmRlbHRhWTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBpc0F0VG9wID0gZS5kZWx0YVkgPiAwICYmIHRvcCAtIGUuZGVsdGFZIDw9IDA7XFxyXFxuICAgICAgICB2YXIgaXNBdEJvdHRvbSA9IGUuZGVsdGFZIDwgMCAmJiBib3R0b20gPD0gc2VsZi4kcmVzdWx0cy5oZWlnaHQoKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChpc0F0VG9wKSB7XFxyXFxuICAgICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcblxcclxcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuICAgICAgICB9IGVsc2UgaWYgKGlzQXRCb3R0b20pIHtcXHJcXG4gICAgICAgICAgc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoXFxyXFxuICAgICAgICAgICAgc2VsZi4kcmVzdWx0cy5nZXQoMCkuc2Nyb2xsSGVpZ2h0IC0gc2VsZi4kcmVzdWx0cy5oZWlnaHQoKVxcclxcbiAgICAgICAgICApO1xcclxcblxcclxcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5vbignbW91c2V1cCcsICcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF0nLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xcclxcblxcclxcbiAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAgIGlmICgkdGhpcy5hdHRyKCdhcmlhLXNlbGVjdGVkJykgPT09ICd0cnVlJykge1xcclxcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5nZXQoJ211bHRpcGxlJykpIHtcXHJcXG4gICAgICAgICAgc2VsZi50cmlnZ2VyKCd1bnNlbGVjdCcsIHtcXHJcXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnQsXFxyXFxuICAgICAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICAgICAgICB9KTtcXHJcXG4gICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcignY2xvc2UnLCB7fSk7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0Jywge1xcclxcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0LFxcclxcbiAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5vbignbW91c2VlbnRlcicsICcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF0nLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAgIHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKClcXHJcXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlnaGxpZ2h0ZWQnKTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6Zm9jdXMnLCB7XFxyXFxuICAgICAgICBkYXRhOiBkYXRhLFxcclxcbiAgICAgICAgZWxlbWVudDogJCh0aGlzKVxcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5nZXRIaWdobGlnaHRlZFJlc3VsdHMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSB0aGlzLiRyZXN1bHRzXFxyXFxuICAgIC5maW5kKCcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb24tLWhpZ2hsaWdodGVkJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkaGlnaGxpZ2h0ZWQ7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5yZW1vdmUoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5lbnN1cmVIaWdobGlnaHRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJGhpZ2hsaWdodGVkID0gdGhpcy5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTtcXHJcXG5cXHJcXG4gICAgaWYgKCRoaWdobGlnaHRlZC5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRvcHRpb25zID0gdGhpcy4kcmVzdWx0cy5maW5kKCdbYXJpYS1zZWxlY3RlZF0nKTtcXHJcXG5cXHJcXG4gICAgdmFyIGN1cnJlbnRJbmRleCA9ICRvcHRpb25zLmluZGV4KCRoaWdobGlnaHRlZCk7XFxyXFxuXFxyXFxuICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gdGhpcy4kcmVzdWx0cy5vZmZzZXQoKS50b3A7XFxyXFxuICAgIHZhciBuZXh0VG9wID0gJGhpZ2hsaWdodGVkLm9mZnNldCgpLnRvcDtcXHJcXG4gICAgdmFyIG5leHRPZmZzZXQgPSB0aGlzLiRyZXN1bHRzLnNjcm9sbFRvcCgpICsgKG5leHRUb3AgLSBjdXJyZW50T2Zmc2V0KTtcXHJcXG5cXHJcXG4gICAgdmFyIG9mZnNldERlbHRhID0gbmV4dFRvcCAtIGN1cnJlbnRPZmZzZXQ7XFxyXFxuICAgIG5leHRPZmZzZXQgLT0gJGhpZ2hsaWdodGVkLm91dGVySGVpZ2h0KGZhbHNlKSAqIDI7XFxyXFxuXFxyXFxuICAgIGlmIChjdXJyZW50SW5kZXggPD0gMikge1xcclxcbiAgICAgIHRoaXMuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcbiAgICB9IGVsc2UgaWYgKG9mZnNldERlbHRhID4gdGhpcy4kcmVzdWx0cy5vdXRlckhlaWdodCgpIHx8IG9mZnNldERlbHRhIDwgMCkge1xcclxcbiAgICAgIHRoaXMuJHJlc3VsdHMuc2Nyb2xsVG9wKG5leHRPZmZzZXQpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUudGVtcGxhdGUgPSBmdW5jdGlvbiAocmVzdWx0LCBjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHRlbXBsYXRlID0gdGhpcy5vcHRpb25zLmdldCgndGVtcGxhdGVSZXN1bHQnKTtcXHJcXG4gICAgdmFyIGVzY2FwZU1hcmt1cCA9IHRoaXMub3B0aW9ucy5nZXQoJ2VzY2FwZU1hcmt1cCcpO1xcclxcblxcclxcbiAgICB2YXIgY29udGVudCA9IHRlbXBsYXRlKHJlc3VsdCwgY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgaWYgKGNvbnRlbnQgPT0gbnVsbCkge1xcclxcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xcclxcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xcclxcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBlc2NhcGVNYXJrdXAoY29udGVudCk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgJChjb250YWluZXIpLmFwcGVuZChjb250ZW50KTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBSZXN1bHRzO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9rZXlzJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgdmFyIEtFWVMgPSB7XFxyXFxuICAgIEJBQ0tTUEFDRTogOCxcXHJcXG4gICAgVEFCOiA5LFxcclxcbiAgICBFTlRFUjogMTMsXFxyXFxuICAgIFNISUZUOiAxNixcXHJcXG4gICAgQ1RSTDogMTcsXFxyXFxuICAgIEFMVDogMTgsXFxyXFxuICAgIEVTQzogMjcsXFxyXFxuICAgIFNQQUNFOiAzMixcXHJcXG4gICAgUEFHRV9VUDogMzMsXFxyXFxuICAgIFBBR0VfRE9XTjogMzQsXFxyXFxuICAgIEVORDogMzUsXFxyXFxuICAgIEhPTUU6IDM2LFxcclxcbiAgICBMRUZUOiAzNyxcXHJcXG4gICAgVVA6IDM4LFxcclxcbiAgICBSSUdIVDogMzksXFxyXFxuICAgIERPV046IDQwLFxcclxcbiAgICBERUxFVEU6IDQ2XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEtFWVM7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9iYXNlJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi91dGlscycsXFxyXFxuICAnLi4va2V5cydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMsIEtFWVMpIHtcXHJcXG4gIGZ1bmN0aW9uIEJhc2VTZWxlY3Rpb24gKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcXHJcXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcXHJcXG5cXHJcXG4gICAgQmFzZVNlbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChCYXNlU2VsZWN0aW9uLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRzZWxlY3Rpb24gPSAkKFxcclxcbiAgICAgICc8c3BhbiBjbGFzcz1cXFwic2VsZWN0Mi1zZWxlY3Rpb25cXFwiIHJvbGU9XFxcImNvbWJvYm94XFxcIiAnICtcXHJcXG4gICAgICAnIGFyaWEtaGFzcG9wdXA9XFxcInRydWVcXFwiIGFyaWEtZXhwYW5kZWQ9XFxcImZhbHNlXFxcIj4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5fdGFiaW5kZXggPSAwO1xcclxcblxcclxcbiAgICBpZiAodGhpcy4kZWxlbWVudC5kYXRhKCdvbGQtdGFiaW5kZXgnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5fdGFiaW5kZXggPSB0aGlzLiRlbGVtZW50LmRhdGEoJ29sZC10YWJpbmRleCcpO1xcclxcbiAgICB9IGVsc2UgaWYgKHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5fdGFiaW5kZXggPSB0aGlzLiRlbGVtZW50LmF0dHIoJ3RhYmluZGV4Jyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5hdHRyKCd0aXRsZScsIHRoaXMuJGVsZW1lbnQuYXR0cigndGl0bGUnKSk7XFxyXFxuICAgICRzZWxlY3Rpb24uYXR0cigndGFiaW5kZXgnLCB0aGlzLl90YWJpbmRleCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbiA9ICRzZWxlY3Rpb247XFxyXFxuXFxyXFxuICAgIHJldHVybiAkc2VsZWN0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1jb250YWluZXInO1xcclxcbiAgICB2YXIgcmVzdWx0c0lkID0gY29udGFpbmVyLmlkICsgJy1yZXN1bHRzJztcXHJcXG5cXHJcXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdmb2N1cycsIGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2JsdXInLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi5faGFuZGxlQmx1cihldnQpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcigna2V5cHJlc3MnLCBldnQpO1xcclxcblxcclxcbiAgICAgIGlmIChldnQud2hpY2ggPT09IEtFWVMuU1BBQ0UpIHtcXHJcXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpmb2N1cycsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgcGFyYW1zLmRhdGEuX3Jlc3VsdElkKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignc2VsZWN0aW9uOnVwZGF0ZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLnVwZGF0ZShwYXJhbXMuZGF0YSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgLy8gV2hlbiB0aGUgZHJvcGRvd24gaXMgb3BlbiwgYXJpYS1leHBhbmRlZD1cXFwidHJ1ZVxcXCJcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ2FyaWEtb3ducycsIHJlc3VsdHNJZCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fYXR0YWNoQ2xvc2VIYW5kbGVyKGNvbnRhaW5lcik7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIGNsb3NlZCwgYXJpYS1leHBhbmRlZD1cXFwiZmFsc2VcXFwiXFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24ucmVtb3ZlQXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jyk7XFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLnJlbW92ZUF0dHIoJ2FyaWEtb3ducycpO1xcclxcblxcclxcbiAgICAgIHNlbGYuJHNlbGVjdGlvbi5mb2N1cygpO1xcclxcblxcclxcbiAgICAgIHNlbGYuX2RldGFjaENsb3NlSGFuZGxlcihjb250YWluZXIpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdlbmFibGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4Jywgc2VsZi5fdGFiaW5kZXgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJHNlbGVjdGlvbi5hdHRyKCd0YWJpbmRleCcsICctMScpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5faGFuZGxlQmx1ciA9IGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIGRlbGF5ZWQgYXMgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIHRoZSBib2R5IHdoZW4gdGhlIHRhYlxcclxcbiAgICAvLyBrZXkgaXMgcHJlc3NlZCwgcG9zc2libHkgYWxvbmcgd2l0aCBvdGhlcnMuXFxyXFxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBEb24ndCB0cmlnZ2VyIGBibHVyYCBpZiB0aGUgZm9jdXMgaXMgc3RpbGwgaW4gdGhlIHNlbGVjdGlvblxcclxcbiAgICAgIGlmIChcXHJcXG4gICAgICAgIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IHNlbGYuJHNlbGVjdGlvblswXSkgfHxcXHJcXG4gICAgICAgICgkLmNvbnRhaW5zKHNlbGYuJHNlbGVjdGlvblswXSwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpXFxyXFxuICAgICAgKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcignYmx1cicsIGV2dCk7XFxyXFxuICAgIH0sIDEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLl9hdHRhY2hDbG9zZUhhbmRsZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgJChkb2N1bWVudC5ib2R5KS5vbignbW91c2Vkb3duLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZCwgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xcclxcblxcclxcbiAgICAgIHZhciAkc2VsZWN0ID0gJHRhcmdldC5jbG9zZXN0KCcuc2VsZWN0MicpO1xcclxcblxcclxcbiAgICAgIHZhciAkYWxsID0gJCgnLnNlbGVjdDIuc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcXHJcXG5cXHJcXG4gICAgICAkYWxsLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmICh0aGlzID09ICRzZWxlY3RbMF0pIHtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJHRoaXMuZGF0YSgnZWxlbWVudCcpO1xcclxcblxcclxcbiAgICAgICAgJGVsZW1lbnQuc2VsZWN0MignY2xvc2UnKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuX2RldGFjaENsb3NlSGFuZGxlciA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcXHJcXG4gICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ21vdXNlZG93bi5zZWxlY3QyLicgKyBjb250YWluZXIuaWQpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKCRzZWxlY3Rpb24sICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyICRzZWxlY3Rpb25Db250YWluZXIgPSAkY29udGFpbmVyLmZpbmQoJy5zZWxlY3Rpb24nKTtcXHJcXG4gICAgJHNlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmQoJHNlbGVjdGlvbik7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy5fZGV0YWNoQ2xvc2VIYW5kbGVyKHRoaXMuY29udGFpbmVyKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgdXBkYXRlYCBtZXRob2QgbXVzdCBiZSBkZWZpbmVkIGluIGNoaWxkIGNsYXNzZXMuJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEJhc2VTZWxlY3Rpb247XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9zaW5nbGUnLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4vYmFzZScsXFxyXFxuICAnLi4vdXRpbHMnLFxcclxcbiAgJy4uL2tleXMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIEJhc2VTZWxlY3Rpb24sIFV0aWxzLCBLRVlTKSB7XFxyXFxuICBmdW5jdGlvbiBTaW5nbGVTZWxlY3Rpb24gKCkge1xcclxcbiAgICBTaW5nbGVTZWxlY3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoU2luZ2xlU2VsZWN0aW9uLCBCYXNlU2VsZWN0aW9uKTtcXHJcXG5cXHJcXG4gIFNpbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJHNlbGVjdGlvbiA9IFNpbmdsZVNlbGVjdGlvbi5fX3N1cGVyX18ucmVuZGVyLmNhbGwodGhpcyk7XFxyXFxuXFxyXFxuICAgICRzZWxlY3Rpb24uYWRkQ2xhc3MoJ3NlbGVjdDItc2VsZWN0aW9uLS1zaW5nbGUnKTtcXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5odG1sKFxcclxcbiAgICAgICc8c3BhbiBjbGFzcz1cXFwic2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkXFxcIj48L3NwYW4+JyArXFxyXFxuICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fYXJyb3dcXFwiIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCI+JyArXFxyXFxuICAgICAgICAnPGIgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIj48L2I+JyArXFxyXFxuICAgICAgJzwvc3Bhbj4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkc2VsZWN0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNpbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBTaW5nbGVTZWxlY3Rpb24uX19zdXBlcl9fLmJpbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG5cXHJcXG4gICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1jb250YWluZXInO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmF0dHIoJ2lkJywgaWQpO1xcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uYXR0cignYXJpYS1sYWJlbGxlZGJ5JywgaWQpO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICAvLyBPbmx5IHJlc3BvbmQgdG8gbGVmdCBjbGlja3NcXHJcXG4gICAgICBpZiAoZXZ0LndoaWNoICE9PSAxKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcigndG9nZ2xlJywge1xcclxcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2ZvY3VzJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIC8vIFVzZXIgZm9jdXNlcyBvbiB0aGUgY29udGFpbmVyXFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2JsdXInLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgLy8gVXNlciBleGl0cyB0aGUgY29udGFpbmVyXFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2ZvY3VzJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIGlmICghY29udGFpbmVyLmlzT3BlbigpKSB7XFxyXFxuICAgICAgICBzZWxmLiRzZWxlY3Rpb24uZm9jdXMoKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3NlbGVjdGlvbjp1cGRhdGUnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi51cGRhdGUocGFyYW1zLmRhdGEpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTaW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmVtcHR5KCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKGRhdGEsIGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0ZW1wbGF0ZVNlbGVjdGlvbicpO1xcclxcbiAgICB2YXIgZXNjYXBlTWFya3VwID0gdGhpcy5vcHRpb25zLmdldCgnZXNjYXBlTWFya3VwJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiBlc2NhcGVNYXJrdXAodGVtcGxhdGUoZGF0YSwgY29udGFpbmVyKSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3Rpb25Db250YWluZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHJldHVybiAkKCc8c3Bhbj48L3NwYW4+Jyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICB0aGlzLmNsZWFyKCk7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBzZWxlY3Rpb24gPSBkYXRhWzBdO1xcclxcblxcclxcbiAgICB2YXIgJHJlbmRlcmVkID0gdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKTtcXHJcXG4gICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMuZGlzcGxheShzZWxlY3Rpb24sICRyZW5kZXJlZCk7XFxyXFxuXFxyXFxuICAgICRyZW5kZXJlZC5lbXB0eSgpLmFwcGVuZChmb3JtYXR0ZWQpO1xcclxcbiAgICAkcmVuZGVyZWQucHJvcCgndGl0bGUnLCBzZWxlY3Rpb24udGl0bGUgfHwgc2VsZWN0aW9uLnRleHQpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBTaW5nbGVTZWxlY3Rpb247XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9tdWx0aXBsZScsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi9iYXNlJyxcXHJcXG4gICcuLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgQmFzZVNlbGVjdGlvbiwgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIE11bHRpcGxlU2VsZWN0aW9uICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICBNdWx0aXBsZVNlbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChNdWx0aXBsZVNlbGVjdGlvbiwgQmFzZVNlbGVjdGlvbik7XFxyXFxuXFxyXFxuICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJHNlbGVjdGlvbiA9IE11bHRpcGxlU2VsZWN0aW9uLl9fc3VwZXJfXy5yZW5kZXIuY2FsbCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5hZGRDbGFzcygnc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlJyk7XFxyXFxuXFxyXFxuICAgICRzZWxlY3Rpb24uaHRtbChcXHJcXG4gICAgICAnPHVsIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcXFwiPjwvdWw+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICByZXR1cm4gJHNlbGVjdGlvbjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBNdWx0aXBsZVNlbGVjdGlvbi5fX3N1cGVyX18uYmluZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcigndG9nZ2xlJywge1xcclxcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oXFxyXFxuICAgICAgJ2NsaWNrJyxcXHJcXG4gICAgICAnLnNlbGVjdDItc2VsZWN0aW9uX19jaG9pY2VfX3JlbW92ZScsXFxyXFxuICAgICAgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiBpdCBpcyBkaXNhYmxlZFxcclxcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5nZXQoJ2Rpc2FibGVkJykpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgdmFyICRyZW1vdmUgPSAkKHRoaXMpO1xcclxcbiAgICAgICAgdmFyICRzZWxlY3Rpb24gPSAkcmVtb3ZlLnBhcmVudCgpO1xcclxcblxcclxcbiAgICAgICAgdmFyIGRhdGEgPSAkc2VsZWN0aW9uLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcigndW5zZWxlY3QnLCB7XFxyXFxuICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2dCxcXHJcXG4gICAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfVxcclxcbiAgICApO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5lbXB0eSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKGRhdGEsIGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0ZW1wbGF0ZVNlbGVjdGlvbicpO1xcclxcbiAgICB2YXIgZXNjYXBlTWFya3VwID0gdGhpcy5vcHRpb25zLmdldCgnZXNjYXBlTWFya3VwJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiBlc2NhcGVNYXJrdXAodGVtcGxhdGUoZGF0YSwgY29udGFpbmVyKSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgTXVsdGlwbGVTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdGlvbkNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRjb250YWluZXIgPSAkKFxcclxcbiAgICAgICc8bGkgY2xhc3M9XFxcInNlbGVjdDItc2VsZWN0aW9uX19jaG9pY2VcXFwiPicgK1xcclxcbiAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlX19yZW1vdmVcXFwiIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCI+JyArXFxyXFxuICAgICAgICAgICcmdGltZXM7JyArXFxyXFxuICAgICAgICAnPC9zcGFuPicgK1xcclxcbiAgICAgICc8L2xpPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRjb250YWluZXI7XFxyXFxuICB9O1xcclxcblxcclxcbiAgTXVsdGlwbGVTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHRoaXMuY2xlYXIoKTtcXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciAkc2VsZWN0aW9ucyA9IFtdO1xcclxcblxcclxcbiAgICBmb3IgKHZhciBkID0gMDsgZCA8IGRhdGEubGVuZ3RoOyBkKyspIHtcXHJcXG4gICAgICB2YXIgc2VsZWN0aW9uID0gZGF0YVtkXTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJHNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uQ29udGFpbmVyKCk7XFxyXFxuICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMuZGlzcGxheShzZWxlY3Rpb24sICRzZWxlY3Rpb24pO1xcclxcblxcclxcbiAgICAgICRzZWxlY3Rpb24uYXBwZW5kKGZvcm1hdHRlZCk7XFxyXFxuICAgICAgJHNlbGVjdGlvbi5wcm9wKCd0aXRsZScsIHNlbGVjdGlvbi50aXRsZSB8fCBzZWxlY3Rpb24udGV4dCk7XFxyXFxuXFxyXFxuICAgICAgJHNlbGVjdGlvbi5kYXRhKCdkYXRhJywgc2VsZWN0aW9uKTtcXHJcXG5cXHJcXG4gICAgICAkc2VsZWN0aW9ucy5wdXNoKCRzZWxlY3Rpb24pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciAkcmVuZGVyZWQgPSB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpO1xcclxcblxcclxcbiAgICBVdGlscy5hcHBlbmRNYW55KCRyZW5kZXJlZCwgJHNlbGVjdGlvbnMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBNdWx0aXBsZVNlbGVjdGlvbjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL3BsYWNlaG9sZGVyJyxbXFxyXFxuICAnLi4vdXRpbHMnXFxyXFxuXSwgZnVuY3Rpb24gKFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBQbGFjZWhvbGRlciAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5ub3JtYWxpemVQbGFjZWhvbGRlcihvcHRpb25zLmdldCgncGxhY2Vob2xkZXInKSk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFBsYWNlaG9sZGVyLnByb3RvdHlwZS5ub3JtYWxpemVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChfLCBwbGFjZWhvbGRlcikge1xcclxcbiAgICBpZiAodHlwZW9mIHBsYWNlaG9sZGVyID09PSAnc3RyaW5nJykge1xcclxcbiAgICAgIHBsYWNlaG9sZGVyID0ge1xcclxcbiAgICAgICAgaWQ6ICcnLFxcclxcbiAgICAgICAgdGV4dDogcGxhY2Vob2xkZXJcXHJcXG4gICAgICB9O1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBwbGFjZWhvbGRlcjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBQbGFjZWhvbGRlci5wcm90b3R5cGUuY3JlYXRlUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwbGFjZWhvbGRlcikge1xcclxcbiAgICB2YXIgJHBsYWNlaG9sZGVyID0gdGhpcy5zZWxlY3Rpb25Db250YWluZXIoKTtcXHJcXG5cXHJcXG4gICAgJHBsYWNlaG9sZGVyLmh0bWwodGhpcy5kaXNwbGF5KHBsYWNlaG9sZGVyKSk7XFxyXFxuICAgICRwbGFjZWhvbGRlci5hZGRDbGFzcygnc2VsZWN0Mi1zZWxlY3Rpb25fX3BsYWNlaG9sZGVyJylcXHJcXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkcGxhY2Vob2xkZXI7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUGxhY2Vob2xkZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcXHJcXG4gICAgdmFyIHNpbmdsZVBsYWNlaG9sZGVyID0gKFxcclxcbiAgICAgIGRhdGEubGVuZ3RoID09IDEgJiYgZGF0YVswXS5pZCAhPSB0aGlzLnBsYWNlaG9sZGVyLmlkXFxyXFxuICAgICk7XFxyXFxuICAgIHZhciBtdWx0aXBsZVNlbGVjdGlvbnMgPSBkYXRhLmxlbmd0aCA+IDE7XFxyXFxuXFxyXFxuICAgIGlmIChtdWx0aXBsZVNlbGVjdGlvbnMgfHwgc2luZ2xlUGxhY2Vob2xkZXIpIHtcXHJcXG4gICAgICByZXR1cm4gZGVjb3JhdGVkLmNhbGwodGhpcywgZGF0YSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy5jbGVhcigpO1xcclxcblxcclxcbiAgICB2YXIgJHBsYWNlaG9sZGVyID0gdGhpcy5jcmVhdGVQbGFjZWhvbGRlcih0aGlzLnBsYWNlaG9sZGVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5hcHBlbmQoJHBsYWNlaG9sZGVyKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gUGxhY2Vob2xkZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9hbGxvd0NsZWFyJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi9rZXlzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBLRVlTKSB7XFxyXFxuICBmdW5jdGlvbiBBbGxvd0NsZWFyICgpIHsgfVxcclxcblxcclxcbiAgQWxsb3dDbGVhci5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyID09IG51bGwpIHtcXHJcXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGVidWcnKSAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7XFxyXFxuICAgICAgICBjb25zb2xlLmVycm9yKFxcclxcbiAgICAgICAgICAnU2VsZWN0MjogVGhlIGBhbGxvd0NsZWFyYCBvcHRpb24gc2hvdWxkIGJlIHVzZWQgaW4gY29tYmluYXRpb24gJyArXFxyXFxuICAgICAgICAgICd3aXRoIHRoZSBgcGxhY2Vob2xkZXJgIG9wdGlvbi4nXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ21vdXNlZG93bicsICcuc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyJyxcXHJcXG4gICAgICBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgICBzZWxmLl9oYW5kbGVDbGVhcihldnQpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLl9oYW5kbGVLZXlib2FyZENsZWFyKGV2dCwgY29udGFpbmVyKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQWxsb3dDbGVhci5wcm90b3R5cGUuX2hhbmRsZUNsZWFyID0gZnVuY3Rpb24gKF8sIGV2dCkge1xcclxcbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIGl0IGlzIGRpc2FibGVkXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciAkY2xlYXIgPSB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19jbGVhcicpO1xcclxcblxcclxcbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIG5vdGhpbmcgaGFzIGJlZW4gc2VsZWN0ZWRcXHJcXG4gICAgaWYgKCRjbGVhci5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xcclxcblxcclxcbiAgICB2YXIgZGF0YSA9ICRjbGVhci5kYXRhKCdkYXRhJyk7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciB1bnNlbGVjdERhdGEgPSB7XFxyXFxuICAgICAgICBkYXRhOiBkYXRhW2RdXFxyXFxuICAgICAgfTtcXHJcXG5cXHJcXG4gICAgICAvLyBUcmlnZ2VyIHRoZSBgdW5zZWxlY3RgIGV2ZW50LCBzbyBwZW9wbGUgY2FuIHByZXZlbnQgaXQgZnJvbSBiZWluZ1xcclxcbiAgICAgIC8vIGNsZWFyZWQuXFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCd1bnNlbGVjdCcsIHVuc2VsZWN0RGF0YSk7XFxyXFxuXFxyXFxuICAgICAgLy8gSWYgdGhlIGV2ZW50IHdhcyBwcmV2ZW50ZWQsIGRvbid0IGNsZWFyIGl0IG91dC5cXHJcXG4gICAgICBpZiAodW5zZWxlY3REYXRhLnByZXZlbnRlZCkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50LnZhbCh0aGlzLnBsYWNlaG9sZGVyLmlkKS50cmlnZ2VyKCdjaGFuZ2UnKTtcXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCd0b2dnbGUnLCB7fSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQWxsb3dDbGVhci5wcm90b3R5cGUuX2hhbmRsZUtleWJvYXJkQ2xlYXIgPSBmdW5jdGlvbiAoXywgZXZ0LCBjb250YWluZXIpIHtcXHJcXG4gICAgaWYgKGNvbnRhaW5lci5pc09wZW4oKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZXZ0LndoaWNoID09IEtFWVMuREVMRVRFIHx8IGV2dC53aGljaCA9PSBLRVlTLkJBQ0tTUEFDRSkge1xcclxcbiAgICAgIHRoaXMuX2hhbmRsZUNsZWFyKGV2dCk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBbGxvd0NsZWFyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBkYXRhKSB7XFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGRhdGEpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcGxhY2Vob2xkZXInKS5sZW5ndGggPiAwIHx8XFxyXFxuICAgICAgICBkYXRhLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgJHJlbW92ZSA9ICQoXFxyXFxuICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fY2xlYXJcXFwiPicgK1xcclxcbiAgICAgICAgJyZ0aW1lczsnICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG4gICAgJHJlbW92ZS5kYXRhKCdkYXRhJywgZGF0YSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykucHJlcGVuZCgkcmVtb3ZlKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQWxsb3dDbGVhcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL3NlYXJjaCcsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi4vdXRpbHMnLFxcclxcbiAgJy4uL2tleXMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIFV0aWxzLCBLRVlTKSB7XFxyXFxuICBmdW5jdGlvbiBTZWFyY2ggKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XFxyXFxuICAgIHZhciAkc2VhcmNoID0gJChcXHJcXG4gICAgICAnPGxpIGNsYXNzPVxcXCJzZWxlY3QyLXNlYXJjaCBzZWxlY3QyLXNlYXJjaC0taW5saW5lXFxcIj4nICtcXHJcXG4gICAgICAgICc8aW5wdXQgY2xhc3M9XFxcInNlbGVjdDItc2VhcmNoX19maWVsZFxcXCIgdHlwZT1cXFwic2VhcmNoXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiJyArXFxyXFxuICAgICAgICAnIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBhdXRvY29ycmVjdD1cXFwib2ZmXFxcIiBhdXRvY2FwaXRhbGl6ZT1cXFwib2ZmXFxcIicgK1xcclxcbiAgICAgICAgJyBzcGVsbGNoZWNrPVxcXCJmYWxzZVxcXCIgcm9sZT1cXFwidGV4dGJveFxcXCIgYXJpYS1hdXRvY29tcGxldGU9XFxcImxpc3RcXFwiIC8+JyArXFxyXFxuICAgICAgJzwvbGk+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2hDb250YWluZXIgPSAkc2VhcmNoO1xcclxcbiAgICB0aGlzLiRzZWFyY2ggPSAkc2VhcmNoLmZpbmQoJ2lucHV0Jyk7XFxyXFxuXFxyXFxuICAgIHZhciAkcmVuZGVyZWQgPSBkZWNvcmF0ZWQuY2FsbCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5fdHJhbnNmZXJUYWJJbmRleCgpO1xcclxcblxcclxcbiAgICByZXR1cm4gJHJlbmRlcmVkO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gudHJpZ2dlcignZm9jdXMnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnZhbCgnJyk7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnJlbW92ZUF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcpO1xcclxcbiAgICAgIHNlbGYuJHNlYXJjaC50cmlnZ2VyKCdmb2N1cycpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdlbmFibGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xcclxcblxcclxcbiAgICAgIHNlbGYuX3RyYW5zZmVyVGFiSW5kZXgoKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignZGlzYWJsZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnRyaWdnZXIoJ2ZvY3VzJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6Zm9jdXMnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLmF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsIHBhcmFtcy5pZCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2ZvY3VzaW4nLCAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdmb2N1cycsIGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2ZvY3Vzb3V0JywgJy5zZWxlY3QyLXNlYXJjaC0taW5saW5lJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYuX2hhbmRsZUJsdXIoZXZ0KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbigna2V5ZG93bicsICcuc2VsZWN0Mi1zZWFyY2gtLWlubGluZScsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdrZXlwcmVzcycsIGV2dCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fa2V5VXBQcmV2ZW50ZWQgPSBldnQuaXNEZWZhdWx0UHJldmVudGVkKCk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGtleSA9IGV2dC53aGljaDtcXHJcXG5cXHJcXG4gICAgICBpZiAoa2V5ID09PSBLRVlTLkJBQ0tTUEFDRSAmJiBzZWxmLiRzZWFyY2gudmFsKCkgPT09ICcnKSB7XFxyXFxuICAgICAgICB2YXIgJHByZXZpb3VzQ2hvaWNlID0gc2VsZi4kc2VhcmNoQ29udGFpbmVyXFxyXFxuICAgICAgICAgIC5wcmV2KCcuc2VsZWN0Mi1zZWxlY3Rpb25fX2Nob2ljZScpO1xcclxcblxcclxcbiAgICAgICAgaWYgKCRwcmV2aW91c0Nob2ljZS5sZW5ndGggPiAwKSB7XFxyXFxuICAgICAgICAgIHZhciBpdGVtID0gJHByZXZpb3VzQ2hvaWNlLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgICAgICAgc2VsZi5zZWFyY2hSZW1vdmVDaG9pY2UoaXRlbSk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIC8vIFRyeSB0byBkZXRlY3QgdGhlIElFIHZlcnNpb24gc2hvdWxkIHRoZSBgZG9jdW1lbnRNb2RlYCBwcm9wZXJ0eSB0aGF0XFxyXFxuICAgIC8vIGlzIHN0b3JlZCBvbiB0aGUgZG9jdW1lbnQuIFRoaXMgaXMgb25seSBpbXBsZW1lbnRlZCBpbiBJRSBhbmQgaXNcXHJcXG4gICAgLy8gc2xpZ2h0bHkgY2xlYW5lciB0aGFuIGRvaW5nIGEgdXNlciBhZ2VudCBjaGVjay5cXHJcXG4gICAgLy8gVGhpcyBwcm9wZXJ0eSBpcyBub3QgYXZhaWxhYmxlIGluIEVkZ2UsIGJ1dCBFZGdlIGFsc28gZG9lc24ndCBoYXZlXFxyXFxuICAgIC8vIHRoaXMgYnVnLlxcclxcbiAgICB2YXIgbXNpZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcXHJcXG4gICAgdmFyIGRpc2FibGVJbnB1dEV2ZW50cyA9IG1zaWUgJiYgbXNpZSA8PSAxMTtcXHJcXG5cXHJcXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgYnJvd3NlcnMgd2hpY2ggZG8gbm90IHN1cHBvcnQgdGhlIGBpbnB1dGAgZXZlbnRcXHJcXG4gICAgLy8gVGhpcyB3aWxsIHByZXZlbnQgZG91YmxlLXRyaWdnZXJpbmcgb2YgZXZlbnRzIGZvciBicm93c2VycyB3aGljaCBzdXBwb3J0XFxyXFxuICAgIC8vIGJvdGggdGhlIGBrZXl1cGAgYW5kIGBpbnB1dGAgZXZlbnRzLlxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oXFxyXFxuICAgICAgJ2lucHV0LnNlYXJjaGNoZWNrJyxcXHJcXG4gICAgICAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICAgIC8vIElFIHdpbGwgdHJpZ2dlciB0aGUgYGlucHV0YCBldmVudCB3aGVuIGEgcGxhY2Vob2xkZXIgaXMgdXNlZCBvbiBhXFxyXFxuICAgICAgICAvLyBzZWFyY2ggYm94LiBUbyBnZXQgYXJvdW5kIHRoaXMgaXNzdWUsIHdlIGFyZSBmb3JjZWQgdG8gaWdub3JlIGFsbFxcclxcbiAgICAgICAgLy8gYGlucHV0YCBldmVudHMgaW4gSUUgYW5kIGtlZXAgdXNpbmcgYGtleXVwYC5cXHJcXG4gICAgICAgIGlmIChkaXNhYmxlSW5wdXRFdmVudHMpIHtcXHJcXG4gICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLm9mZignaW5wdXQuc2VhcmNoIGlucHV0LnNlYXJjaGNoZWNrJyk7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIC8vIFVuYmluZCB0aGUgZHVwbGljYXRlZCBga2V5dXBgIGV2ZW50XFxyXFxuICAgICAgICBzZWxmLiRzZWxlY3Rpb24ub2ZmKCdrZXl1cC5zZWFyY2gnKTtcXHJcXG4gICAgICB9XFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbihcXHJcXG4gICAgICAna2V5dXAuc2VhcmNoIGlucHV0LnNlYXJjaCcsXFxyXFxuICAgICAgJy5zZWxlY3QyLXNlYXJjaC0taW5saW5lJyxcXHJcXG4gICAgICBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgICAvLyBJRSB3aWxsIHRyaWdnZXIgdGhlIGBpbnB1dGAgZXZlbnQgd2hlbiBhIHBsYWNlaG9sZGVyIGlzIHVzZWQgb24gYVxcclxcbiAgICAgICAgLy8gc2VhcmNoIGJveC4gVG8gZ2V0IGFyb3VuZCB0aGlzIGlzc3VlLCB3ZSBhcmUgZm9yY2VkIHRvIGlnbm9yZSBhbGxcXHJcXG4gICAgICAgIC8vIGBpbnB1dGAgZXZlbnRzIGluIElFIGFuZCBrZWVwIHVzaW5nIGBrZXl1cGAuXFxyXFxuICAgICAgICBpZiAoZGlzYWJsZUlucHV0RXZlbnRzICYmIGV2dC50eXBlID09PSAnaW5wdXQnKSB7XFxyXFxuICAgICAgICAgIHNlbGYuJHNlbGVjdGlvbi5vZmYoJ2lucHV0LnNlYXJjaCBpbnB1dC5zZWFyY2hjaGVjaycpO1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICB2YXIga2V5ID0gZXZ0LndoaWNoO1xcclxcblxcclxcbiAgICAgICAgLy8gV2UgY2FuIGZyZWVseSBpZ25vcmUgZXZlbnRzIGZyb20gbW9kaWZpZXIga2V5c1xcclxcbiAgICAgICAgaWYgKGtleSA9PSBLRVlTLlNISUZUIHx8IGtleSA9PSBLRVlTLkNUUkwgfHwga2V5ID09IEtFWVMuQUxUKSB7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIC8vIFRhYmJpbmcgd2lsbCBiZSBoYW5kbGVkIGR1cmluZyB0aGUgYGtleWRvd25gIHBoYXNlXFxyXFxuICAgICAgICBpZiAoa2V5ID09IEtFWVMuVEFCKSB7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIHNlbGYuaGFuZGxlU2VhcmNoKGV2dCk7XFxyXFxuICAgICAgfVxcclxcbiAgICApO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIC8qKlxcclxcbiAgICogVGhpcyBtZXRob2Qgd2lsbCB0cmFuc2ZlciB0aGUgdGFiaW5kZXggYXR0cmlidXRlIGZyb20gdGhlIHJlbmRlcmVkXFxyXFxuICAgKiBzZWxlY3Rpb24gdG8gdGhlIHNlYXJjaCBib3guIFRoaXMgYWxsb3dzIGZvciB0aGUgc2VhcmNoIGJveCB0byBiZSB1c2VkIGFzXFxyXFxuICAgKiB0aGUgcHJpbWFyeSBmb2N1cyBpbnN0ZWFkIG9mIHRoZSBzZWxlY3Rpb24gY29udGFpbmVyLlxcclxcbiAgICpcXHJcXG4gICAqIEBwcml2YXRlXFxyXFxuICAgKi9cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuX3RyYW5zZmVyVGFiSW5kZXggPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XFxyXFxuICAgIHRoaXMuJHNlYXJjaC5hdHRyKCd0YWJpbmRleCcsIHRoaXMuJHNlbGVjdGlvbi5hdHRyKCd0YWJpbmRleCcpKTtcXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5jcmVhdGVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBsYWNlaG9sZGVyKSB7XFxyXFxuICAgIHRoaXMuJHNlYXJjaC5hdHRyKCdwbGFjZWhvbGRlcicsIHBsYWNlaG9sZGVyLnRleHQpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgZGF0YSkge1xcclxcbiAgICB2YXIgc2VhcmNoSGFkRm9jdXMgPSB0aGlzLiRzZWFyY2hbMF0gPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoLmF0dHIoJ3BsYWNlaG9sZGVyJywgJycpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKVxcclxcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHRoaXMuJHNlYXJjaENvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIHRoaXMucmVzaXplU2VhcmNoKCk7XFxyXFxuICAgIGlmIChzZWFyY2hIYWRGb2N1cykge1xcclxcbiAgICAgIHRoaXMuJHNlYXJjaC5mb2N1cygpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5oYW5kbGVTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMucmVzaXplU2VhcmNoKCk7XFxyXFxuXFxyXFxuICAgIGlmICghdGhpcy5fa2V5VXBQcmV2ZW50ZWQpIHtcXHJcXG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLiRzZWFyY2gudmFsKCk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCdxdWVyeScsIHtcXHJcXG4gICAgICAgIHRlcm06IGlucHV0XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy5fa2V5VXBQcmV2ZW50ZWQgPSBmYWxzZTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLnNlYXJjaFJlbW92ZUNob2ljZSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGl0ZW0pIHtcXHJcXG4gICAgdGhpcy50cmlnZ2VyKCd1bnNlbGVjdCcsIHtcXHJcXG4gICAgICBkYXRhOiBpdGVtXFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2gudmFsKGl0ZW0udGV4dCk7XFxyXFxuICAgIHRoaXMuaGFuZGxlU2VhcmNoKCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5yZXNpemVTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHNlYXJjaC5jc3MoJ3dpZHRoJywgJzI1cHgnKTtcXHJcXG5cXHJcXG4gICAgdmFyIHdpZHRoID0gJyc7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLiRzZWFyY2guYXR0cigncGxhY2Vob2xkZXInKSAhPT0gJycpIHtcXHJcXG4gICAgICB3aWR0aCA9IHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuaW5uZXJXaWR0aCgpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHZhciBtaW5pbXVtV2lkdGggPSB0aGlzLiRzZWFyY2gudmFsKCkubGVuZ3RoICsgMTtcXHJcXG5cXHJcXG4gICAgICB3aWR0aCA9IChtaW5pbXVtV2lkdGggKiAwLjc1KSArICdlbSc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoLmNzcygnd2lkdGgnLCB3aWR0aCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFNlYXJjaDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL2V2ZW50UmVsYXknLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIGZ1bmN0aW9uIEV2ZW50UmVsYXkgKCkgeyB9XFxyXFxuXFxyXFxuICBFdmVudFJlbGF5LnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG4gICAgdmFyIHJlbGF5RXZlbnRzID0gW1xcclxcbiAgICAgICdvcGVuJywgJ29wZW5pbmcnLFxcclxcbiAgICAgICdjbG9zZScsICdjbG9zaW5nJyxcXHJcXG4gICAgICAnc2VsZWN0JywgJ3NlbGVjdGluZycsXFxyXFxuICAgICAgJ3Vuc2VsZWN0JywgJ3Vuc2VsZWN0aW5nJ1xcclxcbiAgICBdO1xcclxcblxcclxcbiAgICB2YXIgcHJldmVudGFibGVFdmVudHMgPSBbJ29wZW5pbmcnLCAnY2xvc2luZycsICdzZWxlY3RpbmcnLCAndW5zZWxlY3RpbmcnXTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xcclxcbiAgICAgIC8vIElnbm9yZSBldmVudHMgdGhhdCBzaG91bGQgbm90IGJlIHJlbGF5ZWRcXHJcXG4gICAgICBpZiAoJC5pbkFycmF5KG5hbWUsIHJlbGF5RXZlbnRzKSA9PT0gLTEpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgLy8gVGhlIHBhcmFtZXRlcnMgc2hvdWxkIGFsd2F5cyBiZSBhbiBvYmplY3RcXHJcXG4gICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XFxyXFxuXFxyXFxuICAgICAgLy8gR2VuZXJhdGUgdGhlIGpRdWVyeSBldmVudCBmb3IgdGhlIFNlbGVjdDIgZXZlbnRcXHJcXG4gICAgICB2YXIgZXZ0ID0gJC5FdmVudCgnc2VsZWN0MjonICsgbmFtZSwge1xcclxcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLiRlbGVtZW50LnRyaWdnZXIoZXZ0KTtcXHJcXG5cXHJcXG4gICAgICAvLyBPbmx5IGhhbmRsZSBwcmV2ZW50YWJsZSBldmVudHMgaWYgaXQgd2FzIG9uZVxcclxcbiAgICAgIGlmICgkLmluQXJyYXkobmFtZSwgcHJldmVudGFibGVFdmVudHMpID09PSAtMSkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBwYXJhbXMucHJldmVudGVkID0gZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gRXZlbnRSZWxheTtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvdHJhbnNsYXRpb24nLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJ3JlcXVpcmUnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIHJlcXVpcmUpIHtcXHJcXG4gIGZ1bmN0aW9uIFRyYW5zbGF0aW9uIChkaWN0KSB7XFxyXFxuICAgIHRoaXMuZGljdCA9IGRpY3QgfHwge307XFxyXFxuICB9XFxyXFxuXFxyXFxuICBUcmFuc2xhdGlvbi5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICByZXR1cm4gdGhpcy5kaWN0O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRyYW5zbGF0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XFxyXFxuICAgIHJldHVybiB0aGlzLmRpY3Rba2V5XTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBUcmFuc2xhdGlvbi5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKHRyYW5zbGF0aW9uKSB7XFxyXFxuICAgIHRoaXMuZGljdCA9ICQuZXh0ZW5kKHt9LCB0cmFuc2xhdGlvbi5hbGwoKSwgdGhpcy5kaWN0KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBTdGF0aWMgZnVuY3Rpb25zXFxyXFxuXFxyXFxuICBUcmFuc2xhdGlvbi5fY2FjaGUgPSB7fTtcXHJcXG5cXHJcXG4gIFRyYW5zbGF0aW9uLmxvYWRQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcXHJcXG4gICAgaWYgKCEocGF0aCBpbiBUcmFuc2xhdGlvbi5fY2FjaGUpKSB7XFxyXFxuICAgICAgdmFyIHRyYW5zbGF0aW9ucyA9IHJlcXVpcmUocGF0aCk7XFxyXFxuXFxyXFxuICAgICAgVHJhbnNsYXRpb24uX2NhY2hlW3BhdGhdID0gdHJhbnNsYXRpb25zO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb24oVHJhbnNsYXRpb24uX2NhY2hlW3BhdGhdKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gVHJhbnNsYXRpb247XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RpYWNyaXRpY3MnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICB2YXIgZGlhY3JpdGljcyA9IHtcXHJcXG4gICAgJ1xcXFx1MjRCNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1RkYyMSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBQSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBOCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMyc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDEwMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDEwMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBRSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIyNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFFMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFERSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDNSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFGQSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFDRCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIwMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIwMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBQyc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUUwMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDEwNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIzQSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MkM2Ric6ICdBJyxcXHJcXG4gICAgJ1xcXFx1QTczMic6ICdBQScsXFxyXFxuICAgICdcXFxcdTAwQzYnOiAnQUUnLFxcclxcbiAgICAnXFxcXHUwMUZDJzogJ0FFJyxcXHJcXG4gICAgJ1xcXFx1MDFFMic6ICdBRScsXFxyXFxuICAgICdcXFxcdUE3MzQnOiAnQU8nLFxcclxcbiAgICAnXFxcXHVBNzM2JzogJ0FVJyxcXHJcXG4gICAgJ1xcXFx1QTczOCc6ICdBVicsXFxyXFxuICAgICdcXFxcdUE3M0EnOiAnQVYnLFxcclxcbiAgICAnXFxcXHVBNzNDJzogJ0FZJyxcXHJcXG4gICAgJ1xcXFx1MjRCNyc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1RkYyMic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MUUwMic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MUUwNCc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MUUwNic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MDI0Myc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MDE4Mic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MDE4MSc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MjRCOCc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1RkYyMyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwNic6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwOCc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwQSc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwQyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDBDNyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MUUwOCc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDE4Nyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDIzQic6ICdDJyxcXHJcXG4gICAgJ1xcXFx1QTczRSc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MjRCOSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1RkYyNCc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUwQSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDEwRSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUwQyc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUxMCc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUxMic6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUwRSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDExMCc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDE4Qic6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDE4QSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDE4OSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1QTc3OSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDFGMSc6ICdEWicsXFxyXFxuICAgICdcXFxcdTAxQzQnOiAnRFonLFxcclxcbiAgICAnXFxcXHUwMUYyJzogJ0R6JyxcXHJcXG4gICAgJ1xcXFx1MDFDNSc6ICdEeicsXFxyXFxuICAgICdcXFxcdTI0QkEnOiAnRScsXFxyXFxuICAgICdcXFxcdUZGMjUnOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQzgnOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQzknOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQ0EnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzAnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQkUnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzQnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzInOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQkMnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTInOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMTQnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMTYnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTQnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTYnOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQ0InOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQkEnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMUEnOiAnRScsXFxyXFxuICAgICdcXFxcdTAyMDQnOiAnRScsXFxyXFxuICAgICdcXFxcdTAyMDYnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQjgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzYnOiAnRScsXFxyXFxuICAgICdcXFxcdTAyMjgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMUMnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMTgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMUEnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxOTAnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxOEUnOiAnRScsXFxyXFxuICAgICdcXFxcdTI0QkInOiAnRicsXFxyXFxuICAgICdcXFxcdUZGMjYnOiAnRicsXFxyXFxuICAgICdcXFxcdTFFMUUnOiAnRicsXFxyXFxuICAgICdcXFxcdTAxOTEnOiAnRicsXFxyXFxuICAgICdcXFxcdUE3N0InOiAnRicsXFxyXFxuICAgICdcXFxcdTI0QkMnOiAnRycsXFxyXFxuICAgICdcXFxcdUZGMjcnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxRjQnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMUMnOiAnRycsXFxyXFxuICAgICdcXFxcdTFFMjAnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMUUnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMjAnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxRTYnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMjInOiAnRycsXFxyXFxuICAgICdcXFxcdTAxRTQnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxOTMnOiAnRycsXFxyXFxuICAgICdcXFxcdUE3QTAnOiAnRycsXFxyXFxuICAgICdcXFxcdUE3N0QnOiAnRycsXFxyXFxuICAgICdcXFxcdUE3N0UnOiAnRycsXFxyXFxuICAgICdcXFxcdTI0QkQnOiAnSCcsXFxyXFxuICAgICdcXFxcdUZGMjgnOiAnSCcsXFxyXFxuICAgICdcXFxcdTAxMjQnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjInOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjYnOiAnSCcsXFxyXFxuICAgICdcXFxcdTAyMUUnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjQnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjgnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMkEnOiAnSCcsXFxyXFxuICAgICdcXFxcdTAxMjYnOiAnSCcsXFxyXFxuICAgICdcXFxcdTJDNjcnOiAnSCcsXFxyXFxuICAgICdcXFxcdTJDNzUnOiAnSCcsXFxyXFxuICAgICdcXFxcdUE3OEQnOiAnSCcsXFxyXFxuICAgICdcXFxcdTI0QkUnOiAnSScsXFxyXFxuICAgICdcXFxcdUZGMjknOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0MnOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0QnOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0UnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMjgnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMkEnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMkMnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMzAnOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0YnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFMkUnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFQzgnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxQ0YnOiAnSScsXFxyXFxuICAgICdcXFxcdTAyMDgnOiAnSScsXFxyXFxuICAgICdcXFxcdTAyMEEnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFQ0EnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMkUnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFMkMnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxOTcnOiAnSScsXFxyXFxuICAgICdcXFxcdTI0QkYnOiAnSicsXFxyXFxuICAgICdcXFxcdUZGMkEnOiAnSicsXFxyXFxuICAgICdcXFxcdTAxMzQnOiAnSicsXFxyXFxuICAgICdcXFxcdTAyNDgnOiAnSicsXFxyXFxuICAgICdcXFxcdTI0QzAnOiAnSycsXFxyXFxuICAgICdcXFxcdUZGMkInOiAnSycsXFxyXFxuICAgICdcXFxcdTFFMzAnOiAnSycsXFxyXFxuICAgICdcXFxcdTAxRTgnOiAnSycsXFxyXFxuICAgICdcXFxcdTFFMzInOiAnSycsXFxyXFxuICAgICdcXFxcdTAxMzYnOiAnSycsXFxyXFxuICAgICdcXFxcdTFFMzQnOiAnSycsXFxyXFxuICAgICdcXFxcdTAxOTgnOiAnSycsXFxyXFxuICAgICdcXFxcdTJDNjknOiAnSycsXFxyXFxuICAgICdcXFxcdUE3NDAnOiAnSycsXFxyXFxuICAgICdcXFxcdUE3NDInOiAnSycsXFxyXFxuICAgICdcXFxcdUE3NDQnOiAnSycsXFxyXFxuICAgICdcXFxcdUE3QTInOiAnSycsXFxyXFxuICAgICdcXFxcdTI0QzEnOiAnTCcsXFxyXFxuICAgICdcXFxcdUZGMkMnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxM0YnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxMzknOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxM0QnOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFMzYnOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFMzgnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxM0InOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFM0MnOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFM0EnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxNDEnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAyM0QnOiAnTCcsXFxyXFxuICAgICdcXFxcdTJDNjInOiAnTCcsXFxyXFxuICAgICdcXFxcdTJDNjAnOiAnTCcsXFxyXFxuICAgICdcXFxcdUE3NDgnOiAnTCcsXFxyXFxuICAgICdcXFxcdUE3NDYnOiAnTCcsXFxyXFxuICAgICdcXFxcdUE3ODAnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxQzcnOiAnTEonLFxcclxcbiAgICAnXFxcXHUwMUM4JzogJ0xqJyxcXHJcXG4gICAgJ1xcXFx1MjRDMic6ICdNJyxcXHJcXG4gICAgJ1xcXFx1RkYyRCc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MUUzRSc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MUU0MCc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MUU0Mic6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MkM2RSc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MDE5Qyc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MjRDMyc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1RkYyRSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDFGOCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE0Myc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDBEMSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0NCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE0Nyc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0Nic6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE0NSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0QSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0OCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDIyMCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE5RCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1QTc5MCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1QTdBNCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDFDQSc6ICdOSicsXFxyXFxuICAgICdcXFxcdTAxQ0InOiAnTmonLFxcclxcbiAgICAnXFxcXHUyNEM0JzogJ08nLFxcclxcbiAgICAnXFxcXHVGRjJGJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQyJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQzJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ0JzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQyJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQ2JzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQ0JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ1JzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTRDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjJDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTRFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTRDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTUwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTUyJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTRFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjJFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjMwJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ2JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjJBJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUNFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTUwJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUQxJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjBDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjBFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUEwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRURDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRURBJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUUwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRURFJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUUyJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUNDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQ4JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUVBJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUVDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ4JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUZFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTg2JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTlGJzogJ08nLFxcclxcbiAgICAnXFxcXHVBNzRBJzogJ08nLFxcclxcbiAgICAnXFxcXHVBNzRDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUEyJzogJ09JJyxcXHJcXG4gICAgJ1xcXFx1QTc0RSc6ICdPTycsXFxyXFxuICAgICdcXFxcdTAyMjInOiAnT1UnLFxcclxcbiAgICAnXFxcXHUyNEM1JzogJ1AnLFxcclxcbiAgICAnXFxcXHVGRjMwJzogJ1AnLFxcclxcbiAgICAnXFxcXHUxRTU0JzogJ1AnLFxcclxcbiAgICAnXFxcXHUxRTU2JzogJ1AnLFxcclxcbiAgICAnXFxcXHUwMUE0JzogJ1AnLFxcclxcbiAgICAnXFxcXHUyQzYzJzogJ1AnLFxcclxcbiAgICAnXFxcXHVBNzUwJzogJ1AnLFxcclxcbiAgICAnXFxcXHVBNzUyJzogJ1AnLFxcclxcbiAgICAnXFxcXHVBNzU0JzogJ1AnLFxcclxcbiAgICAnXFxcXHUyNEM2JzogJ1EnLFxcclxcbiAgICAnXFxcXHVGRjMxJzogJ1EnLFxcclxcbiAgICAnXFxcXHVBNzU2JzogJ1EnLFxcclxcbiAgICAnXFxcXHVBNzU4JzogJ1EnLFxcclxcbiAgICAnXFxcXHUwMjRBJzogJ1EnLFxcclxcbiAgICAnXFxcXHUyNEM3JzogJ1InLFxcclxcbiAgICAnXFxcXHVGRjMyJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMTU0JzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTU4JzogJ1InLFxcclxcbiAgICAnXFxcXHUwMTU4JzogJ1InLFxcclxcbiAgICAnXFxcXHUwMjEwJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMjEyJzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTVBJzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTVDJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMTU2JzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTVFJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMjRDJzogJ1InLFxcclxcbiAgICAnXFxcXHUyQzY0JzogJ1InLFxcclxcbiAgICAnXFxcXHVBNzVBJzogJ1InLFxcclxcbiAgICAnXFxcXHVBN0E2JzogJ1InLFxcclxcbiAgICAnXFxcXHVBNzgyJzogJ1InLFxcclxcbiAgICAnXFxcXHUyNEM4JzogJ1MnLFxcclxcbiAgICAnXFxcXHVGRjMzJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTlFJzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTVBJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTY0JzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTVDJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTYwJzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTYwJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTY2JzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTYyJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTY4JzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMjE4JzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTVFJzogJ1MnLFxcclxcbiAgICAnXFxcXHUyQzdFJzogJ1MnLFxcclxcbiAgICAnXFxcXHVBN0E4JzogJ1MnLFxcclxcbiAgICAnXFxcXHVBNzg0JzogJ1MnLFxcclxcbiAgICAnXFxcXHUyNEM5JzogJ1QnLFxcclxcbiAgICAnXFxcXHVGRjM0JzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTZBJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMTY0JzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTZDJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMjFBJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMTYyJzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTcwJzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTZFJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMTY2JzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMUFDJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMUFFJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMjNFJzogJ1QnLFxcclxcbiAgICAnXFxcXHVBNzg2JzogJ1QnLFxcclxcbiAgICAnXFxcXHVBNzI4JzogJ1RaJyxcXHJcXG4gICAgJ1xcXFx1MjRDQSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1RkYzNSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEOSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEQSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEQic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2OCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3OCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2QSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3QSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2Qyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEQyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFEQic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFENyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFENSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFEOSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFNic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2RSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE3MCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFEMyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDIxNCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDIxNic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFBRic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFQSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFOCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFRSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFQyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVGMCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFNCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3Mic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE3Mic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3Nic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3NCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDI0NCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MjRDQic6ICdWJyxcXHJcXG4gICAgJ1xcXFx1RkYzNic6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MUU3Qyc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MUU3RSc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MDFCMic6ICdWJyxcXHJcXG4gICAgJ1xcXFx1QTc1RSc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MDI0NSc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1QTc2MCc6ICdWWScsXFxyXFxuICAgICdcXFxcdTI0Q0MnOiAnVycsXFxyXFxuICAgICdcXFxcdUZGMzcnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODAnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODInOiAnVycsXFxyXFxuICAgICdcXFxcdTAxNzQnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODYnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODQnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODgnOiAnVycsXFxyXFxuICAgICdcXFxcdTJDNzInOiAnVycsXFxyXFxuICAgICdcXFxcdTI0Q0QnOiAnWCcsXFxyXFxuICAgICdcXFxcdUZGMzgnOiAnWCcsXFxyXFxuICAgICdcXFxcdTFFOEEnOiAnWCcsXFxyXFxuICAgICdcXFxcdTFFOEMnOiAnWCcsXFxyXFxuICAgICdcXFxcdTI0Q0UnOiAnWScsXFxyXFxuICAgICdcXFxcdUZGMzknOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjInOiAnWScsXFxyXFxuICAgICdcXFxcdTAwREQnOiAnWScsXFxyXFxuICAgICdcXFxcdTAxNzYnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjgnOiAnWScsXFxyXFxuICAgICdcXFxcdTAyMzInOiAnWScsXFxyXFxuICAgICdcXFxcdTFFOEUnOiAnWScsXFxyXFxuICAgICdcXFxcdTAxNzgnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjYnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjQnOiAnWScsXFxyXFxuICAgICdcXFxcdTAxQjMnOiAnWScsXFxyXFxuICAgICdcXFxcdTAyNEUnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRkUnOiAnWScsXFxyXFxuICAgICdcXFxcdTI0Q0YnOiAnWicsXFxyXFxuICAgICdcXFxcdUZGM0EnOiAnWicsXFxyXFxuICAgICdcXFxcdTAxNzknOiAnWicsXFxyXFxuICAgICdcXFxcdTFFOTAnOiAnWicsXFxyXFxuICAgICdcXFxcdTAxN0InOiAnWicsXFxyXFxuICAgICdcXFxcdTAxN0QnOiAnWicsXFxyXFxuICAgICdcXFxcdTFFOTInOiAnWicsXFxyXFxuICAgICdcXFxcdTFFOTQnOiAnWicsXFxyXFxuICAgICdcXFxcdTAxQjUnOiAnWicsXFxyXFxuICAgICdcXFxcdTAyMjQnOiAnWicsXFxyXFxuICAgICdcXFxcdTJDN0YnOiAnWicsXFxyXFxuICAgICdcXFxcdTJDNkInOiAnWicsXFxyXFxuICAgICdcXFxcdUE3NjInOiAnWicsXFxyXFxuICAgICdcXFxcdTI0RDAnOiAnYScsXFxyXFxuICAgICdcXFxcdUZGNDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFOUEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTAnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTInOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTcnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTUnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQUInOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTknOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTMnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxMDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxMDMnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjEnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQUYnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjUnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjMnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyMjcnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxRTEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTQnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxREYnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTMnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTUnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxRkInOiAnYScsXFxyXFxuICAgICdcXFxcdTAxQ0UnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyMDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyMDMnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTEnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQUQnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjcnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFMDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxMDUnOiAnYScsXFxyXFxuICAgICdcXFxcdTJDNjUnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyNTAnOiAnYScsXFxyXFxuICAgICdcXFxcdUE3MzMnOiAnYWEnLFxcclxcbiAgICAnXFxcXHUwMEU2JzogJ2FlJyxcXHJcXG4gICAgJ1xcXFx1MDFGRCc6ICdhZScsXFxyXFxuICAgICdcXFxcdTAxRTMnOiAnYWUnLFxcclxcbiAgICAnXFxcXHVBNzM1JzogJ2FvJyxcXHJcXG4gICAgJ1xcXFx1QTczNyc6ICdhdScsXFxyXFxuICAgICdcXFxcdUE3MzknOiAnYXYnLFxcclxcbiAgICAnXFxcXHVBNzNCJzogJ2F2JyxcXHJcXG4gICAgJ1xcXFx1QTczRCc6ICdheScsXFxyXFxuICAgICdcXFxcdTI0RDEnOiAnYicsXFxyXFxuICAgICdcXFxcdUZGNDInOiAnYicsXFxyXFxuICAgICdcXFxcdTFFMDMnOiAnYicsXFxyXFxuICAgICdcXFxcdTFFMDUnOiAnYicsXFxyXFxuICAgICdcXFxcdTFFMDcnOiAnYicsXFxyXFxuICAgICdcXFxcdTAxODAnOiAnYicsXFxyXFxuICAgICdcXFxcdTAxODMnOiAnYicsXFxyXFxuICAgICdcXFxcdTAyNTMnOiAnYicsXFxyXFxuICAgICdcXFxcdTI0RDInOiAnYycsXFxyXFxuICAgICdcXFxcdUZGNDMnOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMDcnOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMDknOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMEInOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMEQnOiAnYycsXFxyXFxuICAgICdcXFxcdTAwRTcnOiAnYycsXFxyXFxuICAgICdcXFxcdTFFMDknOiAnYycsXFxyXFxuICAgICdcXFxcdTAxODgnOiAnYycsXFxyXFxuICAgICdcXFxcdTAyM0MnOiAnYycsXFxyXFxuICAgICdcXFxcdUE3M0YnOiAnYycsXFxyXFxuICAgICdcXFxcdTIxODQnOiAnYycsXFxyXFxuICAgICdcXFxcdTI0RDMnOiAnZCcsXFxyXFxuICAgICdcXFxcdUZGNDQnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMEInOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxMEYnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMEQnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMTEnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMTMnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMEYnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxMTEnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxOEMnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAyNTYnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAyNTcnOiAnZCcsXFxyXFxuICAgICdcXFxcdUE3N0EnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxRjMnOiAnZHonLFxcclxcbiAgICAnXFxcXHUwMUM2JzogJ2R6JyxcXHJcXG4gICAgJ1xcXFx1MjRENCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1RkY0NSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFOCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFQSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDMSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCRic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDMyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCRCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExMyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDIwNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDIwNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDIyOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxRCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDI0Nyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDI1Qic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDFERCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MjRENSc6ICdmJyxcXHJcXG4gICAgJ1xcXFx1RkY0Nic6ICdmJyxcXHJcXG4gICAgJ1xcXFx1MUUxRic6ICdmJyxcXHJcXG4gICAgJ1xcXFx1MDE5Mic6ICdmJyxcXHJcXG4gICAgJ1xcXFx1QTc3Qyc6ICdmJyxcXHJcXG4gICAgJ1xcXFx1MjRENic6ICdnJyxcXHJcXG4gICAgJ1xcXFx1RkY0Nyc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDFGNSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDExRCc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MUUyMSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDExRic6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDEyMSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDFFNyc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDEyMyc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDFFNSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDI2MCc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1QTdBMSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MUQ3OSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1QTc3Ric6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MjRENyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1RkY0OCc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDEyNSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyMyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyNyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDIxRic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyNSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyOSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyQic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUU5Nic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDEyNyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MkM2OCc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MkM3Nic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDI2NSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDE5NSc6ICdodicsXFxyXFxuICAgICdcXFxcdTI0RDgnOiAnaScsXFxyXFxuICAgICdcXFxcdUZGNDknOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUMnOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUQnOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUUnOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMjknOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMkInOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMkQnOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUYnOiAnaScsXFxyXFxuICAgICdcXFxcdTFFMkYnOiAnaScsXFxyXFxuICAgICdcXFxcdTFFQzknOiAnaScsXFxyXFxuICAgICdcXFxcdTAxRDAnOiAnaScsXFxyXFxuICAgICdcXFxcdTAyMDknOiAnaScsXFxyXFxuICAgICdcXFxcdTAyMEInOiAnaScsXFxyXFxuICAgICdcXFxcdTFFQ0InOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMkYnOiAnaScsXFxyXFxuICAgICdcXFxcdTFFMkQnOiAnaScsXFxyXFxuICAgICdcXFxcdTAyNjgnOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMzEnOiAnaScsXFxyXFxuICAgICdcXFxcdTI0RDknOiAnaicsXFxyXFxuICAgICdcXFxcdUZGNEEnOiAnaicsXFxyXFxuICAgICdcXFxcdTAxMzUnOiAnaicsXFxyXFxuICAgICdcXFxcdTAxRjAnOiAnaicsXFxyXFxuICAgICdcXFxcdTAyNDknOiAnaicsXFxyXFxuICAgICdcXFxcdTI0REEnOiAnaycsXFxyXFxuICAgICdcXFxcdUZGNEInOiAnaycsXFxyXFxuICAgICdcXFxcdTFFMzEnOiAnaycsXFxyXFxuICAgICdcXFxcdTAxRTknOiAnaycsXFxyXFxuICAgICdcXFxcdTFFMzMnOiAnaycsXFxyXFxuICAgICdcXFxcdTAxMzcnOiAnaycsXFxyXFxuICAgICdcXFxcdTFFMzUnOiAnaycsXFxyXFxuICAgICdcXFxcdTAxOTknOiAnaycsXFxyXFxuICAgICdcXFxcdTJDNkEnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3NDEnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3NDMnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3NDUnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3QTMnOiAnaycsXFxyXFxuICAgICdcXFxcdTI0REInOiAnbCcsXFxyXFxuICAgICdcXFxcdUZGNEMnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxNDAnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxM0EnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxM0UnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFMzcnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFMzknOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxM0MnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFM0QnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFM0InOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxN0YnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxNDInOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxOUEnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAyNkInOiAnbCcsXFxyXFxuICAgICdcXFxcdTJDNjEnOiAnbCcsXFxyXFxuICAgICdcXFxcdUE3NDknOiAnbCcsXFxyXFxuICAgICdcXFxcdUE3ODEnOiAnbCcsXFxyXFxuICAgICdcXFxcdUE3NDcnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxQzknOiAnbGonLFxcclxcbiAgICAnXFxcXHUyNERDJzogJ20nLFxcclxcbiAgICAnXFxcXHVGRjREJzogJ20nLFxcclxcbiAgICAnXFxcXHUxRTNGJzogJ20nLFxcclxcbiAgICAnXFxcXHUxRTQxJzogJ20nLFxcclxcbiAgICAnXFxcXHUxRTQzJzogJ20nLFxcclxcbiAgICAnXFxcXHUwMjcxJzogJ20nLFxcclxcbiAgICAnXFxcXHUwMjZGJzogJ20nLFxcclxcbiAgICAnXFxcXHUyNEREJzogJ24nLFxcclxcbiAgICAnXFxcXHVGRjRFJzogJ24nLFxcclxcbiAgICAnXFxcXHUwMUY5JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ0JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMEYxJzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTQ1JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ4JzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTQ3JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ2JzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTRCJzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTQ5JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTlFJzogJ24nLFxcclxcbiAgICAnXFxcXHUwMjcyJzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ5JzogJ24nLFxcclxcbiAgICAnXFxcXHVBNzkxJzogJ24nLFxcclxcbiAgICAnXFxcXHVBN0E1JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMUNDJzogJ25qJyxcXHJcXG4gICAgJ1xcXFx1MjRERSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1RkY0Ric6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGMic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGMyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGNCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEMyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVENyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVENSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGNSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU0RCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIyRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU0Ric6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDE0RCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU1MSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU1Myc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDE0Ric6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIyRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIzMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGNic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIyQic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVDRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDE1MSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFEMic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIwRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIwRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFBMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVERCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEQic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVFMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVERic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVFMyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVDRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEOSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFFQic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFFRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGOCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFGRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDI1NCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1QTc0Qic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1QTc0RCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDI3NSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFBMyc6ICdvaScsXFxyXFxuICAgICdcXFxcdTAyMjMnOiAnb3UnLFxcclxcbiAgICAnXFxcXHVBNzRGJzogJ29vJyxcXHJcXG4gICAgJ1xcXFx1MjRERic6ICdwJyxcXHJcXG4gICAgJ1xcXFx1RkY1MCc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MUU1NSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MUU1Nyc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MDFBNSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MUQ3RCc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1QTc1MSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1QTc1Myc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1QTc1NSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MjRFMCc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1RkY1MSc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1MDI0Qic6ICdxJyxcXHJcXG4gICAgJ1xcXFx1QTc1Nyc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1QTc1OSc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1MjRFMSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1RkY1Mic6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDE1NSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1OSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDE1OSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDIxMSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDIxMyc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1Qic6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1RCc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDE1Nyc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1Ric6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDI0RCc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDI3RCc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1QTc1Qic6ICdyJyxcXHJcXG4gICAgJ1xcXFx1QTdBNyc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1QTc4Myc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MjRFMic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1RkY1Myc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDBERic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE1Qic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2NSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE1RCc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2MSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE2MSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2Nyc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2Myc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2OSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDIxOSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE1Ric6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDIzRic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1QTdBOSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1QTc4NSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU5Qic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MjRFMyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1RkY1NCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU2Qic6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU5Nyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDE2NSc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU2RCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDIxQic6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDE2Myc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU3MSc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU2Ric6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDE2Nyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDFBRCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDI4OCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MkM2Nic6ICd0JyxcXHJcXG4gICAgJ1xcXFx1QTc4Nyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1QTcyOSc6ICd0eicsXFxyXFxuICAgICdcXFxcdTI0RTQnOiAndScsXFxyXFxuICAgICdcXFxcdUZGNTUnOiAndScsXFxyXFxuICAgICdcXFxcdTAwRjknOiAndScsXFxyXFxuICAgICdcXFxcdTAwRkEnOiAndScsXFxyXFxuICAgICdcXFxcdTAwRkInOiAndScsXFxyXFxuICAgICdcXFxcdTAxNjknOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzknOiAndScsXFxyXFxuICAgICdcXFxcdTAxNkInOiAndScsXFxyXFxuICAgICdcXFxcdTFFN0InOiAndScsXFxyXFxuICAgICdcXFxcdTAxNkQnOiAndScsXFxyXFxuICAgICdcXFxcdTAwRkMnOiAndScsXFxyXFxuICAgICdcXFxcdTAxREMnOiAndScsXFxyXFxuICAgICdcXFxcdTAxRDgnOiAndScsXFxyXFxuICAgICdcXFxcdTAxRDYnOiAndScsXFxyXFxuICAgICdcXFxcdTAxREEnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRTcnOiAndScsXFxyXFxuICAgICdcXFxcdTAxNkYnOiAndScsXFxyXFxuICAgICdcXFxcdTAxNzEnOiAndScsXFxyXFxuICAgICdcXFxcdTAxRDQnOiAndScsXFxyXFxuICAgICdcXFxcdTAyMTUnOiAndScsXFxyXFxuICAgICdcXFxcdTAyMTcnOiAndScsXFxyXFxuICAgICdcXFxcdTAxQjAnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRUInOiAndScsXFxyXFxuICAgICdcXFxcdTFFRTknOiAndScsXFxyXFxuICAgICdcXFxcdTFFRUYnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRUQnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRjEnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRTUnOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzMnOiAndScsXFxyXFxuICAgICdcXFxcdTAxNzMnOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzcnOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzUnOiAndScsXFxyXFxuICAgICdcXFxcdTAyODknOiAndScsXFxyXFxuICAgICdcXFxcdTI0RTUnOiAndicsXFxyXFxuICAgICdcXFxcdUZGNTYnOiAndicsXFxyXFxuICAgICdcXFxcdTFFN0QnOiAndicsXFxyXFxuICAgICdcXFxcdTFFN0YnOiAndicsXFxyXFxuICAgICdcXFxcdTAyOEInOiAndicsXFxyXFxuICAgICdcXFxcdUE3NUYnOiAndicsXFxyXFxuICAgICdcXFxcdTAyOEMnOiAndicsXFxyXFxuICAgICdcXFxcdUE3NjEnOiAndnknLFxcclxcbiAgICAnXFxcXHUyNEU2JzogJ3cnLFxcclxcbiAgICAnXFxcXHVGRjU3JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTgxJzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTgzJzogJ3cnLFxcclxcbiAgICAnXFxcXHUwMTc1JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTg3JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTg1JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTk4JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTg5JzogJ3cnLFxcclxcbiAgICAnXFxcXHUyQzczJzogJ3cnLFxcclxcbiAgICAnXFxcXHUyNEU3JzogJ3gnLFxcclxcbiAgICAnXFxcXHVGRjU4JzogJ3gnLFxcclxcbiAgICAnXFxcXHUxRThCJzogJ3gnLFxcclxcbiAgICAnXFxcXHUxRThEJzogJ3gnLFxcclxcbiAgICAnXFxcXHUyNEU4JzogJ3knLFxcclxcbiAgICAnXFxcXHVGRjU5JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUYzJzogJ3knLFxcclxcbiAgICAnXFxcXHUwMEZEJzogJ3knLFxcclxcbiAgICAnXFxcXHUwMTc3JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUY5JzogJ3knLFxcclxcbiAgICAnXFxcXHUwMjMzJzogJ3knLFxcclxcbiAgICAnXFxcXHUxRThGJzogJ3knLFxcclxcbiAgICAnXFxcXHUwMEZGJzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUY3JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRTk5JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUY1JzogJ3knLFxcclxcbiAgICAnXFxcXHUwMUI0JzogJ3knLFxcclxcbiAgICAnXFxcXHUwMjRGJzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUZGJzogJ3knLFxcclxcbiAgICAnXFxcXHUyNEU5JzogJ3onLFxcclxcbiAgICAnXFxcXHVGRjVBJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMTdBJzogJ3onLFxcclxcbiAgICAnXFxcXHUxRTkxJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMTdDJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMTdFJzogJ3onLFxcclxcbiAgICAnXFxcXHUxRTkzJzogJ3onLFxcclxcbiAgICAnXFxcXHUxRTk1JzogJ3onLFxcclxcbiAgICAnXFxcXHUwMUI2JzogJ3onLFxcclxcbiAgICAnXFxcXHUwMjI1JzogJ3onLFxcclxcbiAgICAnXFxcXHUwMjQwJzogJ3onLFxcclxcbiAgICAnXFxcXHUyQzZDJzogJ3onLFxcclxcbiAgICAnXFxcXHVBNzYzJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMzg2JzogJ1xcXFx1MDM5MScsXFxyXFxuICAgICdcXFxcdTAzODgnOiAnXFxcXHUwMzk1JyxcXHJcXG4gICAgJ1xcXFx1MDM4OSc6ICdcXFxcdTAzOTcnLFxcclxcbiAgICAnXFxcXHUwMzhBJzogJ1xcXFx1MDM5OScsXFxyXFxuICAgICdcXFxcdTAzQUEnOiAnXFxcXHUwMzk5JyxcXHJcXG4gICAgJ1xcXFx1MDM4Qyc6ICdcXFxcdTAzOUYnLFxcclxcbiAgICAnXFxcXHUwMzhFJzogJ1xcXFx1MDNBNScsXFxyXFxuICAgICdcXFxcdTAzQUInOiAnXFxcXHUwM0E1JyxcXHJcXG4gICAgJ1xcXFx1MDM4Ric6ICdcXFxcdTAzQTknLFxcclxcbiAgICAnXFxcXHUwM0FDJzogJ1xcXFx1MDNCMScsXFxyXFxuICAgICdcXFxcdTAzQUQnOiAnXFxcXHUwM0I1JyxcXHJcXG4gICAgJ1xcXFx1MDNBRSc6ICdcXFxcdTAzQjcnLFxcclxcbiAgICAnXFxcXHUwM0FGJzogJ1xcXFx1MDNCOScsXFxyXFxuICAgICdcXFxcdTAzQ0EnOiAnXFxcXHUwM0I5JyxcXHJcXG4gICAgJ1xcXFx1MDM5MCc6ICdcXFxcdTAzQjknLFxcclxcbiAgICAnXFxcXHUwM0NDJzogJ1xcXFx1MDNCRicsXFxyXFxuICAgICdcXFxcdTAzQ0QnOiAnXFxcXHUwM0M1JyxcXHJcXG4gICAgJ1xcXFx1MDNDQic6ICdcXFxcdTAzQzUnLFxcclxcbiAgICAnXFxcXHUwM0IwJzogJ1xcXFx1MDNDNScsXFxyXFxuICAgICdcXFxcdTAzQzknOiAnXFxcXHUwM0M5JyxcXHJcXG4gICAgJ1xcXFx1MDNDMic6ICdcXFxcdTAzQzMnXFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIGRpYWNyaXRpY3M7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvYmFzZScsW1xcclxcbiAgJy4uL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uIChVdGlscykge1xcclxcbiAgZnVuY3Rpb24gQmFzZUFkYXB0ZXIgKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIEJhc2VBZGFwdGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKEJhc2VBZGFwdGVyLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIEJhc2VBZGFwdGVyLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XFxyXFxuICAgIHRocm93IG5ldyBFcnJvcignVGhlIGBjdXJyZW50YCBtZXRob2QgbXVzdCBiZSBkZWZpbmVkIGluIGNoaWxkIGNsYXNzZXMuJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHtcXHJcXG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgYHF1ZXJ5YCBtZXRob2QgbXVzdCBiZSBkZWZpbmVkIGluIGNoaWxkIGNsYXNzZXMuJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIC8vIENhbiBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIENhbiBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmdlbmVyYXRlUmVzdWx0SWQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBkYXRhKSB7XFxyXFxuICAgIHZhciBpZCA9IGNvbnRhaW5lci5pZCArICctcmVzdWx0LSc7XFxyXFxuXFxyXFxuICAgIGlkICs9IFV0aWxzLmdlbmVyYXRlQ2hhcnMoNCk7XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLmlkICE9IG51bGwpIHtcXHJcXG4gICAgICBpZCArPSAnLScgKyBkYXRhLmlkLnRvU3RyaW5nKCk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgaWQgKz0gJy0nICsgVXRpbHMuZ2VuZXJhdGVDaGFycyg0KTtcXHJcXG4gICAgfVxcclxcbiAgICByZXR1cm4gaWQ7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEJhc2VBZGFwdGVyO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL3NlbGVjdCcsW1xcclxcbiAgJy4vYmFzZScsXFxyXFxuICAnLi4vdXRpbHMnLFxcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoQmFzZUFkYXB0ZXIsIFV0aWxzLCAkKSB7XFxyXFxuICBmdW5jdGlvbiBTZWxlY3RBZGFwdGVyICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XFxyXFxuXFxyXFxuICAgIFNlbGVjdEFkYXB0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoU2VsZWN0QWRhcHRlciwgQmFzZUFkYXB0ZXIpO1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUuY3VycmVudCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xcclxcbiAgICB2YXIgZGF0YSA9IFtdO1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQuZmluZCgnOnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRvcHRpb24gPSAkKHRoaXMpO1xcclxcblxcclxcbiAgICAgIHZhciBvcHRpb24gPSBzZWxmLml0ZW0oJG9wdGlvbik7XFxyXFxuXFxyXFxuICAgICAgZGF0YS5wdXNoKG9wdGlvbik7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjYWxsYmFjayhkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGRhdGEuc2VsZWN0ZWQgPSB0cnVlO1xcclxcblxcclxcbiAgICAvLyBJZiBkYXRhLmVsZW1lbnQgaXMgYSBET00gbm9kZSwgdXNlIGl0IGluc3RlYWRcXHJcXG4gICAgaWYgKCQoZGF0YS5lbGVtZW50KS5pcygnb3B0aW9uJykpIHtcXHJcXG4gICAgICBkYXRhLmVsZW1lbnQuc2VsZWN0ZWQgPSB0cnVlO1xcclxcblxcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLiRlbGVtZW50LnByb3AoJ211bHRpcGxlJykpIHtcXHJcXG4gICAgICB0aGlzLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgICB2YXIgdmFsID0gW107XFxyXFxuXFxyXFxuICAgICAgICBkYXRhID0gW2RhdGFdO1xcclxcbiAgICAgICAgZGF0YS5wdXNoLmFwcGx5KGRhdGEsIGN1cnJlbnREYXRhKTtcXHJcXG5cXHJcXG4gICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgICAgICB2YXIgaWQgPSBkYXRhW2RdLmlkO1xcclxcblxcclxcbiAgICAgICAgICBpZiAoJC5pbkFycmF5KGlkLCB2YWwpID09PSAtMSkge1xcclxcbiAgICAgICAgICAgIHZhbC5wdXNoKGlkKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgc2VsZi4kZWxlbWVudC52YWwodmFsKTtcXHJcXG4gICAgICAgIHNlbGYuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdmFyIHZhbCA9IGRhdGEuaWQ7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudC52YWwodmFsKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUudW5zZWxlY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGlmICghdGhpcy4kZWxlbWVudC5wcm9wKCdtdWx0aXBsZScpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGRhdGEuc2VsZWN0ZWQgPSBmYWxzZTtcXHJcXG5cXHJcXG4gICAgaWYgKCQoZGF0YS5lbGVtZW50KS5pcygnb3B0aW9uJykpIHtcXHJcXG4gICAgICBkYXRhLmVsZW1lbnQuc2VsZWN0ZWQgPSBmYWxzZTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScpO1xcclxcblxcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgdmFyIHZhbCA9IFtdO1xcclxcblxcclxcbiAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgY3VycmVudERhdGEubGVuZ3RoOyBkKyspIHtcXHJcXG4gICAgICAgIHZhciBpZCA9IGN1cnJlbnREYXRhW2RdLmlkO1xcclxcblxcclxcbiAgICAgICAgaWYgKGlkICE9PSBkYXRhLmlkICYmICQuaW5BcnJheShpZCwgdmFsKSA9PT0gLTEpIHtcXHJcXG4gICAgICAgICAgdmFsLnB1c2goaWQpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBzZWxmLiRlbGVtZW50LnZhbCh2YWwpO1xcclxcblxcclxcbiAgICAgIHNlbGYuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignc2VsZWN0JywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuc2VsZWN0KHBhcmFtcy5kYXRhKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigndW5zZWxlY3QnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi51bnNlbGVjdChwYXJhbXMuZGF0YSk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIFJlbW92ZSBhbnl0aGluZyBhZGRlZCB0byBjaGlsZCBlbGVtZW50c1xcclxcbiAgICB0aGlzLiRlbGVtZW50LmZpbmQoJyonKS5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBSZW1vdmUgYW55IGN1c3RvbSBkYXRhIHNldCBieSBTZWxlY3QyXFxyXFxuICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsICdkYXRhJyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHtcXHJcXG4gICAgdmFyIGRhdGEgPSBbXTtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgJG9wdGlvbnMgPSB0aGlzLiRlbGVtZW50LmNoaWxkcmVuKCk7XFxyXFxuXFxyXFxuICAgICRvcHRpb25zLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkb3B0aW9uID0gJCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoISRvcHRpb24uaXMoJ29wdGlvbicpICYmICEkb3B0aW9uLmlzKCdvcHRncm91cCcpKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBvcHRpb24gPSBzZWxmLml0ZW0oJG9wdGlvbik7XFxyXFxuXFxyXFxuICAgICAgdmFyIG1hdGNoZXMgPSBzZWxmLm1hdGNoZXMocGFyYW1zLCBvcHRpb24pO1xcclxcblxcclxcbiAgICAgIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XFxyXFxuICAgICAgICBkYXRhLnB1c2gobWF0Y2hlcyk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY2FsbGJhY2soe1xcclxcbiAgICAgIHJlc3VsdHM6IGRhdGFcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUuYWRkT3B0aW9ucyA9IGZ1bmN0aW9uICgkb3B0aW9ucykge1xcclxcbiAgICBVdGlscy5hcHBlbmRNYW55KHRoaXMuJGVsZW1lbnQsICRvcHRpb25zKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5vcHRpb24gPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB2YXIgb3B0aW9uO1xcclxcblxcclxcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xcclxcbiAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJyk7XFxyXFxuICAgICAgb3B0aW9uLmxhYmVsID0gZGF0YS50ZXh0O1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xcclxcblxcclxcbiAgICAgIGlmIChvcHRpb24udGV4dENvbnRlbnQgIT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gZGF0YS50ZXh0O1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gZGF0YS50ZXh0O1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5pZCkge1xcclxcbiAgICAgIG9wdGlvbi52YWx1ZSA9IGRhdGEuaWQ7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcXHJcXG4gICAgICBvcHRpb24uZGlzYWJsZWQgPSB0cnVlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLnNlbGVjdGVkKSB7XFxyXFxuICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS50aXRsZSkge1xcclxcbiAgICAgIG9wdGlvbi50aXRsZSA9IGRhdGEudGl0bGU7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRvcHRpb24gPSAkKG9wdGlvbik7XFxyXFxuXFxyXFxuICAgIHZhciBub3JtYWxpemVkRGF0YSA9IHRoaXMuX25vcm1hbGl6ZUl0ZW0oZGF0YSk7XFxyXFxuICAgIG5vcm1hbGl6ZWREYXRhLmVsZW1lbnQgPSBvcHRpb247XFxyXFxuXFxyXFxuICAgIC8vIE92ZXJyaWRlIHRoZSBvcHRpb24ncyBkYXRhIHdpdGggdGhlIGNvbWJpbmVkIGRhdGFcXHJcXG4gICAgJC5kYXRhKG9wdGlvbiwgJ2RhdGEnLCBub3JtYWxpemVkRGF0YSk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkb3B0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbiAoJG9wdGlvbikge1xcclxcbiAgICB2YXIgZGF0YSA9IHt9O1xcclxcblxcclxcbiAgICBkYXRhID0gJC5kYXRhKCRvcHRpb25bMF0sICdkYXRhJyk7XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhICE9IG51bGwpIHtcXHJcXG4gICAgICByZXR1cm4gZGF0YTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoJG9wdGlvbi5pcygnb3B0aW9uJykpIHtcXHJcXG4gICAgICBkYXRhID0ge1xcclxcbiAgICAgICAgaWQ6ICRvcHRpb24udmFsKCksXFxyXFxuICAgICAgICB0ZXh0OiAkb3B0aW9uLnRleHQoKSxcXHJcXG4gICAgICAgIGRpc2FibGVkOiAkb3B0aW9uLnByb3AoJ2Rpc2FibGVkJyksXFxyXFxuICAgICAgICBzZWxlY3RlZDogJG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcpLFxcclxcbiAgICAgICAgdGl0bGU6ICRvcHRpb24ucHJvcCgndGl0bGUnKVxcclxcbiAgICAgIH07XFxyXFxuICAgIH0gZWxzZSBpZiAoJG9wdGlvbi5pcygnb3B0Z3JvdXAnKSkge1xcclxcbiAgICAgIGRhdGEgPSB7XFxyXFxuICAgICAgICB0ZXh0OiAkb3B0aW9uLnByb3AoJ2xhYmVsJyksXFxyXFxuICAgICAgICBjaGlsZHJlbjogW10sXFxyXFxuICAgICAgICB0aXRsZTogJG9wdGlvbi5wcm9wKCd0aXRsZScpXFxyXFxuICAgICAgfTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJGNoaWxkcmVuID0gJG9wdGlvbi5jaGlsZHJlbignb3B0aW9uJyk7XFxyXFxuICAgICAgdmFyIGNoaWxkcmVuID0gW107XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCAkY2hpbGRyZW4ubGVuZ3RoOyBjKyspIHtcXHJcXG4gICAgICAgIHZhciAkY2hpbGQgPSAkKCRjaGlsZHJlbltjXSk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLml0ZW0oJGNoaWxkKTtcXHJcXG5cXHJcXG4gICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBkYXRhLmNoaWxkcmVuID0gY2hpbGRyZW47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGF0YSA9IHRoaXMuX25vcm1hbGl6ZUl0ZW0oZGF0YSk7XFxyXFxuICAgIGRhdGEuZWxlbWVudCA9ICRvcHRpb25bMF07XFxyXFxuXFxyXFxuICAgICQuZGF0YSgkb3B0aW9uWzBdLCAnZGF0YScsIGRhdGEpO1xcclxcblxcclxcbiAgICByZXR1cm4gZGF0YTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5fbm9ybWFsaXplSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XFxyXFxuICAgIGlmICghJC5pc1BsYWluT2JqZWN0KGl0ZW0pKSB7XFxyXFxuICAgICAgaXRlbSA9IHtcXHJcXG4gICAgICAgIGlkOiBpdGVtLFxcclxcbiAgICAgICAgdGV4dDogaXRlbVxcclxcbiAgICAgIH07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaXRlbSA9ICQuZXh0ZW5kKHt9LCB7XFxyXFxuICAgICAgdGV4dDogJydcXHJcXG4gICAgfSwgaXRlbSk7XFxyXFxuXFxyXFxuICAgIHZhciBkZWZhdWx0cyA9IHtcXHJcXG4gICAgICBzZWxlY3RlZDogZmFsc2UsXFxyXFxuICAgICAgZGlzYWJsZWQ6IGZhbHNlXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIGlmIChpdGVtLmlkICE9IG51bGwpIHtcXHJcXG4gICAgICBpdGVtLmlkID0gaXRlbS5pZC50b1N0cmluZygpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChpdGVtLnRleHQgIT0gbnVsbCkge1xcclxcbiAgICAgIGl0ZW0udGV4dCA9IGl0ZW0udGV4dC50b1N0cmluZygpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChpdGVtLl9yZXN1bHRJZCA9PSBudWxsICYmIGl0ZW0uaWQgJiYgdGhpcy5jb250YWluZXIgIT0gbnVsbCkge1xcclxcbiAgICAgIGl0ZW0uX3Jlc3VsdElkID0gdGhpcy5nZW5lcmF0ZVJlc3VsdElkKHRoaXMuY29udGFpbmVyLCBpdGVtKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBpdGVtKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKHBhcmFtcywgZGF0YSkge1xcclxcbiAgICB2YXIgbWF0Y2hlciA9IHRoaXMub3B0aW9ucy5nZXQoJ21hdGNoZXInKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIG1hdGNoZXIocGFyYW1zLCBkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gU2VsZWN0QWRhcHRlcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9hcnJheScsW1xcclxcbiAgJy4vc2VsZWN0JyxcXHJcXG4gICcuLi91dGlscycsXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uIChTZWxlY3RBZGFwdGVyLCBVdGlscywgJCkge1xcclxcbiAgZnVuY3Rpb24gQXJyYXlBZGFwdGVyICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB2YXIgZGF0YSA9IG9wdGlvbnMuZ2V0KCdkYXRhJykgfHwgW107XFxyXFxuXFxyXFxuICAgIEFycmF5QWRhcHRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuYWRkT3B0aW9ucyh0aGlzLmNvbnZlcnRUb09wdGlvbnMoZGF0YSkpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKEFycmF5QWRhcHRlciwgU2VsZWN0QWRhcHRlcik7XFxyXFxuXFxyXFxuICBBcnJheUFkYXB0ZXIucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciAkb3B0aW9uID0gdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb24nKS5maWx0ZXIoZnVuY3Rpb24gKGksIGVsbSkge1xcclxcbiAgICAgIHJldHVybiBlbG0udmFsdWUgPT0gZGF0YS5pZC50b1N0cmluZygpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgaWYgKCRvcHRpb24ubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgJG9wdGlvbiA9IHRoaXMub3B0aW9uKGRhdGEpO1xcclxcblxcclxcbiAgICAgIHRoaXMuYWRkT3B0aW9ucygkb3B0aW9uKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBBcnJheUFkYXB0ZXIuX19zdXBlcl9fLnNlbGVjdC5jYWxsKHRoaXMsIGRhdGEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEFycmF5QWRhcHRlci5wcm90b3R5cGUuY29udmVydFRvT3B0aW9ucyA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyICRleGlzdGluZyA9IHRoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uJyk7XFxyXFxuICAgIHZhciBleGlzdGluZ0lkcyA9ICRleGlzdGluZy5tYXAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHJldHVybiBzZWxmLml0ZW0oJCh0aGlzKSkuaWQ7XFxyXFxuICAgIH0pLmdldCgpO1xcclxcblxcclxcbiAgICB2YXIgJG9wdGlvbnMgPSBbXTtcXHJcXG5cXHJcXG4gICAgLy8gRmlsdGVyIG91dCBhbGwgaXRlbXMgZXhjZXB0IGZvciB0aGUgb25lIHBhc3NlZCBpbiB0aGUgYXJndW1lbnRcXHJcXG4gICAgZnVuY3Rpb24gb25seUl0ZW0gKGl0ZW0pIHtcXHJcXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgcmV0dXJuICQodGhpcykudmFsKCkgPT0gaXRlbS5pZDtcXHJcXG4gICAgICB9O1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciBpdGVtID0gdGhpcy5fbm9ybWFsaXplSXRlbShkYXRhW2RdKTtcXHJcXG5cXHJcXG4gICAgICAvLyBTa2lwIGl0ZW1zIHdoaWNoIHdlcmUgcHJlLWxvYWRlZCwgb25seSBtZXJnZSB0aGUgZGF0YVxcclxcbiAgICAgIGlmICgkLmluQXJyYXkoaXRlbS5pZCwgZXhpc3RpbmdJZHMpID49IDApIHtcXHJcXG4gICAgICAgIHZhciAkZXhpc3RpbmdPcHRpb24gPSAkZXhpc3RpbmcuZmlsdGVyKG9ubHlJdGVtKGl0ZW0pKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBleGlzdGluZ0RhdGEgPSB0aGlzLml0ZW0oJGV4aXN0aW5nT3B0aW9uKTtcXHJcXG4gICAgICAgIHZhciBuZXdEYXRhID0gJC5leHRlbmQodHJ1ZSwge30sIGl0ZW0sIGV4aXN0aW5nRGF0YSk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgJG5ld09wdGlvbiA9IHRoaXMub3B0aW9uKG5ld0RhdGEpO1xcclxcblxcclxcbiAgICAgICAgJGV4aXN0aW5nT3B0aW9uLnJlcGxhY2VXaXRoKCRuZXdPcHRpb24pO1xcclxcblxcclxcbiAgICAgICAgY29udGludWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciAkb3B0aW9uID0gdGhpcy5vcHRpb24oaXRlbSk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcXHJcXG4gICAgICAgIHZhciAkY2hpbGRyZW4gPSB0aGlzLmNvbnZlcnRUb09wdGlvbnMoaXRlbS5jaGlsZHJlbik7XFxyXFxuXFxyXFxuICAgICAgICBVdGlscy5hcHBlbmRNYW55KCRvcHRpb24sICRjaGlsZHJlbik7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgICRvcHRpb25zLnB1c2goJG9wdGlvbik7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuICRvcHRpb25zO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBBcnJheUFkYXB0ZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvYWpheCcsW1xcclxcbiAgJy4vYXJyYXknLFxcclxcbiAgJy4uL3V0aWxzJyxcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKEFycmF5QWRhcHRlciwgVXRpbHMsICQpIHtcXHJcXG4gIGZ1bmN0aW9uIEFqYXhBZGFwdGVyICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLmFqYXhPcHRpb25zID0gdGhpcy5fYXBwbHlEZWZhdWx0cyhvcHRpb25zLmdldCgnYWpheCcpKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuYWpheE9wdGlvbnMucHJvY2Vzc1Jlc3VsdHMgIT0gbnVsbCkge1xcclxcbiAgICAgIHRoaXMucHJvY2Vzc1Jlc3VsdHMgPSB0aGlzLmFqYXhPcHRpb25zLnByb2Nlc3NSZXN1bHRzO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIEFqYXhBZGFwdGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChBamF4QWRhcHRlciwgQXJyYXlBZGFwdGVyKTtcXHJcXG5cXHJcXG4gIEFqYXhBZGFwdGVyLnByb3RvdHlwZS5fYXBwbHlEZWZhdWx0cyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XFxyXFxuICAgIHZhciBkZWZhdWx0cyA9IHtcXHJcXG4gICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgICByZXR1cm4gJC5leHRlbmQoe30sIHBhcmFtcywge1xcclxcbiAgICAgICAgICBxOiBwYXJhbXMudGVybVxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfSxcXHJcXG4gICAgICB0cmFuc3BvcnQ6IGZ1bmN0aW9uIChwYXJhbXMsIHN1Y2Nlc3MsIGZhaWx1cmUpIHtcXHJcXG4gICAgICAgIHZhciAkcmVxdWVzdCA9ICQuYWpheChwYXJhbXMpO1xcclxcblxcclxcbiAgICAgICAgJHJlcXVlc3QudGhlbihzdWNjZXNzKTtcXHJcXG4gICAgICAgICRyZXF1ZXN0LmZhaWwoZmFpbHVyZSk7XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm4gJHJlcXVlc3Q7XFxyXFxuICAgICAgfVxcclxcbiAgICB9O1xcclxcblxcclxcbiAgICByZXR1cm4gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zLCB0cnVlKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBamF4QWRhcHRlci5wcm90b3R5cGUucHJvY2Vzc1Jlc3VsdHMgPSBmdW5jdGlvbiAocmVzdWx0cykge1xcclxcbiAgICByZXR1cm4gcmVzdWx0cztcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBamF4QWRhcHRlci5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICB2YXIgbWF0Y2hlcyA9IFtdO1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLl9yZXF1ZXN0ICE9IG51bGwpIHtcXHJcXG4gICAgICAvLyBKU09OUCByZXF1ZXN0cyBjYW5ub3QgYWx3YXlzIGJlIGFib3J0ZWRcXHJcXG4gICAgICBpZiAoJC5pc0Z1bmN0aW9uKHRoaXMuX3JlcXVlc3QuYWJvcnQpKSB7XFxyXFxuICAgICAgICB0aGlzLl9yZXF1ZXN0LmFib3J0KCk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHRoaXMuX3JlcXVlc3QgPSBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe1xcclxcbiAgICAgIHR5cGU6ICdHRVQnXFxyXFxuICAgIH0sIHRoaXMuYWpheE9wdGlvbnMpO1xcclxcblxcclxcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudXJsID09PSAnZnVuY3Rpb24nKSB7XFxyXFxuICAgICAgb3B0aW9ucy51cmwgPSBvcHRpb25zLnVybC5jYWxsKHRoaXMuJGVsZW1lbnQsIHBhcmFtcyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmRhdGEgPT09ICdmdW5jdGlvbicpIHtcXHJcXG4gICAgICBvcHRpb25zLmRhdGEgPSBvcHRpb25zLmRhdGEuY2FsbCh0aGlzLiRlbGVtZW50LCBwYXJhbXMpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIHJlcXVlc3QgKCkge1xcclxcbiAgICAgIHZhciAkcmVxdWVzdCA9IG9wdGlvbnMudHJhbnNwb3J0KG9wdGlvbnMsIGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgICAgICB2YXIgcmVzdWx0cyA9IHNlbGYucHJvY2Vzc1Jlc3VsdHMoZGF0YSwgcGFyYW1zKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZ2V0KCdkZWJ1ZycpICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpIHtcXHJcXG4gICAgICAgICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHJlc3BvbnNlIGluY2x1ZGVkIGEgYHJlc3VsdHNgIGtleS5cXHJcXG4gICAgICAgICAgaWYgKCFyZXN1bHRzIHx8ICFyZXN1bHRzLnJlc3VsdHMgfHwgISQuaXNBcnJheShyZXN1bHRzLnJlc3VsdHMpKSB7XFxyXFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcXHJcXG4gICAgICAgICAgICAgICdTZWxlY3QyOiBUaGUgQUpBWCByZXN1bHRzIGRpZCBub3QgcmV0dXJuIGFuIGFycmF5IGluIHRoZSAnICtcXHJcXG4gICAgICAgICAgICAgICdgcmVzdWx0c2Aga2V5IG9mIHRoZSByZXNwb25zZS4nXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgY2FsbGJhY2socmVzdWx0cyk7XFxyXFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBkZXRlY3QgaWYgYSByZXF1ZXN0IHdhcyBhYm9ydGVkXFxyXFxuICAgICAgICAvLyBPbmx5IHdvcmtzIGlmIHRoZSB0cmFuc3BvcnQgZXhwb3NlcyBhIHN0YXR1cyBwcm9wZXJ0eVxcclxcbiAgICAgICAgaWYgKCRyZXF1ZXN0LnN0YXR1cyAmJiAkcmVxdWVzdC5zdGF0dXMgPT09ICcwJykge1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgICAgbWVzc2FnZTogJ2Vycm9yTG9hZGluZydcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHNlbGYuX3JlcXVlc3QgPSAkcmVxdWVzdDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodGhpcy5hamF4T3B0aW9ucy5kZWxheSAmJiBwYXJhbXMudGVybSAhPSBudWxsKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuX3F1ZXJ5VGltZW91dCkge1xcclxcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9xdWVyeVRpbWVvdXQpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB0aGlzLl9xdWVyeVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChyZXF1ZXN0LCB0aGlzLmFqYXhPcHRpb25zLmRlbGF5KTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICByZXF1ZXN0KCk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQWpheEFkYXB0ZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvdGFncycsW1xcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoJCkge1xcclxcbiAgZnVuY3Rpb24gVGFncyAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB2YXIgdGFncyA9IG9wdGlvbnMuZ2V0KCd0YWdzJyk7XFxyXFxuXFxyXFxuICAgIHZhciBjcmVhdGVUYWcgPSBvcHRpb25zLmdldCgnY3JlYXRlVGFnJyk7XFxyXFxuXFxyXFxuICAgIGlmIChjcmVhdGVUYWcgIT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgIHRoaXMuY3JlYXRlVGFnID0gY3JlYXRlVGFnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBpbnNlcnRUYWcgPSBvcHRpb25zLmdldCgnaW5zZXJ0VGFnJyk7XFxyXFxuXFxyXFxuICAgIGlmIChpbnNlcnRUYWcgIT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgICAgdGhpcy5pbnNlcnRUYWcgPSBpbnNlcnRUYWc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcblxcclxcbiAgICBpZiAoJC5pc0FycmF5KHRhZ3MpKSB7XFxyXFxuICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0YWdzLmxlbmd0aDsgdCsrKSB7XFxyXFxuICAgICAgICB2YXIgdGFnID0gdGFnc1t0XTtcXHJcXG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5fbm9ybWFsaXplSXRlbSh0YWcpO1xcclxcblxcclxcbiAgICAgICAgdmFyICRvcHRpb24gPSB0aGlzLm9wdGlvbihpdGVtKTtcXHJcXG5cXHJcXG4gICAgICAgIHRoaXMuJGVsZW1lbnQuYXBwZW5kKCRvcHRpb24pO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcbiAgfVxcclxcblxcclxcbiAgVGFncy5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy5fcmVtb3ZlT2xkVGFncygpO1xcclxcblxcclxcbiAgICBpZiAocGFyYW1zLnRlcm0gPT0gbnVsbCB8fCBwYXJhbXMucGFnZSAhPSBudWxsKSB7XFxyXFxuICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIHdyYXBwZXIgKG9iaiwgY2hpbGQpIHtcXHJcXG4gICAgICB2YXIgZGF0YSA9IG9iai5yZXN1bHRzO1xcclxcblxcclxcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xcclxcbiAgICAgICAgdmFyIG9wdGlvbiA9IGRhdGFbaV07XFxyXFxuXFxyXFxuICAgICAgICB2YXIgY2hlY2tDaGlsZHJlbiA9IChcXHJcXG4gICAgICAgICAgb3B0aW9uLmNoaWxkcmVuICE9IG51bGwgJiZcXHJcXG4gICAgICAgICAgIXdyYXBwZXIoe1xcclxcbiAgICAgICAgICAgIHJlc3VsdHM6IG9wdGlvbi5jaGlsZHJlblxcclxcbiAgICAgICAgICB9LCB0cnVlKVxcclxcbiAgICAgICAgKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBjaGVja1RleHQgPSBvcHRpb24udGV4dCA9PT0gcGFyYW1zLnRlcm07XFxyXFxuXFxyXFxuICAgICAgICBpZiAoY2hlY2tUZXh0IHx8IGNoZWNrQ2hpbGRyZW4pIHtcXHJcXG4gICAgICAgICAgaWYgKGNoaWxkKSB7XFxyXFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIG9iai5kYXRhID0gZGF0YTtcXHJcXG4gICAgICAgICAgY2FsbGJhY2sob2JqKTtcXHJcXG5cXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAoY2hpbGQpIHtcXHJcXG4gICAgICAgIHJldHVybiB0cnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgdGFnID0gc2VsZi5jcmVhdGVUYWcocGFyYW1zKTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGFnICE9IG51bGwpIHtcXHJcXG4gICAgICAgIHZhciAkb3B0aW9uID0gc2VsZi5vcHRpb24odGFnKTtcXHJcXG4gICAgICAgICRvcHRpb24uYXR0cignZGF0YS1zZWxlY3QyLXRhZycsIHRydWUpO1xcclxcblxcclxcbiAgICAgICAgc2VsZi5hZGRPcHRpb25zKFskb3B0aW9uXSk7XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLmluc2VydFRhZyhkYXRhLCB0YWcpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBvYmoucmVzdWx0cyA9IGRhdGE7XFxyXFxuXFxyXFxuICAgICAgY2FsbGJhY2sob2JqKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMsIHdyYXBwZXIpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRhZ3MucHJvdG90eXBlLmNyZWF0ZVRhZyA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcykge1xcclxcbiAgICB2YXIgdGVybSA9ICQudHJpbShwYXJhbXMudGVybSk7XFxyXFxuXFxyXFxuICAgIGlmICh0ZXJtID09PSAnJykge1xcclxcbiAgICAgIHJldHVybiBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiB7XFxyXFxuICAgICAgaWQ6IHRlcm0sXFxyXFxuICAgICAgdGV4dDogdGVybVxcclxcbiAgICB9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRhZ3MucHJvdG90eXBlLmluc2VydFRhZyA9IGZ1bmN0aW9uIChfLCBkYXRhLCB0YWcpIHtcXHJcXG4gICAgZGF0YS51bnNoaWZ0KHRhZyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVGFncy5wcm90b3R5cGUuX3JlbW92ZU9sZFRhZ3MgPSBmdW5jdGlvbiAoXykge1xcclxcbiAgICB2YXIgdGFnID0gdGhpcy5fbGFzdFRhZztcXHJcXG5cXHJcXG4gICAgdmFyICRvcHRpb25zID0gdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb25bZGF0YS1zZWxlY3QyLXRhZ10nKTtcXHJcXG5cXHJcXG4gICAgJG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFRhZ3M7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvdG9rZW5pemVyJyxbXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uICgkKSB7XFxyXFxuICBmdW5jdGlvbiBUb2tlbml6ZXIgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgdmFyIHRva2VuaXplciA9IG9wdGlvbnMuZ2V0KCd0b2tlbml6ZXInKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRva2VuaXplciAhPT0gdW5kZWZpbmVkKSB7XFxyXFxuICAgICAgdGhpcy50b2tlbml6ZXIgPSB0b2tlbml6ZXI7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVG9rZW5pemVyLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlYXJjaCA9ICBjb250YWluZXIuZHJvcGRvd24uJHNlYXJjaCB8fCBjb250YWluZXIuc2VsZWN0aW9uLiRzZWFyY2ggfHxcXHJcXG4gICAgICAkY29udGFpbmVyLmZpbmQoJy5zZWxlY3QyLXNlYXJjaF9fZmllbGQnKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBUb2tlbml6ZXIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZFNlbGVjdCAoZGF0YSkge1xcclxcbiAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgZGF0YSBvYmplY3Qgc28gd2UgY2FuIHVzZSBpdCBmb3IgY2hlY2tzXFxyXFxuICAgICAgdmFyIGl0ZW0gPSBzZWxmLl9ub3JtYWxpemVJdGVtKGRhdGEpO1xcclxcblxcclxcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBkYXRhIG9iamVjdCBhbHJlYWR5IGV4aXN0cyBhcyBhIHRhZ1xcclxcbiAgICAgIC8vIFNlbGVjdCBpdCBpZiBpdCBkb2Vzbid0XFxyXFxuICAgICAgdmFyICRleGlzdGluZ09wdGlvbnMgPSBzZWxmLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpLmZpbHRlcihmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICByZXR1cm4gJCh0aGlzKS52YWwoKSA9PT0gaXRlbS5pZDtcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICAvLyBJZiBhbiBleGlzdGluZyBvcHRpb24gd2Fzbid0IGZvdW5kIGZvciBpdCwgY3JlYXRlIHRoZSBvcHRpb25cXHJcXG4gICAgICBpZiAoISRleGlzdGluZ09wdGlvbnMubGVuZ3RoKSB7XFxyXFxuICAgICAgICB2YXIgJG9wdGlvbiA9IHNlbGYub3B0aW9uKGl0ZW0pO1xcclxcbiAgICAgICAgJG9wdGlvbi5hdHRyKCdkYXRhLXNlbGVjdDItdGFnJywgdHJ1ZSk7XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLl9yZW1vdmVPbGRUYWdzKCk7XFxyXFxuICAgICAgICBzZWxmLmFkZE9wdGlvbnMoWyRvcHRpb25dKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgLy8gU2VsZWN0IHRoZSBpdGVtLCBub3cgdGhhdCB3ZSBrbm93IHRoZXJlIGlzIGFuIG9wdGlvbiBmb3IgaXRcXHJcXG4gICAgICBzZWxlY3QoaXRlbSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gc2VsZWN0IChkYXRhKSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3QnLCB7XFxyXFxuICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcGFyYW1zLnRlcm0gPSBwYXJhbXMudGVybSB8fCAnJztcXHJcXG5cXHJcXG4gICAgdmFyIHRva2VuRGF0YSA9IHRoaXMudG9rZW5pemVyKHBhcmFtcywgdGhpcy5vcHRpb25zLCBjcmVhdGVBbmRTZWxlY3QpO1xcclxcblxcclxcbiAgICBpZiAodG9rZW5EYXRhLnRlcm0gIT09IHBhcmFtcy50ZXJtKSB7XFxyXFxuICAgICAgLy8gUmVwbGFjZSB0aGUgc2VhcmNoIHRlcm0gaWYgd2UgaGF2ZSB0aGUgc2VhcmNoIGJveFxcclxcbiAgICAgIGlmICh0aGlzLiRzZWFyY2gubGVuZ3RoKSB7XFxyXFxuICAgICAgICB0aGlzLiRzZWFyY2gudmFsKHRva2VuRGF0YS50ZXJtKTtcXHJcXG4gICAgICAgIHRoaXMuJHNlYXJjaC5mb2N1cygpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBwYXJhbXMudGVybSA9IHRva2VuRGF0YS50ZXJtO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIHBhcmFtcywgY2FsbGJhY2spO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRva2VuaXplci5wcm90b3R5cGUudG9rZW5pemVyID0gZnVuY3Rpb24gKF8sIHBhcmFtcywgb3B0aW9ucywgY2FsbGJhY2spIHtcXHJcXG4gICAgdmFyIHNlcGFyYXRvcnMgPSBvcHRpb25zLmdldCgndG9rZW5TZXBhcmF0b3JzJykgfHwgW107XFxyXFxuICAgIHZhciB0ZXJtID0gcGFyYW1zLnRlcm07XFxyXFxuICAgIHZhciBpID0gMDtcXHJcXG5cXHJcXG4gICAgdmFyIGNyZWF0ZVRhZyA9IHRoaXMuY3JlYXRlVGFnIHx8IGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICByZXR1cm4ge1xcclxcbiAgICAgICAgaWQ6IHBhcmFtcy50ZXJtLFxcclxcbiAgICAgICAgdGV4dDogcGFyYW1zLnRlcm1cXHJcXG4gICAgICB9O1xcclxcbiAgICB9O1xcclxcblxcclxcbiAgICB3aGlsZSAoaSA8IHRlcm0ubGVuZ3RoKSB7XFxyXFxuICAgICAgdmFyIHRlcm1DaGFyID0gdGVybVtpXTtcXHJcXG5cXHJcXG4gICAgICBpZiAoJC5pbkFycmF5KHRlcm1DaGFyLCBzZXBhcmF0b3JzKSA9PT0gLTEpIHtcXHJcXG4gICAgICAgIGkrKztcXHJcXG5cXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgcGFydCA9IHRlcm0uc3Vic3RyKDAsIGkpO1xcclxcbiAgICAgIHZhciBwYXJ0UGFyYW1zID0gJC5leHRlbmQoe30sIHBhcmFtcywge1xcclxcbiAgICAgICAgdGVybTogcGFydFxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHZhciBkYXRhID0gY3JlYXRlVGFnKHBhcnRQYXJhbXMpO1xcclxcblxcclxcbiAgICAgIGlmIChkYXRhID09IG51bGwpIHtcXHJcXG4gICAgICAgIGkrKztcXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBjYWxsYmFjayhkYXRhKTtcXHJcXG5cXHJcXG4gICAgICAvLyBSZXNldCB0aGUgdGVybSB0byBub3QgaW5jbHVkZSB0aGUgdG9rZW5pemVkIHBvcnRpb25cXHJcXG4gICAgICB0ZXJtID0gdGVybS5zdWJzdHIoaSArIDEpIHx8ICcnO1xcclxcbiAgICAgIGkgPSAwO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiB7XFxyXFxuICAgICAgdGVybTogdGVybVxcclxcbiAgICB9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBUb2tlbml6ZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvbWluaW11bUlucHV0TGVuZ3RoJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gTWluaW11bUlucHV0TGVuZ3RoIChkZWNvcmF0ZWQsICRlLCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMubWluaW11bUlucHV0TGVuZ3RoID0gb3B0aW9ucy5nZXQoJ21pbmltdW1JbnB1dExlbmd0aCcpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZSwgb3B0aW9ucyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBNaW5pbXVtSW5wdXRMZW5ndGgucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICBwYXJhbXMudGVybSA9IHBhcmFtcy50ZXJtIHx8ICcnO1xcclxcblxcclxcbiAgICBpZiAocGFyYW1zLnRlcm0ubGVuZ3RoIDwgdGhpcy5taW5pbXVtSW5wdXRMZW5ndGgpIHtcXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgIG1lc3NhZ2U6ICdpbnB1dFRvb1Nob3J0JyxcXHJcXG4gICAgICAgIGFyZ3M6IHtcXHJcXG4gICAgICAgICAgbWluaW11bTogdGhpcy5taW5pbXVtSW5wdXRMZW5ndGgsXFxyXFxuICAgICAgICAgIGlucHV0OiBwYXJhbXMudGVybSxcXHJcXG4gICAgICAgICAgcGFyYW1zOiBwYXJhbXNcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIE1pbmltdW1JbnB1dExlbmd0aDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9tYXhpbXVtSW5wdXRMZW5ndGgnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICBmdW5jdGlvbiBNYXhpbXVtSW5wdXRMZW5ndGggKGRlY29yYXRlZCwgJGUsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy5tYXhpbXVtSW5wdXRMZW5ndGggPSBvcHRpb25zLmdldCgnbWF4aW11bUlucHV0TGVuZ3RoJyk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE1heGltdW1JbnB1dExlbmd0aC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHBhcmFtcy50ZXJtID0gcGFyYW1zLnRlcm0gfHwgJyc7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm1heGltdW1JbnB1dExlbmd0aCA+IDAgJiZcXHJcXG4gICAgICAgIHBhcmFtcy50ZXJtLmxlbmd0aCA+IHRoaXMubWF4aW11bUlucHV0TGVuZ3RoKSB7XFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCdyZXN1bHRzOm1lc3NhZ2UnLCB7XFxyXFxuICAgICAgICBtZXNzYWdlOiAnaW5wdXRUb29Mb25nJyxcXHJcXG4gICAgICAgIGFyZ3M6IHtcXHJcXG4gICAgICAgICAgbWF4aW11bTogdGhpcy5tYXhpbXVtSW5wdXRMZW5ndGgsXFxyXFxuICAgICAgICAgIGlucHV0OiBwYXJhbXMudGVybSxcXHJcXG4gICAgICAgICAgcGFyYW1zOiBwYXJhbXNcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIE1heGltdW1JbnB1dExlbmd0aDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCl7XFxyXFxuICBmdW5jdGlvbiBNYXhpbXVtU2VsZWN0aW9uTGVuZ3RoIChkZWNvcmF0ZWQsICRlLCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMubWF4aW11bVNlbGVjdGlvbkxlbmd0aCA9IG9wdGlvbnMuZ2V0KCdtYXhpbXVtU2VsZWN0aW9uTGVuZ3RoJyk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE1heGltdW1TZWxlY3Rpb25MZW5ndGgucHJvdG90eXBlLnF1ZXJ5ID1cXHJcXG4gICAgZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgICB0aGlzLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgICB2YXIgY291bnQgPSBjdXJyZW50RGF0YSAhPSBudWxsID8gY3VycmVudERhdGEubGVuZ3RoIDogMDtcXHJcXG4gICAgICAgIGlmIChzZWxmLm1heGltdW1TZWxlY3Rpb25MZW5ndGggPiAwICYmXFxyXFxuICAgICAgICAgIGNvdW50ID49IHNlbGYubWF4aW11bVNlbGVjdGlvbkxlbmd0aCkge1xcclxcbiAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgICAgICBtZXNzYWdlOiAnbWF4aW11bVNlbGVjdGVkJyxcXHJcXG4gICAgICAgICAgICBhcmdzOiB7XFxyXFxuICAgICAgICAgICAgICBtYXhpbXVtOiBzZWxmLm1heGltdW1TZWxlY3Rpb25MZW5ndGhcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBkZWNvcmF0ZWQuY2FsbChzZWxmLCBwYXJhbXMsIGNhbGxiYWNrKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gTWF4aW11bVNlbGVjdGlvbkxlbmd0aDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24nLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4vdXRpbHMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBEcm9wZG93biAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xcclxcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xcclxcblxcclxcbiAgICBEcm9wZG93bi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChEcm9wZG93biwgVXRpbHMuT2JzZXJ2YWJsZSk7XFxyXFxuXFxyXFxuICBEcm9wZG93bi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJGRyb3Bkb3duID0gJChcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItZHJvcGRvd25cXFwiPicgK1xcclxcbiAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdHNcXFwiPjwvc3Bhbj4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgJGRyb3Bkb3duLmF0dHIoJ2RpcicsIHRoaXMub3B0aW9ucy5nZXQoJ2RpcicpKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kZHJvcGRvd24gPSAkZHJvcGRvd247XFxyXFxuXFxyXFxuICAgIHJldHVybiAkZHJvcGRvd247XFxyXFxuICB9O1xcclxcblxcclxcbiAgRHJvcGRvd24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgRHJvcGRvd24ucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKCRkcm9wZG93biwgJGNvbnRhaW5lcikge1xcclxcbiAgICAvLyBTaG91bGQgYmUgaW1wbG1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgRHJvcGRvd24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIFJlbW92ZSB0aGUgZHJvcGRvd24gZnJvbSB0aGUgRE9NXFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBEcm9wZG93bjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vc2VhcmNoJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIFNlYXJjaCAoKSB7IH1cXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xcclxcbiAgICB2YXIgJHJlbmRlcmVkID0gZGVjb3JhdGVkLmNhbGwodGhpcyk7XFxyXFxuXFxyXFxuICAgIHZhciAkc2VhcmNoID0gJChcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItc2VhcmNoIHNlbGVjdDItc2VhcmNoLS1kcm9wZG93blxcXCI+JyArXFxyXFxuICAgICAgICAnPGlucHV0IGNsYXNzPVxcXCJzZWxlY3QyLXNlYXJjaF9fZmllbGRcXFwiIHR5cGU9XFxcInNlYXJjaFxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIicgK1xcclxcbiAgICAgICAgJyBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgYXV0b2NvcnJlY3Q9XFxcIm9mZlxcXCIgYXV0b2NhcGl0YWxpemU9XFxcIm9mZlxcXCInICtcXHJcXG4gICAgICAgICcgc3BlbGxjaGVjaz1cXFwiZmFsc2VcXFwiIHJvbGU9XFxcInRleHRib3hcXFwiIC8+JyArXFxyXFxuICAgICAgJzwvc3Bhbj4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlYXJjaENvbnRhaW5lciA9ICRzZWFyY2g7XFxyXFxuICAgIHRoaXMuJHNlYXJjaCA9ICRzZWFyY2guZmluZCgnaW5wdXQnKTtcXHJcXG5cXHJcXG4gICAgJHJlbmRlcmVkLnByZXBlbmQoJHNlYXJjaCk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkcmVuZGVyZWQ7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcigna2V5cHJlc3MnLCBldnQpO1xcclxcblxcclxcbiAgICAgIHNlbGYuX2tleVVwUHJldmVudGVkID0gZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgYnJvd3NlcnMgd2hpY2ggZG8gbm90IHN1cHBvcnQgdGhlIGBpbnB1dGAgZXZlbnRcXHJcXG4gICAgLy8gVGhpcyB3aWxsIHByZXZlbnQgZG91YmxlLXRyaWdnZXJpbmcgb2YgZXZlbnRzIGZvciBicm93c2VycyB3aGljaCBzdXBwb3J0XFxyXFxuICAgIC8vIGJvdGggdGhlIGBrZXl1cGAgYW5kIGBpbnB1dGAgZXZlbnRzLlxcclxcbiAgICB0aGlzLiRzZWFyY2gub24oJ2lucHV0JywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIC8vIFVuYmluZCB0aGUgZHVwbGljYXRlZCBga2V5dXBgIGV2ZW50XFxyXFxuICAgICAgJCh0aGlzKS5vZmYoJ2tleXVwJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2gub24oJ2tleXVwIGlucHV0JywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYuaGFuZGxlU2VhcmNoKGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLmF0dHIoJ3RhYmluZGV4JywgMCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuXFxyXFxuICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuICAgICAgfSwgMCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJHNlYXJjaC5hdHRyKCd0YWJpbmRleCcsIC0xKTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLiRzZWFyY2gudmFsKCcnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKGNvbnRhaW5lci5pc09wZW4oKSkge1xcclxcbiAgICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmFsbCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBpZiAocGFyYW1zLnF1ZXJ5LnRlcm0gPT0gbnVsbCB8fCBwYXJhbXMucXVlcnkudGVybSA9PT0gJycpIHtcXHJcXG4gICAgICAgIHZhciBzaG93U2VhcmNoID0gc2VsZi5zaG93U2VhcmNoKHBhcmFtcyk7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoc2hvd1NlYXJjaCkge1xcclxcbiAgICAgICAgICBzZWxmLiRzZWFyY2hDb250YWluZXIucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItc2VhcmNoLS1oaWRlJyk7XFxyXFxuICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICBzZWxmLiRzZWFyY2hDb250YWluZXIuYWRkQ2xhc3MoJ3NlbGVjdDItc2VhcmNoLS1oaWRlJyk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLmhhbmRsZVNlYXJjaCA9IGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgaWYgKCF0aGlzLl9rZXlVcFByZXZlbnRlZCkge1xcclxcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMuJHNlYXJjaC52YWwoKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ3F1ZXJ5Jywge1xcclxcbiAgICAgICAgdGVybTogaW5wdXRcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLl9rZXlVcFByZXZlbnRlZCA9IGZhbHNlO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuc2hvd1NlYXJjaCA9IGZ1bmN0aW9uIChfLCBwYXJhbXMpIHtcXHJcXG4gICAgcmV0dXJuIHRydWU7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFNlYXJjaDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vaGlkZVBsYWNlaG9sZGVyJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gSGlkZVBsYWNlaG9sZGVyIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcikge1xcclxcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5ub3JtYWxpemVQbGFjZWhvbGRlcihvcHRpb25zLmdldCgncGxhY2Vob2xkZXInKSk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcik7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBIaWRlUGxhY2Vob2xkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcXHJcXG4gICAgZGF0YS5yZXN1bHRzID0gdGhpcy5yZW1vdmVQbGFjZWhvbGRlcihkYXRhLnJlc3VsdHMpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBIaWRlUGxhY2Vob2xkZXIucHJvdG90eXBlLm5vcm1hbGl6ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKF8sIHBsYWNlaG9sZGVyKSB7XFxyXFxuICAgIGlmICh0eXBlb2YgcGxhY2Vob2xkZXIgPT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgcGxhY2Vob2xkZXIgPSB7XFxyXFxuICAgICAgICBpZDogJycsXFxyXFxuICAgICAgICB0ZXh0OiBwbGFjZWhvbGRlclxcclxcbiAgICAgIH07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEhpZGVQbGFjZWhvbGRlci5wcm90b3R5cGUucmVtb3ZlUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoXywgZGF0YSkge1xcclxcbiAgICB2YXIgbW9kaWZpZWREYXRhID0gZGF0YS5zbGljZSgwKTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgZCA9IGRhdGEubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcXHJcXG4gICAgICB2YXIgaXRlbSA9IGRhdGFbZF07XFxyXFxuXFxyXFxuICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIuaWQgPT09IGl0ZW0uaWQpIHtcXHJcXG4gICAgICAgIG1vZGlmaWVkRGF0YS5zcGxpY2UoZCwgMSk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBtb2RpZmllZERhdGE7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEhpZGVQbGFjZWhvbGRlcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vaW5maW5pdGVTY3JvbGwnLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIGZ1bmN0aW9uIEluZmluaXRlU2Nyb2xsIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcikge1xcclxcbiAgICB0aGlzLmxhc3RQYXJhbXMgPSB7fTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kbG9hZGluZ01vcmUgPSB0aGlzLmNyZWF0ZUxvYWRpbmdNb3JlKCk7XFxyXFxuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xcclxcbiAgfVxcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcXHJcXG4gICAgdGhpcy4kbG9hZGluZ01vcmUucmVtb3ZlKCk7XFxyXFxuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuc2hvd0xvYWRpbmdNb3JlKGRhdGEpKSB7XFxyXFxuICAgICAgdGhpcy4kcmVzdWx0cy5hcHBlbmQodGhpcy4kbG9hZGluZ01vcmUpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3F1ZXJ5JywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYubGFzdFBhcmFtcyA9IHBhcmFtcztcXHJcXG4gICAgICBzZWxmLmxvYWRpbmcgPSB0cnVlO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdxdWVyeTphcHBlbmQnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5sYXN0UGFyYW1zID0gcGFyYW1zO1xcclxcbiAgICAgIHNlbGYubG9hZGluZyA9IHRydWU7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyIGlzTG9hZE1vcmVWaXNpYmxlID0gJC5jb250YWlucyhcXHJcXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcXHJcXG4gICAgICAgIHNlbGYuJGxvYWRpbmdNb3JlWzBdXFxyXFxuICAgICAgKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoc2VsZi5sb2FkaW5nIHx8ICFpc0xvYWRNb3JlVmlzaWJsZSkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgY3VycmVudE9mZnNldCA9IHNlbGYuJHJlc3VsdHMub2Zmc2V0KCkudG9wICtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcbiAgICAgIHZhciBsb2FkaW5nTW9yZU9mZnNldCA9IHNlbGYuJGxvYWRpbmdNb3JlLm9mZnNldCgpLnRvcCArXFxyXFxuICAgICAgICBzZWxmLiRsb2FkaW5nTW9yZS5vdXRlckhlaWdodChmYWxzZSk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGN1cnJlbnRPZmZzZXQgKyA1MCA+PSBsb2FkaW5nTW9yZU9mZnNldCkge1xcclxcbiAgICAgICAgc2VsZi5sb2FkTW9yZSgpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmxvYWRNb3JlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xcclxcblxcclxcbiAgICB2YXIgcGFyYW1zID0gJC5leHRlbmQoe30sIHtwYWdlOiAxfSwgdGhpcy5sYXN0UGFyYW1zKTtcXHJcXG5cXHJcXG4gICAgcGFyYW1zLnBhZ2UrKztcXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCdxdWVyeTphcHBlbmQnLCBwYXJhbXMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEluZmluaXRlU2Nyb2xsLnByb3RvdHlwZS5zaG93TG9hZGluZ01vcmUgPSBmdW5jdGlvbiAoXywgZGF0YSkge1xcclxcbiAgICByZXR1cm4gZGF0YS5wYWdpbmF0aW9uICYmIGRhdGEucGFnaW5hdGlvbi5tb3JlO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEluZmluaXRlU2Nyb2xsLnByb3RvdHlwZS5jcmVhdGVMb2FkaW5nTW9yZSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRvcHRpb24gPSAkKFxcclxcbiAgICAgICc8bGkgJyArXFxyXFxuICAgICAgJ2NsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvbiBzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0tbG9hZC1tb3JlXFxcIicgK1xcclxcbiAgICAgICdyb2xlPVxcXCJ0cmVlaXRlbVxcXCIgYXJpYS1kaXNhYmxlZD1cXFwidHJ1ZVxcXCI+PC9saT4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHZhciBtZXNzYWdlID0gdGhpcy5vcHRpb25zLmdldCgndHJhbnNsYXRpb25zJykuZ2V0KCdsb2FkaW5nTW9yZScpO1xcclxcblxcclxcbiAgICAkb3B0aW9uLmh0bWwobWVzc2FnZSh0aGlzLmxhc3RQYXJhbXMpKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRvcHRpb247XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEluZmluaXRlU2Nyb2xsO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9hdHRhY2hCb2R5JyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIEF0dGFjaEJvZHkgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy4kZHJvcGRvd25QYXJlbnQgPSBvcHRpb25zLmdldCgnZHJvcGRvd25QYXJlbnQnKSB8fCAkKGRvY3VtZW50LmJvZHkpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyIHNldHVwUmVzdWx0c0V2ZW50cyA9IGZhbHNlO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi5fc2hvd0Ryb3Bkb3duKCk7XFxyXFxuICAgICAgc2VsZi5fYXR0YWNoUG9zaXRpb25pbmdIYW5kbGVyKGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgICAgaWYgKCFzZXR1cFJlc3VsdHNFdmVudHMpIHtcXHJcXG4gICAgICAgIHNldHVwUmVzdWx0c0V2ZW50cyA9IHRydWU7XFxyXFxuXFxyXFxuICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YWxsJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICBzZWxmLl9wb3NpdGlvbkRyb3Bkb3duKCk7XFxyXFxuICAgICAgICAgIHNlbGYuX3Jlc2l6ZURyb3Bkb3duKCk7XFxyXFxuICAgICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICAgIGNvbnRhaW5lci5vbigncmVzdWx0czphcHBlbmQnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgIHNlbGYuX3Bvc2l0aW9uRHJvcGRvd24oKTtcXHJcXG4gICAgICAgICAgc2VsZi5fcmVzaXplRHJvcGRvd24oKTtcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi5faGlkZURyb3Bkb3duKCk7XFxyXFxuICAgICAgc2VsZi5fZGV0YWNoUG9zaXRpb25pbmdIYW5kbGVyKGNvbnRhaW5lcik7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duQ29udGFpbmVyLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgJGRyb3Bkb3duLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIC8vIENsb25lIGFsbCBvZiB0aGUgY29udGFpbmVyIGNsYXNzZXNcXHJcXG4gICAgJGRyb3Bkb3duLmF0dHIoJ2NsYXNzJywgJGNvbnRhaW5lci5hdHRyKCdjbGFzcycpKTtcXHJcXG5cXHJcXG4gICAgJGRyb3Bkb3duLnJlbW92ZUNsYXNzKCdzZWxlY3QyJyk7XFxyXFxuICAgICRkcm9wZG93bi5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcXHJcXG5cXHJcXG4gICAgJGRyb3Bkb3duLmNzcyh7XFxyXFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXFxyXFxuICAgICAgdG9wOiAtOTk5OTk5XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRjb250YWluZXIgPSAkY29udGFpbmVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgdmFyICRjb250YWluZXIgPSAkKCc8c3Bhbj48L3NwYW4+Jyk7XFxyXFxuXFxyXFxuICAgIHZhciAkZHJvcGRvd24gPSBkZWNvcmF0ZWQuY2FsbCh0aGlzKTtcXHJcXG4gICAgJGNvbnRhaW5lci5hcHBlbmQoJGRyb3Bkb3duKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kZHJvcGRvd25Db250YWluZXIgPSAkY29udGFpbmVyO1xcclxcblxcclxcbiAgICByZXR1cm4gJGNvbnRhaW5lcjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5faGlkZURyb3Bkb3duID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5kZXRhY2goKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fYXR0YWNoUG9zaXRpb25pbmdIYW5kbGVyID1cXHJcXG4gICAgICBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgc2Nyb2xsRXZlbnQgPSAnc2Nyb2xsLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcXHJcXG4gICAgdmFyIHJlc2l6ZUV2ZW50ID0gJ3Jlc2l6ZS5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XFxyXFxuICAgIHZhciBvcmllbnRhdGlvbkV2ZW50ID0gJ29yaWVudGF0aW9uY2hhbmdlLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcXHJcXG5cXHJcXG4gICAgdmFyICR3YXRjaGVycyA9IHRoaXMuJGNvbnRhaW5lci5wYXJlbnRzKCkuZmlsdGVyKFV0aWxzLmhhc1Njcm9sbCk7XFxyXFxuICAgICR3YXRjaGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAkKHRoaXMpLmRhdGEoJ3NlbGVjdDItc2Nyb2xsLXBvc2l0aW9uJywge1xcclxcbiAgICAgICAgeDogJCh0aGlzKS5zY3JvbGxMZWZ0KCksXFxyXFxuICAgICAgICB5OiAkKHRoaXMpLnNjcm9sbFRvcCgpXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICAkd2F0Y2hlcnMub24oc2Nyb2xsRXZlbnQsIGZ1bmN0aW9uIChldikge1xcclxcbiAgICAgIHZhciBwb3NpdGlvbiA9ICQodGhpcykuZGF0YSgnc2VsZWN0Mi1zY3JvbGwtcG9zaXRpb24nKTtcXHJcXG4gICAgICAkKHRoaXMpLnNjcm9sbFRvcChwb3NpdGlvbi55KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgICQod2luZG93KS5vbihzY3JvbGxFdmVudCArICcgJyArIHJlc2l6ZUV2ZW50ICsgJyAnICsgb3JpZW50YXRpb25FdmVudCxcXHJcXG4gICAgICBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgIHNlbGYuX3Bvc2l0aW9uRHJvcGRvd24oKTtcXHJcXG4gICAgICBzZWxmLl9yZXNpemVEcm9wZG93bigpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fZGV0YWNoUG9zaXRpb25pbmdIYW5kbGVyID1cXHJcXG4gICAgICBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNjcm9sbEV2ZW50ID0gJ3Njcm9sbC5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XFxyXFxuICAgIHZhciByZXNpemVFdmVudCA9ICdyZXNpemUuc2VsZWN0Mi4nICsgY29udGFpbmVyLmlkO1xcclxcbiAgICB2YXIgb3JpZW50YXRpb25FdmVudCA9ICdvcmllbnRhdGlvbmNoYW5nZS5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XFxyXFxuXFxyXFxuICAgIHZhciAkd2F0Y2hlcnMgPSB0aGlzLiRjb250YWluZXIucGFyZW50cygpLmZpbHRlcihVdGlscy5oYXNTY3JvbGwpO1xcclxcbiAgICAkd2F0Y2hlcnMub2ZmKHNjcm9sbEV2ZW50KTtcXHJcXG5cXHJcXG4gICAgJCh3aW5kb3cpLm9mZihzY3JvbGxFdmVudCArICcgJyArIHJlc2l6ZUV2ZW50ICsgJyAnICsgb3JpZW50YXRpb25FdmVudCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUuX3Bvc2l0aW9uRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xcclxcblxcclxcbiAgICB2YXIgaXNDdXJyZW50bHlBYm92ZSA9IHRoaXMuJGRyb3Bkb3duLmhhc0NsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS1hYm92ZScpO1xcclxcbiAgICB2YXIgaXNDdXJyZW50bHlCZWxvdyA9IHRoaXMuJGRyb3Bkb3duLmhhc0NsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS1iZWxvdycpO1xcclxcblxcclxcbiAgICB2YXIgbmV3RGlyZWN0aW9uID0gbnVsbDtcXHJcXG5cXHJcXG4gICAgdmFyIG9mZnNldCA9IHRoaXMuJGNvbnRhaW5lci5vZmZzZXQoKTtcXHJcXG5cXHJcXG4gICAgb2Zmc2V0LmJvdHRvbSA9IG9mZnNldC50b3AgKyB0aGlzLiRjb250YWluZXIub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcblxcclxcbiAgICB2YXIgY29udGFpbmVyID0ge1xcclxcbiAgICAgIGhlaWdodDogdGhpcy4kY29udGFpbmVyLm91dGVySGVpZ2h0KGZhbHNlKVxcclxcbiAgICB9O1xcclxcblxcclxcbiAgICBjb250YWluZXIudG9wID0gb2Zmc2V0LnRvcDtcXHJcXG4gICAgY29udGFpbmVyLmJvdHRvbSA9IG9mZnNldC50b3AgKyBjb250YWluZXIuaGVpZ2h0O1xcclxcblxcclxcbiAgICB2YXIgZHJvcGRvd24gPSB7XFxyXFxuICAgICAgaGVpZ2h0OiB0aGlzLiRkcm9wZG93bi5vdXRlckhlaWdodChmYWxzZSlcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgdmFyIHZpZXdwb3J0ID0ge1xcclxcbiAgICAgIHRvcDogJHdpbmRvdy5zY3JvbGxUb3AoKSxcXHJcXG4gICAgICBib3R0b206ICR3aW5kb3cuc2Nyb2xsVG9wKCkgKyAkd2luZG93LmhlaWdodCgpXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIHZhciBlbm91Z2hSb29tQWJvdmUgPSB2aWV3cG9ydC50b3AgPCAob2Zmc2V0LnRvcCAtIGRyb3Bkb3duLmhlaWdodCk7XFxyXFxuICAgIHZhciBlbm91Z2hSb29tQmVsb3cgPSB2aWV3cG9ydC5ib3R0b20gPiAob2Zmc2V0LmJvdHRvbSArIGRyb3Bkb3duLmhlaWdodCk7XFxyXFxuXFxyXFxuICAgIHZhciBjc3MgPSB7XFxyXFxuICAgICAgbGVmdDogb2Zmc2V0LmxlZnQsXFxyXFxuICAgICAgdG9wOiBjb250YWluZXIuYm90dG9tXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIC8vIERldGVybWluZSB3aGF0IHRoZSBwYXJlbnQgZWxlbWVudCBpcyB0byB1c2UgZm9yIGNhbGNpdWxhdGluZyB0aGUgb2Zmc2V0XFxyXFxuICAgIHZhciAkb2Zmc2V0UGFyZW50ID0gdGhpcy4kZHJvcGRvd25QYXJlbnQ7XFxyXFxuXFxyXFxuICAgIC8vIEZvciBzdGF0aWNhbGx5IHBvc2l0b25lZCBlbGVtZW50cywgd2UgbmVlZCB0byBnZXQgdGhlIGVsZW1lbnRcXHJcXG4gICAgLy8gdGhhdCBpcyBkZXRlcm1pbmluZyB0aGUgb2Zmc2V0XFxyXFxuICAgIGlmICgkb2Zmc2V0UGFyZW50LmNzcygncG9zaXRpb24nKSA9PT0gJ3N0YXRpYycpIHtcXHJcXG4gICAgICAkb2Zmc2V0UGFyZW50ID0gJG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQoKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgcGFyZW50T2Zmc2V0ID0gJG9mZnNldFBhcmVudC5vZmZzZXQoKTtcXHJcXG5cXHJcXG4gICAgY3NzLnRvcCAtPSBwYXJlbnRPZmZzZXQudG9wO1xcclxcbiAgICBjc3MubGVmdCAtPSBwYXJlbnRPZmZzZXQubGVmdDtcXHJcXG5cXHJcXG4gICAgaWYgKCFpc0N1cnJlbnRseUFib3ZlICYmICFpc0N1cnJlbnRseUJlbG93KSB7XFxyXFxuICAgICAgbmV3RGlyZWN0aW9uID0gJ2JlbG93JztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoIWVub3VnaFJvb21CZWxvdyAmJiBlbm91Z2hSb29tQWJvdmUgJiYgIWlzQ3VycmVudGx5QWJvdmUpIHtcXHJcXG4gICAgICBuZXdEaXJlY3Rpb24gPSAnYWJvdmUnO1xcclxcbiAgICB9IGVsc2UgaWYgKCFlbm91Z2hSb29tQWJvdmUgJiYgZW5vdWdoUm9vbUJlbG93ICYmIGlzQ3VycmVudGx5QWJvdmUpIHtcXHJcXG4gICAgICBuZXdEaXJlY3Rpb24gPSAnYmVsb3cnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChuZXdEaXJlY3Rpb24gPT0gJ2Fib3ZlJyB8fFxcclxcbiAgICAgIChpc0N1cnJlbnRseUFib3ZlICYmIG5ld0RpcmVjdGlvbiAhPT0gJ2JlbG93JykpIHtcXHJcXG4gICAgICBjc3MudG9wID0gY29udGFpbmVyLnRvcCAtIHBhcmVudE9mZnNldC50b3AgLSBkcm9wZG93bi5oZWlnaHQ7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG5ld0RpcmVjdGlvbiAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy4kZHJvcGRvd25cXHJcXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0Mi1kcm9wZG93bi0tYmVsb3cgc2VsZWN0Mi1kcm9wZG93bi0tYWJvdmUnKVxcclxcbiAgICAgICAgLmFkZENsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS0nICsgbmV3RGlyZWN0aW9uKTtcXHJcXG4gICAgICB0aGlzLiRjb250YWluZXJcXHJcXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWJlbG93IHNlbGVjdDItY29udGFpbmVyLS1hYm92ZScpXFxyXFxuICAgICAgICAuYWRkQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS0nICsgbmV3RGlyZWN0aW9uKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5jc3MoY3NzKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fcmVzaXplRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBjc3MgPSB7XFxyXFxuICAgICAgd2lkdGg6IHRoaXMuJGNvbnRhaW5lci5vdXRlcldpZHRoKGZhbHNlKSArICdweCdcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2Ryb3Bkb3duQXV0b1dpZHRoJykpIHtcXHJcXG4gICAgICBjc3MubWluV2lkdGggPSBjc3Mud2lkdGg7XFxyXFxuICAgICAgY3NzLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcXHJcXG4gICAgICBjc3Mud2lkdGggPSAnYXV0byc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kZHJvcGRvd24uY3NzKGNzcyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUuX3Nob3dEcm9wZG93biA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgdGhpcy4kZHJvcGRvd25Db250YWluZXIuYXBwZW5kVG8odGhpcy4kZHJvcGRvd25QYXJlbnQpO1xcclxcblxcclxcbiAgICB0aGlzLl9wb3NpdGlvbkRyb3Bkb3duKCk7XFxyXFxuICAgIHRoaXMuX3Jlc2l6ZURyb3Bkb3duKCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEF0dGFjaEJvZHk7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gY291bnRSZXN1bHRzIChkYXRhKSB7XFxyXFxuICAgIHZhciBjb3VudCA9IDA7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciBpdGVtID0gZGF0YVtkXTtcXHJcXG5cXHJcXG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xcclxcbiAgICAgICAgY291bnQgKz0gY291bnRSZXN1bHRzKGl0ZW0uY2hpbGRyZW4pO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBjb3VudCsrO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gY291bnQ7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBmdW5jdGlvbiBNaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpIHtcXHJcXG4gICAgdGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCA9IG9wdGlvbnMuZ2V0KCdtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCcpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCA8IDApIHtcXHJcXG4gICAgICB0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoID0gSW5maW5pdHk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE1pbmltdW1SZXN1bHRzRm9yU2VhcmNoLnByb3RvdHlwZS5zaG93U2VhcmNoID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zKSB7XFxyXFxuICAgIGlmIChjb3VudFJlc3VsdHMocGFyYW1zLmRhdGEucmVzdWx0cykgPCB0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoKSB7XFxyXFxuICAgICAgcmV0dXJuIGZhbHNlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBNaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vc2VsZWN0T25DbG9zZScsW1xcclxcblxcclxcbl0sIGZ1bmN0aW9uICgpIHtcXHJcXG4gIGZ1bmN0aW9uIFNlbGVjdE9uQ2xvc2UgKCkgeyB9XFxyXFxuXFxyXFxuICBTZWxlY3RPbkNsb3NlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLl9oYW5kbGVTZWxlY3RPbkNsb3NlKHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdE9uQ2xvc2UucHJvdG90eXBlLl9oYW5kbGVTZWxlY3RPbkNsb3NlID0gZnVuY3Rpb24gKF8sIHBhcmFtcykge1xcclxcbiAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5vcmlnaW5hbFNlbGVjdDJFdmVudCAhPSBudWxsKSB7XFxyXFxuICAgICAgdmFyIGV2ZW50ID0gcGFyYW1zLm9yaWdpbmFsU2VsZWN0MkV2ZW50O1xcclxcblxcclxcbiAgICAgIC8vIERvbid0IHNlbGVjdCBhbiBpdGVtIGlmIHRoZSBjbG9zZSBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gYSBzZWxlY3Qgb3JcXHJcXG4gICAgICAvLyB1bnNlbGVjdCBldmVudFxcclxcbiAgICAgIGlmIChldmVudC5fdHlwZSA9PT0gJ3NlbGVjdCcgfHwgZXZlbnQuX3R5cGUgPT09ICd1bnNlbGVjdCcpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRoaWdobGlnaHRlZFJlc3VsdHMgPSB0aGlzLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICAvLyBPbmx5IHNlbGVjdCBoaWdobGlnaHRlZCByZXN1bHRzXFxyXFxuICAgIGlmICgkaGlnaGxpZ2h0ZWRSZXN1bHRzLmxlbmd0aCA8IDEpIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGRhdGEgPSAkaGlnaGxpZ2h0ZWRSZXN1bHRzLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgLy8gRG9uJ3QgcmUtc2VsZWN0IGFscmVhZHkgc2VsZWN0ZWQgcmVzdWx0ZVxcclxcbiAgICBpZiAoXFxyXFxuICAgICAgKGRhdGEuZWxlbWVudCAhPSBudWxsICYmIGRhdGEuZWxlbWVudC5zZWxlY3RlZCkgfHxcXHJcXG4gICAgICAoZGF0YS5lbGVtZW50ID09IG51bGwgJiYgZGF0YS5zZWxlY3RlZClcXHJcXG4gICAgKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMudHJpZ2dlcignc2VsZWN0Jywge1xcclxcbiAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gU2VsZWN0T25DbG9zZTtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vY2xvc2VPblNlbGVjdCcsW1xcclxcblxcclxcbl0sIGZ1bmN0aW9uICgpIHtcXHJcXG4gIGZ1bmN0aW9uIENsb3NlT25TZWxlY3QgKCkgeyB9XFxyXFxuXFxyXFxuICBDbG9zZU9uU2VsZWN0LnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi5fc2VsZWN0VHJpZ2dlcmVkKGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Vuc2VsZWN0JywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYuX3NlbGVjdFRyaWdnZXJlZChldnQpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBDbG9zZU9uU2VsZWN0LnByb3RvdHlwZS5fc2VsZWN0VHJpZ2dlcmVkID0gZnVuY3Rpb24gKF8sIGV2dCkge1xcclxcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IGV2dC5vcmlnaW5hbEV2ZW50O1xcclxcblxcclxcbiAgICAvLyBEb24ndCBjbG9zZSBpZiB0aGUgY29udHJvbCBrZXkgaXMgYmVpbmcgaGVsZFxcclxcbiAgICBpZiAob3JpZ2luYWxFdmVudCAmJiBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCdjbG9zZScsIHtcXHJcXG4gICAgICBvcmlnaW5hbEV2ZW50OiBvcmlnaW5hbEV2ZW50LFxcclxcbiAgICAgIG9yaWdpbmFsU2VsZWN0MkV2ZW50OiBldnRcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIENsb3NlT25TZWxlY3Q7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2kxOG4vZW4nLFtdLGZ1bmN0aW9uICgpIHtcXHJcXG4gIC8vIEVuZ2xpc2hcXHJcXG4gIHJldHVybiB7XFxyXFxuICAgIGVycm9yTG9hZGluZzogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHJldHVybiAnVGhlIHJlc3VsdHMgY291bGQgbm90IGJlIGxvYWRlZC4nO1xcclxcbiAgICB9LFxcclxcbiAgICBpbnB1dFRvb0xvbmc6IGZ1bmN0aW9uIChhcmdzKSB7XFxyXFxuICAgICAgdmFyIG92ZXJDaGFycyA9IGFyZ3MuaW5wdXQubGVuZ3RoIC0gYXJncy5tYXhpbXVtO1xcclxcblxcclxcbiAgICAgIHZhciBtZXNzYWdlID0gJ1BsZWFzZSBkZWxldGUgJyArIG92ZXJDaGFycyArICcgY2hhcmFjdGVyJztcXHJcXG5cXHJcXG4gICAgICBpZiAob3ZlckNoYXJzICE9IDEpIHtcXHJcXG4gICAgICAgIG1lc3NhZ2UgKz0gJ3MnO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm4gbWVzc2FnZTtcXHJcXG4gICAgfSxcXHJcXG4gICAgaW5wdXRUb29TaG9ydDogZnVuY3Rpb24gKGFyZ3MpIHtcXHJcXG4gICAgICB2YXIgcmVtYWluaW5nQ2hhcnMgPSBhcmdzLm1pbmltdW0gLSBhcmdzLmlucHV0Lmxlbmd0aDtcXHJcXG5cXHJcXG4gICAgICB2YXIgbWVzc2FnZSA9ICdQbGVhc2UgZW50ZXIgJyArIHJlbWFpbmluZ0NoYXJzICsgJyBvciBtb3JlIGNoYXJhY3RlcnMnO1xcclxcblxcclxcbiAgICAgIHJldHVybiBtZXNzYWdlO1xcclxcbiAgICB9LFxcclxcbiAgICBsb2FkaW5nTW9yZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHJldHVybiAnTG9hZGluZyBtb3JlIHJlc3VsdHPigKYnO1xcclxcbiAgICB9LFxcclxcbiAgICBtYXhpbXVtU2VsZWN0ZWQ6IGZ1bmN0aW9uIChhcmdzKSB7XFxyXFxuICAgICAgdmFyIG1lc3NhZ2UgPSAnWW91IGNhbiBvbmx5IHNlbGVjdCAnICsgYXJncy5tYXhpbXVtICsgJyBpdGVtJztcXHJcXG5cXHJcXG4gICAgICBpZiAoYXJncy5tYXhpbXVtICE9IDEpIHtcXHJcXG4gICAgICAgIG1lc3NhZ2UgKz0gJ3MnO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm4gbWVzc2FnZTtcXHJcXG4gICAgfSxcXHJcXG4gICAgbm9SZXN1bHRzOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuICdObyByZXN1bHRzIGZvdW5kJztcXHJcXG4gICAgfSxcXHJcXG4gICAgc2VhcmNoaW5nOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuICdTZWFyY2hpbmfigKYnO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kZWZhdWx0cycsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAncmVxdWlyZScsXFxyXFxuXFxyXFxuICAnLi9yZXN1bHRzJyxcXHJcXG5cXHJcXG4gICcuL3NlbGVjdGlvbi9zaW5nbGUnLFxcclxcbiAgJy4vc2VsZWN0aW9uL211bHRpcGxlJyxcXHJcXG4gICcuL3NlbGVjdGlvbi9wbGFjZWhvbGRlcicsXFxyXFxuICAnLi9zZWxlY3Rpb24vYWxsb3dDbGVhcicsXFxyXFxuICAnLi9zZWxlY3Rpb24vc2VhcmNoJyxcXHJcXG4gICcuL3NlbGVjdGlvbi9ldmVudFJlbGF5JyxcXHJcXG5cXHJcXG4gICcuL3V0aWxzJyxcXHJcXG4gICcuL3RyYW5zbGF0aW9uJyxcXHJcXG4gICcuL2RpYWNyaXRpY3MnLFxcclxcblxcclxcbiAgJy4vZGF0YS9zZWxlY3QnLFxcclxcbiAgJy4vZGF0YS9hcnJheScsXFxyXFxuICAnLi9kYXRhL2FqYXgnLFxcclxcbiAgJy4vZGF0YS90YWdzJyxcXHJcXG4gICcuL2RhdGEvdG9rZW5pemVyJyxcXHJcXG4gICcuL2RhdGEvbWluaW11bUlucHV0TGVuZ3RoJyxcXHJcXG4gICcuL2RhdGEvbWF4aW11bUlucHV0TGVuZ3RoJyxcXHJcXG4gICcuL2RhdGEvbWF4aW11bVNlbGVjdGlvbkxlbmd0aCcsXFxyXFxuXFxyXFxuICAnLi9kcm9wZG93bicsXFxyXFxuICAnLi9kcm9wZG93bi9zZWFyY2gnLFxcclxcbiAgJy4vZHJvcGRvd24vaGlkZVBsYWNlaG9sZGVyJyxcXHJcXG4gICcuL2Ryb3Bkb3duL2luZmluaXRlU2Nyb2xsJyxcXHJcXG4gICcuL2Ryb3Bkb3duL2F0dGFjaEJvZHknLFxcclxcbiAgJy4vZHJvcGRvd24vbWluaW11bVJlc3VsdHNGb3JTZWFyY2gnLFxcclxcbiAgJy4vZHJvcGRvd24vc2VsZWN0T25DbG9zZScsXFxyXFxuICAnLi9kcm9wZG93bi9jbG9zZU9uU2VsZWN0JyxcXHJcXG5cXHJcXG4gICcuL2kxOG4vZW4nXFxyXFxuXSwgZnVuY3Rpb24gKCQsIHJlcXVpcmUsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIFJlc3VsdHNMaXN0LFxcclxcblxcclxcbiAgICAgICAgICAgICBTaW5nbGVTZWxlY3Rpb24sIE11bHRpcGxlU2VsZWN0aW9uLCBQbGFjZWhvbGRlciwgQWxsb3dDbGVhcixcXHJcXG4gICAgICAgICAgICAgU2VsZWN0aW9uU2VhcmNoLCBFdmVudFJlbGF5LFxcclxcblxcclxcbiAgICAgICAgICAgICBVdGlscywgVHJhbnNsYXRpb24sIERJQUNSSVRJQ1MsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIFNlbGVjdERhdGEsIEFycmF5RGF0YSwgQWpheERhdGEsIFRhZ3MsIFRva2VuaXplcixcXHJcXG4gICAgICAgICAgICAgTWluaW11bUlucHV0TGVuZ3RoLCBNYXhpbXVtSW5wdXRMZW5ndGgsIE1heGltdW1TZWxlY3Rpb25MZW5ndGgsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIERyb3Bkb3duLCBEcm9wZG93blNlYXJjaCwgSGlkZVBsYWNlaG9sZGVyLCBJbmZpbml0ZVNjcm9sbCxcXHJcXG4gICAgICAgICAgICAgQXR0YWNoQm9keSwgTWluaW11bVJlc3VsdHNGb3JTZWFyY2gsIFNlbGVjdE9uQ2xvc2UsIENsb3NlT25TZWxlY3QsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIEVuZ2xpc2hUcmFuc2xhdGlvbikge1xcclxcbiAgZnVuY3Rpb24gRGVmYXVsdHMgKCkge1xcclxcbiAgICB0aGlzLnJlc2V0KCk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBEZWZhdWx0cy5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xcclxcbiAgICBvcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMpO1xcclxcblxcclxcbiAgICBpZiAob3B0aW9ucy5kYXRhQWRhcHRlciA9PSBudWxsKSB7XFxyXFxuICAgICAgaWYgKG9wdGlvbnMuYWpheCAhPSBudWxsKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gQWpheERhdGE7XFxyXFxuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGEgIT0gbnVsbCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IEFycmF5RGF0YTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFNlbGVjdERhdGE7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLm1pbmltdW1JbnB1dExlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgTWluaW11bUlucHV0TGVuZ3RoXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5tYXhpbXVtSW5wdXRMZW5ndGggPiAwKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICAgIE1heGltdW1JbnB1dExlbmd0aFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMubWF4aW11bVNlbGVjdGlvbkxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgTWF4aW11bVNlbGVjdGlvbkxlbmd0aFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMudGFncykge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKG9wdGlvbnMuZGF0YUFkYXB0ZXIsIFRhZ3MpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy50b2tlblNlcGFyYXRvcnMgIT0gbnVsbCB8fCBvcHRpb25zLnRva2VuaXplciAhPSBudWxsKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICAgIFRva2VuaXplclxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMucXVlcnkgIT0gbnVsbCkge1xcclxcbiAgICAgICAgdmFyIFF1ZXJ5ID0gcmVxdWlyZShvcHRpb25zLmFtZEJhc2UgKyAnY29tcGF0L3F1ZXJ5Jyk7XFxyXFxuXFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICAgIFF1ZXJ5XFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5pbml0U2VsZWN0aW9uICE9IG51bGwpIHtcXHJcXG4gICAgICAgIHZhciBJbml0U2VsZWN0aW9uID0gcmVxdWlyZShvcHRpb25zLmFtZEJhc2UgKyAnY29tcGF0L2luaXRTZWxlY3Rpb24nKTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgSW5pdFNlbGVjdGlvblxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPT0gbnVsbCkge1xcclxcbiAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPSBSZXN1bHRzTGlzdDtcXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5hamF4ICE9IG51bGwpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlcixcXHJcXG4gICAgICAgICAgSW5maW5pdGVTY3JvbGxcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLnBsYWNlaG9sZGVyICE9IG51bGwpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlcixcXHJcXG4gICAgICAgICAgSGlkZVBsYWNlaG9sZGVyXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5zZWxlY3RPbkNsb3NlKSB7XFxyXFxuICAgICAgICBvcHRpb25zLnJlc3VsdHNBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIsXFxyXFxuICAgICAgICAgIFNlbGVjdE9uQ2xvc2VcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChvcHRpb25zLmRyb3Bkb3duQWRhcHRlciA9PSBudWxsKSB7XFxyXFxuICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gRHJvcGRvd247XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIHZhciBTZWFyY2hhYmxlRHJvcGRvd24gPSBVdGlscy5EZWNvcmF0ZShEcm9wZG93biwgRHJvcGRvd25TZWFyY2gpO1xcclxcblxcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBTZWFyY2hhYmxlRHJvcGRvd247XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoICE9PSAwKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlcixcXHJcXG4gICAgICAgICAgTWluaW11bVJlc3VsdHNGb3JTZWFyY2hcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLmNsb3NlT25TZWxlY3QpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyLFxcclxcbiAgICAgICAgICBDbG9zZU9uU2VsZWN0XFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAoXFxyXFxuICAgICAgICBvcHRpb25zLmRyb3Bkb3duQ3NzQ2xhc3MgIT0gbnVsbCB8fFxcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkNzcyAhPSBudWxsIHx8XFxyXFxuICAgICAgICBvcHRpb25zLmFkYXB0RHJvcGRvd25Dc3NDbGFzcyAhPSBudWxsXFxyXFxuICAgICAgKSB7XFxyXFxuICAgICAgICB2YXIgRHJvcGRvd25DU1MgPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvZHJvcGRvd25Dc3MnKTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyLFxcclxcbiAgICAgICAgICBEcm9wZG93bkNTU1xcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyLFxcclxcbiAgICAgICAgQXR0YWNoQm9keVxcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9PSBudWxsKSB7XFxyXFxuICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IE11bHRpcGxlU2VsZWN0aW9uO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBTaW5nbGVTZWxlY3Rpb247XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIC8vIEFkZCB0aGUgcGxhY2Vob2xkZXIgbWl4aW4gaWYgYSBwbGFjZWhvbGRlciB3YXMgc3BlY2lmaWVkXFxyXFxuICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIgIT0gbnVsbCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlcixcXHJcXG4gICAgICAgICAgUGxhY2Vob2xkZXJcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLmFsbG93Q2xlYXIpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIsXFxyXFxuICAgICAgICAgIEFsbG93Q2xlYXJcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLm11bHRpcGxlKSB7XFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxcclxcbiAgICAgICAgICBTZWxlY3Rpb25TZWFyY2hcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChcXHJcXG4gICAgICAgIG9wdGlvbnMuY29udGFpbmVyQ3NzQ2xhc3MgIT0gbnVsbCB8fFxcclxcbiAgICAgICAgb3B0aW9ucy5jb250YWluZXJDc3MgIT0gbnVsbCB8fFxcclxcbiAgICAgICAgb3B0aW9ucy5hZGFwdENvbnRhaW5lckNzc0NsYXNzICE9IG51bGxcXHJcXG4gICAgICApIHtcXHJcXG4gICAgICAgIHZhciBDb250YWluZXJDU1MgPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvY29udGFpbmVyQ3NzJyk7XFxyXFxuXFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxcclxcbiAgICAgICAgICBDb250YWluZXJDU1NcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxcclxcbiAgICAgICAgRXZlbnRSZWxheVxcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmxhbmd1YWdlID09PSAnc3RyaW5nJykge1xcclxcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBsYW5ndWFnZSBpcyBzcGVjaWZpZWQgd2l0aCBhIHJlZ2lvblxcclxcbiAgICAgIGlmIChvcHRpb25zLmxhbmd1YWdlLmluZGV4T2YoJy0nKSA+IDApIHtcXHJcXG4gICAgICAgIC8vIEV4dHJhY3QgdGhlIHJlZ2lvbiBpbmZvcm1hdGlvbiBpZiBpdCBpcyBpbmNsdWRlZFxcclxcbiAgICAgICAgdmFyIGxhbmd1YWdlUGFydHMgPSBvcHRpb25zLmxhbmd1YWdlLnNwbGl0KCctJyk7XFxyXFxuICAgICAgICB2YXIgYmFzZUxhbmd1YWdlID0gbGFuZ3VhZ2VQYXJ0c1swXTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMubGFuZ3VhZ2UgPSBbb3B0aW9ucy5sYW5ndWFnZSwgYmFzZUxhbmd1YWdlXTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgb3B0aW9ucy5sYW5ndWFnZSA9IFtvcHRpb25zLmxhbmd1YWdlXTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKCQuaXNBcnJheShvcHRpb25zLmxhbmd1YWdlKSkge1xcclxcbiAgICAgIHZhciBsYW5ndWFnZXMgPSBuZXcgVHJhbnNsYXRpb24oKTtcXHJcXG4gICAgICBvcHRpb25zLmxhbmd1YWdlLnB1c2goJ2VuJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGxhbmd1YWdlTmFtZXMgPSBvcHRpb25zLmxhbmd1YWdlO1xcclxcblxcclxcbiAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgbGFuZ3VhZ2VOYW1lcy5sZW5ndGg7IGwrKykge1xcclxcbiAgICAgICAgdmFyIG5hbWUgPSBsYW5ndWFnZU5hbWVzW2xdO1xcclxcbiAgICAgICAgdmFyIGxhbmd1YWdlID0ge307XFxyXFxuXFxyXFxuICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICAvLyBUcnkgdG8gbG9hZCBpdCB3aXRoIHRoZSBvcmlnaW5hbCBuYW1lXFxyXFxuICAgICAgICAgIGxhbmd1YWdlID0gVHJhbnNsYXRpb24ubG9hZFBhdGgobmFtZSk7XFxyXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxyXFxuICAgICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgICAgLy8gSWYgd2UgY291bGRuJ3QgbG9hZCBpdCwgY2hlY2sgaWYgaXQgd2Fzbid0IHRoZSBmdWxsIHBhdGhcXHJcXG4gICAgICAgICAgICBuYW1lID0gdGhpcy5kZWZhdWx0cy5hbWRMYW5ndWFnZUJhc2UgKyBuYW1lO1xcclxcbiAgICAgICAgICAgIGxhbmd1YWdlID0gVHJhbnNsYXRpb24ubG9hZFBhdGgobmFtZSk7XFxyXFxuICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XFxyXFxuICAgICAgICAgICAgLy8gVGhlIHRyYW5zbGF0aW9uIGNvdWxkIG5vdCBiZSBsb2FkZWQgYXQgYWxsLiBTb21ldGltZXMgdGhpcyBpc1xcclxcbiAgICAgICAgICAgIC8vIGJlY2F1c2Ugb2YgYSBjb25maWd1cmF0aW9uIHByb2JsZW0sIG90aGVyIHRpbWVzIHRoaXMgY2FuIGJlXFxyXFxuICAgICAgICAgICAgLy8gYmVjYXVzZSBvZiBob3cgU2VsZWN0MiBoZWxwcyBsb2FkIGFsbCBwb3NzaWJsZSB0cmFuc2xhdGlvbiBmaWxlcy5cXHJcXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcXHJcXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcXHJcXG4gICAgICAgICAgICAgICAgJ1NlbGVjdDI6IFRoZSBsYW5ndWFnZSBmaWxlIGZvciBcXFwiJyArIG5hbWUgKyAnXFxcIiBjb3VsZCBub3QgYmUgJyArXFxyXFxuICAgICAgICAgICAgICAgICdhdXRvbWF0aWNhbGx5IGxvYWRlZC4gQSBmYWxsYmFjayB3aWxsIGJlIHVzZWQgaW5zdGVhZC4nXFxyXFxuICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgbGFuZ3VhZ2VzLmV4dGVuZChsYW5ndWFnZSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIG9wdGlvbnMudHJhbnNsYXRpb25zID0gbGFuZ3VhZ2VzO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHZhciBiYXNlVHJhbnNsYXRpb24gPSBUcmFuc2xhdGlvbi5sb2FkUGF0aChcXHJcXG4gICAgICAgIHRoaXMuZGVmYXVsdHMuYW1kTGFuZ3VhZ2VCYXNlICsgJ2VuJ1xcclxcbiAgICAgICk7XFxyXFxuICAgICAgdmFyIGN1c3RvbVRyYW5zbGF0aW9uID0gbmV3IFRyYW5zbGF0aW9uKG9wdGlvbnMubGFuZ3VhZ2UpO1xcclxcblxcclxcbiAgICAgIGN1c3RvbVRyYW5zbGF0aW9uLmV4dGVuZChiYXNlVHJhbnNsYXRpb24pO1xcclxcblxcclxcbiAgICAgIG9wdGlvbnMudHJhbnNsYXRpb25zID0gY3VzdG9tVHJhbnNsYXRpb247XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIG9wdGlvbnM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgRGVmYXVsdHMucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICBmdW5jdGlvbiBzdHJpcERpYWNyaXRpY3MgKHRleHQpIHtcXHJcXG4gICAgICAvLyBVc2VkICd1bmkgcmFuZ2UgKyBuYW1lZCBmdW5jdGlvbicgZnJvbSBodHRwOi8vanNwZXJmLmNvbS9kaWFjcml0aWNzLzE4XFxyXFxuICAgICAgZnVuY3Rpb24gbWF0Y2goYSkge1xcclxcbiAgICAgICAgcmV0dXJuIERJQUNSSVRJQ1NbYV0gfHwgYTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvW15cXFxcdTAwMDAtXFxcXHUwMDdFXS9nLCBtYXRjaCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gbWF0Y2hlciAocGFyYW1zLCBkYXRhKSB7XFxyXFxuICAgICAgLy8gQWx3YXlzIHJldHVybiB0aGUgb2JqZWN0IGlmIHRoZXJlIGlzIG5vdGhpbmcgdG8gY29tcGFyZVxcclxcbiAgICAgIGlmICgkLnRyaW0ocGFyYW1zLnRlcm0pID09PSAnJykge1xcclxcbiAgICAgICAgcmV0dXJuIGRhdGE7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIC8vIERvIGEgcmVjdXJzaXZlIGNoZWNrIGZvciBvcHRpb25zIHdpdGggY2hpbGRyZW5cXHJcXG4gICAgICBpZiAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIC8vIENsb25lIHRoZSBkYXRhIG9iamVjdCBpZiB0aGVyZSBhcmUgY2hpbGRyZW5cXHJcXG4gICAgICAgIC8vIFRoaXMgaXMgcmVxdWlyZWQgYXMgd2UgbW9kaWZ5IHRoZSBvYmplY3QgdG8gcmVtb3ZlIGFueSBub24tbWF0Y2hlc1xcclxcbiAgICAgICAgdmFyIG1hdGNoID0gJC5leHRlbmQodHJ1ZSwge30sIGRhdGEpO1xcclxcblxcclxcbiAgICAgICAgLy8gQ2hlY2sgZWFjaCBjaGlsZCBvZiB0aGUgb3B0aW9uXFxyXFxuICAgICAgICBmb3IgKHZhciBjID0gZGF0YS5jaGlsZHJlbi5sZW5ndGggLSAxOyBjID49IDA7IGMtLSkge1xcclxcbiAgICAgICAgICB2YXIgY2hpbGQgPSBkYXRhLmNoaWxkcmVuW2NdO1xcclxcblxcclxcbiAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG1hdGNoZXIocGFyYW1zLCBjaGlsZCk7XFxyXFxuXFxyXFxuICAgICAgICAgIC8vIElmIHRoZXJlIHdhc24ndCBhIG1hdGNoLCByZW1vdmUgdGhlIG9iamVjdCBpbiB0aGUgYXJyYXlcXHJcXG4gICAgICAgICAgaWYgKG1hdGNoZXMgPT0gbnVsbCkge1xcclxcbiAgICAgICAgICAgIG1hdGNoLmNoaWxkcmVuLnNwbGljZShjLCAxKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgLy8gSWYgYW55IGNoaWxkcmVuIG1hdGNoZWQsIHJldHVybiB0aGUgbmV3IG9iamVjdFxcclxcbiAgICAgICAgaWYgKG1hdGNoLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgLy8gSWYgdGhlcmUgd2VyZSBubyBtYXRjaGluZyBjaGlsZHJlbiwgY2hlY2sganVzdCB0aGUgcGxhaW4gb2JqZWN0XFxyXFxuICAgICAgICByZXR1cm4gbWF0Y2hlcihwYXJhbXMsIG1hdGNoKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyIG9yaWdpbmFsID0gc3RyaXBEaWFjcml0aWNzKGRhdGEudGV4dCkudG9VcHBlckNhc2UoKTtcXHJcXG4gICAgICB2YXIgdGVybSA9IHN0cmlwRGlhY3JpdGljcyhwYXJhbXMudGVybSkudG9VcHBlckNhc2UoKTtcXHJcXG5cXHJcXG4gICAgICAvLyBDaGVjayBpZiB0aGUgdGV4dCBjb250YWlucyB0aGUgdGVybVxcclxcbiAgICAgIGlmIChvcmlnaW5hbC5pbmRleE9mKHRlcm0pID4gLTEpIHtcXHJcXG4gICAgICAgIHJldHVybiBkYXRhO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvLyBJZiBpdCBkb2Vzbid0IGNvbnRhaW4gdGhlIHRlcm0sIGRvbid0IHJldHVybiBhbnl0aGluZ1xcclxcbiAgICAgIHJldHVybiBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuZGVmYXVsdHMgPSB7XFxyXFxuICAgICAgYW1kQmFzZTogJy4vJyxcXHJcXG4gICAgICBhbWRMYW5ndWFnZUJhc2U6ICcuL2kxOG4vJyxcXHJcXG4gICAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLFxcclxcbiAgICAgIGRlYnVnOiBmYWxzZSxcXHJcXG4gICAgICBkcm9wZG93bkF1dG9XaWR0aDogZmFsc2UsXFxyXFxuICAgICAgZXNjYXBlTWFya3VwOiBVdGlscy5lc2NhcGVNYXJrdXAsXFxyXFxuICAgICAgbGFuZ3VhZ2U6IEVuZ2xpc2hUcmFuc2xhdGlvbixcXHJcXG4gICAgICBtYXRjaGVyOiBtYXRjaGVyLFxcclxcbiAgICAgIG1pbmltdW1JbnB1dExlbmd0aDogMCxcXHJcXG4gICAgICBtYXhpbXVtSW5wdXRMZW5ndGg6IDAsXFxyXFxuICAgICAgbWF4aW11bVNlbGVjdGlvbkxlbmd0aDogMCxcXHJcXG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogMCxcXHJcXG4gICAgICBzZWxlY3RPbkNsb3NlOiBmYWxzZSxcXHJcXG4gICAgICBzb3J0ZXI6IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgICAgICByZXR1cm4gZGF0YTtcXHJcXG4gICAgICB9LFxcclxcbiAgICAgIHRlbXBsYXRlUmVzdWx0OiBmdW5jdGlvbiAocmVzdWx0KSB7XFxyXFxuICAgICAgICByZXR1cm4gcmVzdWx0LnRleHQ7XFxyXFxuICAgICAgfSxcXHJcXG4gICAgICB0ZW1wbGF0ZVNlbGVjdGlvbjogZnVuY3Rpb24gKHNlbGVjdGlvbikge1xcclxcbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbi50ZXh0O1xcclxcbiAgICAgIH0sXFxyXFxuICAgICAgdGhlbWU6ICdkZWZhdWx0JyxcXHJcXG4gICAgICB3aWR0aDogJ3Jlc29sdmUnXFxyXFxuICAgIH07XFxyXFxuICB9O1xcclxcblxcclxcbiAgRGVmYXVsdHMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XFxyXFxuICAgIHZhciBjYW1lbEtleSA9ICQuY2FtZWxDYXNlKGtleSk7XFxyXFxuXFxyXFxuICAgIHZhciBkYXRhID0ge307XFxyXFxuICAgIGRhdGFbY2FtZWxLZXldID0gdmFsdWU7XFxyXFxuXFxyXFxuICAgIHZhciBjb252ZXJ0ZWREYXRhID0gVXRpbHMuX2NvbnZlcnREYXRhKGRhdGEpO1xcclxcblxcclxcbiAgICAkLmV4dGVuZCh0aGlzLmRlZmF1bHRzLCBjb252ZXJ0ZWREYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICB2YXIgZGVmYXVsdHMgPSBuZXcgRGVmYXVsdHMoKTtcXHJcXG5cXHJcXG4gIHJldHVybiBkZWZhdWx0cztcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvb3B0aW9ucycsW1xcclxcbiAgJ3JlcXVpcmUnLFxcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi9kZWZhdWx0cycsXFxyXFxuICAnLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAocmVxdWlyZSwgJCwgRGVmYXVsdHMsIFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBPcHRpb25zIChvcHRpb25zLCAkZWxlbWVudCkge1xcclxcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xcclxcblxcclxcbiAgICBpZiAoJGVsZW1lbnQgIT0gbnVsbCkge1xcclxcbiAgICAgIHRoaXMuZnJvbUVsZW1lbnQoJGVsZW1lbnQpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IERlZmF1bHRzLmFwcGx5KHRoaXMub3B0aW9ucyk7XFxyXFxuXFxyXFxuICAgIGlmICgkZWxlbWVudCAmJiAkZWxlbWVudC5pcygnaW5wdXQnKSkge1xcclxcbiAgICAgIHZhciBJbnB1dENvbXBhdCA9IHJlcXVpcmUodGhpcy5nZXQoJ2FtZEJhc2UnKSArICdjb21wYXQvaW5wdXREYXRhJyk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy5vcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICBJbnB1dENvbXBhdFxcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE9wdGlvbnMucHJvdG90eXBlLmZyb21FbGVtZW50ID0gZnVuY3Rpb24gKCRlKSB7XFxyXFxuICAgIHZhciBleGNsdWRlZERhdGEgPSBbJ3NlbGVjdDInXTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5tdWx0aXBsZSA9PSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5vcHRpb25zLm11bHRpcGxlID0gJGUucHJvcCgnbXVsdGlwbGUnKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkID09IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSAkZS5wcm9wKCdkaXNhYmxlZCcpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMubGFuZ3VhZ2UgPT0gbnVsbCkge1xcclxcbiAgICAgIGlmICgkZS5wcm9wKCdsYW5nJykpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5sYW5ndWFnZSA9ICRlLnByb3AoJ2xhbmcnKS50b0xvd2VyQ2FzZSgpO1xcclxcbiAgICAgIH0gZWxzZSBpZiAoJGUuY2xvc2VzdCgnW2xhbmddJykucHJvcCgnbGFuZycpKSB7XFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnMubGFuZ3VhZ2UgPSAkZS5jbG9zZXN0KCdbbGFuZ10nKS5wcm9wKCdsYW5nJyk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlyID09IG51bGwpIHtcXHJcXG4gICAgICBpZiAoJGUucHJvcCgnZGlyJykpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5kaXIgPSAkZS5wcm9wKCdkaXInKTtcXHJcXG4gICAgICB9IGVsc2UgaWYgKCRlLmNsb3Nlc3QoJ1tkaXJdJykucHJvcCgnZGlyJykpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5kaXIgPSAkZS5jbG9zZXN0KCdbZGlyXScpLnByb3AoJ2RpcicpO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnMuZGlyID0gJ2x0cic7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgICRlLnByb3AoJ2Rpc2FibGVkJywgdGhpcy5vcHRpb25zLmRpc2FibGVkKTtcXHJcXG4gICAgJGUucHJvcCgnbXVsdGlwbGUnLCB0aGlzLm9wdGlvbnMubXVsdGlwbGUpO1xcclxcblxcclxcbiAgICBpZiAoJGUuZGF0YSgnc2VsZWN0MlRhZ3MnKSkge1xcclxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XFxyXFxuICAgICAgICBjb25zb2xlLndhcm4oXFxyXFxuICAgICAgICAgICdTZWxlY3QyOiBUaGUgYGRhdGEtc2VsZWN0Mi10YWdzYCBhdHRyaWJ1dGUgaGFzIGJlZW4gY2hhbmdlZCB0byAnICtcXHJcXG4gICAgICAgICAgJ3VzZSB0aGUgYGRhdGEtZGF0YWAgYW5kIGBkYXRhLXRhZ3M9XFxcInRydWVcXFwiYCBhdHRyaWJ1dGVzIGFuZCB3aWxsIGJlICcgK1xcclxcbiAgICAgICAgICAncmVtb3ZlZCBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgU2VsZWN0Mi4nXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAkZS5kYXRhKCdkYXRhJywgJGUuZGF0YSgnc2VsZWN0MlRhZ3MnKSk7XFxyXFxuICAgICAgJGUuZGF0YSgndGFncycsIHRydWUpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICgkZS5kYXRhKCdhamF4VXJsJykpIHtcXHJcXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xcclxcbiAgICAgICAgY29uc29sZS53YXJuKFxcclxcbiAgICAgICAgICAnU2VsZWN0MjogVGhlIGBkYXRhLWFqYXgtdXJsYCBhdHRyaWJ1dGUgaGFzIGJlZW4gY2hhbmdlZCB0byAnICtcXHJcXG4gICAgICAgICAgJ2BkYXRhLWFqYXgtLXVybGAgYW5kIHN1cHBvcnQgZm9yIHRoZSBvbGQgYXR0cmlidXRlIHdpbGwgYmUgcmVtb3ZlZCcgK1xcclxcbiAgICAgICAgICAnIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiBTZWxlY3QyLidcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgICRlLmF0dHIoJ2FqYXgtLXVybCcsICRlLmRhdGEoJ2FqYXhVcmwnKSk7XFxyXFxuICAgICAgJGUuZGF0YSgnYWpheC0tdXJsJywgJGUuZGF0YSgnYWpheFVybCcpKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgZGF0YXNldCA9IHt9O1xcclxcblxcclxcbiAgICAvLyBQcmVmZXIgdGhlIGVsZW1lbnQncyBgZGF0YXNldGAgYXR0cmlidXRlIGlmIGl0IGV4aXN0c1xcclxcbiAgICAvLyBqUXVlcnkgMS54IGRvZXMgbm90IGNvcnJlY3RseSBoYW5kbGUgZGF0YSBhdHRyaWJ1dGVzIHdpdGggbXVsdGlwbGUgZGFzaGVzXFxyXFxuICAgIGlmICgkLmZuLmpxdWVyeSAmJiAkLmZuLmpxdWVyeS5zdWJzdHIoMCwgMikgPT0gJzEuJyAmJiAkZVswXS5kYXRhc2V0KSB7XFxyXFxuICAgICAgZGF0YXNldCA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkZVswXS5kYXRhc2V0LCAkZS5kYXRhKCkpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIGRhdGFzZXQgPSAkZS5kYXRhKCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGRhdGEgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGF0YXNldCk7XFxyXFxuXFxyXFxuICAgIGRhdGEgPSBVdGlscy5fY29udmVydERhdGEoZGF0YSk7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XFxyXFxuICAgICAgaWYgKCQuaW5BcnJheShrZXksIGV4Y2x1ZGVkRGF0YSkgPiAtMSkge1xcclxcbiAgICAgICAgY29udGludWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmICgkLmlzUGxhaW5PYmplY3QodGhpcy5vcHRpb25zW2tleV0pKSB7XFxyXFxuICAgICAgICAkLmV4dGVuZCh0aGlzLm9wdGlvbnNba2V5XSwgZGF0YVtrZXldKTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSBkYXRhW2tleV07XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiB0aGlzO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9wdGlvbnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcXHJcXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc1trZXldO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9wdGlvbnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xcclxcbiAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gT3B0aW9ucztcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvY29yZScsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi9vcHRpb25zJyxcXHJcXG4gICcuL3V0aWxzJyxcXHJcXG4gICcuL2tleXMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIE9wdGlvbnMsIFV0aWxzLCBLRVlTKSB7XFxyXFxuICB2YXIgU2VsZWN0MiA9IGZ1bmN0aW9uICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICBpZiAoJGVsZW1lbnQuZGF0YSgnc2VsZWN0MicpICE9IG51bGwpIHtcXHJcXG4gICAgICAkZWxlbWVudC5kYXRhKCdzZWxlY3QyJykuZGVzdHJveSgpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcXHJcXG5cXHJcXG4gICAgdGhpcy5pZCA9IHRoaXMuX2dlbmVyYXRlSWQoJGVsZW1lbnQpO1xcclxcblxcclxcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vcHRpb25zID0gbmV3IE9wdGlvbnMob3B0aW9ucywgJGVsZW1lbnQpO1xcclxcblxcclxcbiAgICBTZWxlY3QyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xcclxcblxcclxcbiAgICAvLyBTZXQgdXAgdGhlIHRhYmluZGV4XFxyXFxuXFxyXFxuICAgIHZhciB0YWJpbmRleCA9ICRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JykgfHwgMDtcXHJcXG4gICAgJGVsZW1lbnQuZGF0YSgnb2xkLXRhYmluZGV4JywgdGFiaW5kZXgpO1xcclxcbiAgICAkZWxlbWVudC5hdHRyKCd0YWJpbmRleCcsICctMScpO1xcclxcblxcclxcbiAgICAvLyBTZXQgdXAgY29udGFpbmVycyBhbmQgYWRhcHRlcnNcXHJcXG5cXHJcXG4gICAgdmFyIERhdGFBZGFwdGVyID0gdGhpcy5vcHRpb25zLmdldCgnZGF0YUFkYXB0ZXInKTtcXHJcXG4gICAgdGhpcy5kYXRhQWRhcHRlciA9IG5ldyBEYXRhQWRhcHRlcigkZWxlbWVudCwgdGhpcy5vcHRpb25zKTtcXHJcXG5cXHJcXG4gICAgdmFyICRjb250YWluZXIgPSB0aGlzLnJlbmRlcigpO1xcclxcblxcclxcbiAgICB0aGlzLl9wbGFjZUNvbnRhaW5lcigkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdmFyIFNlbGVjdGlvbkFkYXB0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdzZWxlY3Rpb25BZGFwdGVyJyk7XFxyXFxuICAgIHRoaXMuc2VsZWN0aW9uID0gbmV3IFNlbGVjdGlvbkFkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucyk7XFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uLnJlbmRlcigpO1xcclxcblxcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5wb3NpdGlvbih0aGlzLiRzZWxlY3Rpb24sICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICB2YXIgRHJvcGRvd25BZGFwdGVyID0gdGhpcy5vcHRpb25zLmdldCgnZHJvcGRvd25BZGFwdGVyJyk7XFxyXFxuICAgIHRoaXMuZHJvcGRvd24gPSBuZXcgRHJvcGRvd25BZGFwdGVyKCRlbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xcclxcbiAgICB0aGlzLiRkcm9wZG93biA9IHRoaXMuZHJvcGRvd24ucmVuZGVyKCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuZHJvcGRvd24ucG9zaXRpb24odGhpcy4kZHJvcGRvd24sICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICB2YXIgUmVzdWx0c0FkYXB0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdyZXN1bHRzQWRhcHRlcicpO1xcclxcbiAgICB0aGlzLnJlc3VsdHMgPSBuZXcgUmVzdWx0c0FkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucywgdGhpcy5kYXRhQWRhcHRlcik7XFxyXFxuICAgIHRoaXMuJHJlc3VsdHMgPSB0aGlzLnJlc3VsdHMucmVuZGVyKCk7XFxyXFxuXFxyXFxuICAgIHRoaXMucmVzdWx0cy5wb3NpdGlvbih0aGlzLiRyZXN1bHRzLCB0aGlzLiRkcm9wZG93bik7XFxyXFxuXFxyXFxuICAgIC8vIEJpbmQgZXZlbnRzXFxyXFxuXFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgLy8gQmluZCB0aGUgY29udGFpbmVyIHRvIGFsbCBvZiB0aGUgYWRhcHRlcnNcXHJcXG4gICAgdGhpcy5fYmluZEFkYXB0ZXJzKCk7XFxyXFxuXFxyXFxuICAgIC8vIFJlZ2lzdGVyIGFueSBET00gZXZlbnQgaGFuZGxlcnNcXHJcXG4gICAgdGhpcy5fcmVnaXN0ZXJEb21FdmVudHMoKTtcXHJcXG5cXHJcXG4gICAgLy8gUmVnaXN0ZXIgYW55IGludGVybmFsIGV2ZW50IGhhbmRsZXJzXFxyXFxuICAgIHRoaXMuX3JlZ2lzdGVyRGF0YUV2ZW50cygpO1xcclxcbiAgICB0aGlzLl9yZWdpc3RlclNlbGVjdGlvbkV2ZW50cygpO1xcclxcbiAgICB0aGlzLl9yZWdpc3RlckRyb3Bkb3duRXZlbnRzKCk7XFxyXFxuICAgIHRoaXMuX3JlZ2lzdGVyUmVzdWx0c0V2ZW50cygpO1xcclxcbiAgICB0aGlzLl9yZWdpc3RlckV2ZW50cygpO1xcclxcblxcclxcbiAgICAvLyBTZXQgdGhlIGluaXRpYWwgc3RhdGVcXHJcXG4gICAgdGhpcy5kYXRhQWRhcHRlci5jdXJyZW50KGZ1bmN0aW9uIChpbml0aWFsRGF0YSkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0aW9uOnVwZGF0ZScsIHtcXHJcXG4gICAgICAgIGRhdGE6IGluaXRpYWxEYXRhXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICAvLyBIaWRlIHRoZSBvcmlnaW5hbCBzZWxlY3RcXHJcXG4gICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ3NlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUnKTtcXHJcXG4gICAgJGVsZW1lbnQuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xcclxcblxcclxcbiAgICAvLyBTeW5jaHJvbml6ZSBhbnkgbW9uaXRvcmVkIGF0dHJpYnV0ZXNcXHJcXG4gICAgdGhpcy5fc3luY0F0dHJpYnV0ZXMoKTtcXHJcXG5cXHJcXG4gICAgJGVsZW1lbnQuZGF0YSgnc2VsZWN0MicsIHRoaXMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChTZWxlY3QyLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLl9nZW5lcmF0ZUlkID0gZnVuY3Rpb24gKCRlbGVtZW50KSB7XFxyXFxuICAgIHZhciBpZCA9ICcnO1xcclxcblxcclxcbiAgICBpZiAoJGVsZW1lbnQuYXR0cignaWQnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgaWQgPSAkZWxlbWVudC5hdHRyKCdpZCcpO1xcclxcbiAgICB9IGVsc2UgaWYgKCRlbGVtZW50LmF0dHIoJ25hbWUnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgaWQgPSAkZWxlbWVudC5hdHRyKCduYW1lJykgKyAnLScgKyBVdGlscy5nZW5lcmF0ZUNoYXJzKDIpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIGlkID0gVXRpbHMuZ2VuZXJhdGVDaGFycyg0KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZCA9IGlkLnJlcGxhY2UoLyg6fFxcXFwufFxcXFxbfFxcXFxdfCwpL2csICcnKTtcXHJcXG4gICAgaWQgPSAnc2VsZWN0Mi0nICsgaWQ7XFxyXFxuXFxyXFxuICAgIHJldHVybiBpZDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcGxhY2VDb250YWluZXIgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xcclxcbiAgICAkY29udGFpbmVyLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpO1xcclxcblxcclxcbiAgICB2YXIgd2lkdGggPSB0aGlzLl9yZXNvbHZlV2lkdGgodGhpcy4kZWxlbWVudCwgdGhpcy5vcHRpb25zLmdldCgnd2lkdGgnKSk7XFxyXFxuXFxyXFxuICAgIGlmICh3aWR0aCAhPSBudWxsKSB7XFxyXFxuICAgICAgJGNvbnRhaW5lci5jc3MoJ3dpZHRoJywgd2lkdGgpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3Jlc29sdmVXaWR0aCA9IGZ1bmN0aW9uICgkZWxlbWVudCwgbWV0aG9kKSB7XFxyXFxuICAgIHZhciBXSURUSCA9IC9ed2lkdGg6KChbLStdPyhbMC05XSpcXFxcLik/WzAtOV0rKShweHxlbXxleHwlfGlufGNtfG1tfHB0fHBjKSkvaTtcXHJcXG5cXHJcXG4gICAgaWYgKG1ldGhvZCA9PSAncmVzb2x2ZScpIHtcXHJcXG4gICAgICB2YXIgc3R5bGVXaWR0aCA9IHRoaXMuX3Jlc29sdmVXaWR0aCgkZWxlbWVudCwgJ3N0eWxlJyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKHN0eWxlV2lkdGggIT0gbnVsbCkge1xcclxcbiAgICAgICAgcmV0dXJuIHN0eWxlV2lkdGg7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybiB0aGlzLl9yZXNvbHZlV2lkdGgoJGVsZW1lbnQsICdlbGVtZW50Jyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG1ldGhvZCA9PSAnZWxlbWVudCcpIHtcXHJcXG4gICAgICB2YXIgZWxlbWVudFdpZHRoID0gJGVsZW1lbnQub3V0ZXJXaWR0aChmYWxzZSk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGVsZW1lbnRXaWR0aCA8PSAwKSB7XFxyXFxuICAgICAgICByZXR1cm4gJ2F1dG8nO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm4gZWxlbWVudFdpZHRoICsgJ3B4JztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAobWV0aG9kID09ICdzdHlsZScpIHtcXHJcXG4gICAgICB2YXIgc3R5bGUgPSAkZWxlbWVudC5hdHRyKCdzdHlsZScpO1xcclxcblxcclxcbiAgICAgIGlmICh0eXBlb2Yoc3R5bGUpICE9PSAnc3RyaW5nJykge1xcclxcbiAgICAgICAgcmV0dXJuIG51bGw7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBhdHRycyA9IHN0eWxlLnNwbGl0KCc7Jyk7XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpID0gaSArIDEpIHtcXHJcXG4gICAgICAgIHZhciBhdHRyID0gYXR0cnNbaV0ucmVwbGFjZSgvXFxcXHMvZywgJycpO1xcclxcbiAgICAgICAgdmFyIG1hdGNoZXMgPSBhdHRyLm1hdGNoKFdJRFRIKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChtYXRjaGVzICE9PSBudWxsICYmIG1hdGNoZXMubGVuZ3RoID49IDEpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXNbMV07XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybiBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBtZXRob2Q7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX2JpbmRBZGFwdGVycyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy5kYXRhQWRhcHRlci5iaW5kKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XFxyXFxuICAgIHRoaXMuc2VsZWN0aW9uLmJpbmQodGhpcywgdGhpcy4kY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5kcm9wZG93bi5iaW5kKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XFxyXFxuICAgIHRoaXMucmVzdWx0cy5iaW5kKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRG9tRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQub24oJ2NoYW5nZS5zZWxlY3QyJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3Rpb246dXBkYXRlJywge1xcclxcbiAgICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQub24oJ2ZvY3VzLnNlbGVjdDInLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdmb2N1cycsIGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLl9zeW5jQSA9IFV0aWxzLmJpbmQodGhpcy5fc3luY0F0dHJpYnV0ZXMsIHRoaXMpO1xcclxcbiAgICB0aGlzLl9zeW5jUyA9IFV0aWxzLmJpbmQodGhpcy5fc3luY1N1YnRyZWUsIHRoaXMpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy4kZWxlbWVudFswXS5hdHRhY2hFdmVudCkge1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF0uYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCB0aGlzLl9zeW5jQSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIG9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHxcXHJcXG4gICAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fFxcclxcbiAgICAgIHdpbmRvdy5Nb3pNdXRhdGlvbk9ic2VydmVyXFxyXFxuICAgIDtcXHJcXG5cXHJcXG4gICAgaWYgKG9ic2VydmVyICE9IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLl9vYnNlcnZlciA9IG5ldyBvYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XFxyXFxuICAgICAgICAkLmVhY2gobXV0YXRpb25zLCBzZWxmLl9zeW5jQSk7XFxyXFxuICAgICAgICAkLmVhY2gobXV0YXRpb25zLCBzZWxmLl9zeW5jUyk7XFxyXFxuICAgICAgfSk7XFxyXFxuICAgICAgdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLiRlbGVtZW50WzBdLCB7XFxyXFxuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxcclxcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxcclxcbiAgICAgICAgc3VidHJlZTogZmFsc2VcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSBlbHNlIGlmICh0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIpIHtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAnRE9NQXR0ck1vZGlmaWVkJyxcXHJcXG4gICAgICAgIHNlbGYuX3N5bmNBLFxcclxcbiAgICAgICAgZmFsc2VcXHJcXG4gICAgICApO1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICdET01Ob2RlSW5zZXJ0ZWQnLFxcclxcbiAgICAgICAgc2VsZi5fc3luY1MsXFxyXFxuICAgICAgICBmYWxzZVxcclxcbiAgICAgICk7XFxyXFxuICAgICAgdGhpcy4kZWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgJ0RPTU5vZGVSZW1vdmVkJyxcXHJcXG4gICAgICAgIHNlbGYuX3N5bmNTLFxcclxcbiAgICAgICAgZmFsc2VcXHJcXG4gICAgICApO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRGF0YUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJTZWxlY3Rpb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG4gICAgdmFyIG5vblJlbGF5RXZlbnRzID0gWyd0b2dnbGUnLCAnZm9jdXMnXTtcXHJcXG5cXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24ub24oJ3RvZ2dsZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLnRvZ2dsZURyb3Bkb3duKCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5vbignZm9jdXMnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5mb2N1cyhwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24ub24oJyonLCBmdW5jdGlvbiAobmFtZSwgcGFyYW1zKSB7XFxyXFxuICAgICAgaWYgKCQuaW5BcnJheShuYW1lLCBub25SZWxheUV2ZW50cykgIT09IC0xKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJEcm9wZG93bkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB0aGlzLmRyb3Bkb3duLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJSZXN1bHRzRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMucmVzdWx0cy5vbignKicsIGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLnRyaWdnZXIobmFtZSwgcGFyYW1zKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kY29udGFpbmVyLmFkZENsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vbignZW5hYmxlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWRpc2FibGVkJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWRpc2FibGVkJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWZvY3VzJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdxdWVyeScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBpZiAoIXNlbGYuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcignb3BlbicsIHt9KTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdGhpcy5kYXRhQWRhcHRlci5xdWVyeShwYXJhbXMsIGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6YWxsJywge1xcclxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxcclxcbiAgICAgICAgICBxdWVyeTogcGFyYW1zXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMub24oJ3F1ZXJ5OmFwcGVuZCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICB0aGlzLmRhdGFBZGFwdGVyLnF1ZXJ5KHBhcmFtcywgZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czphcHBlbmQnLCB7XFxyXFxuICAgICAgICAgIGRhdGE6IGRhdGEsXFxyXFxuICAgICAgICAgIHF1ZXJ5OiBwYXJhbXNcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgdmFyIGtleSA9IGV2dC53aGljaDtcXHJcXG5cXHJcXG4gICAgICBpZiAoc2VsZi5pc09wZW4oKSkge1xcclxcbiAgICAgICAgaWYgKGtleSA9PT0gS0VZUy5FU0MgfHwga2V5ID09PSBLRVlTLlRBQiB8fFxcclxcbiAgICAgICAgICAgIChrZXkgPT09IEtFWVMuVVAgJiYgZXZ0LmFsdEtleSkpIHtcXHJcXG4gICAgICAgICAgc2VsZi5jbG9zZSgpO1xcclxcblxcclxcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLRVlTLkVOVEVSKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czpzZWxlY3QnLCB7fSk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfSBlbHNlIGlmICgoa2V5ID09PSBLRVlTLlNQQUNFICYmIGV2dC5jdHJsS2V5KSkge1xcclxcbiAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6dG9nZ2xlJywge30pO1xcclxcblxcclxcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLRVlTLlVQKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czpwcmV2aW91cycsIHt9KTtcXHJcXG5cXHJcXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gS0VZUy5ET1dOKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czpuZXh0Jywge30pO1xcclxcblxcclxcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgaWYgKGtleSA9PT0gS0VZUy5FTlRFUiB8fCBrZXkgPT09IEtFWVMuU1BBQ0UgfHxcXHJcXG4gICAgICAgICAgICAoa2V5ID09PSBLRVlTLkRPV04gJiYgZXZ0LmFsdEtleSkpIHtcXHJcXG4gICAgICAgICAgc2VsZi5vcGVuKCk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3N5bmNBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLm9wdGlvbnMuc2V0KCdkaXNhYmxlZCcsIHRoaXMuJGVsZW1lbnQucHJvcCgnZGlzYWJsZWQnKSk7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCdkaXNhYmxlJywge30pO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHRoaXMudHJpZ2dlcignZW5hYmxlJywge30pO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3N5bmNTdWJ0cmVlID0gZnVuY3Rpb24gKGV2dCwgbXV0YXRpb25zKSB7XFxyXFxuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgLy8gSWdub3JlIGFueSBtdXRhdGlvbiBldmVudHMgcmFpc2VkIGZvciBlbGVtZW50cyB0aGF0IGFyZW4ndCBvcHRpb25zIG9yXFxyXFxuICAgIC8vIG9wdGdyb3Vwcy4gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50IGlzIGRlc3Ryb3llZFxcclxcbiAgICBpZiAoXFxyXFxuICAgICAgZXZ0ICYmIGV2dC50YXJnZXQgJiYgKFxcclxcbiAgICAgICAgZXZ0LnRhcmdldC5ub2RlTmFtZSAhPT0gJ09QVElPTicgJiYgZXZ0LnRhcmdldC5ub2RlTmFtZSAhPT0gJ09QVEdST1VQJ1xcclxcbiAgICAgIClcXHJcXG4gICAgKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICghbXV0YXRpb25zKSB7XFxyXFxuICAgICAgLy8gSWYgbXV0YXRpb24gZXZlbnRzIGFyZW4ndCBzdXBwb3J0ZWQsIHRoZW4gd2UgY2FuIG9ubHkgYXNzdW1lIHRoYXQgdGhlXFxyXFxuICAgICAgLy8gY2hhbmdlIGFmZmVjdGVkIHRoZSBzZWxlY3Rpb25zXFxyXFxuICAgICAgY2hhbmdlZCA9IHRydWU7XFxyXFxuICAgIH0gZWxzZSBpZiAobXV0YXRpb25zLmFkZGVkTm9kZXMgJiYgbXV0YXRpb25zLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xcclxcbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgbXV0YXRpb25zLmFkZGVkTm9kZXMubGVuZ3RoOyBuKyspIHtcXHJcXG4gICAgICAgIHZhciBub2RlID0gbXV0YXRpb25zLmFkZGVkTm9kZXNbbl07XFxyXFxuXFxyXFxuICAgICAgICBpZiAobm9kZS5zZWxlY3RlZCkge1xcclxcbiAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuICAgIH0gZWxzZSBpZiAobXV0YXRpb25zLnJlbW92ZWROb2RlcyAmJiBtdXRhdGlvbnMucmVtb3ZlZE5vZGVzLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAvLyBPbmx5IHJlLXB1bGwgdGhlIGRhdGEgaWYgd2UgdGhpbmsgdGhlcmUgaXMgYSBjaGFuZ2VcXHJcXG4gICAgaWYgKGNoYW5nZWQpIHtcXHJcXG4gICAgICB0aGlzLmRhdGFBZGFwdGVyLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgICBzZWxmLnRyaWdnZXIoJ3NlbGVjdGlvbjp1cGRhdGUnLCB7XFxyXFxuICAgICAgICAgIGRhdGE6IGN1cnJlbnREYXRhXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIC8qKlxcclxcbiAgICogT3ZlcnJpZGUgdGhlIHRyaWdnZXIgbWV0aG9kIHRvIGF1dG9tYXRpY2FsbHkgdHJpZ2dlciBwcmUtZXZlbnRzIHdoZW5cXHJcXG4gICAqIHRoZXJlIGFyZSBldmVudHMgdGhhdCBjYW4gYmUgcHJldmVudGVkLlxcclxcbiAgICovXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcXHJcXG4gICAgdmFyIGFjdHVhbFRyaWdnZXIgPSBTZWxlY3QyLl9fc3VwZXJfXy50cmlnZ2VyO1xcclxcbiAgICB2YXIgcHJlVHJpZ2dlck1hcCA9IHtcXHJcXG4gICAgICAnb3Blbic6ICdvcGVuaW5nJyxcXHJcXG4gICAgICAnY2xvc2UnOiAnY2xvc2luZycsXFxyXFxuICAgICAgJ3NlbGVjdCc6ICdzZWxlY3RpbmcnLFxcclxcbiAgICAgICd1bnNlbGVjdCc6ICd1bnNlbGVjdGluZydcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgaWYgKGFyZ3MgPT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgIGFyZ3MgPSB7fTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAobmFtZSBpbiBwcmVUcmlnZ2VyTWFwKSB7XFxyXFxuICAgICAgdmFyIHByZVRyaWdnZXJOYW1lID0gcHJlVHJpZ2dlck1hcFtuYW1lXTtcXHJcXG4gICAgICB2YXIgcHJlVHJpZ2dlckFyZ3MgPSB7XFxyXFxuICAgICAgICBwcmV2ZW50ZWQ6IGZhbHNlLFxcclxcbiAgICAgICAgbmFtZTogbmFtZSxcXHJcXG4gICAgICAgIGFyZ3M6IGFyZ3NcXHJcXG4gICAgICB9O1xcclxcblxcclxcbiAgICAgIGFjdHVhbFRyaWdnZXIuY2FsbCh0aGlzLCBwcmVUcmlnZ2VyTmFtZSwgcHJlVHJpZ2dlckFyZ3MpO1xcclxcblxcclxcbiAgICAgIGlmIChwcmVUcmlnZ2VyQXJncy5wcmV2ZW50ZWQpIHtcXHJcXG4gICAgICAgIGFyZ3MucHJldmVudGVkID0gdHJ1ZTtcXHJcXG5cXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgYWN0dWFsVHJpZ2dlci5jYWxsKHRoaXMsIG5hbWUsIGFyZ3MpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLnRvZ2dsZURyb3Bkb3duID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGlzYWJsZWQnKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodGhpcy5pc09wZW4oKSkge1xcclxcbiAgICAgIHRoaXMuY2xvc2UoKTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICB0aGlzLm9wZW4oKTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMudHJpZ2dlcigncXVlcnknLCB7fSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIGlmICghdGhpcy5pc09wZW4oKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLnRyaWdnZXIoJ2Nsb3NlJywge30pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLmlzT3BlbiA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgcmV0dXJuIHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5oYXNGb2N1cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgcmV0dXJuIHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWZvY3VzJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICAvLyBObyBuZWVkIHRvIHJlLXRyaWdnZXIgZm9jdXMgZXZlbnRzIGlmIHdlIGFyZSBhbHJlYWR5IGZvY3VzZWRcXHJcXG4gICAgaWYgKHRoaXMuaGFzRm9jdXMoKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS1mb2N1cycpO1xcclxcbiAgICB0aGlzLnRyaWdnZXIoJ2ZvY3VzJywge30pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIChhcmdzKSB7XFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkZWJ1ZycpICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xcclxcbiAgICAgIGNvbnNvbGUud2FybihcXHJcXG4gICAgICAgICdTZWxlY3QyOiBUaGUgYHNlbGVjdDIoXFxcImVuYWJsZVxcXCIpYCBtZXRob2QgaGFzIGJlZW4gZGVwcmVjYXRlZCBhbmQgd2lsbCcgK1xcclxcbiAgICAgICAgJyBiZSByZW1vdmVkIGluIGxhdGVyIFNlbGVjdDIgdmVyc2lvbnMuIFVzZSAkZWxlbWVudC5wcm9wKFxcXCJkaXNhYmxlZFxcXCIpJyArXFxyXFxuICAgICAgICAnIGluc3RlYWQuJ1xcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGFyZ3MgPT0gbnVsbCB8fCBhcmdzLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIGFyZ3MgPSBbdHJ1ZV07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGRpc2FibGVkID0gIWFyZ3NbMF07XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQucHJvcCgnZGlzYWJsZWQnLCBkaXNhYmxlZCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiZcXHJcXG4gICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xcclxcbiAgICAgIGNvbnNvbGUud2FybihcXHJcXG4gICAgICAgICdTZWxlY3QyOiBEYXRhIGNhbiBubyBsb25nZXIgYmUgc2V0IHVzaW5nIGBzZWxlY3QyKFxcXCJkYXRhXFxcIilgLiBZb3UgJyArXFxyXFxuICAgICAgICAnc2hvdWxkIGNvbnNpZGVyIHNldHRpbmcgdGhlIHZhbHVlIGluc3RlYWQgdXNpbmcgYCRlbGVtZW50LnZhbCgpYC4nXFxyXFxuICAgICAgKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgZGF0YSA9IFtdO1xcclxcblxcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgZGF0YSA9IGN1cnJlbnREYXRhO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIGRhdGE7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUudmFsID0gZnVuY3Rpb24gKGFyZ3MpIHtcXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XFxyXFxuICAgICAgY29uc29sZS53YXJuKFxcclxcbiAgICAgICAgJ1NlbGVjdDI6IFRoZSBgc2VsZWN0MihcXFwidmFsXFxcIilgIG1ldGhvZCBoYXMgYmVlbiBkZXByZWNhdGVkIGFuZCB3aWxsIGJlJyArXFxyXFxuICAgICAgICAnIHJlbW92ZWQgaW4gbGF0ZXIgU2VsZWN0MiB2ZXJzaW9ucy4gVXNlICRlbGVtZW50LnZhbCgpIGluc3RlYWQuJ1xcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGFyZ3MgPT0gbnVsbCB8fCBhcmdzLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIHJldHVybiB0aGlzLiRlbGVtZW50LnZhbCgpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBuZXdWYWwgPSBhcmdzWzBdO1xcclxcblxcclxcbiAgICBpZiAoJC5pc0FycmF5KG5ld1ZhbCkpIHtcXHJcXG4gICAgICBuZXdWYWwgPSAkLm1hcChuZXdWYWwsIGZ1bmN0aW9uIChvYmopIHtcXHJcXG4gICAgICAgIHJldHVybiBvYmoudG9TdHJpbmcoKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50LnZhbChuZXdWYWwpLnRyaWdnZXIoJ2NoYW5nZScpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lci5yZW1vdmUoKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuJGVsZW1lbnRbMF0uZGV0YWNoRXZlbnQpIHtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdLmRldGFjaEV2ZW50KCdvbnByb3BlcnR5Y2hhbmdlJywgdGhpcy5fc3luY0EpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLl9vYnNlcnZlciAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xcclxcbiAgICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDtcXHJcXG4gICAgfSBlbHNlIGlmICh0aGlzLiRlbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdXFxyXFxuICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NQXR0ck1vZGlmaWVkJywgdGhpcy5fc3luY0EsIGZhbHNlKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdXFxyXFxuICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgdGhpcy5fc3luY1MsIGZhbHNlKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdXFxyXFxuICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTm9kZVJlbW92ZWQnLCB0aGlzLl9zeW5jUywgZmFsc2UpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuX3N5bmNBID0gbnVsbDtcXHJcXG4gICAgdGhpcy5fc3luY1MgPSBudWxsO1xcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50Lm9mZignLnNlbGVjdDInKTtcXHJcXG4gICAgdGhpcy4kZWxlbWVudC5hdHRyKCd0YWJpbmRleCcsIHRoaXMuJGVsZW1lbnQuZGF0YSgnb2xkLXRhYmluZGV4JykpO1xcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCdzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlJyk7XFxyXFxuICAgIHRoaXMuJGVsZW1lbnQuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcXHJcXG4gICAgdGhpcy4kZWxlbWVudC5yZW1vdmVEYXRhKCdzZWxlY3QyJyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuZGF0YUFkYXB0ZXIuZGVzdHJveSgpO1xcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5kZXN0cm95KCk7XFxyXFxuICAgIHRoaXMuZHJvcGRvd24uZGVzdHJveSgpO1xcclxcbiAgICB0aGlzLnJlc3VsdHMuZGVzdHJveSgpO1xcclxcblxcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyID0gbnVsbDtcXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24gPSBudWxsO1xcclxcbiAgICB0aGlzLmRyb3Bkb3duID0gbnVsbDtcXHJcXG4gICAgdGhpcy5yZXN1bHRzID0gbnVsbDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkY29udGFpbmVyID0gJChcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDIgc2VsZWN0Mi1jb250YWluZXJcXFwiPicgK1xcclxcbiAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3Rpb25cXFwiPjwvc3Bhbj4nICtcXHJcXG4gICAgICAgICc8c3BhbiBjbGFzcz1cXFwiZHJvcGRvd24td3JhcHBlclxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvc3Bhbj4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgJGNvbnRhaW5lci5hdHRyKCdkaXInLCB0aGlzLm9wdGlvbnMuZ2V0KCdkaXInKSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lciA9ICRjb250YWluZXI7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLScgKyB0aGlzLm9wdGlvbnMuZ2V0KCd0aGVtZScpKTtcXHJcXG5cXHJcXG4gICAgJGNvbnRhaW5lci5kYXRhKCdlbGVtZW50JywgdGhpcy4kZWxlbWVudCk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkY29udGFpbmVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBTZWxlY3QyO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnanF1ZXJ5LW1vdXNld2hlZWwnLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIC8vIFVzZWQgdG8gc2hpbSBqUXVlcnkubW91c2V3aGVlbCBmb3Igbm9uLWZ1bGwgYnVpbGRzLlxcclxcbiAgcmV0dXJuICQ7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdqcXVlcnkuc2VsZWN0MicsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnanF1ZXJ5LW1vdXNld2hlZWwnLFxcclxcblxcclxcbiAgJy4vc2VsZWN0Mi9jb3JlJyxcXHJcXG4gICcuL3NlbGVjdDIvZGVmYXVsdHMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIF8sIFNlbGVjdDIsIERlZmF1bHRzKSB7XFxyXFxuICBpZiAoJC5mbi5zZWxlY3QyID09IG51bGwpIHtcXHJcXG4gICAgLy8gQWxsIG1ldGhvZHMgdGhhdCBzaG91bGQgcmV0dXJuIHRoZSBlbGVtZW50XFxyXFxuICAgIHZhciB0aGlzTWV0aG9kcyA9IFsnb3BlbicsICdjbG9zZScsICdkZXN0cm95J107XFxyXFxuXFxyXFxuICAgICQuZm4uc2VsZWN0MiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XFxyXFxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XFxyXFxuXFxyXFxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xcclxcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgdmFyIGluc3RhbmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcXHJcXG5cXHJcXG4gICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IFNlbGVjdDIoJCh0aGlzKSwgaW5zdGFuY2VPcHRpb25zKTtcXHJcXG4gICAgICAgIH0pO1xcclxcblxcclxcbiAgICAgICAgcmV0dXJuIHRoaXM7XFxyXFxuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcXHJcXG4gICAgICAgIHZhciByZXQ7XFxyXFxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XFxyXFxuXFxyXFxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICB2YXIgaW5zdGFuY2UgPSAkKHRoaXMpLmRhdGEoJ3NlbGVjdDInKTtcXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xcclxcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXFxyXFxuICAgICAgICAgICAgICAnVGhlIHNlbGVjdDIoXFxcXCcnICsgb3B0aW9ucyArICdcXFxcJykgbWV0aG9kIHdhcyBjYWxsZWQgb24gYW4gJyArXFxyXFxuICAgICAgICAgICAgICAnZWxlbWVudCB0aGF0IGlzIG5vdCB1c2luZyBTZWxlY3QyLidcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIHJldCA9IGluc3RhbmNlW29wdGlvbnNdLmFwcGx5KGluc3RhbmNlLCBhcmdzKTtcXHJcXG4gICAgICAgIH0pO1xcclxcblxcclxcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2Ugc2hvdWxkIGJlIHJldHVybmluZyBgdGhpc2BcXHJcXG4gICAgICAgIGlmICgkLmluQXJyYXkob3B0aW9ucywgdGhpc01ldGhvZHMpID4gLTEpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm4gcmV0O1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzIGZvciBTZWxlY3QyOiAnICsgb3B0aW9ucyk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9O1xcclxcbiAgfVxcclxcblxcclxcbiAgaWYgKCQuZm4uc2VsZWN0Mi5kZWZhdWx0cyA9PSBudWxsKSB7XFxyXFxuICAgICQuZm4uc2VsZWN0Mi5kZWZhdWx0cyA9IERlZmF1bHRzO1xcclxcbiAgfVxcclxcblxcclxcbiAgcmV0dXJuIFNlbGVjdDI7XFxyXFxufSk7XFxyXFxuXFxuICAvLyBSZXR1cm4gdGhlIEFNRCBsb2FkZXIgY29uZmlndXJhdGlvbiBzbyBpdCBjYW4gYmUgdXNlZCBvdXRzaWRlIG9mIHRoaXMgZmlsZVxcclxcbiAgcmV0dXJuIHtcXHJcXG4gICAgZGVmaW5lOiBTMi5kZWZpbmUsXFxyXFxuICAgIHJlcXVpcmU6IFMyLnJlcXVpcmVcXHJcXG4gIH07XFxyXFxufSgpKTtcXHJcXG5cXHJcXG4gIC8vIEF1dG9sb2FkIHRoZSBqUXVlcnkgYmluZGluZ3NcXHJcXG4gIC8vIFdlIGtub3cgdGhhdCBhbGwgb2YgdGhlIG1vZHVsZXMgZXhpc3QgYWJvdmUgdGhpcywgc28gd2UncmUgc2FmZVxcclxcbiAgdmFyIHNlbGVjdDIgPSBTMi5yZXF1aXJlKCdqcXVlcnkuc2VsZWN0MicpO1xcclxcblxcclxcbiAgLy8gSG9sZCB0aGUgQU1EIG1vZHVsZSByZWZlcmVuY2VzIG9uIHRoZSBqUXVlcnkgZnVuY3Rpb24gdGhhdCB3YXMganVzdCBsb2FkZWRcXHJcXG4gIC8vIFRoaXMgYWxsb3dzIFNlbGVjdDIgdG8gdXNlIHRoZSBpbnRlcm5hbCBsb2FkZXIgb3V0c2lkZSBvZiB0aGlzIGZpbGUsIHN1Y2hcXHJcXG4gIC8vIGFzIGluIHRoZSBsYW5ndWFnZSBmaWxlcy5cXHJcXG4gIGpRdWVyeS5mbi5zZWxlY3QyLmFtZCA9IFMyO1xcclxcblxcclxcbiAgLy8gUmV0dXJuIHRoZSBTZWxlY3QyIGluc3RhbmNlIGZvciBhbnlvbmUgd2hvIGlzIGltcG9ydGluZyBpdC5cXHJcXG4gIHJldHVybiBzZWxlY3QyO1xcclxcbn0pKTtcXHJcXG5cIlxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYXctbG9hZGVyIS4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL34vc2VsZWN0Mi9kaXN0L2pzL3NlbGVjdDIuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwicmVxdWlyZShcIiEhL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zY3JpcHQtbG9hZGVyL2FkZFNjcmlwdC5qc1wiKShyZXF1aXJlKFwiISEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3Jhdy1sb2FkZXIvaW5kZXguanMhL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwLWxvYWRlci9pbmRleC5qcyEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC1zZWxlY3QvZGlzdC9qcy9ib290c3RyYXAtc2VsZWN0LmpzXCIpKVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zY3JpcHQtbG9hZGVyIS4vfi9ib290c3RyYXAtc2VsZWN0L2Rpc3QvanMvYm9vdHN0cmFwLXNlbGVjdC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJyZXF1aXJlKFwiISEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3NjcmlwdC1sb2FkZXIvYWRkU2NyaXB0LmpzXCIpKHJlcXVpcmUoXCIhIS9Vc2Vycy9qb2hhbm5lc2J1dm5hcy9EZXZlbG9wbWVudC9QSFAvdHV0b212Yy9ub2RlX21vZHVsZXMvcmF3LWxvYWRlci9pbmRleC5qcyEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtbG9hZGVyL2luZGV4LmpzIS9Vc2Vycy9qb2hhbm5lc2J1dm5hcy9EZXZlbG9wbWVudC9QSFAvdHV0b212Yy9ub2RlX21vZHVsZXMvYm9vdHN0cmFwL2Rpc3QvanMvYm9vdHN0cmFwLmpzXCIpKVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zY3JpcHQtbG9hZGVyIS4vfi9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwicmVxdWlyZShcIiEhL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zY3JpcHQtbG9hZGVyL2FkZFNjcmlwdC5qc1wiKShyZXF1aXJlKFwiISEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3Jhdy1sb2FkZXIvaW5kZXguanMhL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwLWxvYWRlci9pbmRleC5qcyEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzXCIpKVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zY3JpcHQtbG9hZGVyIS4vfi9zZWxlY3QyL2Rpc3QvanMvc2VsZWN0Mi5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQge1dQQXR0YWNobWVudEZvcm1JbnB1dH0gZnJvbSBcIi4uL3dwL2Zvcm0vaW5wdXRzL1dQQXR0YWNobWVudEZvcm1JbnB1dFwiO1xualF1ZXJ5KCBkb2N1bWVudCApLnJlYWR5KCBmdW5jdGlvbiAoKVxue1xuXHRqUXVlcnkoIFwiLndwYXR0YWNobWVudGZvcm1pbnB1dFwiICkuZWFjaCggZnVuY3Rpb24gKClcblx0e1xuXHRcdG5ldyBXUEF0dGFjaG1lbnRGb3JtSW5wdXQoIGpRdWVyeSggdGhpcyApLCBqUXVlcnkoIHRoaXMgKS5kYXRhKCkgKTtcblx0fSApO1xuLy9cdGpRdWVyeSggXCIud3BhdHRhY2htZW50Zm9ybWlucHV0IC5idG4tcmVtb3ZlXCIgKS5jbGljayggZnVuY3Rpb24gKCBlIClcbi8vXHR7XG4vL1x0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4vL1x0XHR2YXIgJGVsID0gJCggdGhpcyApO1xuLy9cdFx0JGVsLmNsb3Nlc3QoIFwiLmxpc3QtZ3JvdXAtaXRlbVwiICkucmVtb3ZlKCk7XG4vL1xuLy9cdFx0bmV3IFdQQXR0YWNobWVudEZvcm1JbnB1dCggJCggJCggdGhpcyApLmRhdGEoIFwidGFyZ2V0XCIgKSApLCBcInJlbmRlclwiICk7XG4vL1x0fSApO1xuLy9cdGpRdWVyeSggXCIud3BhdHRhY2htZW50Zm9ybWlucHV0IC5idG4tYWRkXCIgKS5jbGljayggZnVuY3Rpb24gKCBlIClcbi8vXHR7XG4vL1x0XHRuZXcgV1BBdHRhY2htZW50Rm9ybUlucHV0KCAkKCAkKCB0aGlzICkuZGF0YSggXCJ0YXJnZXRcIiApICksIFwib3BlblwiICk7XG4vL1x0fSApO1xufSApO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90c2MvcGx1Z2lucy9qUXVlcnlXUEF0dGFjaG1lbnRGb3JtSW5wdXQudHMiLCJleHBvcnQgY2xhc3MgV1BBdHRhY2htZW50Rm9ybUlucHV0XG57XG5cdHB1YmxpYyAkZWw6IEpRdWVyeTtcblx0cHVibGljIG9wdGlvbnM6IElXUEF0dGFjaG1lbnRGb3JtSW5wdXRPcHRpb25zID0ge1xuXHRcdG1heDogICAgICAgLTEsXG5cdFx0dGl0bGU6ICAgICBcIlwiLFxuXHRcdGJ1dHRvblRleHQ6XCJcIixcblx0XHR0eXBlOiAgICAgIG51bGwsXG5cdFx0ZnJhbWU6ICAgICBcInNlbGVjdFwiXG5cdH07XG5cdHB1YmxpYyB3cE1lZGlhOiBhbnk7XG5cdHB1YmxpYyB0ZW1wbGF0ZTogYW55O1xuXG5cdGNvbnN0cnVjdG9yKCAkZWw6IEpRdWVyeSwgb3B0aW9uczogT2JqZWN0IClcblx0e1xuXHRcdHRoaXMuJGVsICAgICAgPSAkZWw7XG5cdFx0Ly8gTW9kZWxcblx0XHR0aGlzLm9wdGlvbnMgID0galF1ZXJ5LmV4dGVuZCgge30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyApO1xuXHRcdC8vIFZpZXdcblx0XHR0aGlzLnRlbXBsYXRlID0gXy50ZW1wbGF0ZSggdGhpcy4kZWwuZmluZCggXCJ0ZXh0YXJlYS51bmRlcnNjb3JlLXRlbXBsYXRlXCIgKS52YWwoKSApO1xuXHRcdHRoaXMud3BNZWRpYSAgPSB3cC5tZWRpYSgge1xuXHRcdFx0dGl0bGU6ICAgdGhpcy5vcHRpb25zLnRpdGxlLFxuXHRcdFx0bXVsdGlwbGU6dGhpcy5vcHRpb25zLm1heCA8IDAgfHwgdGhpcy5vcHRpb25zLm1heCA+IDEgPyB0cnVlIDogZmFsc2UsXG5cdFx0XHRsaWJyYXJ5OiB0aGlzLm9wdGlvbnMudHlwZSA/IHt0eXBlOnRoaXMub3B0aW9ucy50eXBlfSA6IHVuZGVmaW5lZCxcblx0XHRcdGJ1dHRvbjogIHt0ZXh0OnRoaXMub3B0aW9ucy5idXR0b25UZXh0fSxcblx0XHRcdGZyYW1lOiAgIHRoaXMub3B0aW9ucy5mcmFtZVxuXHRcdH0gKTtcblx0XHQvLyBDb250cm9sbGVyXG5cdFx0dGhpcy53cE1lZGlhLm9uKCBcInNlbGVjdFwiLCAoKSA9PiB0aGlzLm9uV1BNZWRpYVNlbGVjdCgpICk7XG5cdFx0dGhpcy4kZWwub24oIFwiY2xpY2tcIiwgXCIuYnRuLWFkZFwiLCAoKSA9PiB0aGlzLm9wZW4oKSApO1xuXHRcdHRoaXMuJGVsLm9uKCBcImNsaWNrXCIsIFwiLmJ0bi1yZW1vdmVcIiwgKCBlICkgPT4gdGhpcy5vblJlbW92ZUNsaWNrKCBlICkgKTtcblxuXHRcdHRoaXMucmVuZGVyKCk7XG5cdH1cblxuXHRwdWJsaWMgcmVuZGVyKClcblx0e1xuXHRcdGlmKCB0aGlzLmNvdW50ID49IHRoaXMub3B0aW9ucy5tYXggJiYgdGhpcy5vcHRpb25zLm1heCA+PSAwICkgdGhpcy4kZWwuZmluZCggXCIuYnRuLWFkZFwiICkucHJvcCggXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIgKTtcblx0XHRlbHNlIHRoaXMuJGVsLmZpbmQoIFwiLmJ0bi1hZGRcIiApLnByb3AoIFwiZGlzYWJsZWRcIiwgbnVsbCApO1xuXHR9XG5cblx0cHVibGljIG9wZW4oKVxuXHR7XG5cdFx0dGhpcy53cE1lZGlhLm9wZW4oKTtcblx0fTtcblxuXHRwdWJsaWMgYWRkKCBhdHRhY2htZW50TW9kZWw6IFdQTWVkaWFBdHRhY2htZW50TW9kZWwgKVxuXHR7XG5cdFx0dmFyIF9fdGhpcyAgICAgICAgICA9IHRoaXM7XG5cdFx0YXR0YWNobWVudE1vZGVsLnNyYyA9IGF0dGFjaG1lbnRNb2RlbC5pY29uO1xuXHRcdGlmKCAhYXR0YWNobWVudE1vZGVsLndpZHRoICkgYXR0YWNobWVudE1vZGVsLndpZHRoID0gXCJcIjtcblx0XHRpZiggIWF0dGFjaG1lbnRNb2RlbC5oZWlnaHQgKSBhdHRhY2htZW50TW9kZWwuaGVpZ2h0ID0gXCJcIjtcblx0XHRpZiggYXR0YWNobWVudE1vZGVsLnNpemVzIClcblx0XHR7XG5cdFx0XHRpZiggYXR0YWNobWVudE1vZGVsLnNpemVzLnRodW1ibmFpbCAmJiBhdHRhY2htZW50TW9kZWwuc2l6ZXMudGh1bWJuYWlsLnVybCApXG5cdFx0XHR7XG5cdFx0XHRcdGF0dGFjaG1lbnRNb2RlbC5zcmMgPSBhdHRhY2htZW50TW9kZWwuc2l6ZXMudGh1bWJuYWlsLnVybDtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoIGF0dGFjaG1lbnRNb2RlbC5zaXplcy5mdWxsICYmIGF0dGFjaG1lbnRNb2RlbC5zaXplcy5mdWxsLnVybCApXG5cdFx0XHR7XG5cdFx0XHRcdGF0dGFjaG1lbnRNb2RlbC5zcmMgPSBhdHRhY2htZW50TW9kZWwuc2l6ZXMuZnVsbC51cmw7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZhciAkZWwgPSBqUXVlcnkoIHRoaXMudGVtcGxhdGUoIGF0dGFjaG1lbnRNb2RlbCApICk7XG5cdFx0dGhpcy4kZWwuZmluZCggXCIubGlzdC1ncm91cFwiICkuYXBwZW5kKCAkZWwgKTtcblx0fTtcblxuXHQvKiBTRVQgQU5EIEdFVCAqL1xuXHRwdWJsaWMgZ2V0IGNvdW50KClcblx0e1xuXHRcdHJldHVybiB0aGlzLiRlbC5maW5kKCBcIi5saXN0LWdyb3VwLWl0ZW1cIiApLmxlbmd0aDtcblx0fVxuXG5cdC8qIEVWRU5UIEhBTkRMRVJTICovXG5cdHByaXZhdGUgb25XUE1lZGlhU2VsZWN0KClcblx0e1xuXHRcdHZhciBzZWxlY3Rpb24gPSB0aGlzLndwTWVkaWEuc3RhdGUoKS5nZXQoICdzZWxlY3Rpb24nICk7XG5cdFx0dmFyIF9fdGhpcyAgICA9IHRoaXM7XG5cdFx0c2VsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBhdHRhY2htZW50IClcblx0XHR7XG5cdFx0XHRpZiggX190aGlzLm9wdGlvbnMubWF4IDwgMCB8fCBfX3RoaXMuY291bnQgPCBfX3RoaXMub3B0aW9ucy5tYXggKVxuXHRcdFx0e1xuXHRcdFx0XHRfX3RoaXMuYWRkKCBhdHRhY2htZW50LnRvSlNPTigpICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fTtcblxuXHRwcml2YXRlIG9uUmVtb3ZlQ2xpY2soIGUgKVxuXHR7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHZhciAkZWwgPSBqUXVlcnkoIGUuY3VycmVudFRhcmdldCApO1xuXHRcdCRlbC5jbG9zZXN0KCBcIi5saXN0LWdyb3VwLWl0ZW1cIiApLnJlbW92ZSgpO1xuXHRcdHRoaXMucmVuZGVyKCk7XG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJV1BBdHRhY2htZW50Rm9ybUlucHV0T3B0aW9uc1xue1xuXHRtYXg6IG51bWJlcjtcblx0dGl0bGU6IHN0cmluZztcblx0YnV0dG9uVGV4dDogc3RyaW5nO1xuXHR0eXBlOiBzdHJpbmc7XG5cdGZyYW1lOiBzdHJpbmc7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RzYy93cC9mb3JtL2lucHV0cy9XUEF0dGFjaG1lbnRGb3JtSW5wdXQudHMiXSwic291cmNlUm9vdCI6IiJ9